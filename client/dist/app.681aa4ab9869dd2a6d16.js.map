{"version":3,"sources":["webpack:///app.681aa4ab9869dd2a6d16.js","webpack:///./client/app/lib/pagination/index.js","webpack:///./client/app/assets/images/redash_icon_small.png","webpack:///./client/app/services/query-result.js","webpack:///./client/app/pages/queries/query.html","webpack:///./client/app/index.js","webpack:///./client/app/config/styles.js","webpack:///./client/app/config/index.js","webpack:///./node_modules/moment/locale ^\\.\\/.*$","webpack:///./client/app/lib/sortable.js","webpack:///./client/app/filters/index.js","webpack:///./client/app/directives/index.js","webpack:///./client/app/filters/markdown.js","webpack:///./client/app/filters/datetime.js","webpack:///[\\\\/]test[\\\\/]).)*\\.js$?f8ea","webpack:///./client/app/components/alerts/alert-subscriptions/index.js","webpack:///./client/app/components/alerts/alert-subscriptions/alert-subscriptions.html","webpack:///./client/app/components/app-header/index.js","webpack:///./client/app/components/app-header/app-header.html","webpack:///./client/app/components/cancel-query-button/index.js","webpack:///./client/app/components/dashboards/add-widget-dialog.js","webpack:///./client/app/components/dashboards/add-widget-dialog.html","webpack:///./client/app/components/dashboards/edit-dashboard-dialog.js","webpack:///./client/app/components/dashboards/edit-dashboard-dialog.html","webpack:///./client/app/components/dashboards/widget.js","webpack:///./client/app/components/dashboards/widget.html","webpack:///./client/app/components/dashboards/edit-text-box.html","webpack:///./client/app/components/dynamic-form.js","webpack:///./client/app/components/dynamic-form.html","webpack:///./client/app/components/dynamic-table/index.js","webpack:///./client/app/components/dynamic-table/dynamic-table.html","webpack:///./client/app/components/edit-in-place.js","webpack:///./client/app/components/email-settings-warning/index.js","webpack:///./client/app/components/error-messages.js","webpack:///./client/app/components/filters.js","webpack:///./client/app/components/filters.html","webpack:///./client/app/components/footer/index.js","webpack:///./client/app/components/footer/footer.html","webpack:///./client/app/components/groups/edit-group-dialog.js","webpack:///./client/app/components/groups/edit-group-dialog.html","webpack:///./client/app/components/groups/group-name.js","webpack:///./client/app/components/overlay.js","webpack:///./client/app/components/page-header/index.js","webpack:///./client/app/components/page-header/page-header.html","webpack:///./client/app/components/paginator.js","webpack:///./client/app/components/parameters.js","webpack:///./client/app/components/parameters.html","webpack:///./client/app/components/query-based-parameter.html","webpack:///./client/app/components/parameter-settings.html","webpack:///./client/app/components/permissions-editor/index.js","webpack:///./client/app/components/permissions-editor/permissions-editor.html","webpack:///./client/app/components/queries/alert-unsaved-changes.js","webpack:///./client/app/components/queries/api-key-dialog.js","webpack:///./client/app/components/queries/embed-code-dialog.js","webpack:///./client/app/components/queries/embed-code-dialog.html","webpack:///./client/app/components/queries/query-editor.js","webpack:///./client/app/components/queries/query-results-link.js","webpack:///./client/app/components/queries/schedule-dialog.js","webpack:///./client/app/components/queries/schedule-dialog.html","webpack:///./client/app/components/queries/schema-browser.js","webpack:///./client/app/components/queries/schema-browser.html","webpack:///./client/app/components/queries/visualization-embed.js","webpack:///./client/app/components/queries/visualization-embed.html","webpack:///./client/app/components/query-link.js","webpack:///./client/app/components/rd-tab/index.js","webpack:///./client/app/components/rd-time-ago.js","webpack:///./client/app/components/rd-timer.js","webpack:///./client/app/components/route-status.js","webpack:///./client/app/components/settings-screen.js","webpack:///./client/app/components/settings-screen.html","webpack:///./client/app/components/sort-icon.js","webpack:///./client/app/components/tab-nav/index.js","webpack:///./client/app/components/visualization-name.js","webpack:///[\\\\/]test[\\\\/]).)*\\.js$?ca0e","webpack:///./client/app/services/alert-dialog.js","webpack:///./client/app/services/alert-subscription.js","webpack:///./client/app/services/alert.js","webpack:///./client/app/services/auth.js","webpack:///./client/app/services/dashboard.js","webpack:///./client/app/services/data-source.js","webpack:///./client/app/services/destination.js","webpack:///./client/app/services/events.js","webpack:///./client/app/services/group.js","webpack:///./client/app/services/keyboard-shortcuts.js","webpack:///./client/app/services/notifications.js","webpack:///./client/app/services/offline-listener.js","webpack:///./client/app/services/query-snippet.js","webpack:///./client/app/services/query.js","webpack:///./client/app/services/user.js","webpack:///./client/app/services/widget.js","webpack:///[\\\\/]test[\\\\/]).)*\\.js$?334e","webpack:///./client/app/visualizations/box-plot/index.js","webpack:///./client/app/lib/visualizations/d3box.js","webpack:///./client/app/visualizations/box-plot/box-plot-editor.html","webpack:///./client/app/visualizations/chart/index.js","webpack:///./client/app/visualizations/chart/chart.html","webpack:///./client/app/visualizations/chart/chart-editor.html","webpack:///./client/app/visualizations/chart/plotly.js","webpack:///./client/app/visualizations/cohort/index.js","webpack:///./client/app/visualizations/cohort/cohort-editor.html","webpack:///./client/app/visualizations/counter/index.js","webpack:///./client/app/visualizations/counter/counter.html","webpack:///./client/app/visualizations/counter/counter-editor.html","webpack:///./client/app/visualizations/edit-visualization-dialog.js","webpack:///./client/app/visualizations/edit-visualization-dialog.html","webpack:///./client/app/visualizations/index.js","webpack:///./client/app/visualizations/map/index.js","webpack:///./node_modules/leaflet/dist/images/marker-icon.png","webpack:///./node_modules/leaflet/dist/images/marker-icon-2x.png","webpack:///./node_modules/leaflet/dist/images/marker-shadow.png","webpack:///./client/app/visualizations/map/map.html","webpack:///./client/app/visualizations/map/map-editor.html","webpack:///./client/app/visualizations/pivot/index.js","webpack:///./client/app/visualizations/pivot/pivottable-editor.html","webpack:///./client/app/visualizations/sankey/index.js","webpack:///./client/app/lib/visualizations/d3sankey.js","webpack:///./client/app/visualizations/sankey/sankey-editor.html","webpack:///./client/app/visualizations/sunburst/index.js","webpack:///./client/app/lib/visualizations/sunburst.js","webpack:///./client/app/visualizations/sunburst/sunburst-sequence-editor.html","webpack:///./client/app/visualizations/table/index.js","webpack:///./client/app/visualizations/table/table.html","webpack:///./client/app/visualizations/word-cloud/index.js","webpack:///./client/app/visualizations/word-cloud/word-cloud-editor.html","webpack:///[\\\\/]test[\\\\/]).)*\\.js$","webpack:///./client/app/pages/admin/outdated-queries/index.js","webpack:///./client/app/lib/pagination/paginator.js","webpack:///./client/app/lib/pagination/live-paginator.js","webpack:///./client/app/pages/admin/outdated-queries/outdated-queries.html","webpack:///./client/app/pages/admin/status/index.js","webpack:///./client/app/pages/admin/status/status.html","webpack:///./client/app/pages/admin/tasks/index.js","webpack:///./client/app/pages/admin/tasks/tasks.html","webpack:///./client/app/pages/alert/index.js","webpack:///./client/app/pages/alert/alert.html","webpack:///./client/app/pages/alerts-list/index.js","webpack:///./client/app/pages/alerts-list/alerts-list.html","webpack:///./client/app/pages/dashboards/dashboard-list.js","webpack:///./client/app/pages/dashboards/dashboard-list.html","webpack:///./client/app/pages/dashboards/dashboard.js","webpack:///./client/app/pages/dashboards/dashboard.html","webpack:///./client/app/pages/dashboards/share-dashboard.html","webpack:///./client/app/pages/dashboards/public-dashboard-page.js","webpack:///./client/app/pages/dashboards/public-dashboard-page.html","webpack:///./client/app/pages/data-sources/list.js","webpack:///./client/app/pages/data-sources/list.html","webpack:///./client/app/pages/data-sources/show.js","webpack:///./client/app/pages/data-sources/show.html","webpack:///./client/app/pages/destinations/list.js","webpack:///./client/app/pages/destinations/list.html","webpack:///./client/app/pages/destinations/show.js","webpack:///./client/app/pages/destinations/show.html","webpack:///./client/app/pages/groups/data-sources.js","webpack:///./client/app/pages/groups/data-sources.html","webpack:///./client/app/pages/groups/list.js","webpack:///./client/app/pages/groups/list.html","webpack:///./client/app/pages/groups/show.js","webpack:///./client/app/pages/groups/show.html","webpack:///./client/app/pages/home/index.js","webpack:///./client/app/pages/home/home.html","webpack:///./client/app/pages/queries-list/index.js","webpack:///./client/app/pages/queries-list/queries-list.html","webpack:///./client/app/pages/queries/queries-search-results-page.js","webpack:///./client/app/pages/queries/queries-search-results-page.html","webpack:///./client/app/pages/queries/source-view.js","webpack:///./client/app/pages/queries/view.js","webpack:///./client/app/pages/query-snippets/edit.js","webpack:///./client/app/pages/query-snippets/edit.html","webpack:///./client/app/pages/query-snippets/list.js","webpack:///./client/app/pages/query-snippets/list.html","webpack:///./client/app/pages/users/list.js","webpack:///./client/app/pages/users/list.html","webpack:///./client/app/pages/users/new.js","webpack:///./client/app/pages/users/new.html","webpack:///./client/app/pages/users/show.js","webpack:///./client/app/pages/users/show.html"],"names":["webpackJsonp","Array","concat","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_paginator","enumerable","get","_livePaginator","_classCallCheck","instance","Constructor","TypeError","getColumnNameWithoutType","column","typeSplit","indexOf","parts","split","length","_underscore","contains","filterTypes","getColumnCleanName","getColumnFriendlyName","replace","a","toUpperCase","addPointToSeries","point","seriesCollection","seriesName","undefined","name","type","data","push","QueryResultService","$resource","$timeout","$q","QueryResultResource","id","post","method","Job","statuses","1","2","3","4","QueryResult","props","this","deferred","defer","job","query_result","status","filters","filterFreeze","updatedAt","_moment2","update","_createClass","key","_extends","columnTypes","each","rows","row","v","k","newType","isNumber","isString","match","utc","_typeof","JSON","stringify","columns","resolve","delete","error","log","retrieved_at","updated_at","runtime","getFilters","reduce","str","filter","current","forEach","multiple","includes","ALL_VALUES","values","slice","NONE_VALUES","filteredData","memo","isArray","some","isMoment","isSame","String","getData","mapping","series","xValue","yValues","eValue","sizeValue","definition","yValue","ySeriesName","x","y","yError","size","sortBy","columnNames","map","getColumnNames","col","prepareFilters","getColumns","friendlyName","getRawData","unshift","uniq","unix","promise","tryCount","_this","query_result_id","response","logger","loadResult","Math","pow","query","_this2","jobResponse","getStatus","refreshStatus","queryId","fileType","apiKey","link","getId","queryName","getUpdatedAt","format","queryResult","dataSourceId","maxAge","params","data_source_id","max_age","query_id","init","ngModule","factory","Symbol","iterator","constructor","prototype","assign","target","i","arguments","source","hasOwnProperty","call","defineProperties","descriptor","configurable","writable","protoProps","staticProps","_debug","_debug2","_moment","$inject","_config","_config2","config","$locationProvider","$compileProvider","uiSelectConfig","toastrConfig","debugInfoEnabled","aHrefSanitizationWhitelist","html5Mode","theme","positionClass","timeOut","run","$templateCache","OfflineListener","template","put","registerAll","context","keys","f","_angular","_angular2","_angularSanitize","_angularSanitize2","_angularRoute","_angularRoute2","_angularResource","_angularResource2","_angularUiBootstrap","_angularUiBootstrap2","_uiSelect","_uiSelect2","_angularMessages","_angularMessages2","_angularToastr","_angularToastr2","_angularBase64Upload","_angularBase64Upload2","_angularVsRepeat","_angularVsRepeat2","_angularGridster","_angularGridster2","_filters","newObj","_directives","_directives2","_markdown","_markdown2","_datetime","_datetime2","requirements","routes","$routeProvider","route","path","authenticated","when","webpackContext","req","webpackContextResolve","Error","./af","./af.js","./ar","./ar-dz","./ar-dz.js","./ar-kw","./ar-kw.js","./ar-ly","./ar-ly.js","./ar-ma","./ar-ma.js","./ar-sa","./ar-sa.js","./ar-tn","./ar-tn.js","./ar.js","./az","./az.js","./be","./be.js","./bg","./bg.js","./bn","./bn.js","./bo","./bo.js","./br","./br.js","./bs","./bs.js","./ca","./ca.js","./cs","./cs.js","./cv","./cv.js","./cy","./cy.js","./da","./da.js","./de","./de-at","./de-at.js","./de-ch","./de-ch.js","./de.js","./dv","./dv.js","./el","./el.js","./en-au","./en-au.js","./en-ca","./en-ca.js","./en-gb","./en-gb.js","./en-ie","./en-ie.js","./en-nz","./en-nz.js","./eo","./eo.js","./es","./es-do","./es-do.js","./es.js","./et","./et.js","./eu","./eu.js","./fa","./fa.js","./fi","./fi.js","./fo","./fo.js","./fr","./fr-ca","./fr-ca.js","./fr-ch","./fr-ch.js","./fr.js","./fy","./fy.js","./gd","./gd.js","./gl","./gl.js","./gom-latn","./gom-latn.js","./he","./he.js","./hi","./hi.js","./hr","./hr.js","./hu","./hu.js","./hy-am","./hy-am.js","./id","./id.js","./is","./is.js","./it","./it.js","./ja","./ja.js","./jv","./jv.js","./ka","./ka.js","./kk","./kk.js","./km","./km.js","./kn","./kn.js","./ko","./ko.js","./ky","./ky.js","./lb","./lb.js","./lo","./lo.js","./lt","./lt.js","./lv","./lv.js","./me","./me.js","./mi","./mi.js","./mk","./mk.js","./ml","./ml.js","./mr","./mr.js","./ms","./ms-my","./ms-my.js","./ms.js","./my","./my.js","./nb","./nb.js","./ne","./ne.js","./nl","./nl-be","./nl-be.js","./nl.js","./nn","./nn.js","./pa-in","./pa-in.js","./pl","./pl.js","./pt","./pt-br","./pt-br.js","./pt.js","./ro","./ro.js","./ru","./ru.js","./sd","./sd.js","./se","./se.js","./si","./si.js","./sk","./sk.js","./sl","./sl.js","./sq","./sq.js","./sr","./sr-cyrl","./sr-cyrl.js","./sr.js","./ss","./ss.js","./sv","./sv.js","./sw","./sw.js","./ta","./ta.js","./te","./te.js","./tet","./tet.js","./th","./th.js","./tl-ph","./tl-ph.js","./tlh","./tlh.js","./tr","./tr.js","./tzl","./tzl.js","./tzm","./tzm-latn","./tzm-latn.js","./tzm.js","./uk","./uk.js","./ur","./ur.js","./uz","./uz-latn","./uz-latn.js","./uz.js","./vi","./vi.js","./x-pseudo","./x-pseudo.js","./yo","./yo.js","./zh-cn","./zh-cn.js","./zh-hk","./zh-hk.js","./zh-tw","./zh-tw.js","_jquery","_jquery2","_sortable","_sortable2","items","directive","uiSortableConfig","$log","require","scope","ngModel","uiSortable","element","attrs","combineCallbacks","first","second","firstIsFunc","secondIsFunc","apply","getSortableWidgetInstance","widgetFullName","patchSortableOption","callbacks","$apply","afterStop","wrappers","patchUISortableOptions","newVal","oldVal","sortableWidgetInstance","addDummyOptionKey","opts","optsDiff","defaultOptions","oldValue","directiveOpts","options","defaultValue","floating","getPlaceholderElement","placeholder","sortable","result","getPlaceholderExcludesludes","notCssSelector","find","attr","hasSortingHelper","ui","helperOption","item","isCustomHelperUsed","getSortingHelper","savedNodes","last","isFloating","test","css","getElementScope","elementScopes","e","_destroy","getItemIndex","parent","index","wireUp","$watchCollection","start","siblings","model","$modelValue","sourceModel","cancel","_isCanceled","isCanceled","_isCustomHelperUsed","activate","contents","excludes","not","connectedSortables","_connectedSortables","received","dropindex","droptarget","droptargetScope","droptargetModel","sortingHelper","appendTo","splice","moved","stop","equals","receive","remove","helper","inner","oldItemSortable","_restore","innerResult","info","initIfEnabled","disabled","cancelWatcher","noop","ui-floating","ui-model-items","extend","$watch","durationHumanize","duration","humanized","seconds","round","days","parseFloat","hours","minutes","scheduleHumanize","schedule","hour","minute","local","parseInt","toHuman","text","colWidth","widgetWidth","capitalize","_capitalize3","linkify","urlPattern","notEquals","other","filtered","notEmpty","collection","isEmpty","showError","field","form","$touched","$invalid","$submitted","_capitalize2","compareTo","otherModelValue","attributes","validate","$setValidity","$parsers","autofocus","focus","TitleService","$rootScope","title","set","newTitle","$broadcast","Title","restrict","updateTitle","$on","event","to","$sce","clientConfig","html","markdown","toHTML","allowScriptsInUserInput","trustAsHtml","dateTimeFormat","./alerts/alert-subscriptions/index.js","./app-header/index.js","./cancel-query-button/index.js","./dashboards/add-widget-dialog.js","./dashboards/edit-dashboard-dialog.js","./dashboards/widget.js","./dynamic-form.js","./dynamic-table/index.js","./edit-in-place.js","./email-settings-warning/index.js","./error-messages.js","./filters.js","./footer/index.js","./groups/edit-group-dialog.js","./groups/group-name.js","./overlay.js","./page-header/index.js","./paginator.js","./parameters.js","./permissions-editor/index.js","./queries/alert-unsaved-changes.js","./queries/api-key-dialog.js","./queries/embed-code-dialog.js","./queries/query-editor.js","./queries/query-results-link.js","./queries/schedule-dialog.js","./queries/schema-browser.js","./queries/visualization-embed.js","./query-link.js","./rd-tab/index.js","./rd-time-ago.js","./rd-timer.js","./route-status.js","./settings-screen.js","./sort-icon.js","./tab-nav/index.js","./visualization-name.js","controller","$scope","currentUser","AlertSubscription","Destination","toastr","newSubscription","subscribers","destinations","all","$promise","alertId","then","responses","mapF","s","destination","subscribedDestinations","compact","subscribedUsers","user","d","destinationsDisplay","icon","saveSubscriber","sub","alert_id","destination_id","$save","success","without","unsubscribe","subscriber","$delete","_alertSubscriptions","_alertSubscriptions2","$location","$uibModal","Auth","Dashboard","logoUrl","_redash_icon_small2","basePath","showQueriesMenu","hasPermission","showAlertsLink","showNewQueryMenu","showSettingsMenu","showDashboardsMenu","reloadDashboards","dashboards","recent","newDashboard","open","component","dashboard","layout","searchQueries","search","q","term","logout","_redash_icon_small","_appHeader","_appHeader2","cancelQueryButton","taskId","transclude","$http","Events","inProgress","cancelExecution","record","admin","AddWidgetDialog","_addWidgetDialog","_addWidgetDialog2","bindings","close","dismiss","Query","Widget","saveInProgress","widgetSize","selectedVis","selected_query","existing_text","new_text","widgetSizes","isVisualization","isTextBox","setType","pop","onQuerySelect","selected","visualizations","results","queries","saveWidget","visualization_id","dashboard_id","width","version","newWidget","widget","new_row","widgets","catch","finally","EditDashboardDialog","_editDashboardDialog","_editDashboardDialog2","gridsterOptions","margins","rowHeight","mobileModeEnabled","swapping","minRows","draggable","enabled","resizable","rowIndex","colIndex","sizeY","sizeX","getName","isFormValid","saveDashboard","request","slug","dashboard_filters_enabled","save","$value","autoDismiss","DashboardWidgetCtrl","$window","canViewQuery","editTextBox","localParametersDefs","localParameters","getParametersDefs","p","global","deleteWidget","confirm","deleted","reload","force","getQueryResult","visualization","getQuery","restricted","EditTextBoxComponent","public","_widget","_widget2","_editTextBox","_editTextBox2","DynamicForm","orderedInputs","properties","order","inputs","position","input","property","actions","types","t","configurationSchema","configuration_schema","fields","inProgressActions","action","originalCallback","callback","release","files","dataSourceForm","$setPristine","base64","typesPromise","prop","_endsWith2","required","prev","isUndefined","saveChanges","message","_endsWith","_dynamicForm","_dynamicForm2","DynamicTable","$sanitize","itemsPerPage","count","page","rowsCount","orderByField","orderByReverse","pageChanged","rowsToDisplay","$onChanges","changes","currentValue","orderBy","reverse","sanitize","sortIcon","_dynamicTable","_dynamicTable2","EditInPlace","ignoreBlanks","editable","done","tElement","tAttrs","elType","editor","placeholderSpan","editing","removeClass","inputElement","children","addClass","edit","keydown","which","shiftKey","blur","preventDefault","showMailWarning","mailSettingsMissing","isAdmin","function","ErrorMessagesComponent","FiltersComponent","_filters2","onChange","filterChangeListener","modal","$modal","itemGroup","newVersionAvailable","_footer","_footer2","EditGroupDialogComponent","_editGroupDialog","_editGroupDialog2","group","newGroup","saveButtonText","ok","canEdit","saveName","deleteGroup","Overlay","_pageHeader","_pageHeader2","paginator","PaginatorCtrl","setPage","optionsFromQueryResult","numColumns","nameColumn","valueColumn","columnName","toLowerCase","updateCurrentValue","param","option","ParametersDirective","parameters","syncValues","changed","extractEnumOptions","enumOptions","showParameterSettings","parameter","QueryBasedParameterComponent","ParameterSettingsComponent","_parameters","_parameters2","_queryBasedParameter","_queryBasedParameter2","_parameterSettings","_parameterSettings2","resultById","queryResultOptions","PermissionsEditorComponent","_permissionsEditor","_permissionsEditor2","User","grantees","newGrantees","aclUrl","url","loadGrantees","accessType","grantee","access_type","findUser","foundUsers","users","existingIds","m","alreadyGrantee","addGrantee","body","user_id","removeGrantee","headers","Content-Type","u","alertUnsavedChanges","isDirty","_onbeforeunload","onbeforeunload","next","unloadMessage","ApiKeyDialog","api_key","csvUrl","jsonUrl","EmbedCodeDialog","_embedCodeDialog","_embedCodeDialog2","embedUrl","window","snapshotUrlBuilder","snapshotUrl","defineDummySnippets","mode","ace","define","snippetText","queryEditor","QuerySnippet","schema","syntax","pre","editorOptions","advanced","behavioursEnabled","enableSnippets","enableBasicAutocompletion","enableLiveAutocompletion","autoScrollEditorIntoView","onLoad","commands","bindKey","snippets","acequire","snippetsModule","snippetManager","parseSnippetFile","snippet","getSnippet","register","$blockScrolling","Infinity","getSession","setUseWrapMode","setShowPrintMargin","newMode","setMode","newSchema","oldSchema","totalLength","table","setOption","$parent","resize","schemaCompleter","getCompletions","state","session","pos","prefix","keywords","c","score","meta","langTools","addCompleter","queryResultLink","embed","padWithZeros","queryTimePicker","refreshType","saveQuery","hourOptions","range","partial","minuteOptions","hasDailySchedule","scheduleInLocalTime","updateSchedule","newSchedule","queryRefreshSelect","refreshOptions","ScheduleForm","_scheduleDialog","_scheduleDialog2","SchemaBrowserCtrl","showTable","collapsed","getSize","SchemaBrowser","_schemaBrowser","_schemaBrowser2","onRefresh","$route","setApiKey","loadConfig","loadData","location","VisualizationEmbed","_visualizationEmbed","_visualizationEmbed2","$routeParams","document","querySelector","classList","add","visualizationId","showQueryDescription","showDescription","QueryLinkController","hash","getUrl","rdTab","tabId","substring","selectedTab","tab","RdTimeAgo","rdTimer","timestamp","currentTime","currentTimer","setInterval","$digest","clearInterval","permissionDenied","previous","rejection","usersPage","_startsWith2","groupsPage","dsPage","destinationsPage","snippetsPage","showGroupsLink","showUsersLink","showDsLink","showDestinationsLink","showQuerySnippetsLink","_startsWith","_settingsScreen","_settingsScreen2","sortColumn","showIcon","tabs","isActive","active","VisualizationName","Visualization","currentType","./alert-dialog.js","./alert-subscription.js","./alert.js","./auth.js","./dashboard.js","./data-source.js","./destination.js","./events.js","./group.js","./keyboard-shortcuts.js","./notifications.js","./offline-listener.js","./query-result.js","./query-snippet.js","./query.js","./user.js","./widget.js","AlertDialog","AlertDialogComponent","class","show","subscriberId","Alert","transformRequest","newData","defaults","storeSession","sessionData","loaded","getLocalSessionData","sessionStorage","getItem","SESSION_ITEM","parse","AuthService","isAuthenticated","login","encodeURI","href","removeItem","loadSession","client_config","permissions","getApiKey","CurrentUserService","object","userId","permission","ClientConfigService","apiKeyHttpInterceptor","$injector","Authorization","service","$httpProvider","interceptors","transformSingle","publicAccessEnabled","public_url","transform","transformResponse","resource","can_edit","DataSource","cache","getSchema","events","debounce","objectType","objectId","additionalProperties","object_type","object_id","Date","now","Group","members","dataSources","KeyboardShortcuts","bind","keymap","fn","_mousetrap2","bindGlobal","unbind","_mousetrap","Notifications","notificationService","pageVisible","monitorVisibility","hidden","visibilityChange","msHidden","documentHidden","addEventListener","isSupported","getPermissions","Notification","requestPermission","showNotification","content","notification","tag","setTimeout","onclick","addOnlineListener","toast","onlineStateHandler","toastId","removeEventListener","warning","allowHtml","tapToDismiss","trigger","description","tabTrigger","collectParams","part","union","QueryResource","myQueries","fork","newQuery","reject","formatted","err","getSourceLink","isNew","hasResult","latest_query_data","latest_query_data_id","paramsRequired","getParameters","isRequired","QueryResultError","queryText","missingParams","getMissing","paramsWord","valuesWord","join","_mustache2","render","getValues","getById","encodeURIComponent","getQueryResultPromise","toPromise","$parameters","Parameters","_mustache","errorMessage","Parameter","$$value","toDate","queryString","updateParameters","initFromQueryString","cachedQueryText","parameterNames","parseQuery","parametersMap","has","parameterExists","queryStringName","pluck","groups","WidgetResource","_truncate2","_truncate","./box-plot/index.js","./chart/index.js","./chart/plotly.js","./cohort/index.js","./counter/index.js","./edit-visualization-dialog.js","./index.js","./map/index.js","./pivot/index.js","./sankey/index.js","./sunburst/index.js","./table/index.js","./word-cloud/index.js","boxPlotRenderer","elm","calcIqr","q1","quartiles","q3","iqr","j","barOffset","xscale","margin","parentWidth","_d2","select","parentNode","node","getBoundingClientRect","top","right","bottom","left","height","min","max","mydata","xAxisLabel","yAxisLabel","scale","ordinal","domain","rangeBands","boxWidth","ceil","floor","yscale","linear","chart","_d3box2","whiskers","xAxis","svg","axis","orient","yAxis","xLines","tickSize","yLines","selectAll","plot","append","enter","_","boxPlotEditor","VisualizationProvider","registerVisualization","renderTemplate","editorTemplate","_d","_d3box","_boxPlotEditor","_boxPlotEditor2","box","g","sort","d3","ascending","n","quartileData","whiskerIndices","whiskerData","outlierIndices","x1","x0","__chart__","center","insert","style","transition","exit","medianLine","whisker","outlier","Number","tickFormat","boxTick","whiskerTick","timer","flush","boxWhiskers","boxQuartiles","functor","quantile","ChartRenderer","zIndexCompare","seriesOptions","zIndex","reloadData","getChartData","columnMapping","chartSeries","reloadChart","plotlyOptions","ChartEditor","ColorPalette","refreshColumns","difference","refreshColumnsAndForm","yAxisColumns","intersection","xAxisColumn","groupby","refreshSeries","seriesNames","existing","globalSeriesType","seriesList","setColumnRole","role","unsetColumn","currentTab","colors","Automatic","stackingOptions","Disabled","Enabled","Percent","changeTab","chartTypes","line","area","pie","scatter","bubble","allowCustomJSVisualizations","custom","xAxisScales","yAxisScales","chartTypeChanged","showSizeColumnPicker","customCode","old","legend","bottomMargin","errorColumn","sizeColumn","ColorBox","sortX","opposite","labels","error_y","visible","stacking","_chart","_chart2","_chartEditor","_chartEditor2","color","_toConsumableArray","arr","arr2","from","fillXValues","xValues","identity","storeOriginalHeightForEachSeries","original_y","getEnabledSeries","initializeTextAndHover","hoverinfo","normalAreaStacking","enabledSeriesList","seriesIndex","list","yIndex","cumulativeHeightOfPreviousSeries","cumulativeHeightWithThisSeries","lastVisibleY","lastSeriesIndex","percentAreaStacking","seriesY","sumOfCorrespondingDataPoints","total","percentage","previousVisiblePercentage","toFixed","percentBarStacking","sum","normalizeValue","seriesMinValue","seriesMaxValue","leftAxisSeries","yaxis","rightAxisSeries","getScaleType","getColor","ColorPaletteArray","constant","PlotlyChart","CustomPlotlyChart","_core","_core2","_bar","_bar2","_pie","_pie2","_histogram","_histogram2","_box","_box2","setPlotConfig","modeBarButtonsToRemove","BaseColors","Blue","Red","Green","Purple","Cyan","Orange","Light Blue","Lilac","Light Green","Brown","Black","Gray","Pink","Dark Blue","Indian Red","Green 2","Green 3","DarkTurquoise","Dark Violet","Pink 2","calculateHeight","fill","getTitle","recalculateOptions","showlegend","b","barmode","xaxis","yaxis2","hasX","cellsInRow","cellWidth","cellHeight","xPosition","yPosition","plotlySeries","hole","marker","textposition","boxmode","boxgroupgap","hasY2","useUnifiedXaxis","unifiedX","seriesColor","array","eValues","boxpoints","showpoints","jitter","pointpos","showticklabels","rangeMin","rangeMax","minY","maxY","overlaying","side","l","r","pad","autosize","showLink","displaylogo","plotlyElement","newPlot","on","querySelectorAll","rectDiv","maxIndex","itemClicked","redraw","isEqual","relayout","customChart","refresh","codeCall","eval","ys","timeSeriesToPlotlySeries","autoRedraw","enableConsoleLogs","console","prepareData","rawData","timeInterval","sortedData","_underscore2","date","day_number","grouped","groupBy","initialDate","lastDate","zeroBased","previousDay","diff","abs","momentInterval","maxDays","cohortRenderer","updateCohort","_prepareData","container","Cornelius","draw","cohort","time","people","weekOf","cohortEditor","_cohortEditor","_cohortEditor2","weekly","daily","monthly","getRowNumber","CounterRenderer","refreshData","queryData","rowNumber","targetRowNumber","counterColName","targetColName","countRow","counterValue","targetValue","delta","trendPositive","stringPrefix","stringSuffix","stringDecimal","stringDecChar","stringThouSep","_numberFormat2","CounterEditor","isValueNumber","_numberFormat","_counter","_counter2","_counterEditor","_counterEditor2","EditVisualizationDialog","_editVisualizationDialog","_editVisualizationDialog2","originalVisualization","onNewSuccess","copy","visTypes","visualizationTypes","newVisualization","defaultVisualization","typeChanged","oldType","visForm","$dirty","submit","visIds","closeDialog","defaultConfig","skipTypes","getSwitchTemplate","pattern","mergedTemplates","templates","ngSwitch","$get","renderVisualizationsTemplate","VisualizationRenderer","VisualizationOptionsEditor","FilterValueFilter","firstValue","dateFormat","provider","mapRenderer","getBounds","bounds","setBounds","fitBounds","_southWest","lat","lng","_northEast","layers","allMarkers","flatten","getLayers","_leaflet2","featureGroup","invalidateSize","createDescription","latCol","lonCol","lon","removeLayer","layer","mapControls","addLayer","points","latColName","lonColName","classify","markers","clusterMarkers","iconCreateFunction","cluster","childCount","getChildCount","divIcon","className","iconSize","Point","markerClusterGroup","layerGroup","groupColor","heatpoint","createMarker","bindPopup","addTo","addOverlay","mapTileUrl","tileLayer","setUrl","pointGroups","All","groupNames","colorScale","category10","scrollWheelZoom","control","attribution","off","fillColor","fillOpacity","stroke","circleMarker","mapEditor","classify_columns","mapTiles","_leaflet","_markerIcon","_markerIcon2","_markerIcon2x","_markerIcon2x2","_markerShadow","_markerShadow2","_map","_map2","_mapEditor","_mapEditor2","Icon","Default","mergeOptions","iconUrl","iconRetinaUrl","shadowUrl","_getIconUrl","pivotTableRenderer","removeControls","hideControls","controls","display","updatePivot","renderers","pivotUtilities","configCopy","aggregators","rendererOptions","localeStrings","pivotUI","pivotTableEditor","_pivottableEditor","_pivottableEditor2","getConnectedNodes","nodes","sourceLinks","targetLinks","graph","normalizeName","getNode","level","nodesDict","getLink","links","addLink","sourceName","targetName","depth","validKey","spreadNodes","nest","entries","o","dy","padding","y0","createSankey","sankeyHeight","nodeMouseOver","currentNode","include","nodeMouseOut","category20","sankey","_d3sankey2","nodeWidth","nodePadding","rgb","darker","sankeyRenderer","empty","newValue","sankeyEditor","_d3sankey","_sankeyEditor","_sankeyEditor2","Sankey","computeNodeLinks","computeNodeValues","moveSinksRight","scaleNodeBreadths","kx","computeNodeBreadths","assignBreadth","dx","nextNodes","remainingNodes","computeNodeDepths","iterations","resolveCollisions","nodesByBreadth","ascendingDepth","sortKeys","ky","alpha","weightedTarget","weightedSource","computeLinkDepths","ascendingSourceDepth","ascendingTargetDepth","sy","ty","xi","interpolateNumber","x2","curvature","x3","y1","_arguments","sunburstSequenceRenderer","sunburst","_sunburst2","sunburstSequenceEditor","_sunburst","_sunburstSequenceEditor","_sunburstSequenceEditor2","colorMap","getAncestors","Sunburst","breadcrumbPoints","w","h","updateBreadcrumbs","ancestors","percentageString","breadcrumbs","breadcrumb","classed","lastCrumb","mouseover","totalSize","toPrecision","summary","click","drawSunburst","json","partition","exitNode","uniqueNames","output","arc","vis","__data__","createVisualization","removeVisualization","buildNodes","raw","sorted","sequence","buildHierarchy","csv","root","nodeName","isLeaf","childNode","child","watches","parentElement","clientWidth","radius","PI","startAngle","endAngle","innerRadius","sqrt","outerRadius","marginLeft","unregister","formatValue","$filter","formattedValue","GridRenderer","gridColumns","gridRows","_queryResult","formatFunction","_table","_table2","findWordFrequencies","wordsHash","toString","wordCloudRenderer","elem","reloadCloud","words","rotate","isDefined","wordList","_d3Cloud2","random","font","fontSize","wordCloudEditor","_d3Cloud","_wordCloudEditor","_wordCloudEditor2","./admin/outdated-queries/index.js","./admin/status/index.js","./admin/tasks/index.js","./alert/index.js","./alerts-list/index.js","./dashboards/dashboard-list.js","./dashboards/dashboard.js","./dashboards/public-dashboard-page.js","./data-sources/list.js","./data-sources/show.js","./destinations/list.js","./destinations/show.js","./groups/data-sources.js","./groups/list.js","./groups/show.js","./home/index.js","./queries-list/index.js","./queries/queries-search-results-page.js","./queries/source-view.js","./queries/view.js","./query-snippets/edit.js","./query-snippets/list.js","./users/list.js","./users/new.js","./users/show.js","OutdatedQueriesCtrl","autoUpdate","_pagination","Paginator","refresh_time","updateRows","/admin/queries/outdated","_outdatedQueries","_outdatedQueries2","_ref","_ref$page","_ref$itemsPerPage","_ref$totalCount","totalCount","LivePaginator","rowsFetcher","AdminStatusCtrl","workers","manager","/admin/status","_status","_status2","TasksCtrl","tasks","waiting","in_progress","tasksPaginator","setTab","/admin/queries/tasks","_tasks","_tasks2","AlertCtrl","onQuerySelected","selectedQuery","alert","ops","defaultNameBuilder","getDefaultName","rearm","/alerts/:alertId","_alert","_alert2","AlertsListCtrl","/alerts","_alertsList","_alertsList2","stateClass","triggered","unknown","alerts","created_by","created_at","DashboardListCtrl","TAGS_REGEX","selectedTags","searchText","tagIsSelected","toggleTag","$event","allTags","out","unique","filteredDashboards","tags","untagged_name","trim","valueTags","Set","tagMatch","filteredMatch","/dashboards","reloadOnSearch","_dashboardList","_dashboardList2","DashboardCtrl","isFullscreen","refreshRate","showPermissionsControl","globalParameters","refreshRates","rate","setRefreshRate","loadDashboard","autoRefresh","extractGlobalParameters","globalParams","create","getPrototypeOf","locals","onGlobalParametersChange","renderDashboard","promises","queryResults","queryFilter","hasQueryStringValue","originFilters","filtersOnChange","originFilter","throttle","dashboardSlug","archiveDashboard","archive","showManagePermissionsModal","editDashboard","previousFiltersState","shouldRenderDashboard","addWidget","toggleFullscreen","toggle","togglePublished","is_draft","openShareForm","ShareDashboardComponent","/dashboard/:dashboardSlug","_dashboard","_dashboard2","_shareDashboard","_shareDashboard2","toggleSharing","loadPublicDashboard","token","PublicDashboardPage","_publicDashboardPage","_publicDashboardPage2","headless","DataSourcesCtrl","/data_sources","_list","_list2","DataSourceCtrl","deleteDataSource","dataSource","httpResponse","statusText","testConnection","disableWhenDirty","/data_sources/:dataSourceId","_show","_show2","DestinationsCtrl","/destinations","DestinationCtrl","destinationId","/destinations/:destinationId","GroupDataSourcesCtrl","groupId","newDataSource","findDataSource","foundDataSources","ds","addDataSource","view_only","changePermission","viewOnly","removeDataSource","/groups/:groupId/data_sources","_dataSources","_dataSources2","GroupsCtrl","/groups","GroupCtrl","newMember","alreadyMember","addMember","removeMember","member","/groups/:groupId","HomeCtrl","canCreateQuery","canCreateDashboard","canCreateAlert","recentQueries","recentDashboards","/","_home","_home2","QueriesListCtrl","/queries","/queries/my","_queriesList","_queriesList2","queriesFetcher","requestedPage","self","page_size","QuerySearchCtrl","include_drafts","/queries/search","_queriesSearchResultsPage","_queriesSearchResultsPage2","QuerySourceCtrl","$controller","isNewQuery","sourceMode","base_url","protocol","host","port","shortcuts","mod+s","canForkQuery","savePromise","savedQuery","formatQuery","duplicateQuery","deleteVisualization","$e","newQueryText","/queries/new","/queries/:queryId/source","_query","_query2","QueryViewCtrl","showLog","getDataSourceId","localStorage","lastSelectedDataSourceId","isNaN","toggleSchemaBrowser","hasSchema","editorSize","hasPrevSchema","updateSchema","updateDataSources","noDataSources","any","refreshSchema","executeQuery","canExecuteQuery","lockButton","cancelling","mod+enter","queryExecuting","isQueryOwner","canViewSource","canScheduleQuery","showDataset","lock","showApiKey","customOptions","pick","successMessage","updatedQuery","saveDescription","autoPublishNamedQueries","archiveQuery","is_archived","updateDataSource","setVisualizationTab","getError","getLog","openVisualizationEditor","windowClass","openScheduleForm","showEmbedDialog","/queries/:queryId","SnippetCtrl","snippetId","sucess","/query_snippets/:snippetId","_edit","_edit2","SnippetsCtrl","/query_snippets","UsersCtrl","/users","NewUserCtrl","saveUser","userForm","$valid","created","/users/new","controllerAs","bindToController","_new","_new2","UserCtrl","showSettings","showPasswordSettings","selectTab","profile","settings","password","auth_type","new","newRepeat","savePassword","old_password","updateUser","email","sendPasswordReset","disablePasswordResetButton","passwordResetLink","reset_link","/users/:userId"],"mappings":"AAAAA,cAAc,GAAGC,MAAM,IAAIC,QAErB,SAAUC,EAAQC,EAASC,GAEjC,YAyBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAtBvFG,OAAOC,eAAeP,EAAS,cAC7BQ,OAAO,GAGT,IAAIC,GAAaR,EAAoB,IAErCK,QAAOC,eAAeP,EAAS,aAC7BU,YAAY,EACZC,IAAK,WACH,MAAOT,GAAuBO,GChBzBJ,UDoBT,IAAIO,GAAiBX,EAAoB,IAEzCK,QAAOC,eAAeP,EAAS,iBAC7BU,YAAY,EACZC,IAAK,WACH,MAAOT,GAAuBU,GCxBzBP,YD+BD,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEF,SAAUN,EAAQC,GE5ExBD,EAAAC,QAAA,8+PFiFQ,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACC,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,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,eAAgB,EACtBH,EAAeI,KAAKF,EAAMD,aAlBlC,WAEErC,EADgBhN,EAAA,SP0lClBD,EAAQK,QOpjCOmK,GPujCN,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAAUzK,EAAQC,EAASC,GQ9+BjC,QAAAyP,GAAAC,GACA,MAAA1P,GAAA2P,EAAAD,IAEA,QAAAC,GAAAD,GACA,GAAA7M,GAAAkF,EAAA2H,EACA,MAAA7M,EAAA,GACA,SAAA+M,OAAA,uBAAAF,EAAA,KACA,OAAA7M,GA/OA,GAAAkF,IACA8H,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,gBAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,UAAA,IACAC,aAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,UAAA,IACAC,aAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,aAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UAAA,IACAC,OAAA,IACAC,UA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ACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAAU/L,EAAQC,KAKf,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAAUD,EAAQC,EAASC,GAEjC,YA4BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GkGzvPvF,QAASsmD,GAAYC,EAASC,GAC5B,GAAMC,GAAaC,EAAAxmD,QAAEyH,OAAO4+C,EAAS,SAAAzB,GAAA,MAAKA,GAAE6B,KAAO9gC,SAASi/B,EAAE8B,WAAY,MACpEC,EAAUH,EAAAxmD,QAAE4mD,QAAQL,EAAY,QAChCM,GAAc,EAAAhjD,EAAA7D,SAAOumD,EAAW,GAAGE,MAAMzU,SACzC8U,GAAW,EAAAjjD,EAAA7D,SAAOumD,EAAWA,EAAWrlD,OAAS,GAAGulD,MACpDM,EAAsD,IAA1CP,EAAAxmD,QAAEm1C,IAAIqR,EAAAxmD,QAAE2yC,MAAM0T,EAAS,eAErCW,EAAc,KACZ9kD,IAiCN,OA/BAskD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","file":"app.681aa4ab9869dd2a6d16.js","sourcesContent":["webpackJsonp([1],Array(26).concat([\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _paginator = __webpack_require__(669);\n\nObject.defineProperty(exports, 'Paginator', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_paginator).default;\n  }\n});\n\nvar _livePaginator = __webpack_require__(670);\n\nObject.defineProperty(exports, 'LivePaginator', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_livePaginator).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */,\n/* 58 */,\n/* 59 */,\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABl9pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTAwPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEwMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc5RUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjdBRUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc3RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjc4RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgICAgPHJkZjpTZXEvPgogICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1OjA1OjEyIDEwOjA1OjU4PC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuMy4yPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpLVWDGAAARGUlEQVR4Ae1dCYwcxRX91T3XXt7DYAsbYyfhEAEMOECCgCBEzJmgWML4CFeMYwjYHAkJNkhoOQIOuZB314mcBUUCedfaYCScgAIRCIIgCGESxBFuFtkG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\"\n\n/***/ }),\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */,\n/* 105 */,\n/* 106 */,\n/* 107 */,\n/* 108 */,\n/* 109 */,\n/* 110 */,\n/* 111 */,\n/* 112 */,\n/* 113 */,\n/* 114 */,\n/* 115 */,\n/* 116 */,\n/* 117 */,\n/* 118 */,\n/* 119 */,\n/* 120 */,\n/* 121 */,\n/* 122 */,\n/* 123 */,\n/* 124 */,\n/* 125 */,\n/* 126 */,\n/* 127 */,\n/* 128 */,\n/* 129 */,\n/* 130 */,\n/* 131 */,\n/* 132 */,\n/* 133 */,\n/* 134 */,\n/* 135 */,\n/* 136 */,\n/* 137 */,\n/* 138 */,\n/* 139 */,\n/* 140 */,\n/* 141 */,\n/* 142 */,\n/* 143 */,\n/* 144 */,\n/* 145 */,\n/* 146 */,\n/* 147 */,\n/* 148 */,\n/* 149 */,\n/* 150 */,\n/* 151 */,\n/* 152 */,\n/* 153 */,\n/* 154 */,\n/* 155 */,\n/* 156 */,\n/* 157 */,\n/* 158 */,\n/* 159 */,\n/* 160 */,\n/* 161 */,\n/* 162 */,\n/* 163 */,\n/* 164 */,\n/* 165 */,\n/* 166 */,\n/* 167 */,\n/* 168 */,\n/* 169 */,\n/* 170 */,\n/* 171 */,\n/* 172 */,\n/* 173 */,\n/* 174 */,\n/* 175 */,\n/* 176 */,\n/* 177 */,\n/* 178 */,\n/* 179 */,\n/* 180 */,\n/* 181 */,\n/* 182 */,\n/* 183 */,\n/* 184 */,\n/* 185 */,\n/* 186 */,\n/* 187 */,\n/* 188 */,\n/* 189 */,\n/* 190 */,\n/* 191 */,\n/* 192 */,\n/* 193 */,\n/* 194 */,\n/* 195 */,\n/* 196 */,\n/* 197 */,\n/* 198 */,\n/* 199 */,\n/* 200 */,\n/* 201 */,\n/* 202 */,\n/* 203 */,\n/* 204 */,\n/* 205 */,\n/* 206 */,\n/* 207 */,\n/* 208 */,\n/* 209 */,\n/* 210 */,\n/* 211 */,\n/* 212 */,\n/* 213 */,\n/* 214 */,\n/* 215 */,\n/* 216 */,\n/* 217 */,\n/* 218 */,\n/* 219 */,\n/* 220 */,\n/* 221 */,\n/* 222 */,\n/* 223 */,\n/* 224 */,\n/* 225 */,\n/* 226 */,\n/* 227 */,\n/* 228 */,\n/* 229 */,\n/* 230 */,\n/* 231 */,\n/* 232 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.getColumnCleanName = getColumnCleanName;\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _underscore = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nQueryResultService.$inject = ['$resource', '$timeout', '$q'];\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = (0, _debug2.default)('redash:services:QueryResult');\nvar filterTypes = ['filter', 'multi-filter', 'multiFilter'];\n\nvar ALL_VALUES = '*';\nvar NONE_VALUES = '-';\n\nfunction getColumnNameWithoutType(column) {\n  var typeSplit = void 0;\n  if (column.indexOf('::') !== -1) {\n    typeSplit = '::';\n  } else if (column.indexOf('__') !== -1) {\n    typeSplit = '__';\n  } else {\n    return column;\n  }\n\n  var parts = column.split(typeSplit);\n  if (parts[0] === '' && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!(0, _underscore.contains)(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nfunction getColumnCleanName(column) {\n  var name = getColumnNameWithoutType(column);\n  return name;\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, function (a) {\n    return a.toUpperCase();\n  });\n}\n\nfunction addPointToSeries(point, seriesCollection, seriesName) {\n  if (seriesCollection[seriesName] === undefined) {\n    seriesCollection[seriesName] = {\n      name: seriesName,\n      type: 'column',\n      data: []\n    };\n  }\n\n  seriesCollection[seriesName].data.push(point);\n}\n\nfunction QueryResultService($resource, $timeout, $q) {\n  var QueryResultResource = $resource('api/query_results/:id', { id: '@id' }, { post: { method: 'POST' } });\n  var Job = $resource('api/jobs/:id', { id: '@id' });\n  var statuses = {\n    1: 'waiting',\n    2: 'processing',\n    3: 'done',\n    4: 'failed'\n  };\n\n  var QueryResult = function () {\n    function QueryResult(props) {\n      _classCallCheck(this, QueryResult);\n\n      this.deferred = $q.defer();\n      this.job = {};\n      this.query_result = {};\n      this.status = 'waiting';\n      this.filters = undefined;\n      this.filterFreeze = undefined;\n\n      this.updatedAt = (0, _moment2.default)();\n\n      if (props) {\n        this.update(props);\n      }\n    }\n\n    _createClass(QueryResult, [{\n      key: 'update',\n      value: function update(props) {\n        _extends(this, props);\n\n        if ('query_result' in props) {\n          this.status = 'done';\n          this.filters = undefined;\n          this.filterFreeze = undefined;\n\n          var columnTypes = {};\n\n          // TODO: we should stop manipulating incoming data, and switch to relaying\n          // on the column type set by the backend. This logic is prone to errors,\n          // and better be removed. Kept for now, for backward compatability.\n          (0, _underscore.each)(this.query_result.data.rows, function (row) {\n            (0, _underscore.each)(row, function (v, k) {\n              var newType = null;\n              if ((0, _underscore.isNumber)(v)) {\n                newType = 'float';\n              } else if ((0, _underscore.isString)(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n                row[k] = _moment2.default.utc(v);\n                newType = 'datetime';\n              } else if ((0, _underscore.isString)(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n                row[k] = _moment2.default.utc(v);\n                newType = 'date';\n              } else if ((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' && v !== null) {\n                row[k] = JSON.stringify(v);\n              } else {\n                newType = 'string';\n              }\n\n              if (newType !== null) {\n                if (columnTypes[k] !== undefined && columnTypes[k] !== newType) {\n                  columnTypes[k] = 'string';\n                } else {\n                  columnTypes[k] = newType;\n                }\n              }\n            });\n          });\n\n          (0, _underscore.each)(this.query_result.data.columns, function (column) {\n            if (columnTypes[column.name]) {\n              if (column.type == null || column.type === 'string') {\n                column.type = columnTypes[column.name];\n              }\n            }\n          });\n\n          this.deferred.resolve(this);\n        } else if (this.job.status === 3) {\n          this.status = 'processing';\n        } else {\n          this.status = undefined;\n        }\n      }\n    }, {\n      key: 'getId',\n      value: function getId() {\n        var id = null;\n        if ('query_result' in this) {\n          id = this.query_result.id;\n        }\n        return id;\n      }\n    }, {\n      key: 'cancelExecution',\n      value: function cancelExecution() {\n        Job.delete({ id: this.job.id });\n      }\n    }, {\n      key: 'getStatus',\n      value: function getStatus() {\n        return this.status || statuses[this.job.status];\n      }\n    }, {\n      key: 'getError',\n      value: function getError() {\n        // TODO: move this logic to the server...\n        if (this.job.error === 'None') {\n          return undefined;\n        }\n\n        return this.job.error;\n      }\n    }, {\n      key: 'getLog',\n      value: function getLog() {\n        if (!this.query_result.data || !this.query_result.data.log || this.query_result.data.log.length === 0) {\n          return null;\n        }\n\n        return this.query_result.data.log;\n      }\n    }, {\n      key: 'getUpdatedAt',\n      value: function getUpdatedAt() {\n        return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n      }\n    }, {\n      key: 'getRuntime',\n      value: function getRuntime() {\n        return this.query_result.runtime;\n      }\n    }, {\n      key: 'getRawData',\n      value: function getRawData() {\n        if (!this.query_result.data) {\n          return null;\n        }\n\n        var data = this.query_result.data.rows;\n\n        return data;\n      }\n    }, {\n      key: 'getData',\n      value: function getData() {\n        if (!this.query_result.data) {\n          return null;\n        }\n\n        function filterValues(filters) {\n          if (!filters) {\n            return null;\n          }\n\n          return filters.reduce(function (str, filter) {\n            return str + filter.current;\n          }, '');\n        }\n\n        var filters = this.getFilters();\n        var filterFreeze = filterValues(filters);\n\n        if (this.filterFreeze !== filterFreeze) {\n          this.filterFreeze = filterFreeze;\n\n          if (filters) {\n            filters.forEach(function (filter) {\n              if (filter.multiple && (0, _underscore.includes)(filter.current, ALL_VALUES)) {\n                filter.current = filter.values.slice(2);\n              }\n\n              if (filter.multiple && (0, _underscore.includes)(filter.current, NONE_VALUES)) {\n                filter.current = [];\n              }\n            });\n\n            this.filteredData = this.query_result.data.rows.filter(function (row) {\n              return filters.reduce(function (memo, filter) {\n                if (!(0, _underscore.isArray)(filter.current)) {\n                  filter.current = [filter.current];\n                }\n\n                return memo && (0, _underscore.some)(filter.current, function (v) {\n                  var value = row[filter.name];\n                  if (_moment2.default.isMoment(value)) {\n                    return value.isSame(v);\n                  }\n                  // We compare with either the value or the String representation of the value,\n                  // because Select2 casts true/false to \"true\"/\"false\".\n                  return v === value || String(value) === v;\n                });\n              }, true);\n            });\n          } else {\n            this.filteredData = this.query_result.data.rows;\n          }\n        }\n\n        return this.filteredData;\n      }\n    }, {\n      key: 'isEmpty',\n      value: function isEmpty() {\n        return this.getData() === null || this.getData().length === 0;\n      }\n    }, {\n      key: 'getChartData',\n      value: function getChartData(mapping) {\n        var series = {};\n\n        this.getData().forEach(function (row) {\n          var point = {};\n          var seriesName = void 0;\n          var xValue = 0;\n          var yValues = {};\n          var eValue = null;\n          var sizeValue = null;\n\n          (0, _underscore.each)(row, function (v, definition) {\n            var name = definition.split('::')[0] || definition.split('__')[0];\n            var value = v;\n            var type = definition.split('::')[1] || definition.split('__')[1];\n            if (mapping) {\n              type = mapping[definition];\n            }\n\n            if (type === 'unused') {\n              return;\n            }\n\n            if (type === 'x') {\n              xValue = value;\n              point[type] = value;\n            }\n            if (type === 'y') {\n              if (value == null) {\n                value = 0;\n              }\n              yValues[name] = value;\n              point[type] = value;\n            }\n            if (type === 'yError') {\n              eValue = value;\n              point[type] = value;\n            }\n\n            if (type === 'series') {\n              seriesName = String(value);\n            }\n\n            if (type === 'size') {\n              point[type] = value;\n              sizeValue = value;\n            }\n\n            if (type === 'multiFilter' || type === 'multi-filter') {\n              seriesName = String(value);\n            }\n          });\n\n          if (seriesName === undefined) {\n            (0, _underscore.each)(yValues, function (yValue, ySeriesName) {\n              point = { x: xValue, y: yValue };\n              if (eValue !== null) {\n                point.yError = eValue;\n              }\n\n              if (sizeValue !== null) {\n                point.size = sizeValue;\n              }\n              addPointToSeries(point, series, ySeriesName);\n            });\n          } else {\n            addPointToSeries(point, series, seriesName);\n          }\n        });\n        return (0, _underscore.sortBy)((0, _underscore.values)(series), 'name');\n      }\n    }, {\n      key: 'getColumns',\n      value: function getColumns() {\n        if (this.columns === undefined && this.query_result.data) {\n          this.columns = this.query_result.data.columns;\n        }\n\n        return this.columns;\n      }\n    }, {\n      key: 'getColumnNames',\n      value: function getColumnNames() {\n        if (this.columnNames === undefined && this.query_result.data) {\n          this.columnNames = this.query_result.data.columns.map(function (v) {\n            return v.name;\n          });\n        }\n\n        return this.columnNames;\n      }\n    }, {\n      key: 'getColumnCleanNames',\n      value: function getColumnCleanNames() {\n        return this.getColumnNames().map(function (col) {\n          return getColumnCleanName(col);\n        });\n      }\n    }, {\n      key: 'getColumnFriendlyNames',\n      value: function getColumnFriendlyNames() {\n        return this.getColumnNames().map(function (col) {\n          return getColumnFriendlyName(col);\n        });\n      }\n    }, {\n      key: 'getFilters',\n      value: function getFilters() {\n        if (!this.filters) {\n          this.prepareFilters();\n        }\n\n        return this.filters;\n      }\n    }, {\n      key: 'prepareFilters',\n      value: function prepareFilters() {\n        if (!this.getColumns()) {\n          return;\n        }\n\n        var filters = [];\n\n        this.getColumns().forEach(function (col) {\n          var name = col.name;\n          var type = name.split('::')[1] || name.split('__')[1];\n          if ((0, _underscore.contains)(filterTypes, type)) {\n            // filter found\n            var filter = {\n              name: name,\n              friendlyName: getColumnFriendlyName(name),\n              column: col,\n              values: [],\n              multiple: type === 'multiFilter' || type === 'multi-filter'\n            };\n            filters.push(filter);\n          }\n        }, this);\n\n        this.getRawData().forEach(function (row) {\n          filters.forEach(function (filter) {\n            filter.values.push(row[filter.name]);\n            if (filter.values.length === 1) {\n              if (filter.multiple) {\n                filter.current = [row[filter.name]];\n              } else {\n                filter.current = row[filter.name];\n              }\n            }\n          });\n        });\n\n        filters.forEach(function (filter) {\n          if (filter.multiple) {\n            filter.values.unshift(ALL_VALUES);\n            filter.values.unshift(NONE_VALUES);\n          }\n        });\n\n        filters.forEach(function (filter) {\n          filter.values = (0, _underscore.uniq)(filter.values, function (v) {\n            if (_moment2.default.isMoment(v)) {\n              return v.unix();\n            }\n            return v;\n          });\n        });\n\n        this.filters = filters;\n      }\n    }, {\n      key: 'toPromise',\n      value: function toPromise() {\n        return this.deferred.promise;\n      }\n    }, {\n      key: 'loadResult',\n      value: function loadResult(tryCount) {\n        var _this = this;\n\n        QueryResultResource.get({ id: this.job.query_result_id }, function (response) {\n          _this.update(response);\n        }, function (error) {\n          if (tryCount === undefined) {\n            tryCount = 0;\n          }\n\n          if (tryCount > 3) {\n            logger('Connection error while trying to load result', error);\n            _this.update({\n              job: {\n                error: 'failed communicating with server. Please check your Internet connection and try again.',\n                status: 4\n              }\n            });\n          } else {\n            $timeout(function () {\n              _this.loadResult(tryCount + 1);\n            }, 1000 * Math.pow(2, tryCount));\n          }\n        });\n      }\n    }, {\n      key: 'refreshStatus',\n      value: function refreshStatus(query) {\n        var _this2 = this;\n\n        Job.get({ id: this.job.id }, function (jobResponse) {\n          _this2.update(jobResponse);\n\n          if (_this2.getStatus() === 'processing' && _this2.job.query_result_id && _this2.job.query_result_id !== 'None') {\n            _this2.loadResult();\n          } else if (_this2.getStatus() !== 'failed') {\n            $timeout(function () {\n              _this2.refreshStatus(query);\n            }, 3000);\n          }\n        }, function (error) {\n          logger('Connection error', error);\n          // TODO: use QueryResultError, or better yet: exception/reject of promise.\n          _this2.update({ job: { error: 'failed communicating with server. Please check your Internet connection and try again.', status: 4 } });\n        });\n      }\n    }, {\n      key: 'getLink',\n      value: function getLink(queryId, fileType, apiKey) {\n        var link = 'api/queries/' + queryId + '/results/' + this.getId() + '.' + fileType;\n        if (apiKey) {\n          link = link + '?api_key=' + apiKey;\n        }\n        return link;\n      }\n    }, {\n      key: 'getName',\n      value: function getName(queryName, fileType) {\n        return queryName.replace(' ', '_') + (0, _moment2.default)(this.getUpdatedAt()).format('_YYYY_MM_DD') + '.' + fileType;\n      }\n    }], [{\n      key: 'getById',\n      value: function getById(id) {\n        var queryResult = new QueryResult();\n\n        QueryResultResource.get({ id: id }, function (response) {\n          queryResult.update(response);\n        });\n\n        return queryResult;\n      }\n    }, {\n      key: 'get',\n      value: function get(dataSourceId, query, maxAge, queryId) {\n        var queryResult = new QueryResult();\n\n        var params = { data_source_id: dataSourceId, query: query, max_age: maxAge };\n        if (queryId !== undefined) {\n          params.query_id = queryId;\n        }\n\n        QueryResultResource.post(params, function (response) {\n          queryResult.update(response);\n\n          if ('job' in response) {\n            queryResult.refreshStatus(query);\n          }\n        }, function (error) {\n          if (error.status === 403) {\n            queryResult.update(error.data);\n          } else if (error.status === 400 && 'job' in error.data) {\n            queryResult.update(error.data);\n          } else {\n            logger('Unknown error', error);\n            queryResult.update({ job: { error: 'unknown error occurred. Please try again later.', status: 4 } });\n          }\n        });\n\n        return queryResult;\n      }\n    }]);\n\n    return QueryResult;\n  }();\n\n  return QueryResult;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('QueryResult', QueryResultService);\n}\n\n/***/ }),\n/* 233 */,\n/* 234 */,\n/* 235 */,\n/* 236 */,\n/* 237 */,\n/* 238 */,\n/* 239 */,\n/* 240 */,\n/* 241 */,\n/* 242 */,\n/* 243 */,\n/* 244 */,\n/* 245 */,\n/* 246 */,\n/* 247 */,\n/* 248 */,\n/* 249 */,\n/* 250 */,\n/* 251 */,\n/* 252 */,\n/* 253 */,\n/* 254 */,\n/* 255 */,\n/* 256 */,\n/* 257 */,\n/* 258 */,\n/* 259 */,\n/* 260 */,\n/* 261 */,\n/* 262 */,\n/* 263 */,\n/* 264 */,\n/* 265 */,\n/* 266 */,\n/* 267 */,\n/* 268 */,\n/* 269 */,\n/* 270 */,\n/* 271 */,\n/* 272 */,\n/* 273 */,\n/* 274 */,\n/* 275 */,\n/* 276 */,\n/* 277 */,\n/* 278 */,\n/* 279 */,\n/* 280 */,\n/* 281 */,\n/* 282 */,\n/* 283 */,\n/* 284 */,\n/* 285 */,\n/* 286 */,\n/* 287 */,\n/* 288 */,\n/* 289 */,\n/* 290 */,\n/* 291 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"container\\\">\\n  <overlay ng-if=\\\"canCreateQuery === false && query.isNew()\\\">\\n    You don't have permission to create new queries on any of the data sources available to you. You can either <a\\n    href=\\\"queries\\\">browse existing queries</a>, or ask for additional permissions from your Redash admin.\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please\\n    create one first, and then start querying.\\n    <br/>\\n    <a href=\\\"data_sources/new\\\" class=\\\"btn btn-primary\\\">Create Data Source</a> <a href=\\\"groups\\\" class=\\\"btn btn-default\\\">Manage\\n    Group Permissions</a>\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && !currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please ask\\n    your Redash admin to create one first.\\n  </overlay>\\n\\n  <alert-unsaved-changes ng-if=\\\"canEdit\\\" is-dirty=\\\"isDirty\\\"></alert-unsaved-changes>\\n\\n  <div class=\\\"row bg-white p-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>\\n        <edit-in-place editable=\\\"canEdit\\\" done=\\\"saveName\\\" ignore-blanks=\\\"true\\\" value=\\\"query.name\\\"></edit-in-place>\\n        <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft && !query.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"query.is_archived\\\" uib-popover=\\\"This query is archived and can't be used in dashboards, and won't appear in search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n      <p>\\n        <em>\\n          <edit-in-place editable=\\\"canEdit\\\"\\n                         done=\\\"saveDescription\\\"\\n                         editor=\\\"textarea\\\"\\n                         placeholder=\\\"No description\\\"\\n                         ignore-blanks='false'\\n                         value=\\\"query.description\\\"\\n                         markdown=\\\"true\\\">\\n          </edit-in-place>\\n        </em>\\n\\n      <ul class=\\\"list-inline m-t-20\\\">\\n        <li>\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Created By </span>\\n          <strong>{{query.user.name}}</strong>\\n        </li>\\n        <li ng-if=\\\"query.last_modified_by && query.user.id != query.last_modified_by.id\\\">\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Last Modified By </span>\\n          <strong>{{query.last_modified_by.name}}</strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Updated at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Created at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n      </p>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-show=\\\"query.id && canViewSource\\\">\\n            <a ng-show=\\\"!sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(true, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Show Source\\n            </a>\\n            <a ng-show=\\\"sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(false, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Hide Source\\n            </a>\\n        </span>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <!-- editor -->\\n  <div class=\\\"container\\\">\\n      <div class=\\\"row bg-white p-b-5\\\" ng-if=\\\"sourceMode\\\" resizable r-directions=\\\"['bottom']\\\" r-height=\\\"300\\\" style=\\\"min-height:100px;\\\">\\n        <schema-browser class=\\\"col-md-3 hidden-sm hidden-xs schema-container\\\"\\n                        schema=\\\"schema\\\"\\n                        on-refresh=\\\"refreshSchema()\\\"\\n                        ng-show=\\\"hasSchema\\\">\\n        </schema-browser>\\n\\n        <div ng-class=\\\"editorSize\\\" style=\\\"height:100%;\\\">\\n            <div class=\\\"p-5\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-s\\\" ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\"\\n                      ng-click=\\\"executeQuery()\\\">\\n                <span class=\\\"zmdi zmdi-play\\\"></span> Execute\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-default btn-s\\\" ng-click=\\\"formatQuery()\\\">\\n                <span class=\\\"zmdi zmdi-format-indent-increase\\\"></span> Format Query\\n              </button>\\n\\n              <i class=\\\"fa fa-database\\\"></i>\\n              <span class=\\\"text-muted\\\">Data Source</span>\\n              <select ng-disabled=\\\"!isQueryOwner\\\" ng-model=\\\"query.data_source_id\\\" ng-change=\\\"updateDataSource()\\\"\\n                      ng-options=\\\"ds.id as ds.name for ds in dataSources\\\"></select>\\n\\n              <div class=\\\"pull-right\\\">\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"togglePublished()\\\" ng-if=\\\"query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n                </button>\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"duplicateQuery()\\\" ng-disabled=\\\"query.id === undefined || !canForkQuery()\\\">\\n                  <span class=\\\"zmdi zmdi-arrow-split\\\"></span> Fork\\n                </button>\\n                <button class=\\\"btn btn-default\\\" ng-show=\\\"canEdit\\\" ng-click=\\\"saveQuery()\\\">\\n                  <span class=\\\"fa fa-floppy-o\\\"> </span> Save<span\\n                  ng-show=\\\"isDirty\\\">&#42;</span>\\n                </button>\\n                <div ng-if=\\\"query.id != undefined\\\" class=\\\"btn-group\\\" role=\\\"group\\\" uib-dropdown>\\n                  <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                    <span class=\\\"zmdi zmdi-more\\\"></span>\\n                  </button>\\n                  <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"archiveQuery()\\\">Archive Query</a></li>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin')) && showPermissionsControl\\\"><a ng-click=\\\"showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                    <li ng-if=\\\"!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"togglePublished()\\\">Unpublish Query</a></li>\\n                    <li ng-if=\\\"query.id != undefined\\\"><a ng-click=\\\"showApiKey()\\\">Show API Key</a></li>\\n                  </ul>\\n                </div>\\n              </div>\\n            </div>\\n            <p style=\\\"height:calc(100% - 40px);\\\">\\n              <query-editor query=\\\"query\\\"\\n                            schema=\\\"schema\\\"\\n                            syntax=\\\"dataSource.syntax\\\"></query-editor>\\n            </p>\\n        </div>\\n      </div>\\n  </div>\\n  <!-- end of editor -->\\n\\n  <!-- Query Details-->\\n  <div class=\\\"container m-b-5 p-t-5 bg-ace\\\" ng-if=\\\"sourceMode\\\">\\n  </div>\\n  <!-- End of Query Details-->\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-header bg-ace\\\">\\n      <div class=\\\"pull-right\\\">\\n        <button class=\\\"btn btn-sm btn-default\\\" ng-click=\\\"executeQuery()\\\"\\n                ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\" title=\\\"Refresh Dataset\\\"\\n                ng-if=\\\"!sourceMode\\\"><span\\n          class=\\\"zmdi zmdi-refresh\\\"></span></button>\\n        <div class=\\\"btn-group\\\" uib-dropdown>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\"\\n                  ng-disabled=\\\"queryExecuting || !queryResult.getData()\\\" aria-haspopup=\\\"true\\\"\\n                  uib-dropdown-toggle aria-expanded=\\\"false\\\">\\n            Download Dataset <span class=\\\"caret\\\"></span>\\n          </button>\\n          <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n            <li>\\n              <a query-result-link target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n              </a>\\n            </li>\\n            <li>\\n              <a query-result-link file-type=\\\"xlsx\\\" target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n      <ul class=\\\"list-inline\\\">\\n        <li>\\n          <!-- runtime -->\\n          <span class=\\\"zmdi zmdi-timer\\\"></span>\\n          <span class=\\\"text-muted\\\">Runtime </span>\\n          <strong ng-show=\\\"!queryExecuting\\\">{{queryResult.getRuntime() | durationHumanize}}</strong>\\n          <span ng-show=\\\"queryExecuting\\\">Running&hellip;</span>\\n        </li>\\n        <li>\\n          <!-- rows -->\\n          <span class=\\\"zmdi zmdi-format-align-justify\\\"></span>\\n          <span class=\\\"text-muted\\\">Rows </span><strong>{{queryResult.getData().length}}</strong>\\n        </li>\\n        <li>\\n          <!-- refresh schedule -->\\n          <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n          <span class=\\\"text-muted\\\">Refresh Schedule</span>\\n          <a ng-click=\\\"openScheduleForm()\\\" ng-if=\\\"!query.isNew()\\\">{{query.schedule | scheduleHumanize}}</a>\\n          <span ng-if=\\\"query.isNew()\\\">Never</span>\\n        </li>\\n        <li>\\n          <!-- last update -->\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Last update </span>\\n          <strong>\\n            <rd-time-ago value=\\\"queryResult.query_result.retrieved_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n\\n    </div>\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-12\\\">\\n          <parameters parameters=\\\"query.getParametersDefs()\\\" sync-values=\\\"!query.isNew()\\\" editable=\\\"sourceMode && canEdit\\\"></parameters>\\n          <!-- Query Execution Status -->\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'processing'\\\">\\n            Executing query&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'waiting'\\\">\\n            Query in queue&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-danger\\\" ng-show=\\\"queryResult.getError()\\\">Error running query: <strong>{{queryResult.getError()}}</strong>\\n          </div>\\n          <!-- End of Query Execution Status -->\\n\\n          <!-- tabs and data -->\\n          <div ng-if=\\\"showDataset\\\">\\n            <div class=\\\"row p-10\\\" ng-show=\\\"showLog\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <p>Log Information:</p>\\n                <p ng-repeat=\\\"l in queryResult.getLog()\\\">{{l}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <ul class=\\\"tab-nav\\\">\\n                  <rd-tab tab-id=\\\"table\\\" name=\\\"Table\\\" base-path=\\\"query.getUrl(sourceMode)\\\"></rd-tab>\\n                  <rd-tab tab-id=\\\"{{vis.id}}\\\" name=\\\"{{vis.name}}\\\" ng-if=\\\"vis.type!='TABLE'\\\" base-path=\\\"query.getUrl(sourceMode)\\\"\\n                          ng-repeat=\\\"vis in query.visualizations\\\">\\n                          <span class=\\\"remove\\\" ng-click=\\\"deleteVisualization($event, vis)\\\"\\n                                ng-show=\\\"canEdit\\\"> &times;</span>\\n                  </rd-tab>\\n                  <li class=\\\"rd-tab\\\"><a ng-click=\\\"openVisualizationEditor()\\\" ng-if=\\\"sourceMode && canEdit\\\">&plus; New Visualization</a></li>\\n                </ul>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <div ng-show=\\\"selectedTab == 'table'\\\">\\n                  <filters filters=\\\"filters\\\"></filters>\\n                  <grid-renderer query-result=\\\"queryResult\\\" items-per-page=\\\"50\\\"></grid-renderer>\\n                  <!-- the ng-repeat is a lame hack to find the table visualization... -->\\n                  <div class=\\\"bg-ace p-5\\\" ng-repeat=\\\"vis in query.visualizations\\\" ng-if=\\\"vis.type == 'TABLE'\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-if=\\\"!query.isNew()\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n                <div ng-if=\\\"selectedTab == vis.id\\\" ng-repeat=\\\"vis in query.visualizations\\\">\\n                  <visualization-renderer visualization=\\\"vis\\\" query-result=\\\"queryResult\\\"></visualization-renderer>\\n                  <div class=\\\"bg-ace p-5\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"openVisualizationEditor(vis)\\\" ng-if=\\\"canEdit\\\">Edit</button>\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 292 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n__webpack_require__(293);\n\nvar _config = __webpack_require__(304);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_config2.default.config(['$locationProvider', '$compileProvider', 'uiSelectConfig', 'toastrConfig', function ($locationProvider, $compileProvider, uiSelectConfig, toastrConfig) {\n  $compileProvider.debugInfoEnabled(false);\n  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|http|data):/);\n  $locationProvider.html5Mode(true);\n  uiSelectConfig.theme = 'bootstrap';\n\n  _extends(toastrConfig, {\n    positionClass: 'toast-bottom-right',\n    timeOut: 2000\n  });\n}]);\n\n// Update ui-select's template to use Font-Awesome instead of glyphicon.\n// eslint-disable-next-line no-unused-vars\n_config2.default.run(['$templateCache', 'OfflineListener', function ($templateCache, OfflineListener) {\n  var templateName = 'bootstrap/match.tpl.html';\n  var template = $templateCache.get(templateName);\n  template = template.replace('glyphicon glyphicon-remove', 'fa fa-remove');\n  $templateCache.put(templateName, template);\n}]);\n\nexports.default = _config2.default;\n\n/***/ }),\n/* 293 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(294);\n\n__webpack_require__(295);\n\n__webpack_require__(296);\n\n__webpack_require__(297);\n\n__webpack_require__(298);\n\n__webpack_require__(299);\n\n__webpack_require__(300);\n\n__webpack_require__(301);\n\n__webpack_require__(302);\n\n__webpack_require__(303);\n\n/***/ }),\n/* 294 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 295 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 296 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 297 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 298 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 299 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 300 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 301 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 302 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 303 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 304 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__webpack_require__(305);\n\n__webpack_require__(330);\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularSanitize = __webpack_require__(334);\n\nvar _angularSanitize2 = _interopRequireDefault(_angularSanitize);\n\nvar _angularRoute = __webpack_require__(336);\n\nvar _angularRoute2 = _interopRequireDefault(_angularRoute);\n\nvar _angularResource = __webpack_require__(338);\n\nvar _angularResource2 = _interopRequireDefault(_angularResource);\n\nvar _angularUiBootstrap = __webpack_require__(340);\n\nvar _angularUiBootstrap2 = _interopRequireDefault(_angularUiBootstrap);\n\nvar _uiSelect = __webpack_require__(342);\n\nvar _uiSelect2 = _interopRequireDefault(_uiSelect);\n\nvar _angularMessages = __webpack_require__(344);\n\nvar _angularMessages2 = _interopRequireDefault(_angularMessages);\n\nvar _angularToastr = __webpack_require__(346);\n\nvar _angularToastr2 = _interopRequireDefault(_angularToastr);\n\nvar _angularBase64Upload = __webpack_require__(348);\n\nvar _angularBase64Upload2 = _interopRequireDefault(_angularBase64Upload);\n\nvar _angularVsRepeat = __webpack_require__(350);\n\nvar _angularVsRepeat2 = _interopRequireDefault(_angularVsRepeat);\n\n__webpack_require__(351);\n\n__webpack_require__(226);\n\n__webpack_require__(355);\n\n__webpack_require__(356);\n\nvar _angularGridster = __webpack_require__(357);\n\nvar _angularGridster2 = _interopRequireDefault(_angularGridster);\n\nvar _underscore = __webpack_require__(5);\n\n__webpack_require__(358);\n\nvar _filters = __webpack_require__(363);\n\nvar filters = _interopRequireWildcard(_filters);\n\nvar _directives = __webpack_require__(365);\n\nvar _directives2 = _interopRequireDefault(_directives);\n\nvar _markdown = __webpack_require__(366);\n\nvar _markdown2 = _interopRequireDefault(_markdown);\n\nvar _datetime = __webpack_require__(372);\n\nvar _datetime2 = _interopRequireDefault(_datetime);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// This polyfill is needed to support PhantomJS which we use to generate PNGs from embeds.\nvar logger = (0, _debug2.default)('redash:config');\n\nvar requirements = [_angularRoute2.default, _angularResource2.default, _angularSanitize2.default, _angularUiBootstrap2.default, _angularMessages2.default, _uiSelect2.default, 'angularMoment', _angularToastr2.default, 'ui.ace', _angularBase64Upload2.default, 'angularResizable', _angularVsRepeat2.default, 'ui.sortable', _angularGridster2.default.name];\n\nvar ngModule = _angular2.default.module('app', requirements);\n\nfunction registerAll(context) {\n  var modules = context.keys().map(context).map(function (module) {\n    return module.default;\n  });\n\n  return modules.map(function (f) {\n    return f(ngModule);\n  });\n}\n\nfunction registerComponents() {\n  // We repeat this code in other register functions, because if we don't use a literal for the path\n  // Webpack won't be able to statcily analyze our imports.\n  var context = __webpack_require__(373);\n  registerAll(context);\n}\n\nfunction registerServices() {\n  var context = __webpack_require__(440);\n  registerAll(context);\n}\n\nfunction registerVisualizations() {\n  var context = __webpack_require__(461);\n  registerAll(context);\n}\n\nfunction registerPages() {\n  var context = __webpack_require__(667);\n  var routesCollection = registerAll(context);\n  routesCollection.forEach(function (routes) {\n    ngModule.config(['$routeProvider', function ($routeProvider) {\n      (0, _underscore.each)(routes, function (route, path) {\n        logger('Registering route: %s', path);\n        // This is a workaround, to make sure app-header and footer are loaded only\n        // for the authenticated routes.\n        // We should look into switching to ui-router, that has built in support for\n        // such things.\n        route.template = '<app-header></app-header><route-status></route-status>' + route.template + '<footer></footer>';\n        route.authenticated = true;\n        $routeProvider.when(path, route);\n      });\n    }]);\n  });\n}\n\nfunction registerFilters() {\n  (0, _underscore.each)(filters, function (filter, name) {\n    ngModule.filter(name, function () {\n      return filter;\n    });\n  });\n}\n\n(0, _directives2.default)(ngModule);\nregisterServices();\nregisterFilters();\n(0, _markdown2.default)(ngModule);\n(0, _datetime2.default)(ngModule);\nregisterComponents();\nregisterPages();\nregisterVisualizations(ngModule);\n\nexports.default = ngModule;\n\n/***/ }),\n/* 305 */,\n/* 306 */,\n/* 307 */,\n/* 308 */,\n/* 309 */,\n/* 310 */,\n/* 311 */,\n/* 312 */,\n/* 313 */,\n/* 314 */,\n/* 315 */,\n/* 316 */,\n/* 317 */,\n/* 318 */,\n/* 319 */,\n/* 320 */,\n/* 321 */,\n/* 322 */,\n/* 323 */,\n/* 324 */,\n/* 325 */,\n/* 326 */,\n/* 327 */,\n/* 328 */,\n/* 329 */,\n/* 330 */,\n/* 331 */,\n/* 332 */,\n/* 333 */,\n/* 334 */,\n/* 335 */,\n/* 336 */,\n/* 337 */,\n/* 338 */,\n/* 339 */,\n/* 340 */,\n/* 341 */,\n/* 342 */,\n/* 343 */,\n/* 344 */,\n/* 345 */,\n/* 346 */,\n/* 347 */,\n/* 348 */,\n/* 349 */,\n/* 350 */,\n/* 351 */,\n/* 352 */,\n/* 353 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./af\": 111,\n\t\"./af.js\": 111,\n\t\"./ar\": 112,\n\t\"./ar-dz\": 113,\n\t\"./ar-dz.js\": 113,\n\t\"./ar-kw\": 114,\n\t\"./ar-kw.js\": 114,\n\t\"./ar-ly\": 115,\n\t\"./ar-ly.js\": 115,\n\t\"./ar-ma\": 116,\n\t\"./ar-ma.js\": 116,\n\t\"./ar-sa\": 117,\n\t\"./ar-sa.js\": 117,\n\t\"./ar-tn\": 118,\n\t\"./ar-tn.js\": 118,\n\t\"./ar.js\": 112,\n\t\"./az\": 119,\n\t\"./az.js\": 119,\n\t\"./be\": 120,\n\t\"./be.js\": 120,\n\t\"./bg\": 121,\n\t\"./bg.js\": 121,\n\t\"./bn\": 122,\n\t\"./bn.js\": 122,\n\t\"./bo\": 123,\n\t\"./bo.js\": 123,\n\t\"./br\": 124,\n\t\"./br.js\": 124,\n\t\"./bs\": 125,\n\t\"./bs.js\": 125,\n\t\"./ca\": 126,\n\t\"./ca.js\": 126,\n\t\"./cs\": 127,\n\t\"./cs.js\": 127,\n\t\"./cv\": 128,\n\t\"./cv.js\": 128,\n\t\"./cy\": 129,\n\t\"./cy.js\": 129,\n\t\"./da\": 130,\n\t\"./da.js\": 130,\n\t\"./de\": 131,\n\t\"./de-at\": 132,\n\t\"./de-at.js\": 132,\n\t\"./de-ch\": 133,\n\t\"./de-ch.js\": 133,\n\t\"./de.js\": 131,\n\t\"./dv\": 134,\n\t\"./dv.js\": 134,\n\t\"./el\": 135,\n\t\"./el.js\": 135,\n\t\"./en-au\": 136,\n\t\"./en-au.js\": 136,\n\t\"./en-ca\": 137,\n\t\"./en-ca.js\": 137,\n\t\"./en-gb\": 138,\n\t\"./en-gb.js\": 138,\n\t\"./en-ie\": 139,\n\t\"./en-ie.js\": 139,\n\t\"./en-nz\": 140,\n\t\"./en-nz.js\": 140,\n\t\"./eo\": 141,\n\t\"./eo.js\": 141,\n\t\"./es\": 142,\n\t\"./es-do\": 143,\n\t\"./es-do.js\": 143,\n\t\"./es.js\": 142,\n\t\"./et\": 144,\n\t\"./et.js\": 144,\n\t\"./eu\": 145,\n\t\"./eu.js\": 145,\n\t\"./fa\": 146,\n\t\"./fa.js\": 146,\n\t\"./fi\": 147,\n\t\"./fi.js\": 147,\n\t\"./fo\": 148,\n\t\"./fo.js\": 148,\n\t\"./fr\": 149,\n\t\"./fr-ca\": 150,\n\t\"./fr-ca.js\": 150,\n\t\"./fr-ch\": 151,\n\t\"./fr-ch.js\": 151,\n\t\"./fr.js\": 149,\n\t\"./fy\": 152,\n\t\"./fy.js\": 152,\n\t\"./gd\": 153,\n\t\"./gd.js\": 153,\n\t\"./gl\": 154,\n\t\"./gl.js\": 154,\n\t\"./gom-latn\": 155,\n\t\"./gom-latn.js\": 155,\n\t\"./he\": 156,\n\t\"./he.js\": 156,\n\t\"./hi\": 157,\n\t\"./hi.js\": 157,\n\t\"./hr\": 158,\n\t\"./hr.js\": 158,\n\t\"./hu\": 159,\n\t\"./hu.js\": 159,\n\t\"./hy-am\": 160,\n\t\"./hy-am.js\": 160,\n\t\"./id\": 161,\n\t\"./id.js\": 161,\n\t\"./is\": 162,\n\t\"./is.js\": 162,\n\t\"./it\": 163,\n\t\"./it.js\": 163,\n\t\"./ja\": 164,\n\t\"./ja.js\": 164,\n\t\"./jv\": 165,\n\t\"./jv.js\": 165,\n\t\"./ka\": 166,\n\t\"./ka.js\": 166,\n\t\"./kk\": 167,\n\t\"./kk.js\": 167,\n\t\"./km\": 168,\n\t\"./km.js\": 168,\n\t\"./kn\": 169,\n\t\"./kn.js\": 169,\n\t\"./ko\": 170,\n\t\"./ko.js\": 170,\n\t\"./ky\": 171,\n\t\"./ky.js\": 171,\n\t\"./lb\": 172,\n\t\"./lb.js\": 172,\n\t\"./lo\": 173,\n\t\"./lo.js\": 173,\n\t\"./lt\": 174,\n\t\"./lt.js\": 174,\n\t\"./lv\": 175,\n\t\"./lv.js\": 175,\n\t\"./me\": 176,\n\t\"./me.js\": 176,\n\t\"./mi\": 177,\n\t\"./mi.js\": 177,\n\t\"./mk\": 178,\n\t\"./mk.js\": 178,\n\t\"./ml\": 179,\n\t\"./ml.js\": 179,\n\t\"./mr\": 180,\n\t\"./mr.js\": 180,\n\t\"./ms\": 181,\n\t\"./ms-my\": 182,\n\t\"./ms-my.js\": 182,\n\t\"./ms.js\": 181,\n\t\"./my\": 183,\n\t\"./my.js\": 183,\n\t\"./nb\": 184,\n\t\"./nb.js\": 184,\n\t\"./ne\": 185,\n\t\"./ne.js\": 185,\n\t\"./nl\": 186,\n\t\"./nl-be\": 187,\n\t\"./nl-be.js\": 187,\n\t\"./nl.js\": 186,\n\t\"./nn\": 188,\n\t\"./nn.js\": 188,\n\t\"./pa-in\": 189,\n\t\"./pa-in.js\": 189,\n\t\"./pl\": 190,\n\t\"./pl.js\": 190,\n\t\"./pt\": 191,\n\t\"./pt-br\": 192,\n\t\"./pt-br.js\": 192,\n\t\"./pt.js\": 191,\n\t\"./ro\": 193,\n\t\"./ro.js\": 193,\n\t\"./ru\": 194,\n\t\"./ru.js\": 194,\n\t\"./sd\": 195,\n\t\"./sd.js\": 195,\n\t\"./se\": 196,\n\t\"./se.js\": 196,\n\t\"./si\": 197,\n\t\"./si.js\": 197,\n\t\"./sk\": 198,\n\t\"./sk.js\": 198,\n\t\"./sl\": 199,\n\t\"./sl.js\": 199,\n\t\"./sq\": 200,\n\t\"./sq.js\": 200,\n\t\"./sr\": 201,\n\t\"./sr-cyrl\": 202,\n\t\"./sr-cyrl.js\": 202,\n\t\"./sr.js\": 201,\n\t\"./ss\": 203,\n\t\"./ss.js\": 203,\n\t\"./sv\": 204,\n\t\"./sv.js\": 204,\n\t\"./sw\": 205,\n\t\"./sw.js\": 205,\n\t\"./ta\": 206,\n\t\"./ta.js\": 206,\n\t\"./te\": 207,\n\t\"./te.js\": 207,\n\t\"./tet\": 208,\n\t\"./tet.js\": 208,\n\t\"./th\": 209,\n\t\"./th.js\": 209,\n\t\"./tl-ph\": 210,\n\t\"./tl-ph.js\": 210,\n\t\"./tlh\": 211,\n\t\"./tlh.js\": 211,\n\t\"./tr\": 212,\n\t\"./tr.js\": 212,\n\t\"./tzl\": 213,\n\t\"./tzl.js\": 213,\n\t\"./tzm\": 214,\n\t\"./tzm-latn\": 215,\n\t\"./tzm-latn.js\": 215,\n\t\"./tzm.js\": 214,\n\t\"./uk\": 216,\n\t\"./uk.js\": 216,\n\t\"./ur\": 217,\n\t\"./ur.js\": 217,\n\t\"./uz\": 218,\n\t\"./uz-latn\": 219,\n\t\"./uz-latn.js\": 219,\n\t\"./uz.js\": 218,\n\t\"./vi\": 220,\n\t\"./vi.js\": 220,\n\t\"./x-pseudo\": 221,\n\t\"./x-pseudo.js\": 221,\n\t\"./yo\": 222,\n\t\"./yo.js\": 222,\n\t\"./zh-cn\": 223,\n\t\"./zh-cn.js\": 223,\n\t\"./zh-hk\": 224,\n\t\"./zh-hk.js\": 224,\n\t\"./zh-tw\": 225,\n\t\"./zh-tw.js\": 225\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 353;\n\n/***/ }),\n/* 354 */,\n/* 355 */,\n/* 356 */,\n/* 357 */,\n/* 358 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /* eslint-disable */\n/*\nTODO:\n1. export module name.\n2. publish into its own repo?\n3. fix lint errors.\n*/\n\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _jquery = __webpack_require__(14);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _sortable = __webpack_require__(359);\n\nvar _sortable2 = _interopRequireDefault(_sortable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n jQuery UI Sortable plugin wrapper\n\n @param [ui-sortable] {object} Options to pass to $.fn.sortable() merged onto ui.config\n */\n_angular2.default.module('ui.sortable', []).value('uiSortableConfig', {\n  // the default for jquery-ui sortable is \"> *\", we need to restrict this to\n  // ng-repeat items\n  // if the user uses\n  items: '> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]'\n}).directive('uiSortable', ['uiSortableConfig', '$timeout', '$log', function (uiSortableConfig, $timeout, $log) {\n  return {\n    require: '?ngModel',\n    scope: {\n      ngModel: '=',\n      uiSortable: '='\n    },\n    link: function link(scope, element, attrs, ngModel) {\n      var savedNodes = void 0;\n      element = (0, _jquery2.default)(element);\n\n      function combineCallbacks(first, second) {\n        var firstIsFunc = typeof first === 'function';\n        var secondIsFunc = typeof second === 'function';\n        if (firstIsFunc && secondIsFunc) {\n          return function () {\n            first.apply(this, arguments);\n            second.apply(this, arguments);\n          };\n        } else if (secondIsFunc) {\n          return second;\n        }\n        return first;\n      }\n\n      function getSortableWidgetInstance(element) {\n        // this is a fix to support jquery-ui prior to v1.11.x\n        // otherwise we should be using `element.sortable('instance')`\n        var data = element.data('ui-sortable');\n        if (data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object' && data.widgetFullName === 'ui-sortable') {\n          return data;\n        }\n        return null;\n      }\n\n      function patchSortableOption(key, value) {\n        if (callbacks[key]) {\n          if (key === 'stop') {\n            // call apply after stop\n            value = combineCallbacks(value, function () {\n              scope.$apply();\n            });\n\n            value = combineCallbacks(value, afterStop);\n          }\n          // wrap the callback\n          value = combineCallbacks(callbacks[key], value);\n        } else if (wrappers[key]) {\n          value = wrappers[key](value);\n        }\n\n        // patch the options that need to have values set\n        if (!value && (key === 'items' || key === 'ui-model-items')) {\n          value = uiSortableConfig.items;\n        }\n\n        return value;\n      }\n\n      function patchUISortableOptions(newVal, oldVal, sortableWidgetInstance) {\n        function addDummyOptionKey(value, key) {\n          if (!(key in opts)) {\n            // add the key in the opts object so that\n            // the patch function detects and handles it\n            opts[key] = null;\n          }\n        }\n        // for this directive to work we have to attach some callbacks\n        _angular2.default.forEach(callbacks, addDummyOptionKey);\n\n        // only initialize it in case we have to\n        // update some options of the sortable\n        var optsDiff = null;\n\n        if (oldVal) {\n          // reset deleted options to default\n          var defaultOptions = void 0;\n          _angular2.default.forEach(oldVal, function (oldValue, key) {\n            if (!newVal || !(key in newVal)) {\n              if (key in directiveOpts) {\n                if (key === 'ui-floating') {\n                  opts[key] = 'auto';\n                } else {\n                  opts[key] = patchSortableOption(key, undefined);\n                }\n                return;\n              }\n\n              if (!defaultOptions) {\n                defaultOptions = (0, _sortable2.default)().options;\n              }\n              var defaultValue = defaultOptions[key];\n              defaultValue = patchSortableOption(key, defaultValue);\n\n              if (!optsDiff) {\n                optsDiff = {};\n              }\n              optsDiff[key] = defaultValue;\n              opts[key] = defaultValue;\n            }\n          });\n        }\n\n        // update changed options\n        _angular2.default.forEach(newVal, function (value, key) {\n          // if it's a custom option of the directive,\n          // handle it approprietly\n          if (key in directiveOpts) {\n            if (key === 'ui-floating' && (value === false || value === true) && sortableWidgetInstance) {\n              sortableWidgetInstance.floating = value;\n            }\n\n            opts[key] = patchSortableOption(key, value);\n            return;\n          }\n\n          value = patchSortableOption(key, value);\n\n          if (!optsDiff) {\n            optsDiff = {};\n          }\n          optsDiff[key] = value;\n          opts[key] = value;\n        });\n\n        return optsDiff;\n      }\n\n      function getPlaceholderElement(element) {\n        var placeholder = element.sortable('option', 'placeholder');\n\n        // placeholder.element will be a function if the placeholder, has\n        // been created (placeholder will be an object).  If it hasn't\n        // been created, either placeholder will be false if no\n        // placeholder class was given or placeholder.element will be\n        // undefined if a class was given (placeholder will be a string)\n        if (placeholder && placeholder.element && typeof placeholder.element === 'function') {\n          var result = placeholder.element();\n          // workaround for jquery ui 1.9.x,\n          // not returning jquery collection\n          result = (0, _jquery2.default)(result);\n          return result;\n        }\n        return null;\n      }\n\n      function getPlaceholderExcludesludes(element, placeholder) {\n        // exact match with the placeholder's class attribute to handle\n        // the case that multiple connected sortables exist and\n        // the placeholder option equals the class of sortable items\n        var notCssSelector = opts['ui-model-items'].replace(/[^,]*>/g, '');\n        var excludes = element.find('[class=\"' + placeholder.attr('class') + '\"]:not(' + notCssSelector + ')');\n        return excludes;\n      }\n\n      function hasSortingHelper(element, ui) {\n        var helperOption = element.sortable('option', 'helper');\n        return helperOption === 'clone' || typeof helperOption === 'function' && ui.item.sortable.isCustomHelperUsed();\n      }\n\n      function getSortingHelper(element, ui, savedNodes) {\n        var result = null;\n        if (hasSortingHelper(element, ui) && element.sortable('option', 'appendTo') === 'parent') {\n          // The .ui-sortable-helper element (that's the default class name)\n          // is placed last.\n          result = savedNodes.last();\n        }\n        return result;\n      }\n\n      // thanks jquery-ui\n      function isFloating(item) {\n        return (/left|right/.test(item.css('float')) || /inline|table-cell/.test(item.css('display'))\n        );\n      }\n\n      function getElementScope(elementScopes, element) {\n        var result = null;\n        for (var i = 0; i < elementScopes.length; i++) {\n          var x = elementScopes[i];\n          if (x.element[0] === element[0]) {\n            result = x.scope;\n            break;\n          }\n        }\n        return result;\n      }\n\n      function afterStop(e, ui) {\n        ui.item.sortable._destroy();\n      }\n\n      // return the index of ui.item among the items\n      // we can't just do ui.item.index() because there it might have siblings\n      // which are not items\n      function getItemIndex(item) {\n        return item.parent().find(opts['ui-model-items']).index(item);\n      }\n\n      var opts = {};\n\n      // directive specific options\n      var directiveOpts = {\n        'ui-floating': undefined,\n        'ui-model-items': uiSortableConfig.items\n      };\n\n      var callbacks = {\n        receive: null,\n        remove: null,\n        start: null,\n        stop: null,\n        update: null\n      };\n\n      var wrappers = {\n        helper: null\n      };\n\n      _angular2.default.extend(opts, directiveOpts, uiSortableConfig, scope.uiSortable);\n\n      function wireUp() {\n        // When we add or remove elements, we need the sortable to 'refresh'\n        // so it can find the new/removed elements.\n        scope.$watchCollection('ngModel', function () {\n          // Timeout to let ng-repeat modify the DOM\n          $timeout(function () {\n            // ensure that the jquery-ui-sortable widget instance\n            // is still bound to the directive's element\n            if (!!getSortableWidgetInstance(element)) {\n              element.sortable('refresh');\n            }\n          }, 0, false);\n        });\n\n        callbacks.start = function (e, ui) {\n          if (opts['ui-floating'] === 'auto') {\n            // since the drag has started, the element will be\n            // absolutely positioned, so we check its siblings\n            var siblings = ui.item.siblings();\n            var sortableWidgetInstance = getSortableWidgetInstance((0, _jquery2.default)(e.target));\n            sortableWidgetInstance.floating = isFloating(siblings);\n          }\n\n          // Save the starting position of dragged item\n          var index = getItemIndex(ui.item);\n          ui.item.sortable = {\n            model: ngModel.$modelValue[index],\n            index: index,\n            source: ui.item.parent(),\n            sourceModel: ngModel.$modelValue,\n            cancel: function cancel() {\n              ui.item.sortable._isCanceled = true;\n            },\n            isCanceled: function isCanceled() {\n              return ui.item.sortable._isCanceled;\n            },\n            isCustomHelperUsed: function isCustomHelperUsed() {\n              return !!ui.item.sortable._isCustomHelperUsed;\n            },\n\n            _isCanceled: false,\n            _isCustomHelperUsed: ui.item.sortable._isCustomHelperUsed,\n            _destroy: function _destroy() {\n              _angular2.default.forEach(ui.item.sortable, function (value, key) {\n                ui.item.sortable[key] = undefined;\n              });\n            }\n          };\n        };\n\n        callbacks.activate = function (e, ui) {\n          // We need to make a copy of the current element's contents so\n          // we can restore it after sortable has messed it up.\n          // This is inside activate (instead of start) in order to save\n          // both lists when dragging between connected lists.\n          savedNodes = element.contents();\n\n          // If this list has a placeholder (the connected lists won't),\n          // don't inlcude it in saved nodes.\n          var placeholder = getPlaceholderElement(element);\n          if (placeholder && placeholder.length) {\n            var excludes = getPlaceholderExcludesludes(element, placeholder);\n            savedNodes = savedNodes.not(excludes);\n          }\n\n          // save the directive's scope so that it is accessible from ui.item.sortable\n          var connectedSortables = ui.item.sortable._connectedSortables || [];\n\n          connectedSortables.push({\n            element: element,\n            scope: scope\n          });\n\n          ui.item.sortable._connectedSortables = connectedSortables;\n        };\n\n        callbacks.update = function (e, ui) {\n          // Save current drop position but only if this is not a second\n          // update that happens when moving between lists because then\n          // the value will be overwritten with the old value\n          if (!ui.item.sortable.received) {\n            ui.item.sortable.dropindex = getItemIndex(ui.item);\n            var droptarget = ui.item.parent();\n            ui.item.sortable.droptarget = droptarget;\n\n            var droptargetScope = getElementScope(ui.item.sortable._connectedSortables, droptarget);\n            ui.item.sortable.droptargetModel = droptargetScope.ngModel;\n\n            // Cancel the sort (let ng-repeat do the sort for us)\n            // Don't cancel if this is the received list because it has\n            // already been canceled in the other list, and trying to cancel\n            // here will mess up the DOM.\n            element.sortable('cancel');\n          }\n\n          // Put the nodes back exactly the way they started (this is very\n          // important because ng-repeat uses comment elements to delineate\n          // the start and stop of repeat sections and sortable doesn't\n          // respect their order (even if we cancel, the order of the\n          // comments are still messed up).\n          var sortingHelper = !ui.item.sortable.received && getSortingHelper(element, ui, savedNodes);\n          if (sortingHelper && sortingHelper.length) {\n            // Restore all the savedNodes except from the sorting helper element.\n            // That way it will be garbage collected.\n            savedNodes = savedNodes.not(sortingHelper);\n          }\n          savedNodes.appendTo(element);\n\n          // If this is the target connected list then\n          // it's safe to clear the restored nodes since:\n          // update is currently running and\n          // stop is not called for the target list.\n          if (ui.item.sortable.received) {\n            savedNodes = null;\n          }\n\n          // If received is true (an item was dropped in from another list)\n          // then we add the new item to this list otherwise wait until the\n          // stop event where we will know if it was a sort or item was\n          // moved here from another list\n          if (ui.item.sortable.received && !ui.item.sortable.isCanceled()) {\n            scope.$apply(function () {\n              ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0, ui.item.sortable.moved);\n            });\n          }\n        };\n\n        callbacks.stop = function (e, ui) {\n          // If the received flag hasn't be set on the item, this is a\n          // normal sort, if dropindex is set, the item was moved, so move\n          // the items in the list.\n          if (!ui.item.sortable.received && 'dropindex' in ui.item.sortable && !ui.item.sortable.isCanceled()) {\n            scope.$apply(function () {\n              ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0, ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0]);\n            });\n          } else {\n            // if the item was not moved, then restore the elements\n            // so that the ngRepeat's comment are correct.\n            if ((!('dropindex' in ui.item.sortable) || ui.item.sortable.isCanceled()) && !_angular2.default.equals(element.contents(), savedNodes)) {\n              var sortingHelper = getSortingHelper(element, ui, savedNodes);\n              if (sortingHelper && sortingHelper.length) {\n                // Restore all the savedNodes except from the sorting helper element.\n                // That way it will be garbage collected.\n                savedNodes = savedNodes.not(sortingHelper);\n              }\n              savedNodes.appendTo(element);\n            }\n          }\n\n          // It's now safe to clear the savedNodes\n          // since stop is the last callback.\n          savedNodes = null;\n        };\n\n        callbacks.receive = function (e, ui) {\n          // An item was dropped here from another list, set a flag on the\n          // item.\n          ui.item.sortable.received = true;\n        };\n\n        callbacks.remove = function (e, ui) {\n          // Workaround for a problem observed in nested connected lists.\n          // There should be an 'update' event before 'remove' when moving\n          // elements. If the event did not fire, cancel sorting.\n          if (!('dropindex' in ui.item.sortable)) {\n            element.sortable('cancel');\n            ui.item.sortable.cancel();\n          }\n\n          // Remove the item from this list's model and copy data into item,\n          // so the next list can retrive it\n          if (!ui.item.sortable.isCanceled()) {\n            scope.$apply(function () {\n              ui.item.sortable.moved = ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0];\n            });\n          }\n        };\n\n        wrappers.helper = function (inner) {\n          if (inner && typeof inner === 'function') {\n            return function (e, item) {\n              var oldItemSortable = item.sortable;\n              var index = getItemIndex(item);\n              item.sortable = {\n                model: ngModel.$modelValue[index],\n                index: index,\n                source: item.parent(),\n                sourceModel: ngModel.$modelValue,\n                _restore: function _restore() {\n                  _angular2.default.forEach(item.sortable, function (value, key) {\n                    item.sortable[key] = undefined;\n                  });\n\n                  item.sortable = oldItemSortable;\n                }\n              };\n\n              var innerResult = inner.apply(this, arguments);\n              item.sortable._restore();\n              item.sortable._isCustomHelperUsed = item !== innerResult;\n              return innerResult;\n            };\n          }\n          return inner;\n        };\n\n        scope.$watchCollection('uiSortable', function (newVal, oldVal) {\n          // ensure that the jquery-ui-sortable widget instance\n          // is still bound to the directive's element\n          var sortableWidgetInstance = getSortableWidgetInstance(element);\n          if (!!sortableWidgetInstance) {\n            var optsDiff = patchUISortableOptions(newVal, oldVal, sortableWidgetInstance);\n\n            if (optsDiff) {\n              element.sortable('option', optsDiff);\n            }\n          }\n        }, true);\n\n        patchUISortableOptions(opts);\n      }\n\n      function init() {\n        if (ngModel) {\n          wireUp();\n        } else {\n          $log.info('ui.sortable: ngModel not provided!', element);\n        }\n\n        // Create sortable\n        element.sortable(opts);\n      }\n\n      function initIfEnabled() {\n        if (scope.uiSortable && scope.uiSortable.disabled) {\n          return false;\n        }\n\n        init();\n\n        // Stop Watcher\n        initIfEnabled.cancelWatcher();\n        initIfEnabled.cancelWatcher = _angular2.default.noop;\n\n        return true;\n      }\n\n      initIfEnabled.cancelWatcher = _angular2.default.noop;\n\n      if (!initIfEnabled()) {\n        initIfEnabled.cancelWatcher = scope.$watch('uiSortable.disabled', initIfEnabled);\n      }\n    }\n  };\n}]);\n\n/***/ }),\n/* 359 */,\n/* 360 */,\n/* 361 */,\n/* 362 */,\n/* 363 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.durationHumanize = durationHumanize;\nexports.scheduleHumanize = scheduleHumanize;\nexports.toHuman = toHuman;\nexports.colWidth = colWidth;\nexports.capitalize = capitalize;\nexports.linkify = linkify;\nexports.remove = remove;\nexports.notEmpty = notEmpty;\nexports.showError = showError;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _capitalize2 = __webpack_require__(364);\n\nvar _capitalize3 = _interopRequireDefault(_capitalize2);\n\nvar _underscore = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eslint-disable-next-line\nvar urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\nfunction durationHumanize(duration) {\n  var humanized = '';\n\n  if (duration === undefined) {\n    humanized = '-';\n  } else if (duration < 60) {\n    var seconds = Math.round(duration);\n    humanized = seconds + 's';\n  } else if (duration > 3600 * 24) {\n    var days = Math.round(parseFloat(duration) / 60.0 / 60.0 / 24.0);\n    humanized = days + 'days';\n  } else if (duration >= 3600) {\n    var hours = Math.round(parseFloat(duration) / 60.0 / 60.0);\n    humanized = hours + 'h';\n  } else {\n    var minutes = Math.round(parseFloat(duration) / 60.0);\n    humanized = minutes + 'm';\n  }\n  return humanized;\n}\n\nfunction scheduleHumanize(schedule) {\n  if (schedule === null) {\n    return 'Never';\n  } else if (schedule.match(/\\d\\d:\\d\\d/) !== null) {\n    var parts = schedule.split(':');\n    var localTime = _moment2.default.utc().hour(parts[0]).minute(parts[1]).local().format('HH:mm');\n\n    return 'Every day at ' + localTime;\n  }\n\n  return 'Every ' + durationHumanize(parseInt(schedule, 10));\n}\n\nfunction toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, function (a) {\n    return a.toUpperCase();\n  });\n}\n\nfunction colWidth(widgetWidth) {\n  if (widgetWidth === 0) {\n    return 0;\n  } else if (widgetWidth === 1) {\n    return 6;\n  } else if (widgetWidth === 2) {\n    return 12;\n  }\n  return widgetWidth;\n}\n\nfunction capitalize(text) {\n  if (text) {\n    return (0, _capitalize3.default)(text);\n  }\n\n  return null;\n}\n\nfunction linkify(text) {\n  return text.replace(urlPattern, \"$1<a href='$2' target='_blank'>$2</a>\");\n}\n\nfunction remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  var notEquals = void 0;\n\n  if (item instanceof Array) {\n    notEquals = function notEquals(other) {\n      return item.indexOf(other) === -1;\n    };\n  } else {\n    notEquals = function notEquals(other) {\n      return item !== other;\n    };\n  }\n\n  var filtered = [];\n\n  for (var i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\nfunction notEmpty(collection) {\n  return !(0, _underscore.isEmpty)(collection);\n}\n\nfunction showError(field, form) {\n  return field.$touched && field.$invalid || form.$submitted;\n}\n\n/***/ }),\n/* 364 */,\n/* 365 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nautofocus.$inject = ['$timeout'];\ntitle.$inject = ['$rootScope', 'Title'];\nTitleService.$inject = ['$rootScope'];\n\n\nvar logger = (0, _debug2.default)('redash:directives');\n\nfunction compareTo() {\n  return {\n    require: 'ngModel',\n    scope: {\n      otherModelValue: '=compareTo'\n    },\n    link: function link(scope, element, attributes, ngModel) {\n      var validate = function validate(value) {\n        ngModel.$setValidity('compareTo', value === scope.otherModelValue);\n      };\n\n      scope.$watch('otherModelValue', function () {\n        validate(ngModel.$modelValue);\n      });\n\n      ngModel.$parsers.push(function (value) {\n        validate(value);\n        return value;\n      });\n    }\n  };\n}\n\nfunction autofocus($timeout) {\n  return {\n    link: function link(scope, element) {\n      $timeout(function () {\n        element[0].focus();\n      });\n    }\n  };\n}\n\nfunction TitleService($rootScope) {\n  var Title = {\n    title: 'Redash',\n    set: function set(newTitle) {\n      this.title = newTitle;\n      $rootScope.$broadcast('$titleChange');\n    },\n    get: function get() {\n      return this.title;\n    }\n  };\n\n  return Title;\n}\n\nfunction title($rootScope, Title) {\n  return {\n    restrict: 'E',\n    link: function link(scope, element) {\n      function updateTitle() {\n        var newTitle = Title.get();\n        logger('Updating title to: %s', newTitle);\n        element.text(newTitle);\n      }\n\n      $rootScope.$on('$routeChangeSuccess', function (event, to) {\n        if (to.title) {\n          Title.set(to.title);\n        }\n      });\n      $rootScope.$on('$titleChange', updateTitle);\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Title', TitleService);\n  ngModule.directive('title', title);\n  ngModule.directive('compareTo', compareTo);\n  ngModule.directive('autofocus', autofocus);\n}\n\n/***/ }),\n/* 366 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _markdown = __webpack_require__(367);\n\nfunction init(ngModule) {\n  ngModule.filter('markdown', ['$sce', 'clientConfig', function ($sce, clientConfig) {\n    return function parseMarkdown(text) {\n      if (!text) {\n        return '';\n      }\n\n      var html = _markdown.markdown.toHTML(String(text));\n      if (clientConfig.allowScriptsInUserInput) {\n        html = $sce.trustAsHtml(html);\n      }\n\n      return html;\n    };\n  }]);\n}\n\n/***/ }),\n/* 367 */,\n/* 368 */,\n/* 369 */,\n/* 370 */,\n/* 371 */,\n/* 372 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction init(ngModule) {\n  ngModule.filter('toMilliseconds', function () {\n    return function (value) {\n      return value * 1000.0;\n    };\n  });\n\n  ngModule.filter('dateTime', ['clientConfig', function (clientConfig) {\n    return function dateTime(value) {\n      if (!value) {\n        return '-';\n      }\n\n      return (0, _moment2.default)(value).format(clientConfig.dateTimeFormat);\n    };\n  }]);\n}\n\n/***/ }),\n/* 373 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./alerts/alert-subscriptions/index.js\": 374,\n\t\"./app-header/index.js\": 376,\n\t\"./cancel-query-button/index.js\": 379,\n\t\"./dashboards/add-widget-dialog.js\": 380,\n\t\"./dashboards/edit-dashboard-dialog.js\": 382,\n\t\"./dashboards/widget.js\": 384,\n\t\"./dynamic-form.js\": 387,\n\t\"./dynamic-table/index.js\": 390,\n\t\"./edit-in-place.js\": 393,\n\t\"./email-settings-warning/index.js\": 394,\n\t\"./error-messages.js\": 395,\n\t\"./filters.js\": 396,\n\t\"./footer/index.js\": 398,\n\t\"./groups/edit-group-dialog.js\": 400,\n\t\"./groups/group-name.js\": 402,\n\t\"./overlay.js\": 403,\n\t\"./page-header/index.js\": 404,\n\t\"./paginator.js\": 406,\n\t\"./parameters.js\": 407,\n\t\"./permissions-editor/index.js\": 411,\n\t\"./queries/alert-unsaved-changes.js\": 413,\n\t\"./queries/api-key-dialog.js\": 414,\n\t\"./queries/embed-code-dialog.js\": 415,\n\t\"./queries/query-editor.js\": 417,\n\t\"./queries/query-results-link.js\": 423,\n\t\"./queries/schedule-dialog.js\": 424,\n\t\"./queries/schema-browser.js\": 426,\n\t\"./queries/visualization-embed.js\": 428,\n\t\"./query-link.js\": 430,\n\t\"./rd-tab/index.js\": 431,\n\t\"./rd-time-ago.js\": 432,\n\t\"./rd-timer.js\": 433,\n\t\"./route-status.js\": 434,\n\t\"./settings-screen.js\": 435,\n\t\"./sort-icon.js\": 437,\n\t\"./tab-nav/index.js\": 438,\n\t\"./visualization-name.js\": 439\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 373;\n\n/***/ }),\n/* 374 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _alertSubscriptions = __webpack_require__(375);\n\nvar _alertSubscriptions2 = _interopRequireDefault(_alertSubscriptions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ncontroller.$inject = ['$scope', '$q', '$sce', 'currentUser', 'AlertSubscription', 'Destination', 'toastr'];\n\n\nfunction controller($scope, $q, $sce, currentUser, AlertSubscription, Destination, toastr) {\n  'ngInject';\n\n  $scope.newSubscription = {};\n  $scope.subscribers = [];\n  $scope.destinations = [];\n  $scope.currentUser = currentUser;\n\n  $q.all([Destination.query().$promise, AlertSubscription.query({ alertId: $scope.alertId }).$promise]).then(function (responses) {\n    var destinations = responses[0];\n    var subscribers = responses[1];\n\n    var mapF = function mapF(s) {\n      return s.destination && s.destination.id;\n    };\n    var subscribedDestinations = (0, _underscore.compact)(subscribers.map(mapF));\n\n    var subscribedUsers = (0, _underscore.compact)(subscribers.map(function (s) {\n      return !s.destination && s.user.id;\n    }));\n\n    $scope.destinations = destinations.filter(function (d) {\n      return !(0, _underscore.contains)(subscribedDestinations, d.id);\n    });\n\n    if (!(0, _underscore.contains)(subscribedUsers, currentUser.id)) {\n      $scope.destinations.unshift({ user: { name: currentUser.name } });\n    }\n\n    $scope.newSubscription.destination = $scope.destinations[0];\n    $scope.subscribers = subscribers;\n  });\n\n  $scope.destinationsDisplay = function (d) {\n    if (!d) {\n      return '';\n    }\n\n    var destination = d;\n    if (d.destination) {\n      destination = destination.destination;\n    } else if (destination.user) {\n      destination = {\n        name: d.user.name + ' (Email)',\n        icon: 'fa-envelope',\n        type: 'user'\n      };\n    }\n\n    return $sce.trustAsHtml('<i class=\"fa ' + destination.icon + '\"></i>&nbsp;' + destination.name);\n  };\n\n  $scope.saveSubscriber = function () {\n    var sub = new AlertSubscription({ alert_id: $scope.alertId });\n    if ($scope.newSubscription.destination.id) {\n      sub.destination_id = $scope.newSubscription.destination.id;\n    }\n\n    sub.$save(function () {\n      toastr.success('Subscribed.');\n      $scope.subscribers.push(sub);\n      $scope.destinations = (0, _underscore.without)($scope.destinations, $scope.newSubscription.destination);\n      if ($scope.destinations.length > 0) {\n        $scope.newSubscription.destination = $scope.destinations[0];\n      } else {\n        $scope.newSubscription.destination = undefined;\n      }\n    }, function () {\n      toastr.error('Failed saving subscription.');\n    });\n  };\n\n  $scope.unsubscribe = function (subscriber) {\n    var destination = subscriber.destination;\n    var user = subscriber.user;\n\n    subscriber.$delete(function () {\n      toastr.success('Unsubscribed');\n      $scope.subscribers = (0, _underscore.without)($scope.subscribers, subscriber);\n      if (destination) {\n        $scope.destinations.push(destination);\n      } else if (user.id === currentUser.id) {\n        $scope.destinations.push({ user: { name: currentUser.name } });\n      }\n\n      if ($scope.destinations.length === 1) {\n        $scope.newSubscription.destination = $scope.destinations[0];\n      }\n    }, function () {\n      toastr.error('Failed unsubscribing.');\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('alertSubscriptions', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        alertId: '='\n      },\n      template: _alertSubscriptions2.default,\n      controller: controller\n    };\n  });\n}\n\n/***/ }),\n/* 375 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"p-5\\\">\\n  <h4>Notifications</h4>\\n\\n  <div>\\n    <ui-select ng-model=\\\"newSubscription.destination\\\" ng-disabled=\\\"destinations.length == 0\\\">\\n      <ui-select-match><span ng-bind-html=\\\"destinationsDisplay($select.selected)\\\"></span></ui-select-match>\\n      <ui-select-choices repeat=\\\"d in destinations\\\">\\n        <span ng-bind-html=\\\"destinationsDisplay(d)\\\"></span>\\n      </ui-select-choices>\\n    </ui-select>\\n  </div>\\n  <div class=\\\"m-t-5\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"saveSubscriber()\\\" ng-disabled=\\\"destinations.length == 0\\\" style=\\\"width:50%;\\\">Add</button>\\n    <span class=\\\"pull-right m-t-5\\\">\\n      <a href=\\\"destinations/new\\\" ng-if=\\\"currentUser.isAdmin\\\">Create New Destination</a>\\n    </span>\\n  </div>\\n\\n  <hr/>\\n\\n  <div>\\n    <div class=\\\"list-group-item\\\" ng-repeat=\\\"subscriber in subscribers\\\">\\n      <span ng-bind-html=\\\"destinationsDisplay(subscriber)\\\"></span>\\n      <button class=\\\"btn btn-xs btn-danger pull-right\\\" ng-click=\\\"unsubscribe(subscriber)\\\" ng-if=\\\"currentUser.isAdmin || currentUser.id == subscriber.user.id\\\">Remove</button>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 376 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _redash_icon_small = __webpack_require__(70);\n\nvar _redash_icon_small2 = _interopRequireDefault(_redash_icon_small);\n\nvar _appHeader = __webpack_require__(377);\n\nvar _appHeader2 = _interopRequireDefault(_appHeader);\n\n__webpack_require__(378);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ncontroller.$inject = ['$rootScope', '$location', '$uibModal', 'Auth', 'currentUser', 'clientConfig', 'Dashboard'];\n\n\nvar logger = (0, _debug2.default)('redash:appHeader');\n\nfunction controller($rootScope, $location, $uibModal, Auth, currentUser, clientConfig, Dashboard) {\n  var _this = this;\n\n  this.logoUrl = _redash_icon_small2.default;\n  this.basePath = clientConfig.basePath;\n  this.currentUser = currentUser;\n  this.showQueriesMenu = currentUser.hasPermission('view_query');\n  this.showAlertsLink = currentUser.hasPermission('list_alerts');\n  this.showNewQueryMenu = currentUser.hasPermission('create_query');\n  this.showSettingsMenu = currentUser.hasPermission('list_users');\n  this.showDashboardsMenu = currentUser.hasPermission('list_dashboards');\n\n  this.reloadDashboards = function () {\n    logger('Reloading dashboards.');\n    _this.dashboards = Dashboard.recent();\n  };\n\n  this.reloadDashboards();\n\n  $rootScope.$on('reloadDashboards', this.reloadDashboards);\n\n  this.newDashboard = function () {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: function dashboard() {\n          return { name: null, layout: null };\n        }\n      }\n    });\n  };\n\n  this.searchQueries = function () {\n    $location.path('/queries/search').search({ q: _this.term });\n  };\n\n  this.logout = function () {\n    Auth.logout();\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.component('appHeader', {\n    template: _appHeader2.default,\n    controller: controller\n  });\n}\n\n/***/ }),\n/* 377 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<nav class=\\\"navbar navbar-inverse navbar-fixed-top app-header\\\" role=\\\"navigation\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"isNavOpen = !isNavOpen\\\">\\n        <span class=\\\"sr-only\\\">Toggle navigation</span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n      </button>\\n      <a class=\\\"navbar-brand\\\" ng-href=\\\"{{$ctrl.basePath}}\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n    <div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"!isNavOpen\\\">\\n      <ul class=\\\"nav navbar-nav\\\">\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showDashboardsMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle title=\\\"Dashboards\\\">\\n            <span class=\\\"visible-xs visible-md visible-lg\\\">Dashboards <b class=\\\"caret\\\"></b></span>\\n            <span class=\\\"visible-sm\\\"><i class=\\\"zmdi zmdi-view-dashboard\\\"></i> <b class=\\\"caret\\\"></b></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li><a ng-show=\\\"$ctrl.currentUser.hasPermission('create_dashboard')\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard</a></li>\\n            <li><a href=\\\"dashboards\\\">Dashboards</a></li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.dashboards | notEmpty\\\"></li>\\n            <li ng-repeat=\\\"dashboard in $ctrl.dashboards\\\">\\n              <a href=\\\"dashboard/{{dashboard.slug}}\\\" ng-bind=\\\"dashboard.name\\\"></a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showQueriesMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle>Queries <b class=\\\"caret\\\"></b></a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-show=\\\"$ctrl.showNewQueryMenu\\\"><a href=\\\"queries/new\\\">New Query</a></li>\\n            <li><a href=\\\"queries\\\">Queries</a></li>\\n          </ul>\\n        </li>\\n        <li ng-if=\\\"$ctrl.showAlertsLink\\\">\\n          <a href=\\\"alerts\\\">Alerts</a>\\n        </li>\\n      </ul>\\n      <form class=\\\"navbar-form navbar-left\\\" role=\\\"search\\\" ng-submit=\\\"$ctrl.searchQueries()\\\">\\n        <div class=\\\"input-group menu-search\\\">\\n          <input type=\\\"text\\\" ng-model=\\\"$ctrl.term\\\" class=\\\"form-control\\\" placeholder=\\\"Search queries...\\\">\\n          <span class=\\\"input-group-btn\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default\\\"><span class=\\\"zmdi zmdi-search\\\"></span></button>\\n          </span>\\n        </div>\\n      </form>\\n      <ul class=\\\"nav navbar-nav navbar-right\\\">\\n        <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n          <a href=\\\"data_sources\\\" title=\\\"Data Sources\\\"><i class=\\\"fa fa-database\\\"></i></a>\\n        </li>\\n        <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n          <a href=\\\"users\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a>\\n        </li>\\n        <li class=\\\"dropdown\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle><span ng-bind=\\\"$ctrl.currentUser.name\\\"></span> <span\\n            class=\\\"caret\\\"></span></a>\\n          <ul class=\\\"dropdown-menu\\\" dropdown-menu>\\n            <li style=\\\"width:300px\\\">\\n              <a ng-href=\\\"users/{{$ctrl.currentUser.id}}\\\">\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-sm-2\\\">\\n                    <img ng-src=\\\"{{$ctrl.currentUser.gravatar_url}}\\\" size=\\\"40px\\\" class=\\\"img-circle\\\" />\\n                  </div>\\n                  <div class=\\\"col-sm-10\\\">\\n                    <p><strong>{{$ctrl.currentUser.name}}</strong></p>\\n                  </div>\\n                </div>\\n              </a>\\n            </li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\">\\n              <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n              <li class=\\\"divider\\\">\\n              </li>\\n              <li>\\n                <a ng-click=\\\"$ctrl.logout()\\\">Log out</a>\\n              </li>\\n          </ul>\\n          </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\"\n\n/***/ }),\n/* 378 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 379 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nfunction cancelQueryButton() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryId: '=',\n      taskId: '='\n    },\n    transclude: true,\n    template: '<button class=\"btn btn-default\" ng-disabled=\"inProgress\" ng-click=\"cancelExecution()\"><i class=\"zmdi zmdi-spinner zmdi-hc-spin\" ng-if=\"inProgress\"></i> Cancel</button>',\n    replace: true,\n    controller: ['$scope', '$http', 'currentUser', 'Events', function controller($scope, $http, currentUser, Events) {\n      $scope.inProgress = false;\n\n      $scope.cancelExecution = function () {\n        $http.delete('api/jobs/' + $scope.taskId).success(function () {});\n\n        var queryId = $scope.queryId;\n        if ($scope.queryId === 'adhoc') {\n          queryId = null;\n        }\n\n        Events.record('cancel_execute', 'query', queryId, { admin: true });\n        $scope.inProgress = true;\n      };\n    }]\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('cancelQueryButton', cancelQueryButton);\n}\n\n/***/ }),\n/* 380 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _addWidgetDialog = __webpack_require__(381);\n\nvar _addWidgetDialog2 = _interopRequireDefault(_addWidgetDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AddWidgetDialog = {\n  template: _addWidgetDialog2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['$sce', 'toastr', 'Query', 'Widget', function controller($sce, toastr, Query, Widget) {\n    'ngInject';\n\n    var _this = this;\n\n    this.dashboard = this.resolve.dashboard;\n    this.saveInProgress = false;\n    this.widgetSize = 1;\n    this.selectedVis = null;\n    this.query = {};\n    this.selected_query = undefined;\n    this.text = '';\n    this.existing_text = '';\n    this.new_text = '';\n    this.widgetSizes = [{\n      name: 'Regular',\n      value: 1\n    }, {\n      name: 'Double',\n      value: 2\n    }];\n\n    this.type = 'visualization';\n\n    this.trustAsHtml = function (html) {\n      return $sce.trustAsHtml(html);\n    };\n    this.isVisualization = function () {\n      return _this.type === 'visualization';\n    };\n    this.isTextBox = function () {\n      return _this.type === 'textbox';\n    };\n\n    this.setType = function (type) {\n      _this.type = type;\n      if (type === 'textbox') {\n        _this.widgetSizes.push({ name: 'Hidden', value: 0 });\n      } else if (_this.widgetSizes.length > 2) {\n        _this.widgetSizes.pop();\n      }\n    };\n\n    this.onQuerySelect = function () {\n      if (!_this.query.selected) {\n        return;\n      }\n\n      Query.get({ id: _this.query.selected.id }, function (query) {\n        if (query) {\n          _this.selected_query = query;\n          if (query.visualizations.length) {\n            _this.selectedVis = query.visualizations[0];\n          }\n        }\n      });\n    };\n\n    this.searchQueries = function (term) {\n      if (!term || term.length < 3) {\n        return;\n      }\n\n      Query.search({ q: term }, function (results) {\n        _this.queries = results;\n      });\n    };\n\n    this.saveWidget = function () {\n      _this.saveInProgress = true;\n      var widget = new Widget({\n        visualization_id: _this.selectedVis && _this.selectedVis.id,\n        dashboard_id: _this.dashboard.id,\n        options: {},\n        width: _this.widgetSize,\n        text: _this.text\n      });\n\n      widget.$save().then(function (response) {\n        // update dashboard layout\n        _this.dashboard.layout = response.layout;\n        _this.dashboard.version = response.version;\n        var newWidget = new Widget(response.widget);\n        if (response.new_row) {\n          _this.dashboard.widgets.push([newWidget]);\n        } else {\n          _this.dashboard.widgets[_this.dashboard.widgets.length - 1].push(newWidget);\n        }\n        _this.close();\n      }).catch(function () {\n        toastr.error('Widget can not be added');\n      }).finally(function () {\n        _this.saveInProgress = false;\n      });\n    };\n  }]\n};\n\nfunction init(ngModule) {\n  ngModule.component('addWidgetDialog', AddWidgetDialog);\n}\n\n/***/ }),\n/* 381 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\" ng-click=\\\"$ctrl.dismiss()\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Add Widget</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p class=\\\"btn-group\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isVisualization()}\\\" ng-click=\\\"$ctrl.setType('visualization')\\\">Visualization</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isTextBox()}\\\" ng-click=\\\"$ctrl.setType('textbox')\\\">Text Box</button>\\n  </p>\\n\\n  <div ng-show=\\\"$ctrl.isTextBox()\\\">\\n      <div class=\\\"form-group\\\">\\n          <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.text\\\" rows=\\\"3\\\"></textarea>\\n      </div>\\n      <div ng-show=\\\"$ctrl.text\\\">\\n          <strong>Preview:</strong>\\n          <p ng-bind-html=\\\"$ctrl.text | markdown\\\"></p>\\n      </div>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.isVisualization()\\\">\\n      <div class=\\\"form-group\\\">\\n          <ui-select ng-model=\\\"$ctrl.query.selected\\\" theme=\\\"bootstrap\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelect($item, $model)\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                  <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n          </ui-select>\\n      </div>\\n\\n      <div ng-show=\\\"$ctrl.selected_query\\\">\\n          <div class=\\\"form-group\\\">\\n              <label for=\\\"\\\">Choose Visualization</label>\\n              <select ng-model=\\\"$ctrl.selectedVis\\\" ng-options=\\\"vis as vis.name group by vis.type for vis in $ctrl.selected_query.visualizations\\\" class=\\\"form-control\\\"></select>\\n          </div>\\n      </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n      <label for=\\\"\\\">Widget Size</label>\\n      <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.widgetSize\\\"\\n              ng-options=\\\"c.value as c.name for c in $ctrl.widgetSizes\\\"></select>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !($ctrl.selectedVis || $ctrl.isTextBox())\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Add to Dashboard</button>\\n</div>\\n\"\n\n/***/ }),\n/* 382 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _editDashboardDialog = __webpack_require__(383);\n\nvar _editDashboardDialog2 = _interopRequireDefault(_editDashboardDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EditDashboardDialog = {\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  template: _editDashboardDialog2.default,\n  controller: ['$rootScope', '$location', '$http', 'toastr', 'Events', 'Dashboard', function controller($rootScope, $location, $http, toastr, Events, Dashboard) {\n    'ngInject';\n\n    var _this = this;\n\n    this.dashboard = this.resolve.dashboard;\n    this.gridsterOptions = {\n      margins: [5, 5],\n      rowHeight: 100,\n      colWidth: 260,\n      columns: 2,\n      mobileModeEnabled: false,\n      swapping: true,\n      minRows: 1,\n      draggable: {\n        enabled: true\n      },\n      resizable: {\n        enabled: false\n      }\n    };\n\n    this.items = [];\n\n    if (this.dashboard.widgets) {\n      this.dashboard.widgets.forEach(function (row, rowIndex) {\n        row.forEach(function (widget, colIndex) {\n          _this.items.push({\n            id: widget.id,\n            col: colIndex,\n            row: rowIndex,\n            sizeY: 1,\n            sizeX: widget.width,\n            name: widget.getName() // visualization.query.name\n          });\n        });\n      });\n    }\n\n    this.isFormValid = function () {\n      return !(0, _underscore.isEmpty)(_this.dashboard.name);\n    };\n\n    this.saveDashboard = function () {\n      _this.saveInProgress = true;\n\n      if (_this.dashboard.id) {\n        var layout = [];\n        var sortedItems = (0, _underscore.sortBy)(_this.items, function (item) {\n          return item.row * 10 + item.col;\n        });\n\n        sortedItems.forEach(function (item) {\n          layout[item.row] = layout[item.row] || [];\n          if (item.col > 0 && layout[item.row][item.col - 1] === undefined) {\n            layout[item.row][item.col - 1] = item.id;\n          } else {\n            layout[item.row][item.col] = item.id;\n          }\n        });\n\n        var request = {\n          slug: _this.dashboard.id,\n          name: _this.dashboard.name,\n          version: _this.dashboard.version,\n          dashboard_filters_enabled: _this.dashboard.dashboard_filters_enabled,\n          layout: JSON.stringify(layout)\n        };\n\n        Dashboard.save(request, function (dashboard) {\n          _this.dashboard = dashboard;\n          _this.saveInProgress = false;\n          _this.close({ $value: _this.dashboard });\n          $rootScope.$broadcast('reloadDashboards');\n        }, function (error) {\n          _this.saveInProgress = false;\n          if (error.status === 403) {\n            toastr.error('Unable to save dashboard: Permission denied.');\n          } else if (error.status === 409) {\n            toastr.error('It seems like the dashboard has been modified by another user. ' + 'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n          }\n        });\n        Events.record('edit', 'dashboard', _this.dashboard.id);\n      } else {\n        $http.post('api/dashboards', {\n          name: _this.dashboard.name\n        }).success(function (response) {\n          _this.close();\n          $location.path('/dashboard/' + response.slug).replace();\n        });\n        Events.record('create', 'dashboard');\n      }\n    };\n  }]\n};\n\nfunction init(ngModule) {\n  ngModule.component('editDashboardDialog', EditDashboardDialog);\n}\n\n/***/ }),\n/* 383 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"$ctrl.dismiss()\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Edit: {{$ctrl.dashboard.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Dashboard Name\\\" ng-model=\\\"$ctrl.dashboard.name\\\" autofocus>\\n  </p>\\n\\n  <p ng-if=\\\"$ctrl.dashboard.id\\\">\\n    <label>\\n        <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\">\\n        Use Dashboard Level Filters\\n    </label>\\n  </p>\\n\\n  <div gridster=\\\"$ctrl.gridsterOptions\\\" ng-if=\\\"$ctrl.items | notEmpty\\\">\\n    <ul>\\n      <li gridster-item=\\\"item\\\" ng-repeat=\\\"item in $ctrl.items\\\" class=\\\"widget panel panel-default gs-w\\\">\\n        <div class=\\\"heading\\\">{{item.name}}</div>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !$ctrl.isFormValid()\\\" ng-click=\\\"$ctrl.saveDashboard()\\\">Save</button>\\n</div>\\n\"\n\n/***/ }),\n/* 384 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _widget = __webpack_require__(385);\n\nvar _widget2 = _interopRequireDefault(_widget);\n\nvar _editTextBox = __webpack_require__(386);\n\nvar _editTextBox2 = _interopRequireDefault(_editTextBox);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDashboardWidgetCtrl.$inject = ['$location', '$uibModal', '$window', 'Events', 'currentUser'];\n\n\nvar EditTextBoxComponent = {\n  template: _editTextBox2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['toastr', function controller(toastr) {\n    'ngInject';\n\n    var _this = this;\n\n    this.saveInProgress = false;\n    this.widget = this.resolve.widget;\n    this.saveWidget = function () {\n      _this.saveInProgress = true;\n      if (_this.widget.new_text !== _this.widget.existing_text) {\n        _this.widget.text = _this.widget.new_text;\n        _this.widget.$save().then(function () {\n          _this.close();\n        }).catch(function () {\n          toastr.error('Widget can not be updated');\n        }).finally(function () {\n          _this.saveInProgress = false;\n        });\n      } else {\n        _this.close();\n      }\n    };\n  }]\n};\n\nfunction DashboardWidgetCtrl($location, $uibModal, $window, Events, currentUser) {\n  var _this2 = this;\n\n  this.canViewQuery = currentUser.hasPermission('view_query');\n\n  this.editTextBox = function () {\n    _this2.widget.existing_text = _this2.widget.text;\n    _this2.widget.new_text = _this2.widget.text;\n    $uibModal.open({\n      component: 'editTextBox',\n      resolve: {\n        widget: _this2.widget\n      }\n    });\n  };\n\n  this.localParametersDefs = function () {\n    if (!_this2.localParameters) {\n      _this2.localParameters = _this2.widget.query.getParametersDefs().filter(function (p) {\n        return !p.global;\n      });\n    }\n    return _this2.localParameters;\n  };\n\n  this.deleteWidget = function () {\n    if (!$window.confirm('Are you sure you want to remove \"' + _this2.widget.getName() + '\" from the dashboard?')) {\n      return;\n    }\n\n    Events.record('delete', 'widget', _this2.widget.id);\n\n    _this2.widget.$delete(function (response) {\n      _this2.dashboard.widgets = _this2.dashboard.widgets.map(function (row) {\n        return row.filter(function (widget) {\n          return widget.id !== undefined;\n        });\n      });\n\n      _this2.dashboard.widgets = _this2.dashboard.widgets.filter(function (row) {\n        return row.length > 0;\n      });\n\n      _this2.dashboard.layout = response.layout;\n      _this2.dashboard.version = response.version;\n\n      if (_this2.deleted) {\n        _this2.deleted({});\n      }\n    });\n  };\n\n  Events.record('view', 'widget', this.widget.id);\n\n  this.reload = function (force) {\n    var maxAge = $location.search().maxAge;\n    if (force) {\n      maxAge = 0;\n    }\n    _this2.queryResult = _this2.query.getQueryResult(maxAge);\n  };\n\n  if (this.widget.visualization) {\n    Events.record('view', 'query', this.widget.visualization.query.id, { dashboard: true });\n    Events.record('view', 'visualization', this.widget.visualization.id, { dashboard: true });\n\n    this.query = this.widget.getQuery();\n    this.reload(false);\n\n    this.type = 'visualization';\n  } else if (this.widget.restricted) {\n    this.type = 'restricted';\n  } else {\n    this.type = 'textbox';\n  }\n}\n\nfunction init(ngModule) {\n  ngModule.component('editTextBox', EditTextBoxComponent);\n  ngModule.component('dashboardWidget', {\n    template: _widget2.default,\n    controller: DashboardWidgetCtrl,\n    bindings: {\n      widget: '<',\n      public: '<',\n      dashboard: '<',\n      deleted: '&onDelete'\n    }\n  });\n}\n\n/***/ }),\n/* 385 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"col-lg-{{$ctrl.widget.width | colWidth}}\\\">\\n    <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='visualization'\\\">\\n        <div class=\\\"t-header widget\\\">\\n            <div class=\\\"th-title\\\">\\n                <p class=\\\"hidden-print\\\">\\n                    <span ng-hide=\\\"$ctrl.canViewQuery\\\">{{$ctrl.query.name}}</span>\\n                    <query-link query=\\\"$ctrl.query\\\" visualization=\\\"$ctrl.widget.visualization\\\" ng-show=\\\"$ctrl.canViewQuery\\\"></query-link>\\n                    <small><visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/></small>\\n                </p>\\n                <p class=\\\"visible-print\\\">\\n                  {{$ctrl.query.name}}\\n                  <visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/>\\n                </p>\\n                <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n            </div>\\n          <div class=\\\"actions dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public\\\">\\n            <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n\\n            <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">Download as CSV File</a></li>\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\" target=\\\"_self\\\">Download as Excel File</a></li>\\n              <li><a ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.widget.visualization.id}}\\\" ng-show=\\\"$ctrl.canViewQuery\\\">View Query</a></li>\\n              <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <parameters parameters=\\\"$ctrl.localParametersDefs()\\\"></parameters>\\n\\n        <div ng-switch=\\\"$ctrl.queryResult.getStatus()\\\">\\n          <div ng-switch-when=\\\"failed\\\">\\n            <div class=\\\"alert alert-danger m-5\\\" ng-show=\\\"$ctrl.queryResult.getError()\\\">Error running query: <strong>{{$ctrl.queryResult.getError()}}</strong></div>\\n          </div>\\n          <div ng-switch-when=\\\"done\\\">\\n              <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\"></visualization-renderer>\\n          </div>\\n          <div ng-switch-default class=\\\"text-center\\\">\\n            <i class=\\\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\\\"></i>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"p-5 clearfix\\\" style=\\\"line-height:28px;\\\">\\n            <span class=\\\"small hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n            <span class=\\\"visible-print\\\">\\n              Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}\\n            </span>\\n            <button class=\\\"btn btn-sm btn-default pull-right hidden-print\\\" ng-click=\\\"$ctrl.reload(true)\\\" ng-if=\\\"!$ctrl.public\\\"><i class=\\\"zmdi zmdi-refresh\\\"></i></button>\\n        </div>\\n    </div>\\n\\n  <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='restricted'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"text-center\\\">\\n        <h1><span class=\\\"zmdi zmdi-lock\\\"></span></h1>\\n        <p class=\\\"text-muted\\\">\\n          This widget requires access to a data source you don't have access to.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\" ng-hide=\\\"$ctrl.widget.width === 0\\\" ng-if=\\\"$ctrl.type=='textbox'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n        <div class=\\\"dropdown-header\\\">\\n          <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle class=\\\"actions\\\"><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n        </div>\\n\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.editTextBox()\\\">Edit</a></li>\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n        </ul>\\n      </div>\\n      <p ng-bind-html=\\\"$ctrl.widget.text | markdown\\\" class=\\\"p-5\\\"></p>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 386 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Edit TextBox</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"form-group\\\">\\n    <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.widget.new_text\\\" rows=\\\"3\\\"></textarea>\\n  </div>\\n  <div ng-show=\\\"$ctrl.widget.new_text\\\">\\n    <strong>Preview:</strong>\\n    <p ng-bind-html=\\\"$ctrl.widget.new_text | markdown\\\"></p>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Save</button>\\n</div>\\n\"\n\n/***/ }),\n/* 387 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _endsWith = __webpack_require__(388);\n\nvar _endsWith2 = _interopRequireDefault(_endsWith);\n\nvar _dynamicForm = __webpack_require__(389);\n\nvar _dynamicForm2 = _interopRequireDefault(_dynamicForm);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDynamicForm.$inject = ['$http', 'toastr', '$q'];\n\n\nfunction DynamicForm($http, toastr, $q) {\n  function orderedInputs(properties, order) {\n    var inputs = new Array(order.length);\n    Object.keys(properties).forEach(function (key) {\n      var position = order.indexOf(key);\n      var input = { name: key, property: properties[key] };\n      if (position > -1) {\n        inputs[position] = input;\n      } else {\n        inputs.push(input);\n      }\n    });\n    return inputs;\n  }\n\n  return {\n    restrict: 'E',\n    replace: 'true',\n    transclude: true,\n    template: _dynamicForm2.default,\n    scope: {\n      target: '=',\n      type: '@type',\n      actions: '='\n    },\n    link: function link($scope) {\n      function setType(types) {\n        if ($scope.target.type === undefined) {\n          $scope.target.type = types[0].type;\n        }\n\n        var type = (0, _underscore.find)(types, function (t) {\n          return t.type === $scope.target.type;\n        });\n        var configurationSchema = type.configuration_schema;\n\n        $scope.fields = orderedInputs(configurationSchema.properties, configurationSchema.order || []);\n\n        return type;\n      }\n\n      $scope.inProgressActions = {};\n      if ($scope.actions) {\n        $scope.actions.forEach(function (action) {\n          var originalCallback = action.callback;\n          var name = action.name;\n          action.callback = function () {\n            action.name = '<i class=\"zmdi zmdi-spinner zmdi-hc-spin\"></i> ' + name;\n\n            $scope.inProgressActions[action.name] = true;\n            function release() {\n              $scope.inProgressActions[action.name] = false;\n              action.name = name;\n            }\n\n            originalCallback(release);\n          };\n        });\n      }\n\n      $scope.files = {};\n\n      $scope.$watchCollection('files', function () {\n        (0, _underscore.each)($scope.files, function (v, k) {\n          // THis is needed because angular-base64-upload sets the value to null at initialization,\n          // causing the field to be marked as dirty even if it wasn't changed.\n          if (!v && $scope.target.options[k]) {\n            $scope.dataSourceForm.$setPristine();\n          }\n          if (v) {\n            $scope.target.options[k] = v.base64;\n          }\n        });\n      });\n\n      var typesPromise = $http.get('api/' + $scope.type + '/types');\n\n      $q.all([typesPromise, $scope.target.$promise]).then(function (responses) {\n        var types = responses[0].data;\n        setType(types);\n\n        $scope.types = types;\n\n        types.forEach(function (type) {\n          (0, _underscore.each)(type.configuration_schema.properties, function (prop, name) {\n            if (name === 'password' || name === 'passwd') {\n              prop.type = 'password';\n            }\n\n            if ((0, _endsWith2.default)(name, 'File')) {\n              prop.type = 'file';\n            }\n\n            if (prop.type === 'boolean') {\n              prop.type = 'checkbox';\n            }\n\n            prop.required = (0, _underscore.contains)(type.configuration_schema.required, name);\n          });\n        });\n\n        $scope.$watch('target.type', function (current, prev) {\n          if (prev !== current) {\n            if (prev !== undefined) {\n              $scope.target.options = {};\n            }\n\n            var type = setType($scope.types);\n\n            if (Object.keys($scope.target.options).length === 0) {\n              var properties = type.configuration_schema.properties;\n              Object.keys(properties).forEach(function (property) {\n                if (!(0, _underscore.isUndefined)(properties[property].default)) {\n                  $scope.target.options[property] = properties[property].default;\n                }\n              });\n            }\n          }\n        });\n      });\n\n      $scope.saveChanges = function () {\n        $scope.target.$save(function () {\n          toastr.success('Saved.');\n          $scope.dataSourceForm.$setPristine();\n        }, function (error) {\n          if (error.status === 400 && 'message' in error.data) {\n            toastr.error(error.data.message);\n          } else {\n            toastr.error('Failed saving.');\n          }\n        });\n      };\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('dynamicForm', DynamicForm);\n}\n\n/***/ }),\n/* 388 */,\n/* 389 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<form name=\\\"dataSourceForm\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"type\\\">Type</label>\\n        <select name=\\\"type\\\" class=\\\"form-control\\\" ng-options=\\\"type.type as type.name for type in types\\\" ng-model=\\\"target.type\\\" autofocus></select>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"dataSourceName\\\">Name</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" name=\\\"dataSourceName\\\" ng-model=\\\"target.name\\\" required>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-class='{\\\"has-error\\\": !inner.input.$valid}' ng-form=\\\"inner\\\" ng-repeat=\\\"field in fields\\\">\\n        <label ng-if=\\\"field.property.type !== 'checkbox'\\\">{{field.property.title || field.name | capitalize}}</label>\\n        <input name=\\\"input\\\" type=\\\"{{field.property.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"target.options[field.name]\\\" ng-required=\\\"field.property.required\\\"\\n               ng-if=\\\"field.property.type !== 'file' && field.property.type !== 'checkbox'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{field.property.default}}\\\">\\n\\n        <label ng-if=\\\"field.property.type=='checkbox'\\\">\\n            <input name=\\\"input\\\" type=\\\"{{field.property.type}}\\\" ng-model=\\\"target.options[field.name]\\\" ng-required=\\\"field.property.required\\\"\\n                   ng-if=\\\"field.property.type !== 'file'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{field.property.default}}\\\">\\n            {{field.property.title || field.name | capitalize}}\\n        </label>\\n\\n        <input name=\\\"input\\\" type=\\\"file\\\" class=\\\"form-control\\\" ng-model=\\\"files[field.name]\\\" ng-required=\\\"field.property.required && !target.options[field.name]\\\"\\n               base-sixty-four-input\\n               ng-if=\\\"field.property.type === 'file'\\\">\\n    </div>\\n\\n    <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!dataSourceForm.$valid\\\" ng-click=\\\"saveChanges()\\\">Save</button>\\n    <span ng-repeat=\\\"action in actions\\\">\\n        <button class=\\\"btn\\\"\\n                ng-class=\\\"action.class\\\"\\n                ng-if=\\\"target.id\\\"\\n                ng-disabled=\\\"(action.disableWhenDirty && dataSourceForm.$dirty) || inProgressActions[action.name]\\\"\\n                ng-click=\\\"action.callback()\\\" ng-bind-html=\\\"action.name\\\"></button>\\n    </span>\\n\\n    <span ng-transclude>\\n\\n    </span>\\n</form>\\n\"\n\n/***/ }),\n/* 390 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _dynamicTable = __webpack_require__(391);\n\nvar _dynamicTable2 = _interopRequireDefault(_dynamicTable);\n\n__webpack_require__(392);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDynamicTable.$inject = ['$sanitize'];\n\n\nfunction DynamicTable($sanitize) {\n  'ngInject';\n\n  var _this = this;\n\n  this.itemsPerPage = this.count = 15;\n  this.page = 1;\n  this.rowsCount = 0;\n  this.orderByField = undefined;\n  this.orderByReverse = false;\n\n  this.pageChanged = function () {\n    var first = _this.count * (_this.page - 1);\n    var last = _this.count * _this.page;\n\n    _this.rowsToDisplay = _this.rows.slice(first, last);\n  };\n\n  this.$onChanges = function (changes) {\n    if (changes.columns) {\n      _this.columns = changes.columns.currentValue;\n    }\n\n    if (changes.rows) {\n      _this.rows = changes.rows.currentValue;\n    }\n\n    _this.rowsCount = _this.rows.length;\n\n    _this.pageChanged();\n  };\n\n  this.orderBy = function (column) {\n    if (column === _this.orderByField) {\n      _this.orderByReverse = !_this.orderByReverse;\n    } else {\n      _this.orderByField = column;\n      _this.orderByReverse = false;\n    }\n\n    if (_this.orderByField) {\n      _this.rows = (0, _underscore.sortBy)(_this.rows, _this.orderByField.name);\n      if (_this.orderByReverse) {\n        _this.rows = _this.rows.reverse();\n      }\n      _this.pageChanged();\n    }\n  };\n\n  this.sanitize = function (value) {\n    return $sanitize(value);\n  };\n\n  this.sortIcon = function (column) {\n    if (column !== _this.orderByField) {\n      return null;\n    }\n\n    if (_this.orderByReverse) {\n      return 'desc';\n    }\n\n    return 'asc';\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.component('dynamicTable', {\n    template: _dynamicTable2.default,\n    controller: DynamicTable,\n    bindings: {\n      rows: '<',\n      columns: '<',\n      count: '<'\n    }\n  });\n}\n\n/***/ }),\n/* 391 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n  <table class=\\\"table table-condensed table-hover\\\">\\n    <thead>\\n    <tr>\\n      <th ng-repeat=\\\"column in $ctrl.columns\\\" ng-click=\\\"$ctrl.orderBy(column)\\\" class=\\\"sortable-column\\\">\\n        {{column.title}} <span ng-if=\\\"$ctrl.sortIcon(column)\\\"><i class=\\\"fa fa-sort-{{$ctrl.sortIcon(column)}}\\\"></i></span>\\n      </th>\\n    </tr>\\n\\n    </thead>\\n    <tbody>\\n    <tr ng-repeat=\\\"row in $ctrl.rowsToDisplay\\\">\\n      <td ng-repeat=\\\"column in $ctrl.columns\\\" ng-bind-html=\\\"$ctrl.sanitize(column.formatFunction(row[column.name]))\\\">\\n      </td>\\n    </tr>\\n    </tbody>\\n  </table>\\n</div>\\n<div class=\\\"text-center\\\">\\n  <ul uib-pagination total-items=\\\"$ctrl.rowsCount\\\"\\n      items-per-page=\\\"$ctrl.itemsPerPage\\\"\\n      ng-model=\\\"$ctrl.page\\\"\\n      max-size=\\\"6\\\"\\n      class=\\\"pagination\\\"\\n      boundary-link-numbers=\\\"true\\\"\\n      rotate=\\\"false\\\"\\n      next-text='>'\\n      previous-text='<'\\n      ng-change=\\\"$ctrl.pageChanged()\\\"></ul>\\n</div>\\n\"\n\n/***/ }),\n/* 392 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 393 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _jquery = __webpack_require__(14);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _underscore = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// From: http://jsfiddle.net/joshdmiller/NDFHg/\nfunction EditInPlace() {\n  return {\n    restrict: 'E',\n    scope: {\n      value: '=',\n      ignoreBlanks: '=',\n      editable: '=',\n      done: '='\n    },\n    template: function template(tElement, tAttrs) {\n      var elType = tAttrs.editor || 'input';\n      var placeholder = tAttrs.placeholder || 'Click to edit';\n\n      var viewMode = '';\n\n      if (tAttrs.markdown === 'true') {\n        viewMode = '<span ng-click=\"editable && edit()\" ng-bind-html=\"value|markdown\" ng-class=\"{editable: editable}\"></span>';\n      } else {\n        viewMode = '<span ng-click=\"editable && edit()\" ng-bind=\"value\" ng-class=\"{editable: editable}\"></span>';\n      }\n\n      var placeholderSpan = '<span ng-click=\"editable && edit()\"\\n                                     ng-show=\"editable && !value\"\\n                                     ng-class=\"{editable: editable}\">' + placeholder + '</span>';\n      var editor = '<{elType} ng-model=\"value\" class=\"rd-form-control\"></{elType}>'.replace('{elType}', elType);\n\n      return viewMode + placeholderSpan + editor;\n    },\n    link: function link($scope, element) {\n      // Let's get a reference to the input element, as we'll want to reference it.\n      var inputElement = (0, _jquery2.default)(element.children()[2]);\n      var keycodeEnter = 13;\n      var keycodeEscape = 27;\n\n      // This directive should have a set class so we can style it.\n      element.addClass('edit-in-place');\n\n      // Initially, we're not editing.\n      $scope.editing = false;\n\n      // ng-click handler to activate edit-in-place\n      $scope.edit = function () {\n        $scope.oldValue = $scope.value;\n\n        $scope.editing = true;\n\n        // We control display through a class on the directive itself. See the CSS.\n        element.addClass('active');\n\n        // And we must focus the element.\n        // `angular.element()` provides a chainable array, like jQuery so to access\n        // a native DOM function, we have to reference the first element in the array.\n        inputElement[0].focus();\n      };\n\n      function save() {\n        if ($scope.editing) {\n          if ($scope.ignoreBlanks && (0, _underscore.isEmpty)($scope.value)) {\n            $scope.value = $scope.oldValue;\n          }\n          $scope.editing = false;\n          element.removeClass('active');\n\n          if ($scope.value !== $scope.oldValue) {\n            if ($scope.done) {\n              $scope.done();\n            }\n          }\n        }\n      }\n\n      (0, _jquery2.default)(inputElement).keydown(function (e) {\n        // 'return' or 'enter' key pressed\n        // allow 'shift' to break lines\n        if (e.which === keycodeEnter && !e.shiftKey) {\n          e.preventDefault();\n          save();\n        } else if (e.which === keycodeEscape) {\n          $scope.value = $scope.oldValue;\n          $scope.$apply(function () {\n            (0, _jquery2.default)(inputElement[0]).blur();\n          });\n        }\n      }).blur(function () {\n        save();\n      });\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('editInPlace', EditInPlace);\n}\n\n/***/ }),\n/* 394 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\ncontroller.$inject = ['clientConfig', 'currentUser'];\nfunction controller(clientConfig, currentUser) {\n  this.showMailWarning = clientConfig.mailSettingsMissing && currentUser.isAdmin;\n}\n\nfunction init(ngModule) {\n  ngModule.component('emailSettingsWarning', {\n    bindings: {\n      function: '<'\n    },\n    template: '<p class=\"alert alert-danger\" ng-if=\"$ctrl.showMailWarning\">It looks like your mail server isn\\'t configured. Make sure to configure it for the {{$ctrl.function}} to work.</p>',\n    controller: controller\n  });\n}\n\n/***/ }),\n/* 395 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nvar ErrorMessagesComponent = {\n  template: '\\n  <div class=\"help-block\" ng-messages=\"$ctrl.input.$error\" ng-show=\"$ctrl.input.$touched || $ctrl.form.$submitted\">\\n    <span class=\"error\" ng-message=\"required\">This field is required.</span>\\n    <span class=\"error\" ng-message=\"minlength\">This field is too short.</span>\\n    <span class=\"error\" ng-message=\"email\">This needs to be a valid email.</span>\\n  </div>\\n  ',\n  replace: true,\n  bindings: {\n    input: '<',\n    form: '<'\n  },\n  controller: function controller() {}\n};\n\nfunction init(ngModule) {\n  ngModule.component('errorMessages', ErrorMessagesComponent);\n}\n\n/***/ }),\n/* 396 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _filters = __webpack_require__(397);\n\nvar _filters2 = _interopRequireDefault(_filters);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar FiltersComponent = {\n  template: _filters2.default,\n  bindings: {\n    onChange: '&',\n    filters: '<'\n  },\n  controller: function controller() {\n    'ngInject';\n\n    var _this = this;\n\n    this.filterChangeListener = function (filter, modal) {\n      _this.onChange({ filter: filter, $modal: modal });\n    };\n\n    this.itemGroup = function (item) {\n      if (item === '*' || item === '-') {\n        return '';\n      }\n\n      return 'Values';\n    };\n  }\n};\n\nfunction init(ngModule) {\n  ngModule.component('filters', FiltersComponent);\n}\n\n/***/ }),\n/* 397 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"container bg-white p-5\\\" ng-show=\\\"$ctrl.filters | notEmpty\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 m-t-5\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <label>{{filter.friendlyName}}</label>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 m-t-5\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <ui-select ng-model=\\\"filter.current\\\" ng-if=\\\"!filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\" on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        remove-selected=\\\"false\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{$select.selected | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n\\n      <ui-select ng-model=\\\"filter.current\\\" multiple ng-if=\\\"filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\" remove-selected=\\\"false\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{$item | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\" group-by=\\\"$ctrl.itemGroup\\\">\\n          <span ng-if=\\\"value == '*'\\\">\\n            Select All\\n          </span>\\n          <span ng-if=\\\"value == '-'\\\">\\n            Clear\\n          </span>\\n          <span ng-if=\\\"value != '*' && value != '-'\\\">\\n            {{value | filterValue:filter }}\\n          </span>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n</div>\"\n\n/***/ }),\n/* 398 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _footer = __webpack_require__(399);\n\nvar _footer2 = _interopRequireDefault(_footer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ncontroller.$inject = ['clientConfig', 'currentUser'];\n\n\nfunction controller(clientConfig, currentUser) {\n  this.version = clientConfig.version;\n  this.newVersionAvailable = clientConfig.newVersionAvailable && currentUser.isAdmin;\n}\n\nfunction init(ngModule) {\n  ngModule.component('footer', {\n    template: _footer2.default,\n    controller: controller\n  });\n}\n\n/***/ }),\n/* 399 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div id=\\\"footer\\\">\\n    <a href=\\\"http://redash.io\\\">Redash</a> <span ng-bind=\\\"$ctrl.version\\\"></span> <small ng-if=\\\"$ctrl.newVersionAvailable\\\" ng-cloak class=\\\"ng-cloak\\\"><a href=\\\"https://version.redash.io/\\\">(New Redash version available)</a></small>\\n\\n    <ul class=\\\"f-menu\\\">\\n        <li><a href=\\\"https://redash.io/help/\\\">Documentation</a></li>\\n        <li><a href=\\\"http://github.com/getredash/redash\\\">Contribute</a></li>\\n    </ul>\\n</div>\\n\"\n\n/***/ }),\n/* 400 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _editGroupDialog = __webpack_require__(401);\n\nvar _editGroupDialog2 = _interopRequireDefault(_editGroupDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EditGroupDialogComponent = {\n  template: _editGroupDialog2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['$location', function controller($location) {\n    'ngInject';\n\n    var _this = this;\n\n    this.group = this.resolve.group;\n    var newGroup = this.group.id === undefined;\n\n    if (newGroup) {\n      this.saveButtonText = 'Create';\n      this.title = 'Create a New Group';\n    } else {\n      this.saveButtonText = 'Save';\n      this.title = 'Edit Group';\n    }\n\n    this.ok = function () {\n      _this.group.$save(function (group) {\n        if (newGroup) {\n          $location.path('/groups/' + group.id).replace();\n          _this.close();\n        } else {\n          _this.close();\n        }\n      });\n    };\n  }]\n};\n\nfunction init(ngModule) {\n  ngModule.component('editGroupDialog', EditGroupDialogComponent);\n}\n\n/***/ }),\n/* 401 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\">{{$ctrl.title}}</h3>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <form class=\\\"form\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.group.name\\\" placeholder=\\\"Group Name\\\" class=\\\"form-control\\\" autofocus/>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.close()\\\">Cancel</button>\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.ok()\\\">{{$ctrl.saveButtonText}}</button>\\n</div>\\n\"\n\n/***/ }),\n/* 402 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\ncontroller.$inject = ['$window', '$location', 'toastr', 'currentUser'];\nfunction controller($window, $location, toastr, currentUser) {\n  var _this = this;\n\n  this.canEdit = function () {\n    return currentUser.isAdmin && _this.group.type !== 'builtin';\n  };\n\n  this.saveName = function () {\n    _this.group.$save();\n  };\n\n  this.deleteGroup = function () {\n    if ($window.confirm('Are you sure you want to delete this group?')) {\n      _this.group.$delete(function () {\n        $location.path('/groups').replace();\n        toastr.success('Group deleted successfully.');\n      });\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.component('groupName', {\n    bindings: {\n      group: '<'\n    },\n    transclude: true,\n    template: '\\n      <h2 class=\"p-l-5\">\\n        <edit-in-place editable=\"$ctrl.canEdit()\" done=\"$ctrl.saveName\" ignore-blanks=\\'true\\' value=\"$ctrl.group.name\"></edit-in-place>&nbsp;\\n        <button class=\"btn btn-xs btn-danger\" ng-if=\"$ctrl.canEdit()\" ng-click=\"$ctrl.deleteGroup()\">Delete this group</button>\\n      </h2>\\n    ',\n    replace: true,\n    controller: controller\n  });\n}\n\n/***/ }),\n/* 403 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nvar Overlay = {\n  template: '\\n  <div>\\n    <div class=\"overlay\"></div>\\n    <div style=\"width: 100%; position:absolute; top:50px; z-index:2000\">\\n      <div class=\"well well-lg\" style=\"width: 70%; margin: auto;\" ng-transclude>\\n      </div>\\n    </div>\\n  </div>\\n  ',\n  transclude: true\n};\n\nfunction init(ngModule) {\n  ngModule.component('overlay', Overlay);\n}\n\n/***/ }),\n/* 404 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _pageHeader = __webpack_require__(405);\n\nvar _pageHeader2 = _interopRequireDefault(_pageHeader);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction controller() {}\n\nfunction init(ngModule) {\n  ngModule.component('pageHeader', {\n    template: _pageHeader2.default,\n    controller: controller,\n    transclude: true,\n    bindings: {\n      title: '@'\n    }\n  });\n}\n\n/***/ }),\n/* 405 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"row bg-white p-10 p-l-15 p-r-15 m-b-10\\\">\\n  <div class=\\\"col-sm-9\\\">\\n    <h3>{{$ctrl.title}}</h3>\\n  </div>\\n  <div class=\\\"col-sm-3 text-right\\\">\\n    <h3 ng-transclude>\\n    </h3>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 406 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = init;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PaginatorCtrl = function () {\n  function PaginatorCtrl() {\n    _classCallCheck(this, PaginatorCtrl);\n\n    this.page = this.paginator.page;\n  }\n\n  _createClass(PaginatorCtrl, [{\n    key: 'pageChanged',\n    value: function pageChanged() {\n      this.paginator.setPage(this.page);\n    }\n  }]);\n\n  return PaginatorCtrl;\n}();\n\nfunction init(ngModule) {\n  ngModule.component('paginator', {\n    template: '\\n<div class=\"text-center\">\\n  <ul uib-pagination total-items=\"$ctrl.paginator.totalCount\"\\n                     items-per-page=\"$ctrl.paginator.itemsPerPage\"\\n                     ng-model=\"$ctrl.page\"\\n                     max-size=\"6\"\\n                     class=\"pagination\"\\n                     boundary-link-numbers=\"true\"\\n                     rotate=\"false\"\\n                     next-text=\\'>\\'\\n                     previous-text=\\'<\\'\\n                     ng-change=\"$ctrl.pageChanged()\"></ul>\\n</div>\\n    ',\n    bindings: {\n      paginator: '<'\n    },\n    controller: PaginatorCtrl\n  });\n}\n\n/***/ }),\n/* 407 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _parameters = __webpack_require__(408);\n\nvar _parameters2 = _interopRequireDefault(_parameters);\n\nvar _queryBasedParameter = __webpack_require__(409);\n\nvar _queryBasedParameter2 = _interopRequireDefault(_queryBasedParameter);\n\nvar _parameterSettings = __webpack_require__(410);\n\nvar _parameterSettings2 = _interopRequireDefault(_parameterSettings);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nParametersDirective.$inject = ['$location', '$uibModal'];\n\n\nvar ParameterSettingsComponent = {\n  template: _parameterSettings2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['$sce', 'Query', function controller($sce, Query) {\n    'ngInject';\n\n    var _this = this;\n\n    this.trustAsHtml = function (html) {\n      return $sce.trustAsHtml(html);\n    };\n    this.parameter = this.resolve.parameter;\n\n    if (this.parameter.queryId) {\n      Query.get({ id: this.parameter.queryId }, function (query) {\n        _this.queries = [query];\n      });\n    }\n\n    this.searchQueries = function (term) {\n      if (!term || term.length < 3) {\n        return;\n      }\n\n      Query.search({ q: term }, function (results) {\n        _this.queries = results;\n      });\n    };\n  }]\n};\n\nfunction optionsFromQueryResult(queryResult) {\n  var columns = queryResult.data.columns;\n  var numColumns = columns.length;\n  var options = [];\n  // If there are multiple columns, check if there is a column\n  // named 'name' and column named 'value'. If name column is present\n  // in results, use name from name column. Similar for value column.\n  // Default: Use first string column for name and value.\n  if (numColumns > 0) {\n    var nameColumn = null;\n    var valueColumn = null;\n    columns.forEach(function (column) {\n      var columnName = column.name.toLowerCase();\n      if (columnName === 'name') {\n        nameColumn = column.name;\n      }\n      if (columnName === 'value') {\n        valueColumn = column.name;\n      }\n      // Assign first string column as name and value column.\n      if (nameColumn === null) {\n        nameColumn = column.name;\n      }\n      if (valueColumn === null) {\n        valueColumn = column.name;\n      }\n    });\n    if (nameColumn !== null && valueColumn !== null) {\n      options = queryResult.data.rows.map(function (row) {\n        var queryResultOption = {\n          name: row[nameColumn],\n          value: row[valueColumn]\n        };\n        return queryResultOption;\n      });\n    }\n  }\n  return options;\n}\n\nfunction updateCurrentValue(param, options) {\n  var found = (0, _underscore.find)(options, function (option) {\n    return option.value === param.value;\n  }) !== undefined;\n\n  if (!found) {\n    param.value = options[0].value;\n  }\n}\n\nvar QueryBasedParameterComponent = {\n  template: _queryBasedParameter2.default,\n  bindings: {\n    param: '<',\n    queryId: '<'\n  },\n  controller: ['Query', function controller(Query) {\n    'ngInject';\n\n    var _this2 = this;\n\n    this.$onChanges = function (changes) {\n      if (changes.queryId) {\n        Query.resultById({ id: _this2.queryId }, function (result) {\n          var queryResult = result.query_result;\n          _this2.queryResultOptions = optionsFromQueryResult(queryResult);\n          updateCurrentValue(_this2.param, _this2.queryResultOptions);\n        });\n      }\n    };\n  }]\n};\n\nfunction ParametersDirective($location, $uibModal) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: {\n      parameters: '=',\n      syncValues: '=?',\n      editable: '=?',\n      changed: '&onChange'\n    },\n    template: _parameters2.default,\n    link: function link(scope) {\n      // is this the correct location for this logic?\n      if (scope.syncValues !== false) {\n        scope.$watch('parameters', function () {\n          if (scope.changed) {\n            scope.changed({});\n          }\n          scope.parameters.forEach(function (param) {\n            if (param.value !== null || param.value !== '') {\n              $location.search('p_' + param.name, param.value);\n            }\n          });\n        }, true);\n      }\n\n      // These are input as newline delimited values,\n      // so we split them here.\n      scope.extractEnumOptions = function (enumOptions) {\n        if (enumOptions) {\n          return enumOptions.split('\\n');\n        }\n        return [];\n      };\n      scope.showParameterSettings = function (param) {\n        $uibModal.open({\n          component: 'parameterSettings',\n          resolve: {\n            parameter: param\n          }\n        });\n      };\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('parameters', ParametersDirective);\n  ngModule.component('queryBasedParameter', QueryBasedParameterComponent);\n  ngModule.component('parameterSettings', ParameterSettingsComponent);\n}\n\n/***/ }),\n/* 408 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-inline bg-white p-5\\\"\\n     ng-if=\\\"parameters | notEmpty\\\"\\n     ui-sortable=\\\"{ 'ui-floating': true, 'disabled': !editable }\\\"\\n     ng-model=\\\"parameters\\\">\\n  <div class=\\\"form-group m-l-10 m-r-10\\\"\\n       ng-repeat=\\\"param in parameters\\\">\\n    <label class=\\\"parameter-label\\\">{{param.title}}</label>\\n    <button class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"showParameterSettings(param)\\\"\\n            ng-if=\\\"editable\\\">\\n        <i class=\\\"zmdi zmdi-settings\\\"></i>\\n    </button>\\n    <span ng-switch=\\\"param.type\\\">\\n      <input ng-switch-when=\\\"datetime-with-seconds\\\" type=\\\"datetime-local\\\" step=\\\"1\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"datetime-local\\\" type=\\\"datetime-local\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"date\\\" type=\\\"date\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <span ng-switch-when=\\\"enum\\\">\\n        <select ng-model=\\\"param.value\\\" class=\\\"form-control\\\">\\n          <option ng-repeat=\\\"option in extractEnumOptions(param.enumOptions)\\\" value=\\\"{{option}}\\\">{{option}}</option>\\n        </select>\\n      </span>\\n      <span ng-switch-when=\\\"query\\\">\\n        <query-based-parameter param=\\\"param\\\" query-id=\\\"param.queryId\\\"></query-based-parameter>\\n      </span>\\n      <input ng-switch-default type=\\\"{{param.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n    </span>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 409 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<select ng-model=\\\"$ctrl.param.value\\\" class=\\\"form-control\\\" ng-options=\\\"option.value as option.name for option in $ctrl.queryResultOptions\\\">\\n</select>\"\n\n/***/ }),\n/* 410 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">{{$ctrl.parameter.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Title</label>\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.parameter.title\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>Type</label>\\n        <select ng-model=\\\"$ctrl.parameter.type\\\" class=\\\"form-control\\\">\\n          <option value=\\\"text\\\">Text</option>\\n          <option value=\\\"number\\\">Number</option>\\n          <option value=\\\"enum\\\">Dropdown List</option>\\n          <option value=\\\"query\\\">Query Based Dropdown List</option>\\n          <option value=\\\"date\\\">Date</option>\\n          <option value=\\\"datetime-local\\\">Date and Time</option>\\n          <option value=\\\"datetime-with-seconds\\\">Date and Time (with seconds)</option>\\n        </select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" class=\\\"form-inline\\\" ng-model=\\\"$ctrl.parameter.global\\\">\\n          Global\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.parameter.type === 'enum'\\\">\\n        <label>Dropdown List Values (newline delimited)</label>\\n        <textarea class=\\\"form-control\\\" rows=\\\"3\\\" ng-model=\\\"$ctrl.parameter.enumOptions\\\"></textarea>\\n      </div>\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.parameter.type === 'query'\\\">\\n        <label>Query to load dropdown values from:</label>\\n        <ui-select ng-model=\\\"$ctrl.parameter.queryId\\\" reset-search-input=\\\"false\\\">\\n            <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n            <ui-select-choices repeat=\\\"q.id as q in $ctrl.queries\\\"\\n                               refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                               refresh-delay=\\\"0\\\">\\n            <div class=\\\"form-group\\\" ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n            </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n</div>\\n\"\n\n/***/ }),\n/* 411 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _permissionsEditor = __webpack_require__(412);\n\nvar _permissionsEditor2 = _interopRequireDefault(_permissionsEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PermissionsEditorComponent = {\n  template: _permissionsEditor2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['$http', 'User', function controller($http, User) {\n    'ngInject';\n\n    var _this = this;\n\n    this.grantees = [];\n    this.newGrantees = {};\n    this.aclUrl = this.resolve.aclUrl.url;\n\n    // List users that are granted permissions\n    var loadGrantees = function loadGrantees() {\n      $http.get(_this.aclUrl).success(function (result) {\n        _this.grantees = [];\n\n        (0, _underscore.each)(result, function (grantees, accessType) {\n          grantees.forEach(function (grantee) {\n            grantee.access_type = accessType;\n            _this.grantees.push(grantee);\n          });\n        });\n      });\n    };\n\n    loadGrantees();\n\n    // Search for user\n    this.findUser = function (search) {\n      if (search === '') {\n        return;\n      }\n\n      if (_this.foundUsers === undefined) {\n        User.query(function (users) {\n          var existingIds = _this.grantees.map(function (m) {\n            return m.id;\n          });\n          users.forEach(function (user) {\n            user.alreadyGrantee = (0, _underscore.contains)(existingIds, user.id);\n          });\n          _this.foundUsers = users;\n        });\n      }\n    };\n\n    // Add new user to grantees list\n    this.addGrantee = function (user) {\n      _this.newGrantees.selected = undefined;\n      var body = { access_type: 'modify', user_id: user.id };\n      $http.post(_this.aclUrl, body).success(function () {\n        user.alreadyGrantee = true;\n        loadGrantees();\n      });\n    };\n\n    // Remove user from grantees list\n    this.removeGrantee = function (user) {\n      var body = { access_type: 'modify', user_id: user.id };\n      $http({\n        url: _this.aclUrl,\n        method: 'DELETE',\n        data: body,\n        headers: { 'Content-Type': 'application/json' }\n      }).success(function () {\n        _this.grantees = _this.grantees.filter(function (m) {\n          return m !== user;\n        });\n\n        if (_this.foundUsers) {\n          _this.foundUsers.forEach(function (u) {\n            if (u.id === user.id) {\n              u.alreadyGrantee = false;\n            }\n          });\n        }\n      });\n    };\n  }]\n};\n\nfunction init(ngModule) {\n  ngModule.component('permissionsEditor', PermissionsEditorComponent);\n}\n\n/***/ }),\n/* 412 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Manage Permissions</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div style=\\\"overflow: auto; height: 300px\\\">\\n    <ui-select ng-model=\\\"$ctrl.newGrantee.selected\\\" on-select=\\\"$ctrl.addGrantee($item)\\\">\\n       <ui-select-match placeholder=\\\"Add New User\\\"></ui-select-match>\\n       <ui-select-choices repeat=\\\"user in $ctrl.foundUsers | filter:$select.search\\\"\\n                         refresh=\\\"$ctrl.findUser($select.search)\\\"\\n                         refresh-delay=\\\"0\\\"\\n                         ui-disable-choice=\\\"user.alreadyGrantee\\\">\\n        <div>\\n          <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n          <small ng-if=\\\"user.alreadyGrantee\\\">(already has permission)</small>\\n        </div>\\n       </ui-select-choices>\\n    </ui-select>\\n      <br/>\\n       <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th></th>\\n            <th>User</th>\\n            <th>Permission</th>\\n            <th></th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"grantee in $ctrl.grantees\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{grantee.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{grantee.name}} </td>\\n          <td>{{grantee.access_type}}</td>\\n          <td><button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"$ctrl.removeGrantee(grantee)\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\"\n\n/***/ }),\n/* 413 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nalertUnsavedChanges.$inject = ['$window'];\nfunction alertUnsavedChanges($window) {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      isDirty: '='\n    },\n    link: function link($scope) {\n      var unloadMessage = 'You will lose your changes if you leave';\n      var confirmMessage = unloadMessage + '\\n\\nAre you sure you want to leave this page?';\n      // store original handler (if any)\n      var _onbeforeunload = $window.onbeforeunload;\n\n      $window.onbeforeunload = function onbeforeunload() {\n        return $scope.isDirty ? unloadMessage : null;\n      };\n\n      $scope.$on('$locationChangeStart', function (event, next, current) {\n        if (next.split('?')[0] === current.split('?')[0] || next.split('#')[0] === current.split('#')[0]) {\n          return;\n        }\n\n        if ($scope.isDirty && !$window.confirm(confirmMessage)) {\n          event.preventDefault();\n        }\n      });\n\n      $scope.$on('$destroy', function () {\n        $window.onbeforeunload = _onbeforeunload;\n      });\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('alertUnsavedChanges', alertUnsavedChanges);\n}\n\n/***/ }),\n/* 414 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nvar ApiKeyDialog = {\n  template: '<div class=\"modal-header\">\\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" ng-click=\"$ctrl.close()\"><span aria-hidden=\"true\">&times;</span></button>\\n</div>\\n<div class=\"modal-body\">\\n    <h5>API Key</h5>\\n    <pre>{{$ctrl.apiKey}}</pre>\\n\\n    <h5>Example API Calls:</h5>\\n\\n    <div>\\n        Results in CSV format:\\n\\n        <pre>{{$ctrl.csvUrl}}</pre>\\n\\n        Results in JSON format:\\n\\n        <pre>{{$ctrl.jsonUrl}}</pre>\\n    </div>\\n</div>',\n  controller: ['clientConfig', function controller(clientConfig) {\n    'ngInject';\n\n    this.apiKey = this.resolve.query.api_key;\n    this.csvUrl = clientConfig.basePath + 'api/queries/' + this.resolve.query.id + '/results.csv?api_key=' + this.apiKey;\n    this.jsonUrl = clientConfig.basePath + 'api/queries/' + this.resolve.query.id + '/results.json?api_key=' + this.apiKey;\n  }],\n\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  }\n};\n\nfunction init(ngModule) {\n  ngModule.component('apiKeyDialog', ApiKeyDialog);\n}\n\n/***/ }),\n/* 415 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _embedCodeDialog = __webpack_require__(416);\n\nvar _embedCodeDialog2 = _interopRequireDefault(_embedCodeDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EmbedCodeDialog = {\n  controller: ['clientConfig', function controller(clientConfig) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.visualization = this.resolve.visualization;\n\n    this.embedUrl = clientConfig.basePath + 'embed/query/' + this.query.id + '/visualization/' + this.visualization.id + '?api_key=' + this.query.api_key;\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(this.query, this.visualization);\n    }\n  }],\n\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  template: _embedCodeDialog2.default\n};\n\nfunction init(ngModule) {\n  ngModule.component('embedCodeDialog', EmbedCodeDialog);\n}\n\n/***/ }),\n/* 416 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Embed Code</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <h5>IFrame Embed</h5>\\n  <div>\\n    <code>&lt;iframe src=\\\"{{ $ctrl.embedUrl }}\\\" width=\\\"720\\\" height=\\\"391\\\"&gt;&lt;/iframe&gt;</code>\\n  </div>\\n  <span class=\\\"text-muted\\\">(height should be adjusted)</span>\\n  <div ng-if=\\\"$ctrl.snapshotUrl\\\">\\n    <h5>Image Embed</h5>\\n    <div>\\n      <code style=\\\"overflow-wrap:break-word;\\\">{{$ctrl.snapshotUrl}}</code>\\n    </div>\\n  </div>\\n</div>\"\n\n/***/ }),\n/* 417 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\n__webpack_require__(226);\n\n__webpack_require__(418);\n\n__webpack_require__(419);\n\n__webpack_require__(420);\n\n__webpack_require__(422);\n\nvar _underscore = __webpack_require__(5);\n\nqueryEditor.$inject = ['QuerySnippet'];\n\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  window.ace.define('ace/snippets/' + mode, ['require', 'exports', 'module'], function (require, exports) {\n    exports.snippetText = '';\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets('python');\ndefineDummySnippets('sql');\ndefineDummySnippets('json');\n\nfunction queryEditor(QuerySnippet) {\n  return {\n    restrict: 'E',\n    scope: {\n      query: '=',\n      schema: '=',\n      syntax: '='\n    },\n    template: '<div ui-ace=\"editorOptions\" ng-model=\"query.query\"></div>',\n    link: {\n      pre: function pre($scope) {\n        $scope.syntax = $scope.syntax || 'sql';\n\n        $scope.editorOptions = {\n          mode: 'json',\n          // require: ['ace/ext/language_tools'],\n          advanced: {\n            behavioursEnabled: true,\n            enableSnippets: true,\n            enableBasicAutocompletion: true,\n            enableLiveAutocompletion: true,\n            autoScrollEditorIntoView: true\n          },\n          onLoad: function onLoad(editor) {\n            // Release Cmd/Ctrl+L to the browser\n            editor.commands.bindKey('Cmd+L', null);\n            editor.commands.bindKey('Ctrl+L', null);\n\n            QuerySnippet.query(function (snippets) {\n              window.ace.acequire(['ace/snippets'], function (snippetsModule) {\n                var snippetManager = snippetsModule.snippetManager;\n                var m = {\n                  snippetText: ''\n                };\n                m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n                snippets.forEach(function (snippet) {\n                  m.snippets.push(snippet.getSnippet());\n                });\n\n                snippetManager.register(m.snippets || [], m.scope);\n              });\n            });\n\n            editor.$blockScrolling = Infinity;\n            editor.getSession().setUseWrapMode(true);\n            editor.setShowPrintMargin(false);\n\n            $scope.$watch('syntax', function (syntax) {\n              var newMode = 'ace/mode/' + syntax;\n              editor.getSession().setMode(newMode);\n            });\n\n            $scope.$watch('schema', function (newSchema, oldSchema) {\n              if (newSchema !== oldSchema) {\n                var tokensCount = newSchema.reduce(function (totalLength, table) {\n                  return totalLength + table.columns.length;\n                }, 0);\n                // If there are too many tokens we disable live autocomplete,\n                // as it makes typing slower.\n                if (tokensCount > 5000) {\n                  editor.setOption('enableLiveAutocompletion', false);\n                } else {\n                  editor.setOption('enableLiveAutocompletion', true);\n                }\n              }\n            });\n\n            $scope.$parent.$on('angular-resizable.resizing', function () {\n              editor.resize();\n            });\n\n            editor.focus();\n          }\n        };\n\n        var schemaCompleter = {\n          getCompletions: function getCompletions(state, session, pos, prefix, callback) {\n            if (prefix.length === 0 || !$scope.schema) {\n              callback(null, []);\n              return;\n            }\n\n            if (!$scope.schema.keywords) {\n              var keywords = {};\n\n              $scope.schema.forEach(function (table) {\n                keywords[table.name] = 'Table';\n\n                table.columns.forEach(function (c) {\n                  keywords[c] = 'Column';\n                  keywords[table.name + '.' + c] = 'Column';\n                });\n              });\n\n              $scope.schema.keywords = (0, _underscore.map)(keywords, function (v, k) {\n                return {\n                  name: k,\n                  value: k,\n                  score: 0,\n                  meta: v\n                };\n              });\n            }\n            callback(null, $scope.schema.keywords);\n          }\n        };\n\n        window.ace.acequire(['ace/ext/language_tools'], function (langTools) {\n          langTools.addCompleter(schemaCompleter);\n        });\n      }\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('queryEditor', queryEditor);\n}\n\n/***/ }),\n/* 418 */,\n/* 419 */,\n/* 420 */,\n/* 421 */,\n/* 422 */,\n/* 423 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction queryResultLink() {\n  return {\n    restrict: 'A',\n    link: function link(scope, element, attrs) {\n      var fileType = attrs.fileType ? attrs.fileType : 'csv';\n      scope.$watch('queryResult && queryResult.getData()', function (data) {\n        if (!data) {\n          return;\n        }\n\n        if (scope.queryResult.getId() == null) {\n          element.attr('href', '');\n        } else {\n          element.attr('href', 'api/queries/' + scope.query.id + '/results/' + scope.queryResult.getId() + '.' + fileType + (scope.embed ? '?api_key=' + scope.apiKey : ''));\n          element.attr('download', scope.query.name.replace(' ', '_') + (0, _moment2.default)(scope.queryResult.getUpdatedAt()).format('_YYYY_MM_DD') + '.' + fileType);\n        }\n      });\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('queryResultLink', queryResultLink);\n}\n\n/***/ }),\n/* 424 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _underscore = __webpack_require__(5);\n\nvar _scheduleDialog = __webpack_require__(425);\n\nvar _scheduleDialog2 = _interopRequireDefault(_scheduleDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction padWithZeros(size, v) {\n  var str = String(v);\n  if (str.length < size) {\n    str = '0' + str;\n  }\n  return str;\n}\n\nfunction queryTimePicker() {\n  return {\n    restrict: 'E',\n    scope: {\n      refreshType: '=',\n      query: '=',\n      saveQuery: '='\n    },\n    template: '\\n      <select ng-disabled=\"refreshType != \\'daily\\'\" ng-model=\"hour\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in hourOptions\"></select> :\\n      <select ng-disabled=\"refreshType != \\'daily\\'\" ng-model=\"minute\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in minuteOptions\"></select>\\n    ',\n    link: function link($scope) {\n      $scope.hourOptions = (0, _underscore.map)((0, _underscore.range)(0, 24), (0, _underscore.partial)(padWithZeros, 2));\n      $scope.minuteOptions = (0, _underscore.map)((0, _underscore.range)(0, 60, 5), (0, _underscore.partial)(padWithZeros, 2));\n\n      if ($scope.query.hasDailySchedule()) {\n        var parts = $scope.query.scheduleInLocalTime().split(':');\n        $scope.minute = parts[1];\n        $scope.hour = parts[0];\n      } else {\n        $scope.minute = '15';\n        $scope.hour = '00';\n      }\n\n      $scope.updateSchedule = function () {\n        var newSchedule = (0, _moment2.default)().hour($scope.hour).minute($scope.minute).utc().format('HH:mm');\n\n        if (newSchedule !== $scope.query.schedule) {\n          $scope.query.schedule = newSchedule;\n          $scope.saveQuery();\n        }\n      };\n\n      $scope.$watch('refreshType', function () {\n        if ($scope.refreshType === 'daily') {\n          $scope.updateSchedule();\n        }\n      });\n    }\n  };\n}\n\nfunction queryRefreshSelect() {\n  return {\n    restrict: 'E',\n    scope: {\n      refreshType: '=',\n      query: '=',\n      saveQuery: '='\n    },\n    template: '<select\\n                ng-disabled=\"refreshType != \\'periodic\\'\"\\n                ng-model=\"query.schedule\"\\n                ng-change=\"saveQuery()\"\\n                ng-options=\"c.value as c.name for c in refreshOptions\">\\n                <option value=\"\">No Refresh</option>\\n                </select>',\n    link: function link($scope) {\n      $scope.refreshOptions = [{\n        value: '60',\n        name: 'Every minute'\n      }];\n\n      [5, 10, 15, 30].forEach(function (i) {\n        $scope.refreshOptions.push({\n          value: String(i * 60),\n          name: 'Every ' + i + ' minutes'\n        });\n      });\n\n      (0, _underscore.range)(1, 13).forEach(function (i) {\n        $scope.refreshOptions.push({\n          value: String(i * 3600),\n          name: 'Every ' + i + 'h'\n        });\n      });\n\n      $scope.refreshOptions.push({\n        value: String(24 * 3600),\n        name: 'Every 24h'\n      });\n      $scope.refreshOptions.push({\n        value: String(7 * 24 * 3600),\n        name: 'Every 7 days'\n      });\n      $scope.refreshOptions.push({\n        value: String(14 * 24 * 3600),\n        name: 'Every 14 days'\n      });\n      $scope.refreshOptions.push({\n        value: String(30 * 24 * 3600),\n        name: 'Every 30 days'\n      });\n\n      $scope.$watch('refreshType', function () {\n        if ($scope.refreshType === 'periodic') {\n          if ($scope.query.hasDailySchedule()) {\n            $scope.query.schedule = null;\n            $scope.saveQuery();\n          }\n        }\n      });\n    }\n  };\n}\n\nvar ScheduleForm = {\n  controller: function controller() {\n    this.query = this.resolve.query;\n    this.saveQuery = this.resolve.saveQuery;\n\n    if (this.query.hasDailySchedule()) {\n      this.refreshType = 'daily';\n    } else {\n      this.refreshType = 'periodic';\n    }\n  },\n\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  template: _scheduleDialog2.default\n};\n\nfunction init(ngModule) {\n  ngModule.directive('queryTimePicker', queryTimePicker);\n  ngModule.directive('queryRefreshSelect', queryRefreshSelect);\n  ngModule.component('scheduleDialog', ScheduleForm);\n}\n\n/***/ }),\n/* 425 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Refresh Schedule</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"periodic\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-refresh-select refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-refresh-select>\\n        </label>\\n    </div>\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"daily\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-time-picker refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-time-picker>\\n        </label>\\n    </div>\\n</div>\\n\"\n\n/***/ }),\n/* 426 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _schemaBrowser = __webpack_require__(427);\n\nvar _schemaBrowser2 = _interopRequireDefault(_schemaBrowser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nSchemaBrowserCtrl.$inject = ['$scope'];\n\n\nfunction SchemaBrowserCtrl($scope) {\n  'ngInject';\n\n  this.showTable = function (table) {\n    table.collapsed = !table.collapsed;\n    $scope.$broadcast('vsRepeatTrigger');\n  };\n\n  this.getSize = function (table) {\n    var size = 18;\n\n    if (!table.collapsed) {\n      size += 18 * table.columns.length;\n    }\n\n    return size;\n  };\n}\n\nvar SchemaBrowser = {\n  bindings: {\n    schema: '<',\n    onRefresh: '&'\n  },\n  controller: SchemaBrowserCtrl,\n  template: _schemaBrowser2.default\n};\n\nfunction init(ngModule) {\n  ngModule.component('schemaBrowser', SchemaBrowser);\n}\n\n/***/ }),\n/* 427 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"schema-container\\\">\\n  <div class=\\\"schema-control\\\">\\n    <input type=\\\"text\\\" placeholder=\\\"Search schema...\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.schemaFilter\\\">\\n    <button class=\\\"btn btn-default\\\"\\n            title=\\\"Refresh Schema\\\"\\n            ng-click=\\\"$ctrl.onRefresh()\\\">\\n      <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"schema-browser\\\" vs-repeat vs-size=\\\"$ctrl.getSize(table)\\\">\\n    <div ng-repeat=\\\"table in $ctrl.schema | filter:$ctrl.schemaFilter track by table.name\\\">\\n      <div class=\\\"table-name\\\" ng-click=\\\"$ctrl.showTable(table)\\\">\\n        <i class=\\\"fa fa-table\\\"></i>\\n        <strong>\\n          <span title=\\\"{{table.name}}\\\">{{table.name}}</span>\\n          <span ng-if=\\\"table.size !== undefined\\\"> ({{table.size}})</span>\\n        </strong>\\n      </div>\\n      <div uib-collapse=\\\"table.collapsed\\\">\\n        <div ng-repeat=\\\"column in table.columns track by column\\\" style=\\\"padding-left:16px;\\\">{{column}}</div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 428 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _redash_icon_small = __webpack_require__(70);\n\nvar _redash_icon_small2 = _interopRequireDefault(_redash_icon_small);\n\nvar _visualizationEmbed = __webpack_require__(429);\n\nvar _visualizationEmbed2 = _interopRequireDefault(_visualizationEmbed);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar VisualizationEmbed = {\n  template: _visualizationEmbed2.default,\n  bindings: {\n    data: '<'\n  },\n  controller: ['$routeParams', 'Query', 'QueryResult', function controller($routeParams, Query, QueryResult) {\n    'ngInject';\n\n    document.querySelector('body').classList.add('headless');\n    var visualizationId = parseInt($routeParams.visualizationId, 10);\n    this.showQueryDescription = $routeParams.showDescription;\n    this.apiKey = $routeParams.api_key;\n    this.logoUrl = _redash_icon_small2.default;\n    this.query = new Query(this.data[0]);\n    this.queryResult = new QueryResult(this.data[1]);\n    this.visualization = (0, _underscore.find)(this.query.visualizations, function (visualization) {\n      return visualization.id === visualizationId;\n    });\n  }]\n};\n\nfunction init(ngModule) {\n  loadData.$inject = ['$http', '$route', '$q', 'Auth'];\n  session.$inject = ['$http', '$route', 'Auth'];\n\n  ngModule.component('visualizationEmbed', VisualizationEmbed);\n\n  function session($http, $route, Auth) {\n    'ngInject';\n\n    var apiKey = $route.current.params.api_key;\n    Auth.setApiKey(apiKey);\n    return Auth.loadConfig();\n  }\n\n  function loadData($http, $route, $q, Auth) {\n    return session($http, $route, Auth).then(function () {\n      var queryId = $route.current.params.queryId;\n      var query = $http.get('api/queries/' + queryId).then(function (response) {\n        return response.data;\n      });\n      var queryResult = $http.get('api/queries/' + queryId + '/results.json' + location.search).then(function (response) {\n        return response.data;\n      });\n      return $q.all([query, queryResult]);\n    });\n  }\n\n  ngModule.config(['$routeProvider', function ($routeProvider) {\n    $routeProvider.when('/embed/query/:queryId/visualization/:visualizationId', {\n      template: '<visualization-embed data=\"$resolve.data\"></visualization-embed>',\n      resolve: {\n        data: loadData\n      }\n    });\n  }]);\n}\n\n/***/ }),\n/* 429 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"tile m-10\\\">\\n  <div class=\\\"t-heading p-10\\\">\\n    <h3 class=\\\"th-title\\\">\\n      <p>\\n        <img ng-src=\\\"{{$ctrl.logoUrl}}\\\" style=\\\"height: 24px;\\\"/>\\n        {{$ctrl.query.name}}\\n        <small><visualization-name visualization=\\\"$ctrl.visualization\\\"/></small>\\n      </p>\\n      <small ng-if=\\\"$ctrl.showQueryDescription\\\">\\n        <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n      </small>\\n    </h3>\\n  </div>\\n\\n  <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\">\\n  </visualization-renderer>\\n\\n  <div class=\\\"bg-ace clearfix p-10\\\">\\n    <div class=\\\"col-sm-6\\\">\\n      <span class=\\\"label label-default hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n      <span class=\\\"label label-default visible-print\\\">Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}</span>\\n    </div>\\n    <div class=\\\"col-sm-6 text-right hidden-print\\\">\\n      <a class=\\\"btn btn-default btn-xs\\\" ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.visualization.id}}\\\" target=\\\"_blank\\\" tooltip=\\\"Open in Redash\\\">\\n        <span class=\\\"zmdi zmdi-link\\\"></span>\\n      </a>\\n\\n      <div class=\\\"btn-group\\\" uib-dropdown>\\n        <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs dropdown-toggle\\\" aria-haspopup=\\\"true\\\" uib-dropdown-toggle\\n                aria-expanded=\\\"false\\\">\\n          Download Dataset <span class=\\\"caret\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n            </a>\\n          </li>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\"  target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n            </a>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 430 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nfunction QueryLinkController() {\n  var hash = null;\n  if (this.visualization) {\n    if (this.visualization.type === 'TABLE') {\n      // link to hard-coded table tab instead of the (hidden) visualization tab\n      hash = 'table';\n    } else {\n      hash = this.visualization.id;\n    }\n  }\n\n  this.link = this.query.getUrl(false, hash);\n}\n\nfunction init(ngModule) {\n  ngModule.component('queryLink', {\n    bindings: {\n      query: '<',\n      visualization: '<'\n    },\n    template: '<a ng-href=\"{{$ctrl.link}}\" class=\"query-link\">{{$ctrl.query.name}}</a>',\n    controller: QueryLinkController\n  });\n}\n\n/***/ }),\n/* 431 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nrdTab.$inject = ['$location'];\nfunction rdTab($location) {\n  return {\n    restrict: 'E',\n    scope: {\n      tabId: '@',\n      name: '@',\n      basePath: '=?'\n    },\n    transclude: true,\n    template: '<li class=\"rd-tab\" ng-class=\"{active: tabId==selectedTab}\"><a href=\"{{basePath}}#{{tabId}}\">{{name}}<span ng-transclude></span></a></li>',\n    replace: true,\n    link: function link(scope) {\n      scope.basePath = scope.basePath || $location.path().substring(1);\n      scope.$watch(function () {\n        return scope.$parent.selectedTab;\n      }, function (tab) {\n        scope.selectedTab = tab;\n      });\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('rdTab', rdTab);\n}\n\n/***/ }),\n/* 432 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nvar RdTimeAgo = {\n  bindings: {\n    value: '='\n  },\n  controller: function controller() {},\n\n  template: '<span>' + '<span ng-show=\"$ctrl.value\" am-time-ago=\"$ctrl.value\"></span>' + '<span ng-hide=\"$ctrl.value\">-</span>' + '</span>'\n};\n\nfunction init(ngModule) {\n  ngModule.component('rdTimeAgo', RdTimeAgo);\n}\n\n/***/ }),\n/* 433 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction rdTimer() {\n  return {\n    restrict: 'E',\n    scope: { timestamp: '=' },\n    template: '{{currentTime}}',\n    controller: ['$scope', function controller($scope) {\n      $scope.currentTime = '00:00:00';\n\n      // We're using setInterval directly instead of $timeout, to avoid using $apply, to\n      // prevent the digest loop being run every second.\n      var currentTimer = setInterval(function () {\n        $scope.currentTime = (0, _moment2.default)((0, _moment2.default)() - (0, _moment2.default)($scope.timestamp)).utc().format('HH:mm:ss');\n        $scope.$digest();\n      }, 1000);\n\n      $scope.$on('$destroy', function () {\n        if (currentTimer) {\n          clearInterval(currentTimer);\n          currentTimer = null;\n        }\n      });\n    }]\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('rdTimer', rdTimer);\n}\n\n/***/ }),\n/* 434 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nfunction init(ngModule) {\n  ngModule.component('routeStatus', {\n    template: '<overlay ng-if=\"$ctrl.permissionDenied\">You do not have permission to load this page.',\n\n    controller: ['$rootScope', function controller($rootScope) {\n      var _this = this;\n\n      this.permissionDenied = false;\n\n      $rootScope.$on('$routeChangeSuccess', function () {\n        _this.permissionDenied = false;\n      });\n\n      $rootScope.$on('$routeChangeError', function (event, current, previous, rejection) {\n        if (rejection.status === 403) {\n          _this.permissionDenied = true;\n        }\n      });\n    }]\n  });\n}\n\n/***/ }),\n/* 435 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _startsWith = __webpack_require__(231);\n\nvar _startsWith2 = _interopRequireDefault(_startsWith);\n\nvar _settingsScreen = __webpack_require__(436);\n\nvar _settingsScreen2 = _interopRequireDefault(_settingsScreen);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction init(ngModule) {\n  ngModule.directive('settingsScreen', ['$location', function ($location) {\n    return {\n      restrict: 'E',\n      transclude: true,\n      template: _settingsScreen2.default,\n      controller: ['$scope', 'currentUser', function controller($scope, currentUser) {\n        $scope.usersPage = (0, _startsWith2.default)($location.path(), '/users');\n        $scope.groupsPage = (0, _startsWith2.default)($location.path(), '/groups');\n        $scope.dsPage = (0, _startsWith2.default)($location.path(), '/data_sources');\n        $scope.destinationsPage = (0, _startsWith2.default)($location.path(), '/destinations');\n        $scope.snippetsPage = (0, _startsWith2.default)($location.path(), '/query_snippets');\n\n        $scope.showGroupsLink = currentUser.hasPermission('list_users');\n        $scope.showUsersLink = currentUser.hasPermission('list_users');\n        $scope.showDsLink = currentUser.hasPermission('admin');\n        $scope.showDestinationsLink = currentUser.hasPermission('admin');\n        $scope.showQuerySnippetsLink = currentUser.hasPermission('create_query');\n      }]\n    };\n  }]);\n}\n\n/***/ }),\n/* 436 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<page-header title=\\\"Settings\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li ng-class=\\\"{'active': dsPage }\\\" ng-if=\\\"showDsLink\\\"><a href=\\\"data_sources\\\">Data Sources</a></li>\\n      <li ng-class=\\\"{'active': usersPage }\\\" ng-if=\\\"showUsersLink\\\"><a href=\\\"users\\\">Users</a></li>\\n      <li ng-class=\\\"{'active': groupsPage }\\\" ng-if=\\\"showGroupsLink\\\"><a href=\\\"groups\\\">Groups</a></li>\\n      <li ng-class=\\\"{'active': destinationsPage }\\\" ng-if=\\\"showDestinationsLink\\\"><a href=\\\"destinations\\\">Alert Destinations</a></li>\\n      <li ng-class=\\\"{'active': snippetsPage }\\\" ng-if=\\\"showQuerySnippetsLink\\\"><a href=\\\"query_snippets\\\">Query Snippets</a></li>\\n    </ul>\\n\\n    <div ng-transclude>\\n\\n    </div>\\n  </div>\\n</div>\"\n\n/***/ }),\n/* 437 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nfunction init(ngModule) {\n  ngModule.component('sortIcon', {\n    template: '<span ng-if=\"$ctrl.showIcon\"><i class=\"fa fa-sort-{{$ctrl.icon}}\"></i></span>',\n    bindings: {\n      column: '<',\n      sortColumn: '<',\n      reverse: '<'\n    },\n    controller: function controller() {\n      var _this = this;\n\n      this.$onChanges = function (changes) {\n        ['column', 'sortColumn', 'reverse'].forEach(function (v) {\n          if (v in changes) {\n            _this[v] = changes[v].currentValue;\n          }\n        });\n\n        _this.showIcon = false;\n\n        if (_this.column === _this.sortColumn) {\n          _this.showIcon = true;\n          _this.icon = _this.reverse ? 'desc' : 'asc';\n        }\n      };\n    }\n  });\n}\n\n/***/ }),\n/* 438 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _startsWith = __webpack_require__(231);\n\nvar _startsWith2 = _interopRequireDefault(_startsWith);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ncontroller.$inject = ['$location'];\n\n\nfunction controller($location) {\n  this.tabs.forEach(function (tab) {\n    if (tab.isActive) {\n      tab.active = tab.isActive($location.path());\n    } else {\n      tab.active = (0, _startsWith2.default)($location.path(), '/' + tab.path);\n    }\n  });\n}\n\nfunction init(ngModule) {\n  ngModule.component('tabNav', {\n    template: '<ul class=\"tab-nav bg-white\">' + '<li ng-repeat=\"tab in $ctrl.tabs\" ng-class=\"{\\'active\\': tab.active }\"><a ng-href=\"{{tab.path}}\">{{tab.name}}</a></li>' + '</ul>',\n    controller: controller,\n    bindings: {\n      tabs: '<'\n    }\n  });\n}\n\n/***/ }),\n/* 439 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = VisualizationName;\nfunction VisualizationName(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '='\n    },\n    template: '{{name}}',\n    replace: false,\n    link: function link(scope) {\n      var currentType = scope.visualization.type;\n      var nameByType = Visualization.visualizations[currentType].name;\n      var currentName = scope.visualization.name;\n      if (nameByType !== currentName) {\n        scope.name = scope.visualization.name;\n      }\n    }\n  };\n}\n\n/***/ }),\n/* 440 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./alert-dialog.js\": 441,\n\t\"./alert-subscription.js\": 442,\n\t\"./alert.js\": 443,\n\t\"./auth.js\": 444,\n\t\"./dashboard.js\": 445,\n\t\"./data-source.js\": 446,\n\t\"./destination.js\": 447,\n\t\"./events.js\": 448,\n\t\"./group.js\": 449,\n\t\"./keyboard-shortcuts.js\": 450,\n\t\"./notifications.js\": 453,\n\t\"./offline-listener.js\": 454,\n\t\"./query-result.js\": 232,\n\t\"./query-snippet.js\": 455,\n\t\"./query.js\": 456,\n\t\"./user.js\": 458,\n\t\"./widget.js\": 459\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 440;\n\n/***/ }),\n/* 441 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\nAlertDialog.$inject = ['$uibModal'];\nvar AlertDialogComponent = {\n  template: '\\n<div class=\"modal-header\">\\n    <h4 class=\"modal-title\" ng-if=\"$ctrl.title\">{{$ctrl.title}}</h4>\\n</div>\\n<div class=\"modal-body\">\\n  <p ng-bind-html=\"$ctrl.message\"></p>\\n</div>\\n<div class=\"modal-footer\">\\n  <button class=\"btn btn-default\" ng-click=\"$ctrl.dismiss()\">Cancel</button>\\n  <button class=\"btn\" ng-class=\"$ctrl.confirm.class\" ng-click=\"$ctrl.close()\" ng-if=\"$ctrl.confirm.show\">{{$ctrl.confirm.title}}</button>\\n</div>\\n  ',\n  bindings: {\n    close: '&',\n    dismiss: '&',\n    resolve: '<'\n  },\n  controller: function controller() {\n    this.title = this.resolve.title;\n    this.message = this.resolve.message;\n    this.confirm = _extends({}, { class: 'btn-sucess', show: true, title: 'OK' }, this.resolve.confirm);\n  }\n};\n\nfunction AlertDialog($uibModal) {\n  var service = {\n    open: function open(_title, _message, _confirm) {\n      return $uibModal.open({\n        component: 'alertDialog',\n        resolve: {\n          title: function title() {\n            return _title;\n          },\n          message: function message() {\n            return _message;\n          },\n          confirm: function confirm() {\n            return _confirm;\n          }\n        }\n      }).result;\n    }\n  };\n\n  return service;\n}\n\nfunction init(ngModule) {\n  ngModule.component('alertDialog', AlertDialogComponent);\n  ngModule.factory('AlertDialog', AlertDialog);\n}\n\n/***/ }),\n/* 442 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nAlertSubscription.$inject = ['$resource'];\nfunction AlertSubscription($resource) {\n  var resource = $resource('api/alerts/:alertId/subscriptions/:subscriberId', { alertId: '@alert_id', subscriberId: '@id' });\n  return resource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('AlertSubscription', AlertSubscription);\n}\n\n/***/ }),\n/* 443 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\nAlert.$inject = ['$resource', '$http'];\nfunction Alert($resource, $http) {\n  var actions = {\n    save: {\n      method: 'POST',\n      transformRequest: [function (data) {\n        var newData = _extends({}, data);\n        if (newData.query_id === undefined) {\n          newData.query_id = newData.query.id;\n          newData.destination_id = newData.destinations;\n          delete newData.query;\n          delete newData.destinations;\n        }\n\n        return newData;\n      }].concat($http.defaults.transformRequest)\n    }\n  };\n  var resource = $resource('api/alerts/:id', { id: '@id' }, actions);\n\n  return resource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Alert', Alert);\n}\n\n/***/ }),\n/* 444 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\napiKeyHttpInterceptor.$inject = ['$injector'];\nAuthService.$inject = ['$window', '$location', '$q', '$http'];\n\n\nvar logger = (0, _debug2.default)('redash:auth');\nvar SESSION_ITEM = 'session';\nvar session = { loaded: false };\n\nfunction storeSession(sessionData) {\n  logger('Updating session to be:', sessionData);\n  _extends(session, sessionData, { loaded: true });\n}\n\nfunction getLocalSessionData() {\n  if (session.loaded) {\n    return session;\n  }\n\n  var sessionData = window.sessionStorage.getItem(SESSION_ITEM);\n  if (sessionData) {\n    storeSession(JSON.parse(sessionData));\n  }\n\n  return session;\n}\n\nfunction AuthService($window, $location, $q, $http) {\n  var Auth = {\n    isAuthenticated: function isAuthenticated() {\n      var sessionData = getLocalSessionData();\n      return sessionData.loaded && sessionData.user.id;\n    },\n    login: function login() {\n      var next = encodeURI($location.url());\n      logger('Calling login with next = %s', next);\n      window.location.href = 'login?next=' + next;\n    },\n    logout: function logout() {\n      logger('Logout.');\n      window.sessionStorage.removeItem(SESSION_ITEM);\n      $window.location.href = 'logout';\n    },\n    loadSession: function loadSession() {\n      logger('Loading session');\n      var sessionData = getLocalSessionData();\n      if (sessionData.loaded && sessionData.user.id) {\n        logger('Resolving with local value.');\n        return $q.resolve(sessionData);\n      }\n\n      this.setApiKey(null);\n      return $http.get('api/session').then(function (response) {\n        storeSession(response.data);\n        return session;\n      });\n    },\n    loadConfig: function loadConfig() {\n      logger('Loading config');\n      return $http.get('/api/config').then(function (response) {\n        storeSession({ client_config: response.data.client_config, user: { permissions: [] } });\n        return response.data;\n      });\n    },\n    setApiKey: function setApiKey(apiKey) {\n      logger('Set API key to: %s', apiKey);\n      this.apiKey = apiKey;\n    },\n    getApiKey: function getApiKey() {\n      return this.apiKey;\n    }\n  };\n\n  return Auth;\n}\n\nfunction CurrentUserService() {\n  var _this = this;\n\n  var sessionData = getLocalSessionData();\n  _extends(this, sessionData.user);\n\n  this.canEdit = function (object) {\n    var userId = object.user_id || object.user && object.user.id;\n    return _this.hasPermission('admin') || userId && userId === _this.id;\n  };\n\n  this.hasPermission = function (permission) {\n    return _this.permissions.indexOf(permission) !== -1;\n  };\n\n  this.isAdmin = this.hasPermission('admin');\n}\n\nfunction ClientConfigService() {\n  _extends(this, getLocalSessionData().client_config);\n}\n\nfunction apiKeyHttpInterceptor($injector) {\n  return {\n    request: function request(config) {\n      var Auth = $injector.get('Auth');\n      var apiKey = Auth.getApiKey();\n      if (apiKey) {\n        config.headers.Authorization = 'Key ' + apiKey;\n      }\n\n      return config;\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Auth', AuthService);\n  ngModule.service('currentUser', CurrentUserService);\n  ngModule.service('clientConfig', ClientConfigService);\n  ngModule.factory('apiKeyHttpInterceptor', apiKeyHttpInterceptor);\n\n  ngModule.config(['$httpProvider', function ($httpProvider) {\n    $httpProvider.interceptors.push('apiKeyHttpInterceptor');\n  }]);\n\n  ngModule.run(['$location', '$window', '$rootScope', '$route', 'Auth', function ($location, $window, $rootScope, $route, Auth) {\n    $rootScope.$on('$routeChangeStart', function (event, to) {\n      if (to.authenticated && !Auth.isAuthenticated()) {\n        logger('Requested authenticated route: ', to);\n        event.preventDefault();\n        // maybe we only miss the session? try to load session\n        Auth.loadSession().then(function () {\n          logger('Loaded session');\n          $route.reload();\n        }).catch(function () {\n          logger('Need to login, redirecting');\n          Auth.login();\n        });\n      }\n    });\n  }]);\n}\n\n/***/ }),\n/* 445 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nDashboard.$inject = ['$resource', '$http', 'currentUser', 'Widget'];\n\n\nfunction Dashboard($resource, $http, currentUser, Widget) {\n  function transformSingle(dashboard) {\n    dashboard.widgets = (0, _underscore.map)(dashboard.widgets, function (row) {\n      return row.map(function (widget) {\n        return new Widget(widget);\n      });\n    });\n    dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  }\n\n  var transform = $http.defaults.transformResponse.concat(function (data) {\n    if ((0, _underscore.isArray)(data)) {\n      data.forEach(transformSingle);\n    } else {\n      transformSingle(data);\n    }\n    return data;\n  });\n\n  var resource = $resource('api/dashboards/:slug', { slug: '@slug' }, {\n    get: { method: 'GET', transformResponse: transform },\n    save: { method: 'POST', transformResponse: transform },\n    query: { method: 'GET', isArray: true, transformResponse: transform },\n    recent: {\n      method: 'get',\n      isArray: true,\n      url: 'api/dashboards/recent',\n      transformResponse: transform\n    }\n  });\n\n  resource.prototype.canEdit = function canEdit() {\n    return currentUser.canEdit(this) || this.can_edit;\n  };\n\n  return resource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Dashboard', Dashboard);\n}\n\n/***/ }),\n/* 446 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nDataSource.$inject = ['$resource'];\nfunction DataSource($resource) {\n  var actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    test: {\n      method: 'POST', cache: false, isArray: false, url: 'api/data_sources/:id/test'\n    },\n    getSchema: {\n      method: 'GET', cache: false, isArray: true, url: 'api/data_sources/:id/schema'\n    }\n  };\n\n  var DataSourceResource = $resource('api/data_sources/:id', { id: '@id' }, actions);\n\n  return DataSourceResource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('DataSource', DataSource);\n}\n\n/***/ }),\n/* 447 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nDestination.$inject = ['$resource'];\nfunction Destination($resource) {\n  var actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true }\n  };\n\n  var DestinationResource = $resource('api/destinations/:id', { id: '@id' }, actions);\n\n  return DestinationResource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Destination', Destination);\n}\n\n/***/ }),\n/* 448 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nEvents.$inject = ['$http'];\n\n\nfunction Events($http) {\n  var _this = this;\n\n  this.events = [];\n\n  this.post = (0, _underscore.debounce)(function () {\n    var events = _this.events;\n    _this.events = [];\n\n    $http.post('api/events', events);\n  }, 1000);\n\n  this.record = function record(action, objectType, objectId, additionalProperties) {\n    var event = {\n      action: action,\n      object_type: objectType,\n      object_id: objectId,\n      timestamp: Date.now() / 1000.0\n    };\n    _extends(event, additionalProperties);\n    this.events.push(event);\n\n    this.post();\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.service('Events', Events);\n}\n\n/***/ }),\n/* 449 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nGroup.$inject = ['$resource'];\nfunction Group($resource) {\n  var actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    members: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/members'\n    },\n    dataSources: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/data_sources'\n    }\n  };\n  var resource = $resource('api/groups/:id', { id: '@id' }, actions);\n  return resource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Group', Group);\n}\n\n/***/ }),\n/* 450 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _mousetrap = __webpack_require__(451);\n\nvar _mousetrap2 = _interopRequireDefault(_mousetrap);\n\n__webpack_require__(452);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction KeyboardShortcuts() {\n  this.bind = function bind(keymap) {\n    (0, _underscore.each)(keymap, function (fn, key) {\n      _mousetrap2.default.bindGlobal(key, function (e) {\n        e.preventDefault();\n        fn();\n      });\n    });\n  };\n\n  this.unbind = function unbind(keymap) {\n    (0, _underscore.each)(keymap, function (fn, key) {\n      _mousetrap2.default.unbind(key);\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.service('KeyboardShortcuts', KeyboardShortcuts);\n}\n\n/***/ }),\n/* 451 */,\n/* 452 */,\n/* 453 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nNotifications.$inject = ['currentUser', 'Events'];\n\n\nvar logger = (0, _debug2.default)('redash:notifications');\n\nfunction Notifications(currentUser, Events) {\n  var notificationService = { pageVisible: true };\n\n  notificationService.monitorVisibility = function monitorVisibility() {\n    var hidden = void 0;\n    var visibilityChange = void 0;\n\n    if (typeof document.hidden !== 'undefined') {\n      hidden = 'hidden';\n      visibilityChange = 'visibilitychange';\n    } else if (typeof document.msHidden !== 'undefined') {\n      hidden = 'msHidden';\n      visibilityChange = 'msvisibilitychange';\n    }\n\n    var documentHidden = document[hidden];\n\n    document.addEventListener(visibilityChange, function () {\n      if (documentHidden !== document[hidden]) {\n        if (document[hidden]) {\n          notificationService.pageVisible = false;\n        } else {\n          notificationService.pageVisible = true;\n        }\n\n        documentHidden = document[hidden];\n      }\n    });\n  };\n\n  notificationService.monitorVisibility();\n\n  notificationService.isSupported = function () {\n    if ('Notification' in window) {\n      return true;\n    }\n\n    logger('HTML5 notifications are not supported.');\n    return false;\n  };\n\n  notificationService.getPermissions = function getPermissions() {\n    if (!this.isSupported()) {\n      return;\n    }\n\n    if (Notification.permission === 'default') {\n      Notification.requestPermission(function (status) {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      });\n    }\n  };\n\n  notificationService.showNotification = function showNotification(title, content) {\n    if (!this.isSupported() || this.pageVisible || Notification.permission !== 'granted') {\n      return;\n    }\n\n    // using the 'tag' to avoid showing duplicate notifications\n    var notification = new Notification(title, { tag: title + content, body: content, icon: '/images/redash_icon_small.png' });\n    setTimeout(function () {\n      notification.close();\n    }, 3000);\n    notification.onclick = function onClick() {\n      window.focus();\n      this.close();\n      Events.record('click', 'notification');\n    };\n  };\n\n  return notificationService;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Notifications', Notifications);\n}\n\n/***/ }),\n/* 454 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nOfflineListener.$inject = ['toastr'];\nfunction OfflineListener(toastr) {\n  function addOnlineListener(toast) {\n    function onlineStateHandler() {\n      toastr.remove(toast.toastId);\n      window.removeEventListener('online', onlineStateHandler);\n    }\n    window.addEventListener('online', onlineStateHandler);\n  }\n\n  window.addEventListener('offline', function () {\n    var toast = toastr.warning('<div>Please check your Internet connection.</div>', '', {\n      allowHtml: true,\n      autoDismiss: false,\n      timeOut: false,\n      tapToDismiss: true\n    });\n    addOnlineListener(toast);\n  });\n}\n\nfunction init(ngModule) {\n  ngModule.service('OfflineListener', OfflineListener);\n}\n\n/***/ }),\n/* 455 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\nQuerySnippet.$inject = ['$resource'];\nfunction QuerySnippet($resource) {\n  var resource = $resource('api/query_snippets/:id', { id: '@id' });\n  resource.prototype.getSnippet = function getSnippet() {\n    var name = this.trigger;\n    if (this.description !== '') {\n      name = this.trigger + ': ' + this.description;\n    }\n\n    return {\n      name: name,\n      content: this.snippet,\n      tabTrigger: this.trigger\n    };\n  };\n\n  return resource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('QuerySnippet', QuerySnippet);\n}\n\n/***/ }),\n/* 456 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _mustache = __webpack_require__(457);\n\nvar _mustache2 = _interopRequireDefault(_mustache);\n\nvar _underscore = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nQueryResource.$inject = ['$resource', '$http', '$q', '$location', 'currentUser', 'QueryResult'];\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = (0, _debug2.default)('redash:services:query');\n\nfunction collectParams(parts) {\n  var parameters = [];\n\n  parts.forEach(function (part) {\n    if (part[0] === 'name' || part[0] === '&') {\n      parameters.push(part[1]);\n    } else if (part[0] === '#') {\n      parameters = (0, _underscore.union)(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nvar QueryResultError = function () {\n  function QueryResultError(errorMessage) {\n    _classCallCheck(this, QueryResultError);\n\n    this.errorMessage = errorMessage;\n  }\n\n  _createClass(QueryResultError, [{\n    key: 'getError',\n    value: function getError() {\n      return this.errorMessage;\n    }\n  }], [{\n    key: 'getStatus',\n    value: function getStatus() {\n      return 'failed';\n    }\n  }, {\n    key: 'getData',\n    value: function getData() {\n      return null;\n    }\n  }, {\n    key: 'getLog',\n    value: function getLog() {\n      return null;\n    }\n  }, {\n    key: 'getChartData',\n    value: function getChartData() {\n      return null;\n    }\n  }]);\n\n  return QueryResultError;\n}();\n\nvar Parameter = function () {\n  function Parameter(parameter) {\n    _classCallCheck(this, Parameter);\n\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.value = parameter.value;\n    this.global = parameter.global;\n    this.enumOptions = parameter.enumOptions;\n    this.queryId = parameter.queryId;\n  }\n\n  _createClass(Parameter, [{\n    key: 'ngModel',\n    get: function get() {\n      if (this.type === 'date' || this.type === 'datetime-local' || this.type === 'datetime-with-seconds') {\n        this.$$value = this.$$value || (0, _moment2.default)(this.value).toDate();\n        return this.$$value;\n      } else if (this.type === 'number') {\n        this.$$value = this.$$value || parseInt(this.value, 10);\n        return this.$$value;\n      }\n\n      return this.value;\n    },\n    set: function set(value) {\n      if (value && this.type === 'date') {\n        this.value = (0, _moment2.default)(value).format('YYYY-MM-DD');\n        this.$$value = (0, _moment2.default)(this.value).toDate();\n      } else if (value && this.type === 'datetime-local') {\n        this.value = (0, _moment2.default)(value).format('YYYY-MM-DD HH:mm');\n        this.$$value = (0, _moment2.default)(this.value).toDate();\n      } else if (value && this.type === 'datetime-with-seconds') {\n        this.value = (0, _moment2.default)(value).format('YYYY-MM-DD HH:mm:ss');\n        this.$$value = (0, _moment2.default)(this.value).toDate();\n      } else {\n        this.value = this.$$value = value;\n      }\n    }\n  }]);\n\n  return Parameter;\n}();\n\nvar Parameters = function () {\n  function Parameters(query, queryString) {\n    _classCallCheck(this, Parameters);\n\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  _createClass(Parameters, [{\n    key: 'parseQuery',\n    value: function parseQuery() {\n      var parameters = [];\n      try {\n        var parts = _mustache2.default.parse(this.query.query);\n        parameters = (0, _underscore.uniq)(collectParams(parts));\n      } catch (e) {\n        logger('Failed parsing parameters: ', e);\n      }\n      return parameters;\n    }\n  }, {\n    key: 'updateParameters',\n    value: function updateParameters() {\n      var _this = this;\n\n      if (this.query.query === this.cachedQueryText) {\n        return;\n      }\n\n      this.cachedQueryText = this.query.query;\n      var parameterNames = this.parseQuery();\n\n      this.query.options.parameters = this.query.options.parameters || [];\n\n      var parametersMap = {};\n      this.query.options.parameters.forEach(function (param) {\n        parametersMap[param.name] = param;\n      });\n\n      parameterNames.forEach(function (param) {\n        if (!(0, _underscore.has)(parametersMap, param)) {\n          _this.query.options.parameters.push({\n            title: param,\n            name: param,\n            type: 'text',\n            value: null,\n            global: false\n          });\n        }\n      });\n\n      var parameterExists = function parameterExists(p) {\n        return (0, _underscore.contains)(parameterNames, p.name);\n      };\n      this.query.options.parameters = this.query.options.parameters.filter(parameterExists).map(function (p) {\n        return new Parameter(p);\n      });\n    }\n  }, {\n    key: 'initFromQueryString',\n    value: function initFromQueryString(queryString) {\n      this.get().forEach(function (param) {\n        var queryStringName = 'p_' + param.name;\n        if ((0, _underscore.has)(queryString, queryStringName)) {\n          param.value = queryString[queryStringName];\n        }\n      });\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      this.updateParameters();\n      return this.query.options.parameters;\n    }\n  }, {\n    key: 'getMissing',\n    value: function getMissing() {\n      return (0, _underscore.pluck)((0, _underscore.filter)(this.get(), function (p) {\n        return p.value === null || p.value === '';\n      }), 'title');\n    }\n  }, {\n    key: 'isRequired',\n    value: function isRequired() {\n      return !(0, _underscore.isEmpty)(this.get());\n    }\n  }, {\n    key: 'getValues',\n    value: function getValues() {\n      var params = this.get();\n      return (0, _underscore.object)((0, _underscore.pluck)(params, 'name'), (0, _underscore.pluck)(params, 'value'));\n    }\n  }]);\n\n  return Parameters;\n}();\n\nfunction QueryResource($resource, $http, $q, $location, currentUser, QueryResult) {\n  var Query = $resource('api/queries/:id', { id: '@id' }, {\n    search: {\n      method: 'get',\n      isArray: true,\n      url: 'api/queries/search'\n    },\n    recent: {\n      method: 'get',\n      isArray: true,\n      url: 'api/queries/recent'\n    },\n    query: {\n      isArray: false\n    },\n    myQueries: {\n      method: 'get',\n      isArray: false,\n      url: 'api/queries/my'\n    },\n    fork: {\n      method: 'post',\n      isArray: false,\n      url: 'api/queries/:id/fork',\n      params: { id: '@id' }\n    },\n    resultById: {\n      method: 'get',\n      isArray: false,\n      url: 'api/queries/:id/results.json'\n    }\n  });\n\n  Query.newQuery = function newQuery() {\n    return new Query({\n      query: '',\n      name: 'New Query',\n      schedule: null,\n      user: currentUser,\n      options: {}\n    });\n  };\n\n  Query.format = function formatQuery(syntax, query) {\n    if (syntax === 'json') {\n      try {\n        var formatted = JSON.stringify(JSON.parse(query), ' ', 4);\n        return $q.resolve(formatted);\n      } catch (err) {\n        return $q.reject(String(err));\n      }\n    } else if (syntax === 'sql') {\n      return $http.post('api/queries/format', { query: query }).then(function (response) {\n        return response.data.query;\n      });\n    } else {\n      return $q.reject('Query formatting is not supported for your data source syntax.');\n    }\n  };\n\n  Query.prototype.getSourceLink = function getSourceLink() {\n    return '/queries/' + this.id + '/source';\n  };\n\n  Query.prototype.isNew = function isNew() {\n    return this.id === undefined;\n  };\n\n  Query.prototype.hasDailySchedule = function hasDailySchedule() {\n    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n  };\n\n  Query.prototype.scheduleInLocalTime = function scheduleInLocalTime() {\n    var parts = this.schedule.split(':');\n    return _moment2.default.utc().hour(parts[0]).minute(parts[1]).local().format('HH:mm');\n  };\n\n  Query.prototype.hasResult = function hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  };\n\n  Query.prototype.paramsRequired = function paramsRequired() {\n    return this.getParameters().isRequired();\n  };\n\n  Query.prototype.getQueryResult = function getQueryResult(maxAge) {\n    if (!this.query) {\n      return new QueryResultError(\"Can't execute empty query.\");\n    }\n    var queryText = this.query;\n\n    var parameters = this.getParameters();\n    var missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      var paramsWord = 'parameter';\n      var valuesWord = 'value';\n      if (missingParams.length > 1) {\n        paramsWord = 'parameters';\n        valuesWord = 'values';\n      }\n\n      return new QueryResult({\n        job: {\n          error: 'missing ' + valuesWord + ' for ' + missingParams.join(', ') + ' ' + paramsWord + '.',\n          status: 4\n        }\n      });\n    }\n\n    if (parameters.isRequired()) {\n      queryText = _mustache2.default.render(queryText, parameters.getValues());\n\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({\n          query_result: this.latest_query_data\n        });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.latest_query_data_id);\n      }\n    } else if (this.data_source_id) {\n      this.queryResult = QueryResult.get(this.data_source_id, queryText, maxAge, this.id);\n    } else {\n      return new QueryResultError('Please select data source to run this query.');\n    }\n\n    return this.queryResult;\n  };\n\n  Query.prototype.getUrl = function getUrl(source, hash) {\n    var url = 'queries/' + this.id;\n\n    if (source) {\n      url += '/source';\n    }\n\n    var params = '';\n    if (this.getParameters().isRequired()) {\n      (0, _underscore.each)(this.getParameters().getValues(), function (value, name) {\n        if (value === null) {\n          return;\n        }\n\n        if (params !== '') {\n          params += '&';\n        }\n\n        params += 'p_' + encodeURIComponent(name) + '=' + encodeURIComponent(value);\n      });\n    }\n\n    if (params !== '') {\n      url += '?' + params;\n    }\n\n    if (hash) {\n      url += '#' + hash;\n    }\n\n    return url;\n  };\n\n  Query.prototype.getQueryResultPromise = function getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  };\n\n  Query.prototype.getParameters = function getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, $location.search());\n    }\n\n    return this.$parameters;\n  };\n\n  Query.prototype.getParametersDefs = function getParametersDefs() {\n    return this.getParameters().get();\n  };\n\n  return Query;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Query', QueryResource);\n}\n\n/***/ }),\n/* 457 */,\n/* 458 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nUser.$inject = ['$resource', '$http'];\n\n\nfunction transformSingle(user) {\n  if (user.groups !== undefined) {\n    user.admin = user.groups.indexOf('admin') !== -1;\n  }\n}\n\nfunction transform(data) {\n  if ((0, _underscore.isArray)(data)) {\n    data.forEach(transformSingle);\n  } else {\n    transformSingle(data);\n  }\n\n  return data;\n}\n\nfunction User($resource, $http) {\n  var transformResponse = $http.defaults.transformResponse.concat(transform);\n\n  var actions = {\n    get: { method: 'GET', transformResponse: transformResponse },\n    save: { method: 'POST', transformResponse: transformResponse },\n    query: { method: 'GET', isArray: true, transformResponse: transformResponse },\n    delete: { method: 'DELETE', transformResponse: transformResponse }\n  };\n\n  var UserResource = $resource('api/users/:id', { id: '@id' }, actions);\n\n  return UserResource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('User', User);\n}\n\n/***/ }),\n/* 459 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _truncate = __webpack_require__(460);\n\nvar _truncate2 = _interopRequireDefault(_truncate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nWidget.$inject = ['$resource', 'Query'];\n\n\nfunction Widget($resource, Query) {\n  var WidgetResource = $resource('api/widgets/:id', { id: '@id' });\n\n  WidgetResource.prototype.getQuery = function getQuery() {\n    if (!this.query && this.visualization) {\n      this.query = new Query(this.visualization.query);\n    }\n\n    return this.query;\n  };\n\n  WidgetResource.prototype.getName = function getName() {\n    if (this.visualization) {\n      return this.visualization.query.name + ' (' + this.visualization.name + ')';\n    }\n    return (0, _truncate2.default)(this.text, 20);\n  };\n\n  return WidgetResource;\n}\n\nfunction init(ngModule) {\n  ngModule.factory('Widget', Widget);\n}\n\n/***/ }),\n/* 460 */,\n/* 461 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./box-plot/index.js\": 462,\n\t\"./chart/index.js\": 465,\n\t\"./chart/plotly.js\": 468,\n\t\"./cohort/index.js\": 628,\n\t\"./counter/index.js\": 632,\n\t\"./edit-visualization-dialog.js\": 636,\n\t\"./index.js\": 638,\n\t\"./map/index.js\": 639,\n\t\"./pivot/index.js\": 650,\n\t\"./sankey/index.js\": 654,\n\t\"./sunburst/index.js\": 657,\n\t\"./table/index.js\": 660,\n\t\"./word-cloud/index.js\": 662\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 461;\n\n/***/ }),\n/* 462 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _d = __webpack_require__(2);\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _d3box = __webpack_require__(463);\n\nvar _d3box2 = _interopRequireDefault(_d3box);\n\nvar _boxPlotEditor = __webpack_require__(464);\n\nvar _boxPlotEditor2 = _interopRequireDefault(_boxPlotEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction boxPlotRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    link: function link($scope, elm) {\n      function calcIqr(k) {\n        return function (d) {\n          var q1 = d.quartiles[0];\n          var q3 = d.quartiles[2];\n          var iqr = (q3 - q1) * k;\n\n          var i = -1;\n          var j = d.length;\n\n          // eslint-disable-next-line no-plusplus\n          while (d[++i] < q1 - iqr) {}\n          // eslint-disable-next-line no-plusplus\n          while (d[--j] > q3 + iqr) {}\n          return [i, j];\n        };\n      }\n\n      $scope.$watch('[queryResult && queryResult.getData(), visualization.options]', function () {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        var data = $scope.queryResult.getData();\n        var parentWidth = _d2.default.select(elm[0].parentNode).node().getBoundingClientRect().width;\n        var margin = {\n          top: 10, right: 50, bottom: 40, left: 50, inner: 25\n        };\n        var width = parentWidth - margin.right - margin.left;\n        var height = 500 - margin.top - margin.bottom;\n\n        var min = Infinity;\n        var max = -Infinity;\n        var mydata = [];\n        var value = 0;\n        var d = [];\n        var xAxisLabel = $scope.visualization.options.xAxisLabel;\n        var yAxisLabel = $scope.visualization.options.yAxisLabel;\n\n        var columns = $scope.queryResult.getColumnNames();\n        var xscale = _d2.default.scale.ordinal().domain(columns).rangeBands([0, parentWidth - margin.left - margin.right]);\n\n        var boxWidth = void 0;\n        if (columns.length > 1) {\n          boxWidth = Math.min(xscale(columns[1]), 120.0);\n        } else {\n          boxWidth = 120.0;\n        }\n        margin.inner = boxWidth / 3.0;\n\n        columns.forEach(function (column, i) {\n          d = mydata[i] = [];\n          data.forEach(function (row) {\n            value = row[column];\n            d.push(value);\n            if (value > max) max = Math.ceil(value);\n            if (value < min) min = Math.floor(value);\n          });\n        });\n\n        var yscale = _d2.default.scale.linear().domain([min * 0.99, max * 1.01]).range([height, 0]);\n\n        var chart = (0, _d3box2.default)().whiskers(calcIqr(1.5)).width(boxWidth - 2 * margin.inner).height(height).domain([min * 0.99, max * 1.01]);\n        var xAxis = _d2.default.svg.axis().scale(xscale).orient('bottom');\n\n        var yAxis = _d2.default.svg.axis().scale(yscale).orient('left');\n\n        var xLines = _d2.default.svg.axis().scale(xscale).tickSize(height).orient('bottom');\n\n        var yLines = _d2.default.svg.axis().scale(yscale).tickSize(width).orient('right');\n\n        function barOffset(i) {\n          return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n        }\n\n        _d2.default.select(elm[0]).selectAll('svg').remove();\n\n        var plot = _d2.default.select(elm[0]).append('svg').attr('width', parentWidth).attr('height', height + margin.bottom + margin.top).append('g').attr('width', parentWidth - margin.left - margin.right).attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        _d2.default.select('svg').append('text').attr('class', 'box').attr('x', parentWidth / 2.0).attr('text-anchor', 'middle').attr('y', height + margin.bottom).text(xAxisLabel);\n\n        _d2.default.select('svg').append('text').attr('class', 'box').attr('transform', 'translate(10,' + (height + margin.top + margin.bottom) / 2.0 + ')rotate(-90)').attr('text-anchor', 'middle').text(yAxisLabel);\n\n        plot.append('rect').attr('class', 'grid-background').attr('width', width).attr('height', height);\n\n        plot.append('g').attr('class', 'grid').call(yLines);\n\n        plot.append('g').attr('class', 'grid').call(xLines);\n\n        plot.append('g').attr('class', 'x axis').attr('transform', 'translate(0,' + height + ')').call(xAxis);\n\n        plot.append('g').attr('class', 'y axis').call(yAxis);\n\n        plot.selectAll('.box').data(mydata).enter().append('g').attr('class', 'box').attr('width', boxWidth).attr('height', height).attr('transform', function (_, i) {\n          return 'translate(' + barOffset(i) + ',' + 0 + ')';\n        }).call(chart);\n      }, true);\n    }\n  };\n}\n\nfunction boxPlotEditor() {\n  return {\n    restrict: 'E',\n    template: _boxPlotEditor2.default\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('boxplotRenderer', boxPlotRenderer);\n  ngModule.directive('boxplotEditor', boxPlotEditor);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var renderTemplate = '<boxplot-renderer ' + 'options=\"visualization.options\" query-result=\"queryResult\">' + '</boxplot-renderer>';\n\n    var editTemplate = '<boxplot-editor></boxplot-editor>';\n\n    VisualizationProvider.registerVisualization({\n      type: 'BOXPLOT',\n      name: 'Boxplot (Deprecated)',\n      renderTemplate: renderTemplate,\n      editorTemplate: editTemplate\n    });\n  }]);\n}\n\n/***/ }),\n/* 463 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nfunction box() {\n  var width = 1,\n      height = 1,\n      duration = 0,\n      domain = null,\n      value = Number,\n      whiskers = boxWhiskers,\n      quartiles = boxQuartiles,\n      tickFormat = null;\n\n  // For each small multiple\n  function box(g) {\n    g.each(function (d, i) {\n      d = d.map(value).sort(d3.ascending);\n      var g = d3.select(this),\n          n = d.length,\n          min = d[0],\n          max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      var quartileData = d.quartiles = quartiles(d);\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      var whiskerIndices = whiskers && whiskers.call(this, d, i),\n          whiskerData = whiskerIndices && whiskerIndices.map(function (i) {\n        return d[i];\n      });\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      var outlierIndices = whiskerIndices ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n)) : d3.range(n);\n\n      // Compute the new x-scale.\n      var x1 = d3.scale.linear().domain(domain && domain.call(this, d, i) || [min, max]).range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      var x0 = this.__chart__ || d3.scale.linear().domain([0, Infinity]).range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      var center = g.selectAll('line.center').data(whiskerData ? [whiskerData] : []);\n\n      center.enter().insert('line', 'rect').attr('class', 'center').attr('x1', width / 2).attr('y1', function (d) {\n        return x0(d[0]);\n      }).attr('x2', width / 2).attr('y2', function (d) {\n        return x0(d[1]);\n      }).style('opacity', 1e-6).transition().duration(duration).style('opacity', 1).attr('y1', function (d) {\n        return x1(d[0]);\n      }).attr('y2', function (d) {\n        return x1(d[1]);\n      });\n\n      center.transition().duration(duration).style('opacity', 1).attr('y1', function (d) {\n        return x1(d[0]);\n      }).attr('y2', function (d) {\n        return x1(d[1]);\n      });\n\n      center.exit().transition().duration(duration).style('opacity', 1e-6).attr('y1', function (d) {\n        return x1(d[0]);\n      }).attr('y2', function (d) {\n        return x1(d[1]);\n      }).remove();\n\n      // Update innerquartile box.\n      var box = g.selectAll('rect.box').data([quartileData]);\n\n      box.enter().append('rect').attr('class', 'box').attr('x', 0).attr('y', function (d) {\n        return x0(d[2]);\n      }).attr('width', width).attr('height', function (d) {\n        return x0(d[0]) - x0(d[2]);\n      }).transition().duration(duration).attr('y', function (d) {\n        return x1(d[2]);\n      }).attr('height', function (d) {\n        return x1(d[0]) - x1(d[2]);\n      });\n\n      box.transition().duration(duration).attr('y', function (d) {\n        return x1(d[2]);\n      }).attr('height', function (d) {\n        return x1(d[0]) - x1(d[2]);\n      });\n\n      box.exit().remove();\n\n      // Update median line.\n      var medianLine = g.selectAll('line.median').data([quartileData[1]]);\n\n      medianLine.enter().append('line').attr('class', 'median').attr('x1', 0).attr('y1', x0).attr('x2', width).attr('y2', x0).transition().duration(duration).attr('y1', x1).attr('y2', x1);\n\n      medianLine.transition().duration(duration).attr('y1', x1).attr('y2', x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      var whisker = g.selectAll('line.whisker').data(whiskerData || []);\n\n      whisker.enter().insert('line', 'circle, text').attr('class', 'whisker').attr('x1', 0).attr('y1', x0).attr('x2', width).attr('y2', x0).style('opacity', 1e-6).transition().duration(duration).attr('y1', x1).attr('y2', x1).style('opacity', 1);\n\n      whisker.transition().duration(duration).attr('y1', x1).attr('y2', x1).style('opacity', 1);\n\n      whisker.exit().transition().duration(duration).attr('y1', x1).attr('y2', x1).style('opacity', 1e-6).remove();\n\n      // Update outliers.\n      var outlier = g.selectAll('circle.outlier').data(outlierIndices, Number);\n\n      outlier.enter().insert('circle', 'text').attr('class', 'outlier').attr('r', 5).attr('cx', width / 2).attr('cy', function (i) {\n        return x0(d[i]);\n      }).style('opacity', 1e-6).transition().duration(duration).attr('cy', function (i) {\n        return x1(d[i]);\n      }).style('opacity', 1);\n\n      outlier.transition().duration(duration).attr('cy', function (i) {\n        return x1(d[i]);\n      }).style('opacity', 1);\n\n      outlier.exit().transition().duration(duration).attr('cy', function (i) {\n        return x1(d[i]);\n      }).style('opacity', 1e-6).remove();\n\n      // Compute the tick format.\n      var format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      var boxTick = g.selectAll('text.box').data(quartileData);\n\n      boxTick.enter().append('text').attr('class', 'box').attr('dy', '.3em').attr('dx', function (d, i) {\n        return i & 1 ? 6 : -6;\n      }).attr('x', function (d, i) {\n        return i & 1 ? width : 0;\n      }).attr('y', x0).attr('text-anchor', function (d, i) {\n        return i & 1 ? 'start' : 'end';\n      }).text(format).transition().duration(duration).attr('y', x1);\n\n      boxTick.transition().duration(duration).text(format).attr('y', x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      var whiskerTick = g.selectAll('text.whisker').data(whiskerData || []);\n\n      whiskerTick.enter().append('text').attr('class', 'whisker').attr('dy', '.3em').attr('dx', 6).attr('x', width).attr('y', x0).text(format).style('opacity', 1e-6).transition().duration(duration).attr('y', x1).style('opacity', 1);\n\n      whiskerTick.transition().duration(duration).text(format).attr('y', x1).style('opacity', 1);\n\n      whiskerTick.exit().transition().duration(duration).attr('y', x1).style('opacity', 1e-6).remove();\n    });\n    d3.timer.flush();\n  }\n\n  box.width = function (x) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function (x) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function (x) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function (x) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function (x) {\n    if (!arguments.length) return domain;\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function (x) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function (x) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function (x) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d) {\n  return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n}\n\nexports.default = box;\n\n/***/ }),\n/* 464 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">X Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.xAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Y Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.yAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 465 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _chart = __webpack_require__(466);\n\nvar _chart2 = _interopRequireDefault(_chart);\n\nvar _chartEditor = __webpack_require__(467);\n\nvar _chartEditor2 = _interopRequireDefault(_chartEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nChartEditor.$inject = ['ColorPalette', 'clientConfig'];\n\n\nfunction ChartRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=?'\n    },\n    template: _chart2.default,\n    replace: false,\n    controller: ['$scope', function controller($scope) {\n      $scope.chartSeries = [];\n\n      function zIndexCompare(series) {\n        if ($scope.options.seriesOptions[series.name]) {\n          return $scope.options.seriesOptions[series.name].zIndex;\n        }\n        return 0;\n      }\n\n      function reloadData() {\n        if (!(0, _underscore.isUndefined)($scope.queryResult) && $scope.queryResult.getData()) {\n          var data = $scope.queryResult.getChartData($scope.options.columnMapping);\n          $scope.chartSeries = (0, _underscore.sortBy)(data, zIndexCompare);\n        }\n      }\n\n      function reloadChart() {\n        reloadData();\n        $scope.plotlyOptions = $scope.options;\n      }\n\n      $scope.$watch('options', reloadChart, true);\n      $scope.$watch('queryResult && queryResult.getData()', reloadData);\n    }]\n  };\n}\n\nfunction ChartEditor(ColorPalette, clientConfig) {\n  return {\n    restrict: 'E',\n    template: _chartEditor2.default,\n    scope: {\n      queryResult: '=',\n      options: '=?'\n    },\n    link: function link(scope) {\n      scope.currentTab = 'general';\n      scope.colors = (0, _underscore.extend)({ Automatic: null }, ColorPalette);\n\n      scope.stackingOptions = {\n        Disabled: null,\n        Enabled: 'normal',\n        Percent: 'percent'\n      };\n\n      scope.changeTab = function (tab) {\n        scope.currentTab = tab;\n      };\n\n      scope.chartTypes = {\n        line: { name: 'Line', icon: 'line-chart' },\n        column: { name: 'Bar', icon: 'bar-chart' },\n        area: { name: 'Area', icon: 'area-chart' },\n        pie: { name: 'Pie', icon: 'pie-chart' },\n        scatter: { name: 'Scatter', icon: 'circle-o' },\n        bubble: { name: 'Bubble', icon: 'circle-o' },\n        box: { name: 'Box', icon: 'square-o' }\n      };\n\n      if (clientConfig.allowCustomJSVisualizations) {\n        scope.chartTypes.custom = { name: 'Custom', icon: 'code' };\n      }\n\n      scope.xAxisScales = ['datetime', 'linear', 'logarithmic', 'category'];\n      scope.yAxisScales = ['linear', 'logarithmic', 'datetime', 'category'];\n\n      scope.chartTypeChanged = function () {\n        (0, _underscore.keys)(scope.options.seriesOptions).forEach(function (key) {\n          scope.options.seriesOptions[key].type = scope.options.globalSeriesType;\n        });\n      };\n\n      scope.showSizeColumnPicker = function () {\n        return (0, _underscore.some)(scope.options.seriesOptions, function (options) {\n          return options.type === 'bubble';\n        });\n      };\n\n      if (scope.options.customCode === undefined) {\n        scope.options.customCode = '// Available variables are x, ys, element, and Plotly\\n// Type console.log(x, ys); for more info about x and ys\\n// To plot your graph call Plotly.plot(element, ...)\\n// Plotly examples and docs: https://plot.ly/javascript/';\n      }\n\n      function refreshColumns() {\n        scope.columns = scope.queryResult.getColumns();\n        scope.columnNames = (0, _underscore.pluck)(scope.columns, 'name');\n        if (scope.columnNames.length > 0) {\n          (0, _underscore.each)((0, _underscore.difference)((0, _underscore.keys)(scope.options.columnMapping), scope.columnNames), function (column) {\n            delete scope.options.columnMapping[column];\n          });\n        }\n      }\n\n      function refreshColumnsAndForm() {\n        refreshColumns();\n        if (!scope.queryResult.getData() || scope.queryResult.getData().length === 0 || scope.columns.length === 0) {\n          return;\n        }\n        scope.form.yAxisColumns = (0, _underscore.intersection)(scope.form.yAxisColumns, scope.columnNames);\n        if (!(0, _underscore.contains)(scope.columnNames, scope.form.xAxisColumn)) {\n          scope.form.xAxisColumn = undefined;\n        }\n        if (!(0, _underscore.contains)(scope.columnNames, scope.form.groupby)) {\n          scope.form.groupby = undefined;\n        }\n      }\n\n      function refreshSeries() {\n        var seriesNames = (0, _underscore.pluck)(scope.queryResult.getChartData(scope.options.columnMapping), 'name');\n        var existing = (0, _underscore.keys)(scope.options.seriesOptions);\n        (0, _underscore.each)((0, _underscore.difference)(seriesNames, existing), function (name) {\n          scope.options.seriesOptions[name] = {\n            type: scope.options.globalSeriesType,\n            yAxis: 0\n          };\n          scope.form.seriesList.push(name);\n        });\n        (0, _underscore.each)((0, _underscore.difference)(existing, seriesNames), function (name) {\n          scope.form.seriesList = (0, _underscore.without)(scope.form.seriesList, name);\n          delete scope.options.seriesOptions[name];\n        });\n      }\n\n      function setColumnRole(role, column) {\n        scope.options.columnMapping[column] = role;\n      }\n\n      function unsetColumn(column) {\n        setColumnRole('unused', column);\n      }\n\n      refreshColumns();\n\n      scope.$watch('options.columnMapping', function () {\n        if (scope.queryResult.status === 'done') {\n          refreshSeries();\n        }\n      }, true);\n\n      scope.$watch(function () {\n        return [scope.queryResult.getId(), scope.queryResult.status];\n      }, function (changed) {\n        if (!changed[0] || changed[1] !== 'done') {\n          return;\n        }\n\n        refreshColumnsAndForm();\n        refreshSeries();\n      }, true);\n\n      scope.form = {\n        yAxisColumns: [],\n        seriesList: (0, _underscore.sortBy)((0, _underscore.keys)(scope.options.seriesOptions), function (name) {\n          return scope.options.seriesOptions[name].zIndex;\n        })\n      };\n\n      scope.$watchCollection('form.seriesList', function (value) {\n        (0, _underscore.each)(value, function (name, index) {\n          scope.options.seriesOptions[name].zIndex = index;\n          scope.options.seriesOptions[name].index = 0; // is this needed?\n        });\n      });\n\n      scope.$watchCollection('form.yAxisColumns', function (value, old) {\n        (0, _underscore.each)(old, unsetColumn);\n        (0, _underscore.each)(value, (0, _underscore.partial)(setColumnRole, 'y'));\n      });\n\n      scope.$watch('form.xAxisColumn', function (value, old) {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('x', value);\n        }\n      });\n\n      scope.$watch('form.errorColumn', function (value, old) {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('yError', value);\n        }\n      });\n\n      scope.$watch('form.sizeColumn', function (value, old) {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('size', value);\n        }\n      });\n\n      scope.$watch('form.groupby', function (value, old) {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('series', value);\n        }\n      });\n\n      if (!(0, _underscore.has)(scope.options, 'legend')) {\n        scope.options.legend = { enabled: true };\n      }\n\n      if (!(0, _underscore.has)(scope.options, 'bottomMargin')) {\n        scope.options.bottomMargin = 50;\n      }\n\n      if (scope.columnNames) {\n        (0, _underscore.each)(scope.options.columnMapping, function (value, key) {\n          if (scope.columnNames.length > 0 && !(0, _underscore.contains)(scope.columnNames, key)) {\n            return;\n          }\n          if (value === 'x') {\n            scope.form.xAxisColumn = key;\n          } else if (value === 'y') {\n            scope.form.yAxisColumns.push(key);\n          } else if (value === 'series') {\n            scope.form.groupby = key;\n          } else if (value === 'yError') {\n            scope.form.errorColumn = key;\n          } else if (value === 'size') {\n            scope.form.sizeColumn = key;\n          }\n        });\n      }\n    }\n  };\n}\n\nvar ColorBox = {\n  bindings: {\n    color: '<'\n  },\n  template: \"<span style='width: 12px; height: 12px; background-color: {{$ctrl.color}}; display: inline-block; margin-right: 5px;'></span>\"\n};\n\nfunction init(ngModule) {\n  ngModule.component('colorBox', ColorBox);\n  ngModule.directive('chartRenderer', ChartRenderer);\n  ngModule.directive('chartEditor', ChartEditor);\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var renderTemplate = '<chart-renderer options=\"visualization.options\" query-result=\"queryResult\"></chart-renderer>';\n    var editTemplate = '<chart-editor options=\"visualization.options\" query-result=\"queryResult\"></chart-editor>';\n\n    var defaultOptions = {\n      globalSeriesType: 'column',\n      sortX: true,\n      legend: { enabled: true },\n      yAxis: [{ type: 'linear' }, { type: 'linear', opposite: true }],\n      xAxis: { type: 'datetime', labels: { enabled: true } },\n      error_y: { type: 'data', visible: true },\n      series: { stacking: null, error_y: { type: 'data', visible: true } },\n      seriesOptions: {},\n      columnMapping: {},\n      bottomMargin: 50\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'CHART',\n      name: 'Chart',\n      renderTemplate: renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 466 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div ng-if=\\\"plotlyOptions.globalSeriesType != 'custom'\\\">\\n  <plotly-chart options='plotlyOptions' series='chartSeries' height=\\\"300\\\"></plotly-chart>\\n</div>\\n<div ng-if=\\\"plotlyOptions.globalSeriesType == 'custom'\\\">\\n  <custom-plotly-chart series='chartSeries' options='plotlyOptions' height=\\\"300\\\"></custom-plotly-chart>\\n</div>\\n\"\n\n/***/ }),\n/* 467 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'xAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('xAxis')\\\">X Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'yAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('yAxis')\\\">Y Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'series'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('series')\\\">Series</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Chart Type</label>\\n      <div ng-if=\\\"chartTypes\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.globalSeriesType\\\" on-select=\\\"chartTypeChanged()\\\">\\n          <ui-select-match placeholder=\\\"Choose chart type...\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n              {{$select.selected.value.name}}\\n            </div>\\n          </ui-select-match>\\n          <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n            <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n              ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': chartEditor.xAxisColumn.$invalid}\\\">\\n      <label class=\\\"control-label\\\">X Column</label>\\n\\n      <ui-select name=\\\"xAxisColumn\\\" required ng-model=\\\"form.xAxisColumn\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices-->\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': !form.yAxisColumns || form.yAxisColumns.length == 0}\\\">\\n      <label class=\\\"control-label\\\">Y Columns</label>\\n\\n      <ui-select multiple name=\\\"yAxisColumns\\\" required ng-model=\\\"form.yAxisColumns\\\">\\n        <ui-select-match placeholder=\\\"Choose columns...\\\">{{$item}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.groupby | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Group by</label>\\n      <ui-select name=\\\"groupby\\\" ng-model=\\\"form.groupby\\\" class=\\\"clearable\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">\\n          {{$select.selected}}\\n        </ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"showSizeColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Bubble size column</label>\\n\\n      <ui-select name=\\\"sizeColumn\\\" ng-model=\\\"form.sizeColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Errors column</label>\\n\\n      <ui-select name=\\\"errorColumn\\\" ng-model=\\\"form.errorColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.legend.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Legend\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'box'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.showpoints\\\">\\n        <i class=\\\"input-helper\\\"></i> Show All Points\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Stacking</label>\\n\\n      <div ng-if=\\\"stackingOptions\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.series.stacking\\\"\\n                   ng-disabled=\\\"['line', 'area', 'column'].indexOf(options.globalSeriesType) == -1\\\">\\n          <ui-select-match placeholder=\\\"Choose Stacking...\\\">{{$select.selected.key | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"value.value as (key, value) in stackingOptions\\\">\\n            <div ng-bind-html=\\\"value.key | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'box'\\\">\\n      <label>\\n        <label class=\\\"control-label\\\">Graph Height</label>\\n        <input name=\\\"graph-height\\\" type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"options.height\\\">\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label class=\\\"control-label\\\">Custom code</label>\\n    <textarea ng-model=\\\"options.customCode\\\" class=\\\"form-control v-resizable\\\" rows=\\\"10\\\">\\n    </textarea>\\n  </div>\\n\\n  <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"options.enableConsoleLogs\\\">\\n      <i class=\\\"input-helper\\\"></i> Show errors in the console\\n    </label>\\n  </div>\\n\\n  <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"options.autoRedraw\\\">\\n      <i class=\\\"input-helper\\\"></i> Auto update graph\\n    </label>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'xAxis'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Scale</label>\\n      <ui-select ng-model=\\\"options.xAxis.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"scaleType in xAxisScales\\\">\\n          <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input ng-model=\\\"options.xAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.sortX\\\">\\n        <i class=\\\"input-helper\\\"></i> Sort Values\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.xAxis.labels.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Labels\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Height</label>\\n      <input name=\\\"x-axis-height\\\" type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"options.bottomMargin\\\">\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'yAxis'\\\">\\n    <div ng-repeat=\\\"yAxis in options.yAxis\\\">\\n      <h4>{{$index == 0 ? 'Left' : 'Right'}} Y Axis</h4>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Scale</label>\\n        <ui-select ng-model=\\\"yAxis.type\\\">\\n          <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"scaleType in yAxisScales\\\">\\n            <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Name</label>\\n        <input ng-model=\\\"yAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Min Value</label>\\n        <input ng-model=\\\"yAxis.rangeMin\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Max Value</label>\\n        <input ng-model=\\\"yAxis.rangeMax\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab=='series'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>zIndex</th>\\n      <th>Left Y Axis</th>\\n      <th>Right Y Axis</th>\\n      <th>Label</th>\\n      <th>Color</th>\\n      <th>Type</th>\\n      </thead>\\n      <tbody ui-sortable ng-model=\\\"form.seriesList\\\">\\n      <tr ng-repeat=\\\"name in form.seriesList\\\">\\n        <td style=\\\"cursor: move;\\\"><i class=\\\"fa fa-arrows-v\\\"></i> <span\\n          ng-bind=\\\"options.seriesOptions[name].zIndex + 1\\\"></span></td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"0\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"1\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <input placeholder=\\\"{{name}}\\\" class=\\\"form-control input-sm super-small-input\\\" type=\\\"text\\\"\\n                 ng-model=\\\"options.seriesOptions[name].name\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 105px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].type\\\">\\n            <ui-select-match placeholder=\\\"Chart Type\\\">\\n              <div>\\n                <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n                {{$select.selected.value.name}}\\n              </div>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n              <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n                ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\"\n\n/***/ }),\n/* 468 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _d = __webpack_require__(2);\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _core = __webpack_require__(469);\n\nvar _core2 = _interopRequireDefault(_core);\n\nvar _bar = __webpack_require__(597);\n\nvar _bar2 = _interopRequireDefault(_bar);\n\nvar _pie = __webpack_require__(602);\n\nvar _pie2 = _interopRequireDefault(_pie);\n\nvar _histogram = __webpack_require__(610);\n\nvar _histogram2 = _interopRequireDefault(_histogram);\n\nvar _box = __webpack_require__(619);\n\nvar _box2 = _interopRequireDefault(_box);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n_core2.default.register([_bar2.default, _pie2.default, _histogram2.default, _box2.default]);\n_core2.default.setPlotConfig({\n  modeBarButtonsToRemove: ['sendDataToCloud']\n});\n\n// The following colors will be used if you pick \"Automatic\" color.\nvar BaseColors = {\n  Blue: '#4572A7',\n  Red: '#AA4643',\n  Green: '#89A54E',\n  Purple: '#80699B',\n  Cyan: '#3D96AE',\n  Orange: '#DB843D',\n  'Light Blue': '#92A8CD',\n  Lilac: '#A47D7C',\n  'Light Green': '#B5CA92',\n  Brown: '#A52A2A',\n  Black: '#000000',\n  Gray: '#808080',\n  Pink: '#FFC0CB',\n  'Dark Blue': '#00008b'\n};\n\n// Additional colors for the user to choose from:\nvar ColorPalette = _extends({}, BaseColors, {\n  'Indian Red': '#F8766D',\n  'Green 2': '#53B400',\n  'Green 3': '#00C094',\n  DarkTurquoise: '#00B6EB',\n  'Dark Violet': '#A58AFF',\n  'Pink 2': '#FB61D7'\n});\n\nvar ColorPaletteArray = (0, _underscore.values)(BaseColors);\n\nfunction fillXValues(seriesList) {\n  var xValues = (0, _underscore.sortBy)(_underscore.union.apply(undefined, _toConsumableArray((0, _underscore.pluck)(seriesList, 'x'))), _underscore.identity);\n  seriesList.forEach(function (series) {\n    series.x = (0, _underscore.sortBy)(series.x, _underscore.identity);\n\n    (0, _underscore.each)(xValues, function (value, index) {\n      if (series.x[index] !== value) {\n        series.x.splice(index, 0, value);\n        series.y.splice(index, 0, null);\n      }\n    });\n  });\n}\n\nfunction storeOriginalHeightForEachSeries(seriesList) {\n  seriesList.forEach(function (series) {\n    if (!(0, _underscore.has)(series, 'visible')) {\n      series.visible = true;\n      series.original_y = series.y.slice();\n    }\n  });\n}\n\nfunction getEnabledSeries(seriesList) {\n  return seriesList.filter(function (series) {\n    return series.visible === true;\n  });\n}\n\nfunction initializeTextAndHover(seriesList) {\n  seriesList.forEach(function (series) {\n    series.text = [];\n    series.hoverinfo = 'text+name';\n  });\n}\n\nfunction normalAreaStacking(seriesList) {\n  fillXValues(seriesList);\n  storeOriginalHeightForEachSeries(seriesList);\n  initializeTextAndHover(seriesList);\n\n  var enabledSeriesList = getEnabledSeries(seriesList);\n\n  (0, _underscore.each)(enabledSeriesList, function (series, seriesIndex, list) {\n    (0, _underscore.each)(series.y, function (_, yIndex) {\n      var cumulativeHeightOfPreviousSeries = seriesIndex > 0 ? list[seriesIndex - 1].y[yIndex] : 0;\n      var cumulativeHeightWithThisSeries = cumulativeHeightOfPreviousSeries + series.original_y[yIndex];\n\n      series.y[yIndex] = cumulativeHeightWithThisSeries;\n      series.text.push('Value: ' + series.original_y[yIndex] + '<br>Sum: ' + cumulativeHeightWithThisSeries);\n    });\n  });\n}\n\nfunction lastVisibleY(seriesList, lastSeriesIndex, yIndex) {\n  for (var i = lastSeriesIndex; i >= 0; i -= 1) {\n    if (seriesList[i].visible === true) {\n      return seriesList[i].y[yIndex];\n    }\n  }\n  return 0;\n}\n\nfunction percentAreaStacking(seriesList) {\n  if (seriesList.length === 0) {\n    return;\n  }\n  fillXValues(seriesList);\n  storeOriginalHeightForEachSeries(seriesList);\n  initializeTextAndHover(seriesList);\n\n  (0, _underscore.each)(seriesList[0].y, function (seriesY, yIndex) {\n    var sumOfCorrespondingDataPoints = seriesList.reduce(function (total, series) {\n      return total + series.original_y[yIndex];\n    }, 0);\n\n    (0, _underscore.each)(seriesList, function (series, seriesIndex) {\n      var percentage = series.original_y[yIndex] / sumOfCorrespondingDataPoints * 100;\n      var previousVisiblePercentage = lastVisibleY(seriesList, seriesIndex - 1, yIndex);\n      series.y[yIndex] = percentage + previousVisiblePercentage;\n      series.text.push('Value: ' + series.original_y[yIndex] + '<br>Relative: ' + percentage.toFixed(2) + '%');\n    });\n  });\n}\n\nfunction percentBarStacking(seriesList) {\n  if (seriesList.length === 0) {\n    return;\n  }\n  fillXValues(seriesList);\n  initializeTextAndHover(seriesList);\n\n  for (var i = 0; i < seriesList[0].y.length; i += 1) {\n    var sum = 0;\n    for (var j = 0; j < seriesList.length; j += 1) {\n      sum += seriesList[j].y[i];\n    }\n    for (var _j = 0; _j < seriesList.length; _j += 1) {\n      var value = seriesList[_j].y[i] / sum * 100;\n      seriesList[_j].text.push('Value: ' + seriesList[_j].y[i] + '<br>Relative: ' + value.toFixed(2) + '%');\n      seriesList[_j].y[i] = value;\n    }\n  }\n}\n\nfunction normalizeValue(value) {\n  if (_moment2.default.isMoment(value)) {\n    return value.format('YYYY-MM-DD HH:mm:ss');\n  }\n  return value;\n}\n\nfunction seriesMinValue(series) {\n  return (0, _underscore.min)(series.map(function (s) {\n    return (0, _underscore.min)(s.y);\n  }));\n}\n\nfunction seriesMaxValue(series) {\n  return (0, _underscore.max)(series.map(function (s) {\n    return (0, _underscore.max)(s.y);\n  }));\n}\n\nfunction leftAxisSeries(series) {\n  return series.filter(function (s) {\n    return s.yaxis !== 'y2';\n  });\n}\n\nfunction rightAxisSeries(series) {\n  return series.filter(function (s) {\n    return s.yaxis === 'y2';\n  });\n}\n\nfunction getScaleType(scale) {\n  if (scale === 'datetime') {\n    return 'date';\n  }\n  if (scale === 'logarithmic') {\n    return 'log';\n  }\n  return scale;\n}\n\nfunction getColor(index) {\n  return ColorPaletteArray[index % ColorPaletteArray.length];\n}\n\nvar PlotlyChart = function PlotlyChart() {\n  var bottomMargin = 50;\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    scope: {\n      options: '=',\n      series: '=',\n      height: '='\n    },\n    link: function link(scope, element) {\n      function calculateHeight() {\n        var height = Math.max(scope.height, scope.height - 50 + bottomMargin);\n        if (scope.options.globalSeriesType === 'box') {\n          return scope.options.height || height;\n        }\n        return height;\n      }\n\n      function setType(series, type) {\n        if (type === 'column') {\n          series.type = 'bar';\n        } else if (type === 'line') {\n          series.mode = 'lines';\n        } else if (type === 'area') {\n          series.fill = scope.options.series.stacking === null ? 'tozeroy' : 'tonexty';\n          series.mode = 'lines';\n        } else if (type === 'scatter') {\n          series.type = 'scatter';\n          series.mode = 'markers';\n        } else if (type === 'bubble') {\n          series.mode = 'markers';\n        } else if (type === 'box') {\n          series.type = 'box';\n          series.mode = 'markers';\n        }\n      }\n\n      function getTitle(axis) {\n        if (!(0, _underscore.isUndefined)(axis) && !(0, _underscore.isUndefined)(axis.title)) {\n          return axis.title.text;\n        }\n        return null;\n      }\n\n      function recalculateOptions() {\n        scope.data.length = 0;\n        scope.layout.showlegend = (0, _underscore.has)(scope.options, 'legend') ? scope.options.legend.enabled : true;\n        if ((0, _underscore.has)(scope.options, 'bottomMargin')) {\n          bottomMargin = parseInt(scope.options.bottomMargin, 10);\n          scope.layout.margin.b = bottomMargin;\n        }\n        delete scope.layout.barmode;\n        delete scope.layout.xaxis;\n        delete scope.layout.yaxis;\n        delete scope.layout.yaxis2;\n\n        if (scope.options.globalSeriesType === 'pie') {\n          var hasX = (0, _underscore.contains)((0, _underscore.values)(scope.options.columnMapping), 'x');\n          var rows = scope.series.length > 2 ? 2 : 1;\n          var cellsInRow = Math.ceil(scope.series.length / rows);\n          var cellWidth = 1 / cellsInRow;\n          var cellHeight = 1 / rows;\n          var xPadding = 0.02;\n          var yPadding = 0.05;\n\n          (0, _underscore.each)(scope.series, function (series, index) {\n            var xPosition = index % cellsInRow * cellWidth;\n            var yPosition = Math.floor(index / cellsInRow) * cellHeight;\n            var plotlySeries = {\n              values: [],\n              labels: [],\n              type: 'pie',\n              hole: 0.4,\n              marker: { colors: ColorPaletteArray },\n              text: series.name,\n              textposition: 'inside',\n              name: series.name,\n              domain: {\n                x: [xPosition, xPosition + cellWidth - xPadding],\n                y: [yPosition, yPosition + cellHeight - yPadding]\n              }\n            };\n\n            series.data.forEach(function (row) {\n              plotlySeries.values.push(row.y);\n              plotlySeries.labels.push(hasX ? row.x : 'Slice ' + index);\n            });\n\n            scope.data.push(plotlySeries);\n          });\n          return;\n        }\n\n        if (scope.options.globalSeriesType === 'box') {\n          scope.layout.boxmode = 'group';\n          scope.layout.boxgroupgap = 0.50;\n        }\n\n        var hasY2 = false;\n        var sortX = scope.options.sortX === true || scope.options.sortX === undefined;\n        var useUnifiedXaxis = sortX && scope.options.xAxis.type === 'category' && scope.options.globalSeriesType !== 'box';\n\n        var unifiedX = null;\n        if (useUnifiedXaxis) {\n          unifiedX = (0, _underscore.sortBy)(_underscore.union.apply(undefined, _toConsumableArray(scope.series.map(function (s) {\n            return (0, _underscore.pluck)(s.data, 'x');\n          }))), _underscore.identity);\n        }\n\n        (0, _underscore.each)(scope.series, function (series, index) {\n          var seriesOptions = scope.options.seriesOptions[series.name] || { type: scope.options.globalSeriesType };\n\n          var seriesColor = seriesOptions.color ? seriesOptions.color : getColor(index);\n\n          var plotlySeries = {\n            x: [],\n            y: [],\n            error_y: {\n              array: [],\n              color: seriesColor\n            },\n            name: seriesOptions.name || series.name,\n            marker: { color: seriesColor }\n          };\n\n          if (seriesOptions.yAxis === 1 && (scope.options.series.stacking === null || seriesOptions.type === 'line')) {\n            hasY2 = true;\n            plotlySeries.yaxis = 'y2';\n          }\n\n          setType(plotlySeries, seriesOptions.type);\n          var data = series.data;\n          if (sortX) {\n            data = (0, _underscore.sortBy)(data, 'x');\n          }\n\n          if (useUnifiedXaxis && index === 0) {\n            var yValues = {};\n            var eValues = {};\n\n            data.forEach(function (row) {\n              yValues[row.x] = row.y;\n              if (row.yError) {\n                eValues[row.x] = row.yError;\n              }\n            });\n\n            unifiedX.forEach(function (x) {\n              plotlySeries.x.push(normalizeValue(x));\n              plotlySeries.y.push(normalizeValue(yValues[x] || null));\n              if (!(0, _underscore.isUndefined)(eValues[x])) {\n                plotlySeries.error_y.array.push(normalizeValue(eValues[x] || null));\n              }\n            });\n          } else {\n            data.forEach(function (row) {\n              plotlySeries.x.push(normalizeValue(row.x));\n              plotlySeries.y.push(normalizeValue(row.y));\n              if (row.yError !== undefined) {\n                plotlySeries.error_y.array.push(normalizeValue(row.yError));\n              }\n            });\n          }\n          if (!plotlySeries.error_y.length) {\n            delete plotlySeries.error_y.length;\n          }\n\n          if (seriesOptions.type === 'bubble') {\n            plotlySeries.marker = {\n              size: (0, _underscore.pluck)(data, 'size')\n            };\n          }\n\n          if (seriesOptions.type === 'box') {\n            plotlySeries.boxpoints = 'outliers';\n            plotlySeries.marker = {\n              color: seriesColor,\n              size: 3\n            };\n            if (scope.options.showpoints) {\n              plotlySeries.boxpoints = 'all';\n              plotlySeries.jitter = 0.3;\n              plotlySeries.pointpos = -1.8;\n            }\n          }\n\n          scope.data.push(plotlySeries);\n        });\n\n        scope.layout.xaxis = {\n          title: getTitle(scope.options.xAxis),\n          type: getScaleType(scope.options.xAxis.type)\n        };\n\n        if (!(0, _underscore.isUndefined)(scope.options.xAxis.labels)) {\n          scope.layout.xaxis.showticklabels = scope.options.xAxis.labels.enabled;\n        }\n\n        if ((0, _underscore.isArray)(scope.options.yAxis)) {\n          scope.layout.yaxis = {\n            title: getTitle(scope.options.yAxis[0]),\n            type: getScaleType(scope.options.yAxis[0].type)\n          };\n\n          if ((0, _underscore.isNumber)(scope.options.yAxis[0].rangeMin) || (0, _underscore.isNumber)(scope.options.yAxis[0].rangeMax)) {\n            var minY = scope.options.yAxis[0].rangeMin || Math.min(0, seriesMinValue(leftAxisSeries(scope.data)));\n            var maxY = scope.options.yAxis[0].rangeMax || seriesMaxValue(leftAxisSeries(scope.data));\n\n            scope.layout.yaxis.range = [minY, maxY];\n          }\n        }\n        if (hasY2 && !(0, _underscore.isUndefined)(scope.options.yAxis)) {\n          scope.layout.yaxis2 = {\n            title: getTitle(scope.options.yAxis[1]),\n            type: getScaleType(scope.options.yAxis[1].type),\n            overlaying: 'y',\n            side: 'right'\n          };\n\n          if ((0, _underscore.isNumber)(scope.options.yAxis[1].rangeMin) || (0, _underscore.isNumber)(scope.options.yAxis[1].rangeMax)) {\n            var _minY = scope.options.yAxis[1].rangeMin || Math.min(0, seriesMinValue(rightAxisSeries(scope.data)));\n            var _maxY = scope.options.yAxis[1].rangeMax || seriesMaxValue(rightAxisSeries(scope.data));\n\n            scope.layout.yaxis2.range = [_minY, _maxY];\n          }\n        } else {\n          delete scope.layout.yaxis2;\n        }\n\n        if (scope.options.series.stacking === 'normal') {\n          scope.layout.barmode = 'stack';\n          if (scope.options.globalSeriesType === 'area') {\n            normalAreaStacking(scope.data);\n          }\n        } else if (scope.options.series.stacking === 'percent') {\n          scope.layout.barmode = 'stack';\n          if (scope.options.globalSeriesType === 'area') {\n            percentAreaStacking(scope.data);\n          } else if (scope.options.globalSeriesType === 'column') {\n            percentBarStacking(scope.data);\n          }\n        }\n\n        scope.layout.margin.b = bottomMargin;\n        scope.layout.height = calculateHeight();\n      }\n\n      scope.$watch('series', recalculateOptions);\n      scope.$watch('options', recalculateOptions, true);\n\n      scope.layout = {\n        margin: {\n          l: 50, r: 50, b: bottomMargin, t: 20, pad: 4\n        },\n        height: calculateHeight(),\n        autosize: true\n      };\n      scope.plotlyOptions = { showLink: false, displaylogo: false };\n      scope.data = [];\n\n      var plotlyElement = element[0].children[0];\n      _core2.default.newPlot(plotlyElement, scope.data, scope.layout, scope.plotlyOptions);\n\n      plotlyElement.on('plotly_afterplot', function () {\n        if (scope.options.globalSeriesType === 'area' && (scope.options.series.stacking === 'normal' || scope.options.series.stacking === 'percent')) {\n          document.querySelectorAll('.legendtoggle').forEach(function (rectDiv, i) {\n            _d2.default.select(rectDiv).on('click', function () {\n              var maxIndex = scope.data.length - 1;\n              var itemClicked = scope.data[maxIndex - i];\n\n              itemClicked.visible = itemClicked.visible === true ? 'legendonly' : true;\n              if (scope.options.series.stacking === 'normal') {\n                normalAreaStacking(scope.data);\n              } else if (scope.options.series.stacking === 'percent') {\n                percentAreaStacking(scope.data);\n              }\n              _core2.default.redraw(plotlyElement);\n            });\n          });\n        }\n      });\n      scope.$watch('layout', function (layout, old) {\n        if ((0, _underscore.isEqual)(layout, old)) {\n          return;\n        }\n        _core2.default.relayout(plotlyElement, layout);\n      }, true);\n\n      scope.$watch('data', function (data) {\n        if (!(0, _underscore.isEmpty)(data)) {\n          _core2.default.redraw(plotlyElement);\n        }\n      }, true);\n    }\n  };\n};\n\nvar CustomPlotlyChart = function CustomPlotlyChart(clientConfig) {\n  var customChart = {\n    restrict: 'E',\n    template: '<div></div>',\n    scope: {\n      series: '=',\n      options: '=',\n      height: '='\n    },\n    link: function link(scope, element) {\n      if (!clientConfig.allowCustomJSVisualizations) {\n        return;\n      }\n      var refresh = function refresh() {\n        // Clear existing data with blank data for succeeding codeCall adds data to existing plot.\n        _core2.default.newPlot(element[0].children[0]);\n\n        // eslint-disable-next-line no-eval\n        var codeCall = eval('codeCall = function(x, ys, element, Plotly){ ' + scope.options.customCode + ' }');\n        codeCall(scope.x, scope.ys, element[0].children[0], _core2.default);\n      };\n      var timeSeriesToPlotlySeries = function timeSeriesToPlotlySeries() {\n        scope.x = [];\n        scope.ys = {};\n        (0, _underscore.each)(scope.series, function (series) {\n          scope.ys[series.name] = [];\n          (0, _underscore.each)(series.data, function (point) {\n            scope.x.push(normalizeValue(point.x));\n            scope.ys[series.name].push(normalizeValue(point.y));\n          });\n        });\n      };\n      scope.$watch('[options.customCode, options.autoRedraw]', function () {\n        try {\n          if (scope.options.autoRedraw) {\n            refresh();\n          }\n        } catch (err) {\n          if (scope.options.enableConsoleLogs) {\n            // eslint-disable-next-line no-console\n            console.log('Error while executing custom graph: ' + err);\n          }\n        }\n      }, true);\n      scope.$watch('series', function () {\n        timeSeriesToPlotlySeries();\n        refresh();\n      }, true);\n    }\n  };\n  return customChart;\n};\n\nCustomPlotlyChart.$inject = ['clientConfig'];\nfunction init(ngModule) {\n  ngModule.constant('ColorPalette', ColorPalette);\n  ngModule.directive('plotlyChart', PlotlyChart);\n  ngModule.directive('customPlotlyChart', CustomPlotlyChart);\n}\n\n/***/ }),\n/* 469 */,\n/* 470 */,\n/* 471 */,\n/* 472 */,\n/* 473 */,\n/* 474 */,\n/* 475 */,\n/* 476 */,\n/* 477 */,\n/* 478 */,\n/* 479 */,\n/* 480 */,\n/* 481 */,\n/* 482 */,\n/* 483 */,\n/* 484 */,\n/* 485 */,\n/* 486 */,\n/* 487 */,\n/* 488 */,\n/* 489 */,\n/* 490 */,\n/* 491 */,\n/* 492 */,\n/* 493 */,\n/* 494 */,\n/* 495 */,\n/* 496 */,\n/* 497 */,\n/* 498 */,\n/* 499 */,\n/* 500 */,\n/* 501 */,\n/* 502 */,\n/* 503 */,\n/* 504 */,\n/* 505 */,\n/* 506 */,\n/* 507 */,\n/* 508 */,\n/* 509 */,\n/* 510 */,\n/* 511 */,\n/* 512 */,\n/* 513 */,\n/* 514 */,\n/* 515 */,\n/* 516 */,\n/* 517 */,\n/* 518 */,\n/* 519 */,\n/* 520 */,\n/* 521 */,\n/* 522 */,\n/* 523 */,\n/* 524 */,\n/* 525 */,\n/* 526 */,\n/* 527 */,\n/* 528 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n/* 529 */,\n/* 530 */,\n/* 531 */,\n/* 532 */,\n/* 533 */,\n/* 534 */,\n/* 535 */,\n/* 536 */,\n/* 537 */,\n/* 538 */,\n/* 539 */,\n/* 540 */,\n/* 541 */,\n/* 542 */,\n/* 543 */,\n/* 544 */,\n/* 545 */,\n/* 546 */,\n/* 547 */,\n/* 548 */,\n/* 549 */,\n/* 550 */,\n/* 551 */,\n/* 552 */,\n/* 553 */,\n/* 554 */,\n/* 555 */,\n/* 556 */,\n/* 557 */,\n/* 558 */,\n/* 559 */,\n/* 560 */,\n/* 561 */,\n/* 562 */,\n/* 563 */,\n/* 564 */,\n/* 565 */,\n/* 566 */,\n/* 567 */,\n/* 568 */,\n/* 569 */,\n/* 570 */,\n/* 571 */,\n/* 572 */,\n/* 573 */,\n/* 574 */,\n/* 575 */,\n/* 576 */,\n/* 577 */,\n/* 578 */,\n/* 579 */,\n/* 580 */,\n/* 581 */,\n/* 582 */,\n/* 583 */,\n/* 584 */,\n/* 585 */,\n/* 586 */,\n/* 587 */,\n/* 588 */,\n/* 589 */,\n/* 590 */,\n/* 591 */,\n/* 592 */,\n/* 593 */,\n/* 594 */,\n/* 595 */,\n/* 596 */,\n/* 597 */,\n/* 598 */,\n/* 599 */,\n/* 600 */,\n/* 601 */,\n/* 602 */,\n/* 603 */,\n/* 604 */,\n/* 605 */,\n/* 606 */,\n/* 607 */,\n/* 608 */,\n/* 609 */,\n/* 610 */,\n/* 611 */,\n/* 612 */,\n/* 613 */,\n/* 614 */,\n/* 615 */,\n/* 616 */,\n/* 617 */,\n/* 618 */,\n/* 619 */,\n/* 620 */,\n/* 621 */,\n/* 622 */,\n/* 623 */,\n/* 624 */,\n/* 625 */,\n/* 626 */,\n/* 627 */,\n/* 628 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\n__webpack_require__(629);\n\n__webpack_require__(630);\n\nvar _cohortEditor = __webpack_require__(631);\n\nvar _cohortEditor2 = _interopRequireDefault(_cohortEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* global Cornelius */\nvar momentInterval = {\n  weekly: 'weeks',\n  daily: 'days',\n  monthly: 'months'\n};\n\nfunction prepareData(rawData, timeInterval) {\n  var sortedData = _underscore2.default.sortBy(rawData, function (r) {\n    return r.date + parseInt(r.day_number, 10);\n  });\n  var grouped = _underscore2.default.groupBy(sortedData, 'date');\n  var initialDate = (0, _moment2.default)(sortedData[0].date).toDate();\n  var lastDate = (0, _moment2.default)(sortedData[sortedData.length - 1].date);\n  var zeroBased = _underscore2.default.min(_underscore2.default.pluck(rawData, 'day_number')) === 0;\n\n  var previousDay = null;\n  var data = [];\n\n  _underscore2.default.each(grouped, function (values) {\n    if (previousDay !== null) {\n      var diff = Math.abs(previousDay.diff(values[0].date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        data.push([0]);\n        diff -= 1;\n      }\n    }\n\n    previousDay = (0, _moment2.default)(values[0].date);\n\n    var row = [parseInt(values[0].total, 10)];\n    var maxDays = lastDate.diff((0, _moment2.default)(values[0].date), momentInterval[timeInterval]);\n    if (zeroBased) {\n      maxDays += 1;\n    }\n\n    _underscore2.default.each(values, function (value) {\n      var index = zeroBased ? value.day_number + 1 : value.day_number;\n      row[index] = parseInt(value.value, 10);\n    });\n\n    for (var i = 0; i <= maxDays; i += 1) {\n      if (row[i] === undefined) {\n        row[i] = 0;\n      }\n    }\n\n    data.push(row);\n  });\n\n  return { data: data, initialDate: initialDate };\n}\n\nfunction cohortRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '='\n    },\n    template: '',\n    replace: false,\n    link: function link($scope, element) {\n      $scope.options.timeInterval = $scope.options.timeInterval || 'daily';\n\n      function updateCohort() {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        var _prepareData = prepareData($scope.queryResult.getData(), $scope.options.timeInterval),\n            data = _prepareData.data,\n            initialDate = _prepareData.initialDate;\n\n        var container = _angular2.default.element(element)[0];\n\n        Cornelius.draw({\n          initialDate: initialDate,\n          container: container,\n          cohort: data,\n          title: null,\n          timeInterval: $scope.options.timeInterval,\n          labels: {\n            time: 'Time',\n            people: 'Users',\n            weekOf: 'Week of'\n          }\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updateCohort);\n      $scope.$watch('options.timeInterval', updateCohort);\n    }\n  };\n}\n\nfunction cohortEditor() {\n  return {\n    restrict: 'E',\n    template: _cohortEditor2.default\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('cohortRenderer', cohortRenderer);\n  ngModule.directive('cohortEditor', cohortEditor);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var editTemplate = '<cohort-editor></cohort-editor>';\n    var defaultOptions = {\n      timeInterval: 'daily'\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COHORT',\n      name: 'Cohort',\n      renderTemplate: '<cohort-renderer options=\"visualization.options\" query-result=\"queryResult\"></cohort-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 629 */,\n/* 630 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 631 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Time Interval</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.timeInterval\\\">\\n      <option value=\\\"daily\\\">Daily</option>\\n      <option value=\\\"weekly\\\">Weekly</option>\\n      <option value=\\\"monthly\\\">Monthly</option>\\n    </select>\\n</div>\\n\"\n\n/***/ }),\n/* 632 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _numberFormat = __webpack_require__(633);\n\nvar _numberFormat2 = _interopRequireDefault(_numberFormat);\n\nvar _underscore = __webpack_require__(5);\n\nvar _counter = __webpack_require__(634);\n\nvar _counter2 = _interopRequireDefault(_counter);\n\nvar _counterEditor = __webpack_require__(635);\n\nvar _counterEditor2 = _interopRequireDefault(_counterEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRowNumber(index, size) {\n  if (index >= 0) {\n    return index - 1;\n  }\n\n  if (Math.abs(index) > size) {\n    index %= size;\n  }\n\n  return size + index;\n}\n\nfunction CounterRenderer() {\n  return {\n    restrict: 'E',\n    template: _counter2.default,\n    link: function link($scope) {\n      var refreshData = function refreshData() {\n        var queryData = $scope.queryResult.getData();\n        if (queryData) {\n          var rowNumber = getRowNumber($scope.visualization.options.rowNumber, queryData.length);\n          var targetRowNumber = getRowNumber($scope.visualization.options.targetRowNumber, queryData.length);\n          var counterColName = $scope.visualization.options.counterColName;\n          var targetColName = $scope.visualization.options.targetColName;\n\n          if ($scope.visualization.options.countRow) {\n            $scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            $scope.counterValue = queryData[rowNumber][counterColName];\n          }\n          if (targetColName) {\n            $scope.targetValue = queryData[targetRowNumber][targetColName];\n\n            if ($scope.targetValue) {\n              $scope.delta = $scope.counterValue - $scope.targetValue;\n              $scope.trendPositive = $scope.delta >= 0;\n            }\n          } else {\n            $scope.targetValue = null;\n          }\n\n          $scope.isNumber = (0, _underscore.isNumber)($scope.counterValue);\n          if ($scope.isNumber) {\n            $scope.stringPrefix = $scope.visualization.options.stringPrefix;\n            $scope.stringSuffix = $scope.visualization.options.stringSuffix;\n\n            var stringDecimal = $scope.visualization.options.stringDecimal;\n            var stringDecChar = $scope.visualization.options.stringDecChar;\n            var stringThouSep = $scope.visualization.options.stringThouSep;\n            if (stringDecimal || stringDecChar || stringThouSep) {\n              $scope.counterValue = (0, _numberFormat2.default)($scope.counterValue, stringDecimal, stringDecChar, stringThouSep);\n              $scope.isNumber = false;\n            }\n          } else {\n            $scope.stringPrefix = null;\n            $scope.stringSuffix = null;\n          }\n        }\n      };\n\n      $scope.$watch('visualization.options', refreshData, true);\n      $scope.$watch('queryResult && queryResult.getData()', refreshData);\n    }\n  };\n}\n\nfunction CounterEditor() {\n  return {\n    restrict: 'E',\n    template: _counterEditor2.default,\n    link: function link(scope) {\n      scope.currentTab = 'general';\n      scope.changeTab = function (tab) {\n        scope.currentTab = tab;\n      };\n      scope.isValueNumber = function () {\n        var queryData = scope.queryResult.getData();\n        if (queryData) {\n          var rowNumber = getRowNumber(scope.visualization.options.rowNumber, queryData.length);\n          var counterColName = scope.visualization.options.counterColName;\n\n          if (scope.visualization.options.countRow) {\n            scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            scope.counterValue = queryData[rowNumber][counterColName];\n          }\n        }\n        return (0, _underscore.isNumber)(scope.counterValue);\n      };\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('counterEditor', CounterEditor);\n  ngModule.directive('counterRenderer', CounterRenderer);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var renderTemplate = '<counter-renderer ' + 'options=\"visualization.options\" query-result=\"queryResult\">' + '</counter-renderer>';\n\n    var editTemplate = '<counter-editor></counter-editor>';\n    var defaultOptions = {\n      counterColName: 'counter',\n      rowNumber: 1,\n      targetRowNumber: 1,\n      stringDecimal: 0,\n      stringDecChar: '.',\n      stringThouSep: ','\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COUNTER',\n      name: 'Counter',\n      renderTemplate: renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 633 */,\n/* 634 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<counter ng-class=\\\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\\\">\\n  <value ng-if=\\\"isNumber\\\">{{stringPrefix}}{{counterValue|number}}{{stringSuffix}}</value>\\n  <value ng-if=\\\"!isNumber\\\">{{stringPrefix}}{{counterValue}}{{stringSuffix}}</value>\\n  <counter-target ng-if=\\\"targetValue\\\">({{targetValue|number}})</counter-target>\\n  <counter-name>{{visualization.name}}</counter-name>\\n</counter>\\n\"\n\n/***/ }),\n/* 635 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'format'}\\\">\\n      <a ng-click=\\\"changeTab('format')\\\">Format</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.counterColName\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\"></select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.rowNumber\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.targetColName\\\" class=\\\"form-control\\\">\\n          <option value=\\\"\\\">No target value</option>\\n        </select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-if=\\\"visualization.options.targetColName\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.targetRowNumber\\\" class=\\\"form-control\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.countRow\\\">\\n        <i class=\\\"input-helper\\\"></i> Count Rows\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'format'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Place</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.stringDecimal\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Character</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringDecChar\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Thousands Separator</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringThouSep\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Prefix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringPrefix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Suffix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringSuffix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 636 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _angular = __webpack_require__(19);\n\nvar _editVisualizationDialog = __webpack_require__(637);\n\nvar _editVisualizationDialog2 = _interopRequireDefault(_editVisualizationDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EditVisualizationDialog = {\n  template: _editVisualizationDialog2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['$window', 'currentUser', 'Events', 'Visualization', 'toastr', function controller($window, currentUser, Events, Visualization, toastr) {\n    'ngInject';\n\n    var _this = this;\n\n    this.query = this.resolve.query;\n    this.queryResult = this.resolve.queryResult;\n    this.originalVisualization = this.resolve.visualization;\n    this.onNewSuccess = this.resolve.onNewSuccess;\n    this.visualization = (0, _angular.copy)(this.originalVisualization);\n    this.visTypes = Visualization.visualizationTypes;\n\n    this.newVisualization = function () {\n      return {\n        type: Visualization.defaultVisualization.type,\n        name: Visualization.defaultVisualization.name,\n        description: '',\n        options: Visualization.defaultVisualization.defaultOptions\n      };\n    };\n    if (!this.visualization) {\n      this.visualization = this.newVisualization();\n    }\n\n    this.typeChanged = function (oldType) {\n      var type = _this.visualization.type;\n      // if not edited by user, set name to match type\n      // todo: this is wrong, because he might have edited it before.\n      if (type && oldType !== type && _this.visualization && !_this.visForm.name.$dirty) {\n        _this.visualization.name = Visualization.visualizations[_this.visualization.type].name;\n      }\n\n      // Bring default options\n      if (type && oldType !== type && _this.visualization) {\n        _this.visualization.options = Visualization.visualizations[_this.visualization.type].defaultOptions;\n      }\n    };\n\n    this.submit = function () {\n      if (_this.visualization.id) {\n        Events.record('update', 'visualization', _this.visualization.id, { type: _this.visualization.type });\n      } else {\n        Events.record('create', 'visualization', null, { type: _this.visualization.type });\n      }\n\n      _this.visualization.query_id = _this.query.id;\n\n      Visualization.save(_this.visualization, function (result) {\n        toastr.success('Visualization saved');\n\n        var visIds = (0, _underscore.pluck)(_this.query.visualizations, 'id');\n        var index = visIds.indexOf(result.id);\n        if (index > -1) {\n          _this.query.visualizations[index] = result;\n        } else {\n          // new visualization\n          _this.query.visualizations.push(result);\n          if (_this.onNewSuccess) {\n            _this.onNewSuccess(result);\n          }\n        }\n        _this.close();\n      }, function () {\n        toastr.error('Visualization could not be saved');\n      });\n    };\n\n    this.closeDialog = function () {\n      if (_this.visForm.$dirty) {\n        if ($window.confirm('Are you sure you want to close the editor without saving?')) {\n          _this.close();\n        }\n      } else {\n        _this.close();\n      }\n    };\n  }]\n};\n\nfunction init(ngModule) {\n  ngModule.component('editVisualizationDialog', EditVisualizationDialog);\n}\n\n/***/ }),\n/* 637 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.closeDialog()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    <h4 class=\\\"modal-title\\\">Visualization Editor</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-5 p-r-5\\\">\\n        <div>\\n          <form name=\\\"$ctrl.visForm\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Type</label>\\n\\n              <select required ng-model=\\\"$ctrl.visualization.type\\\"\\n                      ng-options=\\\"type.type as type.name for type in $ctrl.visTypes\\\" class=\\\"form-control\\\"\\n                      ng-change=\\\"$ctrl.typeChanged('{{$ctrl.visualization.type}}')\\\"></select>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Name</label>\\n              <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.visualization.name\\\"\\n                     placeholder=\\\"{{$ctrl.visualization.type | capitalize}}\\\">\\n            </div>\\n\\n            <visualization-options-editor visualization=\\\"$ctrl.visualization\\\"\\n                                          query-result=\\\"$ctrl.queryResult\\\"\\n                                          query=\\\"$ctrl.query\\\">\\n            </visualization-options-editor>\\n          </form>\\n        </div>\\n      </div>\\n      <div class=\\\"col-md-7\\\" style=\\\"border: 1px solid #eee\\\">\\n        <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\"></visualization-renderer>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.closeDialog()\\\">Close</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.submit()\\\">Save</button>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 638 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _underscore = __webpack_require__(5);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nFilterValueFilter.$inject = ['clientConfig'];\nVisualizationName.$inject = ['Visualization'];\nVisualizationOptionsEditor.$inject = ['Visualization'];\nVisualizationRenderer.$inject = ['Visualization'];\n\n\nfunction VisualizationProvider() {\n  var _this = this;\n\n  this.visualizations = {};\n  // this.visualizationTypes = {};\n  this.visualizationTypes = [];\n  var defaultConfig = {\n    defaultOptions: {},\n    skipTypes: false,\n    editorTemplate: null\n  };\n\n  this.registerVisualization = function (config) {\n    var visualization = _extends({}, defaultConfig, config);\n\n    // TODO: this is prone to errors; better refactor.\n    if (_this.defaultVisualization === undefined && !visualization.name.match(/Deprecated/)) {\n      _this.defaultVisualization = visualization;\n    }\n\n    _this.visualizations[config.type] = visualization;\n\n    if (!config.skipTypes) {\n      _this.visualizationTypes.push({ name: config.name, type: config.type });\n    }\n  };\n\n  this.getSwitchTemplate = function (property) {\n    var pattern = /(<[a-zA-Z0-9-]*?)( |>)/;\n\n    var mergedTemplates = (0, _underscore.reduce)(_this.visualizations, function (templates, visualization) {\n      if (visualization[property]) {\n        var ngSwitch = '$1 ng-switch-when=\"' + visualization.type + '\" $2';\n        var template = visualization[property].replace(pattern, ngSwitch);\n\n        return templates + '\\n' + template;\n      }\n\n      return templates;\n    }, '');\n\n    mergedTemplates = '<div ng-switch on=\"visualization.type\">' + mergedTemplates + '</div>';\n\n    return mergedTemplates;\n  };\n\n  this.$get = ['$resource', function ($resource) {\n    var Visualization = $resource('api/visualizations/:id', { id: '@id' });\n    Visualization.visualizations = _this.visualizations;\n    Visualization.visualizationTypes = _this.visualizationTypes;\n    Visualization.renderVisualizationsTemplate = _this.getSwitchTemplate('renderTemplate');\n    Visualization.editorTemplate = _this.getSwitchTemplate('editorTemplate');\n    Visualization.defaultVisualization = _this.defaultVisualization;\n\n    return Visualization;\n  }];\n}\n\nfunction VisualizationName(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '='\n    },\n    template: '{{name}}',\n    replace: false,\n    link: function link(scope) {\n      if (Visualization.visualizations[scope.visualization.type]) {\n        var defaultName = Visualization.visualizations[scope.visualization.type].name;\n        if (defaultName !== scope.visualization.name) {\n          scope.name = scope.visualization.name;\n        }\n      }\n    }\n  };\n}\n\nfunction VisualizationRenderer(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n      queryResult: '='\n    },\n    // TODO: using switch here (and in the options editor) might introduce errors and bad\n    // performance wise. It's better to eventually show the correct template based on the\n    // visualization type and not make the browser render all of them.\n    template: '<filters filters=\"filters\"></filters>\\n' + Visualization.renderVisualizationsTemplate,\n    replace: false,\n    link: function link(scope) {\n      scope.$watch('queryResult && queryResult.getFilters()', function (filters) {\n        if (filters) {\n          scope.filters = filters;\n        }\n      });\n    }\n  };\n}\n\nfunction VisualizationOptionsEditor(Visualization) {\n  return {\n    restrict: 'E',\n    template: Visualization.editorTemplate,\n    replace: false,\n    scope: {\n      visualization: '=',\n      query: '=',\n      queryResult: '='\n    }\n  };\n}\n\nfunction FilterValueFilter(clientConfig) {\n  return function (value, filter) {\n    var firstValue = value;\n    if ((0, _underscore.isArray)(value)) {\n      firstValue = value[0];\n    }\n\n    // TODO: deduplicate code with table.js:\n    if (filter.column.type === 'date') {\n      if (firstValue && _moment2.default.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateFormat);\n      }\n    } else if (filter.column.type === 'datetime') {\n      if (firstValue && _moment2.default.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateTimeFormat);\n      }\n    }\n\n    return firstValue;\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.provider('Visualization', VisualizationProvider);\n  ngModule.directive('visualizationRenderer', VisualizationRenderer);\n  ngModule.directive('visualizationOptionsEditor', VisualizationOptionsEditor);\n  ngModule.directive('visualizationName', VisualizationName);\n  ngModule.filter('filterValue', FilterValueFilter);\n}\n\n/***/ }),\n/* 639 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _d = __webpack_require__(2);\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _leaflet = __webpack_require__(640);\n\nvar _leaflet2 = _interopRequireDefault(_leaflet);\n\n__webpack_require__(641);\n\n__webpack_require__(642);\n\n__webpack_require__(644);\n\n__webpack_require__(645);\n\nvar _markerIcon = __webpack_require__(643);\n\nvar _markerIcon2 = _interopRequireDefault(_markerIcon);\n\nvar _markerIcon2x = __webpack_require__(646);\n\nvar _markerIcon2x2 = _interopRequireDefault(_markerIcon2x);\n\nvar _markerShadow = __webpack_require__(647);\n\nvar _markerShadow2 = _interopRequireDefault(_markerShadow);\n\nvar _map = __webpack_require__(648);\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _mapEditor = __webpack_require__(649);\n\nvar _mapEditor2 = _interopRequireDefault(_mapEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\nThis is a workaround for an issue with giving Leaflet load the icon on its own.\n*/\n_leaflet2.default.Icon.Default.mergeOptions({\n  iconUrl: _markerIcon2.default,\n  iconRetinaUrl: _markerIcon2x2.default,\n  shadowUrl: _markerShadow2.default\n});\n\ndelete _leaflet2.default.Icon.Default.prototype._getIconUrl;\n\nfunction mapRenderer() {\n  return {\n    restrict: 'E',\n    template: _map2.default,\n    link: function link($scope, elm) {\n      var colorScale = _d2.default.scale.category10();\n      var map = _leaflet2.default.map(elm[0].children[0].children[0], { scrollWheelZoom: false });\n      var mapControls = _leaflet2.default.control.layers().addTo(map);\n      var layers = {};\n      var tileLayer = _leaflet2.default.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n      }).addTo(map);\n\n      function getBounds() {\n        $scope.visualization.options.bounds = map.getBounds();\n      }\n\n      function setBounds() {\n        var b = $scope.visualization.options.bounds;\n\n        if (b) {\n          map.fitBounds([[b._southWest.lat, b._southWest.lng], [b._northEast.lat, b._northEast.lng]]);\n        } else if (layers) {\n          var allMarkers = _underscore2.default.flatten(_underscore2.default.map(_underscore2.default.values(layers), function (l) {\n            return l.getLayers();\n          }));\n          // eslint-disable-next-line new-cap\n          var group = new _leaflet2.default.featureGroup(allMarkers);\n          map.fitBounds(group.getBounds());\n        }\n      }\n\n      map.on('focus', function () {\n        map.on('moveend', getBounds);\n      });\n      map.on('blur', function () {\n        map.off('moveend', getBounds);\n      });\n\n      function resize() {\n        if (!map) return;\n        map.invalidateSize(false);\n        setBounds();\n      }\n\n      var createMarker = function createMarker(lat, lon) {\n        return _leaflet2.default.marker([lat, lon]);\n      };\n\n      var heatpoint = function heatpoint(lat, lon, color) {\n        var style = {\n          fillColor: color,\n          fillOpacity: 0.9,\n          stroke: false\n        };\n\n        return _leaflet2.default.circleMarker([lat, lon], style);\n      };\n\n      function createDescription(latCol, lonCol, row) {\n        var lat = row[latCol];\n        var lon = row[lonCol];\n\n        var description = '<ul style=\"list-style-type: none;padding-left: 0\">';\n        description += '<li><strong>' + lat + ', ' + lon + '</strong>';\n\n        _underscore2.default.each(row, function (v, k) {\n          if (!(k === latCol || k === lonCol)) {\n            description += '<li>' + k + ': ' + v + '</li>';\n          }\n        });\n\n        return description;\n      }\n\n      function removeLayer(layer) {\n        if (layer) {\n          mapControls.removeLayer(layer);\n          map.removeLayer(layer);\n        }\n      }\n\n      function addLayer(name, points) {\n        var latCol = $scope.visualization.options.latColName || 'lat';\n        var lonCol = $scope.visualization.options.lonColName || 'lon';\n        var classify = $scope.visualization.options.classify;\n\n        var markers = void 0;\n        if ($scope.visualization.options.clusterMarkers) {\n          var color = $scope.visualization.options.groups[name].color;\n          var options = {};\n\n          if (classify) {\n            options.iconCreateFunction = function (cluster) {\n              var childCount = cluster.getChildCount();\n\n              var c = ' marker-cluster-';\n              if (childCount < 10) {\n                c += 'small';\n              } else if (childCount < 100) {\n                c += 'medium';\n              } else {\n                c += 'large';\n              }\n\n              c = '';\n\n              var style = 'color: white; background-color: ' + color + ';';\n              return _leaflet2.default.divIcon({ html: '<div style=\"' + style + '\"><span>' + childCount + '</span></div>', className: 'marker-cluster' + c, iconSize: new _leaflet2.default.Point(40, 40) });\n            };\n          }\n\n          markers = _leaflet2.default.markerClusterGroup(options);\n        } else {\n          markers = _leaflet2.default.layerGroup();\n        }\n\n        // create markers\n        _underscore2.default.each(points, function (row) {\n          var marker = void 0;\n\n          var lat = row[latCol];\n          var lon = row[lonCol];\n\n          if (lat === null || lon === null) return;\n\n          if (classify && classify !== 'none') {\n            var groupColor = $scope.visualization.options.groups[name].color;\n            marker = heatpoint(lat, lon, groupColor);\n          } else {\n            marker = createMarker(lat, lon);\n          }\n\n          marker.bindPopup(createDescription(latCol, lonCol, row));\n          markers.addLayer(marker);\n        });\n\n        markers.addTo(map);\n\n        layers[name] = markers;\n        mapControls.addOverlay(markers, name);\n      }\n\n      function render() {\n        var queryData = $scope.queryResult.getData();\n        var classify = $scope.visualization.options.classify;\n\n        $scope.visualization.options.mapTileUrl = $scope.visualization.options.mapTileUrl || '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n        tileLayer.setUrl($scope.visualization.options.mapTileUrl);\n\n        if ($scope.visualization.options.clusterMarkers === undefined) {\n          $scope.visualization.options.clusterMarkers = true;\n        }\n\n        if (queryData) {\n          var pointGroups = void 0;\n          if (classify && classify !== 'none') {\n            pointGroups = _underscore2.default.groupBy(queryData, classify);\n          } else {\n            pointGroups = { All: queryData };\n          }\n\n          var groupNames = _underscore2.default.keys(pointGroups);\n          var options = _underscore2.default.map(groupNames, function (group) {\n            if ($scope.visualization.options.groups && $scope.visualization.options.groups[group]) {\n              return $scope.visualization.options.groups[group];\n            }\n            return { color: colorScale(group) };\n          });\n\n          $scope.visualization.options.groups = _underscore2.default.object(groupNames, options);\n\n          _underscore2.default.each(layers, function (v) {\n            removeLayer(v);\n          });\n\n          _underscore2.default.each(pointGroups, function (v, k) {\n            addLayer(k, v);\n          });\n\n          setBounds();\n        }\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', render);\n      $scope.$watch('visualization.options', render, true);\n      _angular2.default.element(window).on('resize', resize);\n      $scope.$watch('visualization.options.height', resize);\n    }\n  };\n}\n\nfunction mapEditor() {\n  return {\n    restrict: 'E',\n    template: _mapEditor2.default,\n    link: function link($scope) {\n      $scope.currentTab = 'general';\n      $scope.columns = $scope.queryResult.getColumns();\n      $scope.columnNames = _underscore2.default.pluck($scope.columns, 'name');\n      $scope.classify_columns = $scope.columnNames.concat('none');\n      $scope.mapTiles = [{\n        name: 'OpenStreetMap',\n        url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n      }, {\n        name: 'OpenStreetMap BW',\n        url: '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png'\n      }, {\n        name: 'OpenStreetMap DE',\n        url: '//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png'\n      }, {\n        name: 'OpenStreetMap FR',\n        url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png'\n      }, {\n        name: 'OpenStreetMap Hot',\n        url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png'\n      }, {\n        name: 'Thunderforest',\n        url: '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png'\n      }, {\n        name: 'Thunderforest Spinal',\n        url: '//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png'\n      }, {\n        name: 'OpenMapSurfer',\n        url: '//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}'\n      }, {\n        name: 'Stamen Toner',\n        url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png'\n      }, {\n        name: 'Stamen Toner Background',\n        url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png'\n      }, {\n        name: 'Stamen Toner Lite',\n        url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png'\n      }, {\n        name: 'OpenTopoMap',\n        url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png'\n      }];\n    }\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('mapRenderer', mapRenderer);\n  ngModule.directive('mapEditor', mapEditor);\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var renderTemplate = '<map-renderer ' + 'options=\"visualization.options\" query-result=\"queryResult\">' + '</map-renderer>';\n\n    var editTemplate = '<map-editor></map-editor>';\n    var defaultOptions = {\n      height: 500,\n      classify: 'none',\n      clusterMarkers: true\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'MAP',\n      name: 'Map',\n      renderTemplate: renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 640 */,\n/* 641 */,\n/* 642 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 643 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=\"\n\n/***/ }),\n/* 644 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 645 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 646 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7c3grY3grg8hJo3grY4g7c4g7c3grU0gLI4grY9hrpBi79HkMM2frE0daA0fq82gbROlslbo9Vgp9dcpNZQmcxFjsIwd6QzeKk3gbRfptdepdZcpdY2gLMtd5s3gLNZotVSntNPnNJLmtFImdBZodU1f7A2f7A1frA2f7I2f7FHmNBUnM9Wn9VGmNAydaNYoNJOm9M9hLc0e6w3fa46f7BKmdFFltBVndE1fK1Els82fq41fK1Dlc89g7RClc9XoNVUndQ0eqxClM9Jl9FRms81eqo0eqpHltFBk89Fi75Qm9M/k89KkcYzealSjbadvdPH2ufz9/r4+vzP3+qlxNljmL08gLNSnNQzeKgydqUzeKg/ks6NtM/////+/v8+kc/f6fFAgK1CiLwydKIzd6c8kM6Tt9C1zd5OmdNBh7pTjLRzn78xdKIydqU7j86jwdbM3egxdKIydaQydaMydKNGlNE6js5OiLAxc6FKkshDk9E5jc09e6Zekrcxc6I4jc03eagyc6FIldI3jM0wcaBMl9J+psNKltIwcZ82i83k7fMubJhLlc81is1Lg6pklbZNl9I/j9AvbJlEjcVdkLPt8/cwcZ4ubZkwcJ00icy0y9swcJwvb5wzicxHkcpTh60ubZhCkNAyiMwvbpoxh8xAicBHj8hGk9FHks0+jdAubJcubJdEkdEwhsw6i88ubJgta5cvhswxapgubJcuhcstbJcubZcuhMsubJcvbJZBjMgthMsubJcvbZkubJcrg8stbJctbZcubJgrgssua5gubJc6is8qgcs8i9A9iMYtg8spgcoogMo7hcMrbZcubJcngMonf8olfsoubJc4gr8kfckua5g5iM8jfMk4iM8he8k1froua5g7itAgeskubJc2hs8eecgzfLcofssdeMg0hc4ubJccd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqjbZ8obAAAA7HRSTlMAHDdTb4yPA+L/7ZxE/////yYLgvb///////8SYf/////qB/////////+1wNHd//////8s////r/////////+O/P///////////8f///////////////////////+P2P///////////3f//////////5j/////tczn//////L///////////////////////8+////////R/////Ww////tf////9q////////////4P/////Yd/8W+P/xov+UNv///STN/7hc1P/AUv//////////MMT///+m//+e//////+M//+C////////6cqo94AAAAXmSURBVHgBrNKDoipBGADgbHMRpjuKi2xOdu//MHe2Y6tvOdZvuhGzxWqzO2xWi9lp+g6L3eV+5PH6vmpltrv8nDsQDIWCAbef83jDpo9FojFeJxhPJO8JosQzYnb5oxYpVzodiCcyhiwA2esPEAPpdM727vT+eSH0x7McwoTmOUpxIcvF/RAWI29byCUIpUQ2m8A0/xwx8kIQls2vW4QrihIHQMDqGyQBgAiVnOXVTuWUtAaAnq++I48B0PxKrPZiq8qKvy4IpPqBhiDUm0rl+ca12h1NQN3eh7pI6MN26WnfooNBPIHU4SdUlBAHg9Hj0seDEEJ08pxKqfoio4tQaDAOP0xrMEWIzB4NCWaIK8xJ7ymXItQcFO/jcLGIF+bLRytW4LS18Wbd5SNcEBcLn8mw2TYZ2+3vLRuMaYdme7sdTA8iY8flQ0mPscC2fB1ku12z4+necs7YebDlri9JZ3rvoazB1tutxdiuy1TXl4/Zer95ufzneq7524qBAIBr61TmtxXX/MK4FC6cKIwvViozXMDMzLbCTF+1JBn/4/EtLi2vrK6tbywsbE506vVxnZ3fF7YIIQamdX7dVqb/RtnCr1X+n3F9gA2MdA7Vsl87nzEDId2MTUCHSdr+As/Y1DKvM1uYFWBGpTtggrFuYrMPApgc0jhMTNmdvInLbn8NqNImgEG7jWzZnwB1KAg79t1V3mzPvgm6Q+n9m98n/e5ZQI+iw6Dby1v43AzApPIIs24/Cbg1GFcRE+h29xpvseJ2v4cxjzQOmjtAgqF5PRyRZvTXIfcqbxUNPdOnI1JYnw8FSSwUp4mklKDzoRRvkw7N0vF6QTwUI4aMRsNZyUQnMhkzb2HMZeJ0RhUMUy1jIP68lRaKUpLSXN7FW5jz+QnqKEoFas37yX6pD8tFpYybpQpv4S3lEGv5KvaV9olNDPwNHUhh1ETex5scpsQOVg8UxAFhI0dCHKPjRIogDorT1aZPzkTuHC9U2oPnQlySRzFxhYkTJYHHIXFt5srNnhBxLDSyV+L2IyF395vnhQflpHCuifv80g3/a+UPIXWNEDEAQEE0HR23weEk6XGnwR1iH3eJu7udbt26fe30I17x/PYH+9iv+CB5qT1v+YhlL5WeS5ZV72RZftvlNF6Wj75Zdn2kHcl6e5Sy/A3D7DsBMP0gd/DkC/Bp9l3gW5Y7a5asWVCm3WcaAFSHnFtxAXivwwAsWf9E25dl+TiwhwIKPVRgD33Ct6wvom0ijKapOBllpkEcf6ZCMsqjyCgjuvKIoajXYgya8vhIJ7rKKnKOP+sxjOPJZmV0DRRHGIZx/KW6npaOvor3M/G+pqalS00TT5q4G7qzPGe4O+wu7mxw59wt8p3LCre//pn/J+iupIwe1HKcpVdXI8c9QB9l9QMDnHVQF8+9xdAw5YzgBmfuHdVh4bj7GKO8cZYxW/UmvHkAeEl5pgncMJt7JzVZzOYaTFGh6WRGEDVJ5pniCDOCWw0Ns3MaLA0NdRijYm+AmQZhXoO1YQFYpBJLqGloGF1W1ZuMfKRSL1OZFVXJyNBlUhhD7evXk6sqZl+/rscaKfUDC68FtYn19Xr64xU+oo7nxQ2FWZ6vxyapuTyEdV5WTgR+HZ3DpGoN9Szzu8Qkzz9CH6kbZhlpa7uELO2gs4I0bOKRJInFC1GyPsMuaanoxPre1n6hbXlvB90dpKkPj4Q9sXAi7gnfcEDaOjqxIxwe5e1vCcforiIdu/gkyyenOSeyrBthqrpxvHV2lF0cHW4d47ySdB3g29bWiSPjZMvZBDvpqzxPZk7Ti9PDLZcyomBHk/PwxJ1ycsgiv4guzrgOz9wexn126EVbNV3oVzLj8zBaEYXqNnjP/G4W8Z8F0GYiKisTPGMZ31kQGKdymGwIhMIeTzgUgM1EZRkHgmGfL8wi01Qe0wQCYSaAESrXNBCJRiN6EYURxKLRmF5E4Q0QjwNvyIAlJBKYIiNegnlJhowBY2RMP9BPBn38SEYtLpKG/+tgQe8M5cY7AAAAAElFTkSuQmCC\"\n\n/***/ }),\n/* 647 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC\"\n\n/***/ }),\n/* 648 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div style='margin:1%;width:98%;height:{{visualization.options.height}}px'>\\n    <div style=\\\"width:100%; height:100%;\\\"></div>\\n</div>\\n\"\n\n/***/ }),\n/* 649 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\"><a ng-click=\\\"currentTab='general'\\\">General</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'groups'}\\\"><a ng-click=\\\"currentTab='groups'\\\">Groups</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'map'}\\\"><a ng-click=\\\"currentTab='map'\\\">Map Settings</a></li>\\n  </ul>\\n\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Latitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.latColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.lonColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Longitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.lonColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Group By</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.classify\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in classify_columns | remove:visualization.options.lonColName | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'groups'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>Name</th>\\n      <th>Color</th>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"(name, options) in visualization.options.groups\\\">\\n        <td>{{name}}</td>\\n        <td>\\n            <input class=\\\"form-control\\\" type=\\\"color\\\" ng-model=\\\"options.color\\\"/>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'map'\\\">\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.clusterMarkers\\\">\\n        <i class=\\\"input-helper\\\"></i> Cluster Markers\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Height (px)</label>\\n      <input class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\"/>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Tiles</label>\\n      <select ng-options=\\\"tile.url as tile.name for tile in mapTiles\\\" ng-model=\\\"visualization.options.mapTileUrl\\\"\\n              class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n\\n</div>\\n\"\n\n/***/ }),\n/* 650 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _jquery = __webpack_require__(14);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\n__webpack_require__(651);\n\n__webpack_require__(652);\n\nvar _pivottableEditor = __webpack_require__(653);\n\nvar _pivottableEditor2 = _interopRequireDefault(_pivottableEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction pivotTableRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      visualization: '='\n    },\n    template: '',\n    replace: false,\n    link: function link($scope, element) {\n      function removeControls() {\n        var hideControls = $scope.visualization.options.controls && $scope.visualization.options.controls.enabled;\n\n        document.querySelectorAll('.pvtAxisContainer, .pvtRenderer, .pvtVals').forEach(function (control) {\n          if (hideControls) {\n            control.style.display = 'none';\n          } else {\n            control.style.display = '';\n          }\n        });\n      }\n\n      function updatePivot() {\n        $scope.$watch('queryResult && queryResult.getData()', function (data) {\n          if (!data) {\n            return;\n          }\n\n          if ($scope.queryResult.getData() !== null) {\n            // We need to give the pivot table its own copy of the data, because it changes\n            // it which interferes with other visualizations.\n            data = _angular2.default.copy($scope.queryResult.getData());\n            var options = {\n              renderers: _jquery2.default.pivotUtilities.renderers,\n              onRefresh: function onRefresh(config) {\n                var configCopy = _extends({}, config);\n                // delete some values which are functions\n                delete configCopy.aggregators;\n                delete configCopy.renderers;\n                delete configCopy.onRefresh;\n                // delete some bulky default values\n                delete configCopy.rendererOptions;\n                delete configCopy.localeStrings;\n\n                if ($scope.visualization) {\n                  $scope.visualization.options = configCopy;\n                }\n              }\n            };\n\n            if ($scope.visualization) {\n              _extends(options, $scope.visualization.options);\n            }\n\n            (0, _jquery2.default)(element).pivotUI(data, options, true);\n            removeControls();\n          }\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updatePivot);\n      $scope.$watch('visualization.options.controls.enabled', removeControls);\n    }\n  };\n}\n\nfunction pivotTableEditor() {\n  return {\n    restrict: 'E',\n    template: _pivottableEditor2.default\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('pivotTableRenderer', pivotTableRenderer);\n  ngModule.directive('pivotTableEditor', pivotTableEditor);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var editTemplate = '<pivot-table-editor></pivot-table-editor>';\n    var defaultOptions = {};\n\n    VisualizationProvider.registerVisualization({\n      type: 'PIVOT',\n      name: 'Pivot Table',\n      renderTemplate: '<pivot-table-renderer visualization=\"visualization\" query-result=\"queryResult\"></pivot-table-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 651 */,\n/* 652 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 653 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-lg-6\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.controls.enabled\\\">\\n        Hide Pivot Controls\\n      </label>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 654 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _underscore = __webpack_require__(5);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _jquery = __webpack_require__(14);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _d = __webpack_require__(2);\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _d3sankey = __webpack_require__(655);\n\nvar _d3sankey2 = _interopRequireDefault(_d3sankey);\n\nvar _sankeyEditor = __webpack_require__(656);\n\nvar _sankeyEditor2 = _interopRequireDefault(_sankeyEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getConnectedNodes(node) {\n  // source link = this node is the source, I need the targets\n  var nodes = [];\n  node.sourceLinks.forEach(function (link) {\n    nodes.push(link.target);\n  });\n  node.targetLinks.forEach(function (link) {\n    nodes.push(link.source);\n  });\n\n  return nodes;\n}\n\nfunction graph(data) {\n  var nodesDict = {};\n  var links = {};\n  var nodes = [];\n\n  var validKey = function validKey(key) {\n    return key !== 'value' && key.indexOf('$$') !== 0;\n  };\n  var keys = _underscore2.default.sortBy(_underscore2.default.filter(_underscore2.default.keys(data[0]), validKey), _underscore2.default.identity);\n\n  function normalizeName(name) {\n    if (name) {\n      return name;\n    }\n\n    return 'Exit';\n  }\n\n  function getNode(name, level) {\n    name = normalizeName(name);\n    var key = name + ':' + String(level);\n    var node = nodesDict[key];\n    if (!node) {\n      node = { name: name };\n      var id = nodes.push(node) - 1;\n      node.id = id;\n      nodesDict[key] = node;\n    }\n    return node;\n  }\n\n  function getLink(source, target) {\n    var link = links[[source, target]];\n    if (!link) {\n      link = { target: target, source: source, value: 0 };\n      links[[source, target]] = link;\n    }\n\n    return link;\n  }\n\n  function addLink(sourceName, targetName, value, depth) {\n    if ((sourceName === '' || !sourceName) && depth > 1) {\n      return;\n    }\n\n    var source = getNode(sourceName, depth);\n    var target = getNode(targetName, depth + 1);\n    var link = getLink(source.id, target.id);\n    link.value += parseInt(value, 10);\n  }\n\n  data.forEach(function (row) {\n    addLink(row[keys[0]], row[keys[1]], row.value, 1);\n    addLink(row[keys[1]], row[keys[2]], row.value, 2);\n    addLink(row[keys[2]], row[keys[3]], row.value, 3);\n    addLink(row[keys[3]], row[keys[4]], row.value, 4);\n  });\n\n  return { nodes: nodes, links: _underscore2.default.values(links) };\n}\n\nfunction spreadNodes(height, data) {\n  var nodesByBreadth = _d2.default.nest().key(function (d) {\n    return d.x;\n  }).entries(data.nodes).map(function (d) {\n    return d.values;\n  });\n\n  nodesByBreadth.forEach(function (nodes) {\n    nodes = _underscore2.default.filter(_underscore2.default.sortBy(nodes, function (node) {\n      return -node.value;\n    }), function (node) {\n      return node.name !== 'Exit';\n    });\n\n    var sum = _d2.default.sum(nodes, function (o) {\n      return o.dy;\n    });\n    var padding = (height - sum) / nodes.length;\n\n    _underscore2.default.reduce(nodes, function (y0, node) {\n      node.y = y0;\n      return y0 + node.dy + padding;\n    }, 0);\n  });\n}\n\nfunction createSankey(element, sankeyHeight, data) {\n  var margin = {\n    top: 10, right: 10, bottom: 10, left: 10\n  };\n  var width = (0, _jquery2.default)(element).parent().width() - margin.left - margin.right;\n  var height = sankeyHeight - margin.top - margin.bottom;\n\n  var format = function format(d) {\n    return _d2.default.format(',.0f')(d);\n  };\n  var color = _d2.default.scale.category20();\n\n  data = graph(data);\n  data.nodes = _underscore2.default.map(data.nodes, function (d) {\n    return _underscore2.default.extend(d, {\n      color: color(d.name.replace(/ .*/, ''))\n    });\n  });\n\n  // append the svg canvas to the page\n  var svg = _d2.default.select(element).append('svg').attr('class', 'sankey').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // Set the sankey diagram properties\n  var sankey = (0, _d3sankey2.default)().nodeWidth(15).nodePadding(10).size([width, height]);\n\n  var path = sankey.link();\n\n  sankey.nodes(data.nodes).links(data.links).layout(0);\n\n  spreadNodes(height, data);\n  sankey.relayout();\n\n  // add in the links\n  var link = svg.append('g').selectAll('.link').data(data.links).enter().append('path').filter(function (l) {\n    return l.target.name !== 'Exit';\n  }).attr('class', 'link').attr('d', path).style('stroke-width', function (d) {\n    return Math.max(1, d.dy);\n  }).sort(function (a, b) {\n    return b.dy - a.dy;\n  });\n\n  // add the link titles\n  link.append('title').text(function (d) {\n    return d.source.name + ' \\u2192 ' + d.target.name + '\\n' + format(d.value);\n  });\n\n  var node = svg.append('g').selectAll('.node').data(data.nodes).enter().append('g').filter(function (n) {\n    return n.name !== 'Exit';\n  }).attr('class', 'node').attr('transform', function (d) {\n    return 'translate(' + d.x + ',' + d.y + ')';\n  });\n\n  function nodeMouseOver(currentNode) {\n    var nodes = getConnectedNodes(currentNode);\n    nodes = _underscore2.default.pluck(nodes, 'id');\n    node.filter(function (d) {\n      if (d === currentNode) {\n        return false;\n      }\n\n      if (_underscore2.default.contains(nodes, d.id)) {\n        return false;\n      }\n\n      return true;\n    }).style('opacity', 0.2);\n    link.filter(function (l) {\n      return !(_underscore2.default.include(currentNode.sourceLinks, l) || _underscore2.default.include(currentNode.targetLinks, l));\n    }).style('opacity', 0.2);\n  }\n\n  function nodeMouseOut() {\n    node.style('opacity', 1);\n    link.style('opacity', 1);\n  }\n\n  // add in the nodes\n  node.on('mouseover', nodeMouseOver).on('mouseout', nodeMouseOut);\n\n  // add the rectangles for the nodes\n  node.append('rect').attr('height', function (d) {\n    return d.dy;\n  }).attr('width', sankey.nodeWidth()).style('fill', function (d) {\n    return d.color;\n  }).style('stroke', function (d) {\n    return _d2.default.rgb(d.color).darker(2);\n  }).append('title').text(function (d) {\n    return d.name + '\\n' + format(d.value);\n  });\n\n  // add in the title for the nodes\n  node.append('text').attr('x', -6).attr('y', function (d) {\n    return d.dy / 2;\n  }).attr('dy', '.35em').attr('text-anchor', 'end').attr('transform', null).text(function (d) {\n    return d.name;\n  }).filter(function (d) {\n    return d.x < width / 2;\n  }).attr('x', 6 + sankey.nodeWidth()).attr('text-anchor', 'start');\n}\n\nfunction sankeyRenderer() {\n  return {\n    restrict: 'E',\n    link: function link(scope, element) {\n      function refreshData() {\n        var queryData = scope.queryResult.getData();\n        if (queryData) {\n          // do the render logic.\n          _angular2.default.element(element[0]).empty();\n          createSankey(element[0], scope.visualization.options.height, queryData);\n        }\n      }\n\n      _angular2.default.element(window).on('resize', refreshData);\n      scope.$watch('queryResult && queryResult.getData()', refreshData);\n      scope.$watch('visualization.options.height', function (oldValue, newValue) {\n        if (oldValue !== newValue) {\n          refreshData();\n        }\n      });\n    }\n  };\n}\n\nfunction sankeyEditor() {\n  return {\n    restrict: 'E',\n    template: _sankeyEditor2.default\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('sankeyRenderer', sankeyRenderer);\n  ngModule.directive('sankeyEditor', sankeyEditor);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var renderTemplate = '<sankey-renderer options=\"visualization.options\" query-result=\"queryResult\"></sankey-renderer>';\n\n    var editTemplate = '<sankey-editor></sankey-editor>';\n    var defaultOptions = {\n      height: 300\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SANKEY',\n      name: 'Sankey',\n      renderTemplate: renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 655 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _d = __webpack_require__(2);\n\nvar _d2 = _interopRequireDefault(_d);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction center(node) {\n  return node.y + node.dy / 2;\n} /* eslint-disable */\n\nfunction value(link) {\n  return link.value;\n}\n\nfunction Sankey() {\n  var sankey = {};\n  var nodeWidth = 24;\n  var nodePadding = 8;\n  var size = [1, 1];\n  var nodes = [];\n  var links = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(function (node) {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(function (link) {\n      var source = link.source;\n      var target = link.target;\n      if (typeof source === 'number') source = link.source = nodes[link.source];\n      if (typeof target === 'number') target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(function (node) {\n      node.value = Math.max(_d2.default.sum(node.sourceLinks, value), _d2.default.sum(node.targetLinks, value));\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach(function (node) {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach(function (node) {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    var remainingNodes = nodes;\n    var nextNodes = void 0;\n    var x = 0;\n\n    function assignBreadth(node) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach(function (link) {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach(function (node) {\n      if (!node.targetLinks.length) {\n        node.x = _d2.default.min(node.sourceLinks, function (d) {\n          return d.target.x;\n        }) - 1;\n      }\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    var nodesByBreadth = _d2.default.nest().key(function (d) {\n      return d.x;\n    }).sortKeys(_d2.default.ascending).entries(nodes).map(function (d) {\n      return d.values;\n    });\n\n    function initializeNodeDepth() {\n      var ky = _d2.default.min(nodesByBreadth, function (n) {\n        return (size[1] - (n.length - 1) * nodePadding) / _d2.default.sum(n, value);\n      });\n\n      nodesByBreadth.forEach(function (n) {\n        n.forEach(function (node, i) {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(function (link) {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach(function (n) {\n        n.forEach(function (node) {\n          if (node.targetLinks.length) {\n            var y = _d2.default.sum(node.targetLinks, weightedSource) / _d2.default.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(function (nodes) {\n        var n = nodes.length;\n        var node = void 0;\n        var dy = void 0;\n        var y0 = 0;\n        var i = void 0;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(function (nodes) {\n        var node = void 0,\n            dy = void 0,\n            y0 = 0,\n            n = nodes.length,\n            i = void 0;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (var alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft(alpha *= 0.99);\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth.slice().reverse().forEach(function (nodes) {\n        nodes.forEach(function (node) {\n          if (node.sourceLinks.length) {\n            var y = _d2.default.sum(node.sourceLinks, weightedTarget) / _d2.default.sum(node.sourceLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(function (node) {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(function (node) {\n      var sy = 0,\n          ty = 0;\n      node.sourceLinks.forEach(function (link) {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach(function (link) {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  sankey.nodeWidth = function (_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function (_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function (_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function (_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function (_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function (iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function () {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function () {\n    var _arguments = arguments;\n\n    var curvature = 0.5;\n\n    function link(d) {\n      var x0 = d.source.x + d.source.dx;\n      var x1 = d.target.x;\n      var xi = _d2.default.interpolateNumber(x0, x1);\n      var x2 = xi(curvature);\n      var x3 = xi(1 - curvature);\n      var y0 = d.source.y + d.sy + d.dy / 2;\n      var y1 = d.target.y + d.ty + d.dy / 2;\n\n      return 'M' + x0 + ',' + y0 + 'C' + x2 + ',' + y0 + ' ' + x3 + ',' + y1 + ' ' + x1 + ',' + y1;\n    }\n\n    link.curvature = function (_) {\n      if (!_arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  return sankey;\n}\n\nexports.default = Sankey;\n\n/***/ }),\n/* 656 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in the following format:\\n\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 657 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _jquery = __webpack_require__(14);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _sunburst = __webpack_require__(658);\n\nvar _sunburst2 = _interopRequireDefault(_sunburst);\n\nvar _sunburstSequenceEditor = __webpack_require__(659);\n\nvar _sunburstSequenceEditor2 = _interopRequireDefault(_sunburstSequenceEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sunburstSequenceRenderer() {\n  return {\n    restrict: 'E',\n    link: function link(scope, element) {\n      var sunburst = new _sunburst2.default(scope, element);\n\n      function resize() {\n        sunburst.remove();\n        sunburst = new _sunburst2.default(scope, element);\n      }\n\n      (0, _jquery2.default)(window).on('resize', resize);\n      scope.$watch('visualization.options.height', function (oldValue, newValue) {\n        if (oldValue !== newValue) {\n          resize();\n        }\n      });\n    }\n  };\n}\n\nfunction sunburstSequenceEditor() {\n  return {\n    restrict: 'E',\n    template: _sunburstSequenceEditor2.default\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('sunburstSequenceRenderer', sunburstSequenceRenderer);\n  ngModule.directive('sunburstSequenceEditor', sunburstSequenceEditor);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    var renderTemplate = '<sunburst-sequence-renderer options=\"visualization.options\" query-result=\"queryResult\"></sunburst-sequence-renderer>';\n\n    var editTemplate = '<sunburst-sequence-editor></sunburst-sequence-editor>';\n    var defaultOptions = {\n      height: 300\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SUNBURST_SEQUENCE',\n      name: 'Sunburst Sequence',\n      renderTemplate: renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions: defaultOptions\n    });\n  }]);\n}\n\n/***/ }),\n/* 658 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _d = __webpack_require__(2);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _underscore = __webpack_require__(5);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar exitNode = '<<<Exit>>>';\nvar colors = d3.scale.category10();\n\n// helper function colorMap - color gray if \"end\" is detected\nfunction colorMap(d) {\n  return colors(d.name);\n}\n\n// Return array of ancestors of nodes, highest first, but excluding the root.\nfunction getAncestors(node) {\n  var path = [];\n  var current = node;\n\n  while (current.parent) {\n    path.unshift(current);\n    current = current.parent;\n  }\n  return path;\n}\n\n// The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\nfunction Sunburst(scope, element) {\n  this.element = element;\n  this.watches = [];\n\n  // svg dimensions\n  var width = element[0].parentElement.clientWidth;\n  var height = scope.visualization.options.height;\n  var radius = Math.min(width, height) / 2;\n\n  // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n  var b = {\n    w: width / 6,\n    h: 30,\n    s: 3,\n    t: 10\n  };\n\n  // margins\n  var margin = {\n    top: radius,\n    bottom: 50,\n    left: radius,\n    right: 0\n  };\n\n  /**\n   * Drawing variables:\n   *\n   * e.g. colors, totalSize, partitions, arcs\n   */\n  // Mapping of nodes to colorscale.\n\n  // Total size of all nodes, to be used later when data is loaded\n  var totalSize = 0;\n\n  // create d3.layout.partition\n  var partition = d3.layout.partition().size([2 * Math.PI, radius * radius]).value(function (d) {\n    return d.size;\n  });\n\n  // create arcs for drawing D3 paths\n  var arc = d3.svg.arc().startAngle(function (d) {\n    return d.x;\n  }).endAngle(function (d) {\n    return d.x + d.dx;\n  }).innerRadius(function (d) {\n    return Math.sqrt(d.y);\n  }).outerRadius(function (d) {\n    return Math.sqrt(d.y + d.dy);\n  });\n\n  /**\n   * Define and initialize D3 select references and div-containers\n   *\n   * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n   */\n  // create main vis selection\n  var vis = d3.select(element[0]).append('div').classed('vis-container', true).style('position', 'relative').style('margin-top', '5px').style('height', height + 2 * b.h + 'px');\n\n  // create and position breadcrumbs container and svg\n  var breadcrumbs = vis.append('div').classed('breadcrumbs-container', true).append('svg').attr('width', width).attr('height', b.h).attr('fill', 'white').attr('font-weight', 600);\n\n  var marginLeft = (width - radius * 2) / 2;\n\n  // create and position SVG\n  var sunburst = vis.append('div').classed('sunburst-container', true).style('z-index', '2')\n  // .style(\"margin-left\", marginLeft + \"px\")\n  .style('left', marginLeft + 'px').style('position', 'absolute').append('svg').attr('width', width).attr('height', height).append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // create last breadcrumb element\n  var lastCrumb = breadcrumbs.append('text').classed('lastCrumb', true);\n\n  // create and position summary container\n  var summary = vis.append('div').classed('summary-container', true).style('position', 'absolute').style('top', b.h + radius * 0.8 + 'px').style('left', marginLeft + radius / 2 + 'px').style('width', radius + 'px').style('height', radius + 'px').style('text-align', 'center').style('font-size', '11px').style('color', '#666').style('z-index', '1');\n\n  // Generate a string representation for drawing a breadcrumb polygon.\n  function breadcrumbPoints(d, i) {\n    var points = [];\n    points.push('0,0');\n    points.push(b.w + ',0');\n    points.push(b.w + b.t + ',' + b.h / 2);\n    points.push(b.w + ',' + b.h);\n    points.push('0,' + b.h);\n\n    if (i > 0) {\n      // Leftmost breadcrumb; don't include 6th vertex.\n      points.push(b.t + ',' + b.h / 2);\n    }\n    return points.join(' ');\n  }\n\n  // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n  function updateBreadcrumbs(ancestors, percentageString) {\n    // Data join, where primary key = name + depth.\n    var g = breadcrumbs.selectAll('g').data(ancestors, function (d) {\n      return d.name + d.depth;\n    });\n\n    // Add breadcrumb and label for entering nodes.\n    var breadcrumb = g.enter().append('g');\n\n    breadcrumb.append('polygon').classed('breadcrumbs-shape', true).attr('points', breadcrumbPoints).attr('fill', colorMap);\n\n    breadcrumb.append('text').classed('breadcrumbs-text', true).attr('x', (b.w + b.t) / 2).attr('y', b.h / 2).attr('dy', '0.35em').attr('font-size', '10px').attr('text-anchor', 'middle').text(function (d) {\n      return d.name;\n    });\n\n    // Set position for entering and updating nodes.\n    g.attr('transform', function (d, i) {\n      return 'translate(' + i * (b.w + b.s) + ', 0)';\n    });\n\n    // Remove exiting nodes.\n    g.exit().remove();\n\n    // Update percentage at the lastCrumb.\n    lastCrumb.attr('x', (ancestors.length + 0.5) * (b.w + b.s)).attr('y', b.h / 2).attr('dy', '0.35em').attr('text-anchor', 'middle').attr('fill', 'black').attr('font-weight', 600).text(percentageString);\n  }\n\n  // helper function mouseover to handle mouseover events/animations and calculation\n  // of ancestor nodes etc\n  function mouseover(d) {\n    // build percentage string\n    var percentage = (100 * d.value / totalSize).toPrecision(3);\n    var percentageString = percentage + '%';\n    if (percentage < 1) {\n      percentageString = '< 1.0%';\n    }\n\n    // update breadcrumbs (get all ancestors)\n    var ancestors = getAncestors(d);\n    updateBreadcrumbs(ancestors, percentageString);\n\n    // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n    sunburst.selectAll('path').attr('opacity', 0.3);\n    sunburst.selectAll('path').filter(function (node) {\n      return ancestors.indexOf(node) >= 0;\n    }).attr('opacity', 1);\n\n    // update summary\n    summary.html('Stage: ' + d.depth + '<br />' + ('<span class=\\'percentage\\' style=\\'font-size: 2em;\\'>' + percentageString + '</span><br />' + d.value + ' of ' + totalSize + '<br />'));\n\n    // display summary and breadcrumbs if hidden\n    summary.style('visibility', '');\n    breadcrumbs.style('visibility', '');\n  }\n\n  // helper function click to handle mouseleave events/animations\n  function click() {\n    // Deactivate all segments then retransition each segment to full opacity.\n    sunburst.selectAll('path').on('mouseover', null);\n    sunburst.selectAll('path').transition().duration(1000).attr('opacity', 1).each('end', function endClick() {\n      d3.select(this).on('mouseover', mouseover);\n    });\n\n    // hide summary and breadcrumbs if visible\n    breadcrumbs.style('visibility', 'hidden');\n    summary.style('visibility', 'hidden');\n  }\n\n  // helper function to draw the sunburst and breadcrumbs\n  function drawSunburst(json) {\n    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n    // 0.005 radians = 0.29 degrees\n    var nodes = partition.nodes(json).filter(function (d) {\n      return d.dx > 0.005 && d.name !== exitNode;\n    });\n\n    // this section is required to update the colors.domain() every time the data updates\n    var uniqueNames = function uniqueNames(a) {\n      var output = [];\n      a.forEach(function (d) {\n        if (output.indexOf(d.name) === -1) output.push(d.name);\n      });\n      return output;\n    }(nodes);\n    colors.domain(uniqueNames); // update domain colors\n\n    // create path based on nodes\n    var path = sunburst.data([json]).selectAll('path').data(nodes).enter().append('path').classed('nodePath', true).attr('display', function (d) {\n      return d.depth ? null : 'none';\n    }).attr('d', arc).attr('fill', colorMap).attr('opacity', 1).attr('stroke', 'white').on('mouseover', mouseover);\n\n    // // trigger mouse click over sunburst to reset visualization summary\n    vis.on('click', click);\n\n    // Update totalSize of the tree = value of root node from partition.\n    totalSize = path.node().__data__.value;\n  }\n\n  // visualize json tree structure\n  function createVisualization(json) {\n    drawSunburst(json); // draw sunburst\n  }\n\n  function removeVisualization() {\n    sunburst.selectAll('.nodePath').remove();\n    // legend.selectAll(\"g\").remove();\n  }\n\n  function buildNodes(raw) {\n    var values = void 0;\n\n    if (_underscore2.default.has(raw[0], 'sequence') && _underscore2.default.has(raw[0], 'stage') && _underscore2.default.has(raw[0], 'node') && _underscore2.default.has(raw[0], 'value')) {\n      var grouped = _underscore2.default.groupBy(raw, 'sequence');\n\n      values = _underscore2.default.map(grouped, function (value) {\n        var sorted = _underscore2.default.sortBy(value, 'stage');\n        return {\n          size: value[0].value,\n          sequence: value[0].sequence,\n          nodes: _underscore2.default.pluck(sorted, 'node')\n        };\n      });\n    } else {\n      var validKey = function validKey(key) {\n        return key !== 'value' && key.indexOf('$$') !== 0;\n      };\n      var keys = _underscore2.default.sortBy(_underscore2.default.filter(_underscore2.default.keys(raw[0]), validKey), _underscore2.default.identity);\n\n      values = _underscore2.default.map(raw, function (row, sequence) {\n        return {\n          size: row.value,\n          sequence: sequence,\n          nodes: _underscore2.default.compact(_underscore2.default.map(keys, function (key) {\n            return row[key];\n          }))\n        };\n      });\n    }\n\n    return values;\n  }\n\n  function buildHierarchy(csv) {\n    var data = buildNodes(csv);\n\n    // build tree\n    var root = {\n      name: 'root',\n      children: []\n    };\n\n    data.forEach(function (d) {\n      var nodes = d.nodes;\n      var size = parseInt(d.size, 10);\n\n      // build graph, nodes, and child nodes\n      var currentNode = root;\n\n      var _loop = function _loop(j) {\n        var children = currentNode.children;\n        var nodeName = nodes[j];\n        var isLeaf = j + 1 === nodes.length;\n\n        if (!children) {\n          currentNode.children = children = [];\n          children.push({\n            name: exitNode,\n            size: currentNode.size\n          });\n        }\n\n        var childNode = _underscore2.default.find(children, function (child) {\n          return child.name === nodeName;\n        });\n\n        if (isLeaf && childNode) {\n          childNode.children.push({\n            name: exitNode,\n            size: size\n          });\n        } else if (isLeaf) {\n          children.push({\n            name: nodeName,\n            size: size\n          });\n        } else {\n          if (!childNode) {\n            childNode = {\n              name: nodeName,\n              children: []\n            };\n            children.push(childNode);\n          }\n\n          currentNode = childNode;\n        }\n      };\n\n      for (var j = 0; j < nodes.length; j += 1) {\n        _loop(j);\n      }\n    });\n\n    return root;\n  }\n\n  function render(data) {\n    var json = buildHierarchy(data); // build json tree\n    removeVisualization(); // remove existing visualization if any\n    createVisualization(json); // visualize json tree\n  }\n\n  function refreshData() {\n    var queryData = scope.queryResult.getData();\n    if (queryData) {\n      render(queryData);\n    }\n  }\n\n  refreshData();\n  this.watches.push(scope.$watch('visualization.options', refreshData, true));\n  this.watches.push(scope.$watch('queryResult && queryResult.getData()', refreshData));\n}\n\nSunburst.prototype.remove = function remove() {\n  this.watches.forEach(function (unregister) {\n    unregister();\n  });\n  _angular2.default.element(this.element[0]).empty('.vis-container');\n};\n\nexports.default = Sunburst;\n\n/***/ }),\n/* 659 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in one of the following formats:\\n\\n    <strong>Option 1:</strong>\\n    <ul>\\n      <li><strong>sequence</strong> - sequence id</li>\\n      <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\\n      <li><strong>node</strong> - stage name</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n\\n    <strong>Option 2:</strong>\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 660 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _underscore = __webpack_require__(5);\n\nvar _queryResult = __webpack_require__(232);\n\nvar _table = __webpack_require__(661);\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nGridRenderer.$inject = ['clientConfig'];\n\n\nfunction formatValue($filter, clientConfig, value, type) {\n  var formattedValue = value;\n  switch (type) {\n    case 'integer':\n      formattedValue = $filter('number')(value, 0);\n      break;\n    case 'float':\n      formattedValue = $filter('number')(value, 2);\n      break;\n    case 'boolean':\n      if (value !== undefined) {\n        formattedValue = String(value);\n      }\n      break;\n    case 'date':\n      if (value && _moment2.default.isMoment(value)) {\n        formattedValue = value.format(clientConfig.dateFormat);\n      }\n      break;\n    case 'datetime':\n      if (value && _moment2.default.isMoment(value)) {\n        formattedValue = value.format(clientConfig.dateTimeFormat);\n      }\n      break;\n    default:\n      if ((0, _underscore.isString)(value)) {\n        formattedValue = $filter('linkify')(value);\n      }\n      break;\n  }\n\n  return formattedValue;\n}\n\nfunction GridRenderer(clientConfig) {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      itemsPerPage: '='\n    },\n    template: _table2.default,\n    replace: false,\n    controller: ['$scope', '$filter', function controller($scope, $filter) {\n      $scope.gridColumns = [];\n      $scope.gridRows = [];\n\n      $scope.$watch('queryResult && queryResult.getData()', function (queryResult) {\n        if (!queryResult) {\n          return;\n        }\n\n        if ($scope.queryResult.getData() == null) {\n          $scope.gridColumns = [];\n          $scope.filters = [];\n        } else {\n          $scope.filters = $scope.queryResult.getFilters();\n\n          var columns = $scope.queryResult.getColumns();\n          columns.forEach(function (col) {\n            col.title = (0, _queryResult.getColumnCleanName)(col.name);\n            col.formatFunction = (0, _underscore.partial)(formatValue, $filter, clientConfig, _underscore._, col.type);\n          });\n\n          $scope.gridRows = $scope.queryResult.getData();\n          $scope.gridColumns = columns;\n        }\n      });\n    }]\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    VisualizationProvider.registerVisualization({\n      type: 'TABLE',\n      name: 'Table',\n      renderTemplate: '<grid-renderer options=\"visualization.options\" query-result=\"queryResult\"></grid-renderer>',\n      skipTypes: true\n    });\n  }]);\n  ngModule.directive('gridRenderer', GridRenderer);\n}\n\n/***/ }),\n/* 661 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<dynamic-table rows=\\\"gridRows\\\" columns=\\\"gridColumns\\\"></dynamic-table>\\n\"\n\n/***/ }),\n/* 662 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _d = __webpack_require__(2);\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _angular = __webpack_require__(19);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _d3Cloud = __webpack_require__(663);\n\nvar _d3Cloud2 = _interopRequireDefault(_d3Cloud);\n\nvar _underscore = __webpack_require__(5);\n\nvar _wordCloudEditor = __webpack_require__(666);\n\nvar _wordCloudEditor2 = _interopRequireDefault(_wordCloudEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction findWordFrequencies(data, columnName) {\n  var wordsHash = {};\n\n  data.forEach(function (row) {\n    var wordsList = row[columnName].toString().split(' ');\n    wordsList.forEach(function (d) {\n      if (d in wordsHash) {\n        wordsHash[d] += 1;\n      } else {\n        wordsHash[d] = 1;\n      }\n    });\n  });\n\n  return wordsHash;\n}\n\nfunction wordCloudRenderer() {\n  return {\n    restrict: 'E',\n    link: function link($scope, elem) {\n      function reloadCloud() {\n        if (!_angular2.default.isDefined($scope.queryResult)) return;\n\n        var data = $scope.queryResult.getData();\n        var wordsHash = {};\n\n        if ($scope.visualization.options.column) {\n          wordsHash = findWordFrequencies(data, $scope.visualization.options.column);\n        }\n\n        var wordList = [];\n        (0, _underscore.each)(wordsHash, function (v, key) {\n          wordList.push({ text: key, size: 10 + Math.pow(v, 2) });\n        });\n\n        var fill = _d2.default.scale.category20();\n        var layout = (0, _d3Cloud2.default)().size([500, 500]).words(wordList).padding(5).rotate(function () {\n          return Math.floor(Math.random() * 2) * 90;\n        }).font('Impact').fontSize(function (d) {\n          return d.size;\n        });\n\n        function draw(words) {\n          _d2.default.select(elem[0].parentNode).select('svg').remove();\n\n          _d2.default.select(elem[0].parentNode).append('svg').attr('width', layout.size()[0]).attr('height', layout.size()[1]).append('g').attr('transform', 'translate(' + layout.size()[0] / 2 + ',' + layout.size()[1] / 2 + ')').selectAll('text').data(words).enter().append('text').style('font-size', function (d) {\n            return d.size + 'px';\n          }).style('font-family', 'Impact').style('fill', function (d, i) {\n            return fill(i);\n          }).attr('text-anchor', 'middle').attr('transform', function (d) {\n            return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')';\n          }).text(function (d) {\n            return d.text;\n          });\n        }\n\n        layout.on('end', draw);\n\n        layout.start();\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', reloadCloud);\n      $scope.$watch('visualization.options.column', reloadCloud);\n    }\n  };\n}\n\nfunction wordCloudEditor() {\n  return {\n    restrict: 'E',\n    template: _wordCloudEditor2.default\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.directive('wordCloudEditor', wordCloudEditor);\n  ngModule.directive('wordCloudRenderer', wordCloudRenderer);\n\n  ngModule.config(['VisualizationProvider', function (VisualizationProvider) {\n    VisualizationProvider.registerVisualization({\n      type: 'WORD_CLOUD',\n      name: 'Word Cloud',\n      renderTemplate: '<word-cloud-renderer options=\"visualization.options\" query-result=\"queryResult\"></word-cloud-renderer>',\n      editorTemplate: '<word-cloud-editor></word-cloud-editor>'\n    });\n  }]);\n}\n\n/***/ }),\n/* 663 */,\n/* 664 */,\n/* 665 */,\n/* 666 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Word Cloud Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.column\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 667 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./admin/outdated-queries/index.js\": 668,\n\t\"./admin/status/index.js\": 672,\n\t\"./admin/tasks/index.js\": 674,\n\t\"./alert/index.js\": 676,\n\t\"./alerts-list/index.js\": 678,\n\t\"./dashboards/dashboard-list.js\": 680,\n\t\"./dashboards/dashboard.js\": 683,\n\t\"./dashboards/public-dashboard-page.js\": 686,\n\t\"./data-sources/list.js\": 688,\n\t\"./data-sources/show.js\": 690,\n\t\"./destinations/list.js\": 692,\n\t\"./destinations/show.js\": 694,\n\t\"./groups/data-sources.js\": 696,\n\t\"./groups/list.js\": 698,\n\t\"./groups/show.js\": 700,\n\t\"./home/index.js\": 702,\n\t\"./queries-list/index.js\": 704,\n\t\"./queries/queries-search-results-page.js\": 706,\n\t\"./queries/source-view.js\": 708,\n\t\"./queries/view.js\": 709,\n\t\"./query-snippets/edit.js\": 710,\n\t\"./query-snippets/list.js\": 713,\n\t\"./users/list.js\": 715,\n\t\"./users/new.js\": 717,\n\t\"./users/show.js\": 719\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 667;\n\n/***/ }),\n/* 668 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _pagination = __webpack_require__(26);\n\nvar _outdatedQueries = __webpack_require__(671);\n\nvar _outdatedQueries2 = _interopRequireDefault(_outdatedQueries);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nOutdatedQueriesCtrl.$inject = ['$scope', 'Events', '$http', '$timeout'];\n\n\nfunction OutdatedQueriesCtrl($scope, Events, $http, $timeout) {\n  var _this = this;\n\n  Events.record('view', 'page', 'admin/outdated_queries');\n  $scope.autoUpdate = true;\n\n  this.queries = new _pagination.Paginator([], { itemsPerPage: 50 });\n\n  var refresh = function refresh() {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = (0, _moment2.default)().add(1, 'minutes');\n      $http.get('/api/admin/queries/outdated').success(function (data) {\n        _this.queries.updateRows(data.queries);\n        $scope.updatedAt = data.updated_at * 1000.0;\n      });\n    }\n\n    var timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', function () {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nfunction init(ngModule) {\n  ngModule.component('outdatedQueriesPage', {\n    template: _outdatedQueries2.default,\n    controller: OutdatedQueriesCtrl\n  });\n\n  return {\n    '/admin/queries/outdated': {\n      template: '<outdated-queries-page></outdated-queries-page>',\n      title: 'Outdated Queries'\n    }\n  };\n}\n\n/***/ }),\n/* 669 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _underscore = __webpack_require__(5);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Paginator = function () {\n  function Paginator(rows) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$page = _ref.page,\n        page = _ref$page === undefined ? 1 : _ref$page,\n        _ref$itemsPerPage = _ref.itemsPerPage,\n        itemsPerPage = _ref$itemsPerPage === undefined ? 20 : _ref$itemsPerPage,\n        _ref$totalCount = _ref.totalCount,\n        totalCount = _ref$totalCount === undefined ? undefined : _ref$totalCount;\n\n    _classCallCheck(this, Paginator);\n\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.updateRows(rows, totalCount);\n    this.orderByField = undefined;\n    this.orderByReverse = false;\n  }\n\n  _createClass(Paginator, [{\n    key: 'setPage',\n    value: function setPage(page) {\n      this.page = page;\n    }\n  }, {\n    key: 'getPageRows',\n    value: function getPageRows() {\n      var first = this.itemsPerPage * (this.page - 1);\n      var last = this.itemsPerPage * this.page;\n\n      return this.rows.slice(first, last);\n    }\n  }, {\n    key: 'updateRows',\n    value: function updateRows(rows) {\n      var totalCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n      this.rows = rows;\n      if (this.rows) {\n        this.totalCount = totalCount || rows.length;\n      } else {\n        this.totalCount = 0;\n      }\n    }\n  }, {\n    key: 'orderBy',\n    value: function orderBy(column) {\n      if (column === this.orderByField) {\n        this.orderByReverse = !this.orderByReverse;\n      } else {\n        this.orderByField = column;\n        this.orderByReverse = false;\n      }\n\n      if (this.orderByField) {\n        this.rows = (0, _underscore.sortBy)(this.rows, this.orderByField);\n        if (this.orderByReverse) {\n          this.rows = this.rows.reverse();\n        }\n      }\n    }\n  }]);\n\n  return Paginator;\n}();\n\nexports.default = Paginator;\n\n/***/ }),\n/* 670 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LivePaginator = function () {\n  function LivePaginator(rowsFetcher) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$page = _ref.page,\n        page = _ref$page === undefined ? 1 : _ref$page,\n        _ref$itemsPerPage = _ref.itemsPerPage,\n        itemsPerPage = _ref$itemsPerPage === undefined ? 20 : _ref$itemsPerPage;\n\n    _classCallCheck(this, LivePaginator);\n\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.rowsFetcher = rowsFetcher;\n    this.rowsFetcher(this.page, this.itemsPerPage, this);\n  }\n\n  _createClass(LivePaginator, [{\n    key: \"setPage\",\n    value: function setPage(page) {\n      this.page = page;\n      this.rowsFetcher(page, this.itemsPerPage, this);\n    }\n  }, {\n    key: \"getPageRows\",\n    value: function getPageRows() {\n      return this.rows;\n    }\n  }, {\n    key: \"updateRows\",\n    value: function updateRows(rows) {\n      var totalCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n      this.rows = rows;\n      if (this.rows) {\n        this.totalCount = totalCount || rows.length;\n      } else {\n        this.totalCount = 0;\n      }\n    }\n  }]);\n\n  return LivePaginator;\n}();\n\nexports.default = LivePaginator;\n\n/***/ }),\n/* 671 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Created At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.queries.getPageRows()\\\">\\n        <td>\\n          {{row.data_source_id}}\\n        </td>\\n        <td>\\n          <a ng-href=\\\"queries/{{row.id}}\\\">{{row.name}}</a>\\n        </td>\\n        <td>{{row.user.name}}</td>\\n        <td>{{row.runtime | durationHumanize}}</td>\\n        <td>{{row.retrieved_at | dateTime}}</td>\\n        <td>{{row.created_at | dateTime }}</td>\\n        <td>{{row.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.queries\\\"></paginator>\\n\\n    <div class=\\\"badge\\\">\\n      Last update: <span am-time-ago=\\\"updatedAt\\\"></span>\\n    </div>\\n    (<label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>)\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 672 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _status = __webpack_require__(673);\n\nvar _status2 = _interopRequireDefault(_status);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nAdminStatusCtrl.$inject = ['$scope', '$http', '$timeout', 'currentUser', 'Events'];\n\n\n// TODO: switch to $ctrl instead of $scope.\nfunction AdminStatusCtrl($scope, $http, $timeout, currentUser, Events) {\n  Events.record('view', 'page', 'admin/status');\n\n  var refresh = function refresh() {\n    $http.get('/status.json').success(function (data) {\n      $scope.workers = data.workers;\n      delete data.workers;\n      $scope.manager = data.manager;\n      delete data.manager;\n      $scope.status = data;\n    });\n\n    var timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', function () {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nfunction init(ngModule) {\n  ngModule.component('statusPage', {\n    template: _status2.default,\n    controller: AdminStatusCtrl\n  });\n\n  return {\n    '/admin/status': {\n      template: '<status-page></status-page>',\n      title: 'System Status'\n    }\n  };\n}\n\n/***/ }),\n/* 673 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li class=\\\"active\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <div>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">General</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in status\\\">\\n          <span class=\\\"badge\\\">{{value}}</span>\\n          {{name | toHuman}}\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Manager</li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.last_refresh_at*1000.0\\\"></span>\\n          Last Refresh\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.started_at*1000.0\\\"></span>\\n          Started\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\">{{manager.outdated_queries_count}}</span>\\n          Outdated Queries Count\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Queues</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in manager.queues\\\">\\n          <span class=\\\"badge\\\">{{value.size}}</span>\\n          {{name}} <span uib-popover=\\\"{{value.data_sources}}\\\" popover-trigger=\\\"'mouseenter'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 674 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _pagination = __webpack_require__(26);\n\nvar _tasks = __webpack_require__(675);\n\nvar _tasks2 = _interopRequireDefault(_tasks);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nTasksCtrl.$inject = ['$scope', '$location', '$http', '$timeout', 'Events'];\n\n\nfunction TasksCtrl($scope, $location, $http, $timeout, Events) {\n  var _this = this;\n\n  Events.record('view', 'page', 'admin/tasks');\n  $scope.autoUpdate = true;\n\n  $scope.selectedTab = 'in_progress';\n\n  $scope.tasks = {\n    waiting: [],\n    in_progress: [],\n    done: []\n  };\n\n  this.tasksPaginator = new _pagination.Paginator([], { itemsPerPage: 50 });\n\n  $scope.setTab = function (tab) {\n    $scope.selectedTab = tab;\n    _this.tasksPaginator.updateRows($scope.tasks[tab]);\n  };\n\n  $scope.setTab($location.hash() || 'in_progress');\n\n  var refresh = function refresh() {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = (0, _moment2.default)().add(1, 'minutes');\n      $http.get('/api/admin/queries/tasks').success(function (data) {\n        $scope.tasks = data;\n        _this.tasksPaginator.updateRows($scope.tasks[$scope.selectedTab]);\n      });\n    }\n\n    var timer = $timeout(refresh, 5 * 1000);\n\n    $scope.$on('$destroy', function () {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nfunction init(ngModule) {\n  ngModule.component('tasksPage', {\n    template: _tasks2.default,\n    controller: TasksCtrl\n  });\n\n  return {\n    '/admin/queries/tasks': {\n      template: '<tasks-page></tasks-page>',\n      title: 'Running Queries'\n    }\n  };\n}\n\n/***/ }),\n/* 675 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <ul class=\\\"tab-nav\\\">\\n      <rd-tab tab-id=\\\"in_progress\\\" name=\\\"In Progress ({{tasks.in_progress.length}})\\\" ng-click=\\\"setTab('in_progress')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"waiting\\\" name=\\\"Waiting ({{tasks.waiting.length}})\\\" ng-click=\\\"setTab('waiting')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"done\\\" name=\\\"Done\\\" ng-click=\\\"setTab('done')\\\"></rd-tab>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Data Source ID</th>\\n        <th>Username</th>\\n        <th>State</th>\\n        <th>Query ID</th>\\n        <th>Query Hash</th>\\n        <th>Runtime</th>\\n        <th>Created At</th>\\n        <th>Started At</th>\\n        <th>Updated At</th>\\n        <th ng-if=\\\"selectedTab === 'in_progress'\\\"></th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.tasksPaginator.getPageRows()\\\">\\n        <td>{{row.data_source_id}}</td>\\n        <td>{{row.username}}</td>\\n        <td>{{row.state}} <span ng-if=\\\"row.state === 'failed'\\\" uib-popover=\\\"{{row.error}}\\\" popover-trigger=\\\"mouseenter\\\" class=\\\"zmdi zmdi-help\\\"></span></td>\\n        <td><a href=\\\"queries/{{row.query_id}}\\\">{{row.query_id}}</a></td>\\n        <td>{{row.query_hash}}</td>\\n        <td>{{row.run_time | durationHumanize}}</td>\\n        <td>{{row.created_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.started_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.updated_at | toMilliseconds | dateTime }}</td>\\n        <td ng-if=\\\"selectedTab === 'in_progress'\\\">\\n          <cancel-query-button query-id=\\\"row.query_id\\\" task-id=\\\"row.task_id\\\"></cancel-query-button>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.tasksPaginator\\\"></paginator>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 676 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _alert = __webpack_require__(677);\n\nvar _alert2 = _interopRequireDefault(_alert);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nAlertCtrl.$inject = ['$routeParams', '$location', '$sce', 'toastr', 'currentUser', 'Query', 'Events', 'Alert'];\n\n\nfunction AlertCtrl($routeParams, $location, $sce, toastr, currentUser, Query, Events, Alert) {\n  var _this = this;\n\n  this.alertId = $routeParams.alertId;\n\n  if (this.alertId === 'new') {\n    Events.record('view', 'page', 'alerts/new');\n  } else {\n    Events.record('view', 'alert', this.alertId);\n  }\n\n  this.trustAsHtml = function (html) {\n    return $sce.trustAsHtml(html);\n  };\n\n  this.onQuerySelected = function (item) {\n    _this.selectedQuery = item;\n    item.getQueryResultPromise().then(function (result) {\n      _this.queryResult = result;\n      _this.alert.options.column = _this.alert.options.column || result.getColumnNames()[0];\n    });\n  };\n\n  if (this.alertId === 'new') {\n    this.alert = new Alert({ options: {} });\n    this.canEdit = true;\n  } else {\n    this.alert = Alert.get({ id: this.alertId }, function (alert) {\n      _this.onQuerySelected(new Query(alert.query));\n      _this.canEdit = currentUser.canEdit(_this.alert);\n    });\n  }\n\n  this.ops = ['greater than', 'less than', 'equals'];\n  this.selectedQuery = null;\n\n  var defaultNameBuilder = (0, _underscore.template)('<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>');\n\n  this.getDefaultName = function () {\n    if (!_this.alert.query) {\n      return undefined;\n    }\n    return defaultNameBuilder(_this.alert);\n  };\n\n  this.searchQueries = function (term) {\n    if (!term || term.length < 3) {\n      return;\n    }\n\n    Query.search({ q: term }, function (results) {\n      _this.queries = results;\n    });\n  };\n\n  this.saveChanges = function () {\n    if (_this.alert.name === undefined || _this.alert.name === '') {\n      _this.alert.name = _this.getDefaultName();\n    }\n    if (_this.alert.rearm === '' || _this.alert.rearm === 0) {\n      _this.alert.rearm = null;\n    }\n    _this.alert.$save(function (alert) {\n      toastr.success('Saved.');\n      if (_this.alertId === 'new') {\n        $location.path('/alerts/' + alert.id).replace();\n      }\n    }, function () {\n      toastr.error('Failed saving alert.');\n    });\n  };\n\n  this.delete = function () {\n    _this.alert.$delete(function () {\n      $location.path('/alerts');\n      toastr.success('Alert deleted.');\n    }, function () {\n      toastr.error('Failed deleting alert.');\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.component('alertPage', {\n    template: _alert2.default,\n    controller: AlertCtrl\n  });\n\n  return {\n    '/alerts/:alertId': {\n      template: '<alert-page></alert-page>',\n      title: 'Alerts'\n    }\n  };\n}\n\n/***/ }),\n/* 677 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<page-header title='{{$ctrl.alert.name || $ctrl.getDefaultName() || \\\"New\\\" }}'>\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <email-settings-warning function=\\\"'alert emails'\\\"></email-settings-warning>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row bg-white p-10\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>Query</label>\\n            <ui-select ng-model=\\\"$ctrl.alert.query\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelected($item)\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-show=\\\"$ctrl.selectedQuery\\\">\\n            <label>Name</label>\\n            <input type=\\\"string\\\" placeholder=\\\"{{$ctrl.getDefaultName()}}\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.name\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n          </div>\\n\\n          <div ng-show=\\\"$ctrl.queryResult\\\" class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Value column</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.queryResult.getColumnNames()\\\" ng-model=\\\"$ctrl.alert.options.column\\\"\\n                        class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Value</label>\\n              <div class=\\\"col-md-4\\\">\\n                <p class=\\\"form-control-static\\\">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Op</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.ops\\\" ng-model=\\\"$ctrl.alert.options.op\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Reference</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" step=\\\"any\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.options.value\\\" placeholder=\\\"reference value\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"\\n                       required/>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Rearm seconds</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.rearm\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"/>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n            <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!alertForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n            <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.alert.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.alert.id\\\">\\n        <alert-subscriptions alert-id=\\\"$ctrl.alert.id\\\"></alert-subscriptions>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 678 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _pagination = __webpack_require__(26);\n\nvar _alertsList = __webpack_require__(679);\n\nvar _alertsList2 = _interopRequireDefault(_alertsList);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar stateClass = {\n  ok: 'label label-success',\n  triggered: 'label label-danger',\n  unknown: 'label label-warning'\n};\n\nvar AlertsListCtrl = function AlertsListCtrl(Events, Alert) {\n  var _this = this;\n\n  _classCallCheck(this, AlertsListCtrl);\n\n  Events.record('view', 'page', 'alerts');\n\n  this.alerts = new _pagination.Paginator([], { itemsPerPage: 20 });\n  Alert.query(function (alerts) {\n    _this.alerts.updateRows(alerts.map(function (alert) {\n      return {\n        id: alert.id,\n        name: alert.name,\n        state: alert.state,\n        class: stateClass[alert.state],\n        created_by: alert.user.name,\n        created_at: alert.created_at,\n        updated_at: alert.updated_at\n      };\n    }));\n  });\n};\n\nAlertsListCtrl.$inject = ['Events', 'Alert'];\nfunction init(ngModule) {\n  ngModule.component('alertsListPage', {\n    template: _alertsList2.default,\n    controller: AlertsListCtrl\n  });\n\n  return {\n    '/alerts': {\n      template: '<alerts-list-page></alerts-list-page>',\n      title: 'Alerts'\n    }\n  };\n}\n\n/***/ }),\n/* 679 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n  <page-header title=\\\"Alerts\\\">\\n    <a href=\\\"alerts/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert</a>\\n  </page-header>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('name')\\\">Name <sort-icon column=\\\"'name'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('created_by')\\\">Created By <sort-icon column=\\\"'created_by'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('state')\\\">State <sort-icon column=\\\"'state'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('created_at')\\\">Created By <sort-icon column=\\\"'created_at'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"row in $ctrl.alerts.getPageRows()\\\">\\n          <td><a href=\\\"alerts/{{row.id}}\\\">{{row.name}}</a></td>\\n          <td>{{row.created_by}}</td>\\n          <td><span ng-class=\\\"row.class\\\">{{row.state | uppercase}}</span> since <span am-time-ago=\\\"row.updated_at\\\"></span></td>\\n          <td><span am-time-ago=\\\"row.created_at\\\"></span></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.alerts\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 680 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _pagination = __webpack_require__(26);\n\nvar _dashboardList = __webpack_require__(681);\n\nvar _dashboardList2 = _interopRequireDefault(_dashboardList);\n\n__webpack_require__(682);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDashboardListCtrl.$inject = ['Dashboard', '$location', 'clientConfig'];\n\n\nfunction DashboardListCtrl(Dashboard, $location, clientConfig) {\n  var _this = this;\n\n  var TAGS_REGEX = /(^([\\w\\s]|[^\\u0000-\\u007F])+):|(#([\\w-]|[^\\u0000-\\u007F])+)/ig;\n\n  this.logoUrl = clientConfig.logoUrl;\n  var page = parseInt($location.search().page || 1, 10);\n\n  this.defaultOptions = {};\n  this.dashboards = Dashboard.query({}); // shared promise\n\n  this.selectedTags = []; // in scope because it needs to be accessed inside a table refresh\n  this.searchText = '';\n\n  this.tagIsSelected = function (tag) {\n    return _this.selectedTags.indexOf(tag) > -1;\n  };\n\n  this.toggleTag = function ($event, tag) {\n    if (_this.tagIsSelected(tag)) {\n      if ($event.shiftKey) {\n        _this.selectedTags = _this.selectedTags.filter(function (e) {\n          return e !== tag;\n        });\n      } else {\n        _this.selectedTags = [];\n      }\n    } else if ($event.shiftKey) {\n      _this.selectedTags.push(tag);\n    } else {\n      _this.selectedTags = [tag];\n    }\n\n    _this.update();\n  };\n\n  this.allTags = [];\n  this.dashboards.$promise.then(function (data) {\n    var out = data.map(function (dashboard) {\n      return dashboard.name.match(TAGS_REGEX);\n    });\n    _this.allTags = _underscore2.default.unique(_underscore2.default.flatten(out)).filter(function (e) {\n      return e;\n    }).map(function (tag) {\n      return tag.replace(/:$/, '');\n    });\n    _this.allTags.sort();\n  });\n\n  this.paginator = new _pagination.Paginator([], { page: page });\n\n  this.update = function () {\n    _this.dashboards.$promise.then(function (data) {\n      data = _underscore2.default.sortBy(data, 'name');\n      var filteredDashboards = data.map(function (dashboard) {\n        dashboard.tags = (dashboard.name.match(TAGS_REGEX) || []).map(function (tag) {\n          return tag.replace(/:$/, '');\n        });\n        dashboard.untagged_name = dashboard.name.replace(TAGS_REGEX, '').trim();\n        return dashboard;\n      }).filter(function (value) {\n        if (_this.selectedTags.length) {\n          var valueTags = new Set(value.tags);\n          var tagMatch = _this.selectedTags;\n          var filteredMatch = tagMatch.filter(function (x) {\n            return valueTags.has(x);\n          });\n          if (tagMatch.length !== filteredMatch.length) {\n            return false;\n          }\n        }\n        if (_this.searchText && _this.searchText.length) {\n          if (!value.untagged_name.toLowerCase().includes(_this.searchText.toLowerCase())) {\n            return false;\n          }\n        }\n        return true;\n      });\n\n      _this.paginator.updateRows(filteredDashboards, data.count);\n    });\n  };\n\n  this.update();\n}\n\nfunction init(ngModule) {\n  ngModule.component('pageDashboardList', {\n    template: _dashboardList2.default,\n    controller: DashboardListCtrl\n  });\n\n  var route = {\n    template: '<page-dashboard-list></page-dashboard-list>',\n    reloadOnSearch: false,\n    title: 'Dashboards'\n  };\n\n  return {\n    '/dashboards': route\n  };\n}\n\n/***/ }),\n/* 681 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class='container row'>\\n  <page-header title=\\\"Dashboards\\\"></page-header>\\n  <div class=\\\"col-lg-3\\\">\\n    <input type='text' class='form-control' placeholder=\\\"Search Dashboards...\\\" \\n      ng-change=\\\"$ctrl.update()\\\" ng-model=\\\"$ctrl.searchText\\\" autofocus/>\\n    <div class='list-group m-t-20 tags-list'>\\n      <a ng-repeat='tag in $ctrl.allTags' ng-class='{\\\"active\\\": $ctrl.tagIsSelected(tag)}'\\n      class='list-group-item' ng-click='$ctrl.toggleTag($event, tag)'>\\n        {{ tag }}\\n      </a>\\n    </div>\\n  </div>\\n  <div class=\\\"col-lg-9\\\">\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Name</th>\\n          <th>Created At</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dashboard in $ctrl.paginator.getPageRows()\\\">\\n          <td>\\n            <a href=\\\"dashboard/{{ dashboard.slug }}\\\">\\n              <span class=\\\"label label-primary m-2\\\" ng-bind=\\\"tag\\\" ng-repeat=\\\"tag in dashboard.tags\\\"></span> {{ dashboard.untagged_name }}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n            </a>\\n          </td>\\n          <td>{{ dashboard.created_at | dateTime }}</td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 682 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 683 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _ = _interopRequireWildcard(_underscore);\n\nvar _dashboard = __webpack_require__(684);\n\nvar _dashboard2 = _interopRequireDefault(_dashboard);\n\nvar _shareDashboard = __webpack_require__(685);\n\nvar _shareDashboard2 = _interopRequireDefault(_shareDashboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nDashboardCtrl.$inject = ['$rootScope', '$routeParams', '$location', '$timeout', '$q', '$uibModal', 'Title', 'AlertDialog', 'Dashboard', 'currentUser', 'clientConfig', 'Events'];\n\n\nfunction DashboardCtrl($rootScope, $routeParams, $location, $timeout, $q, $uibModal, Title, AlertDialog, Dashboard, currentUser, clientConfig, Events) {\n  var _this = this;\n\n  this.isFullscreen = false;\n  this.refreshRate = null;\n  this.showPermissionsControl = clientConfig.showPermissionsControl;\n  this.currentUser = currentUser;\n  this.globalParameters = [];\n  this.refreshRates = [{ name: '10 seconds', rate: 10 }, { name: '30 seconds', rate: 30 }, { name: '1 minute', rate: 60 }, { name: '5 minutes', rate: 60 * 5 }, { name: '10 minutes', rate: 60 * 10 }, { name: '30 minutes', rate: 60 * 30 }, { name: '1 hour', rate: 60 * 60 }, { name: '12 hour', rate: 12 * 60 * 60 }, { name: '24 hour', rate: 24 * 60 * 60 }];\n\n  this.setRefreshRate = function (rate) {\n    _this.refreshRate = rate;\n    if (rate !== null) {\n      _this.loadDashboard(true);\n      _this.autoRefresh();\n    }\n  };\n\n  this.extractGlobalParameters = function () {\n    var globalParams = {};\n    _this.dashboard.widgets.forEach(function (row) {\n      return row.forEach(function (widget) {\n        if (widget.getQuery()) {\n          widget.getQuery().getParametersDefs().filter(function (p) {\n            return p.global;\n          }).forEach(function (param) {\n            var defaults = {};\n            defaults[param.name] = _.create(Object.getPrototypeOf(param), param);\n            defaults[param.name].locals = [];\n            globalParams = _.defaults(globalParams, defaults);\n            globalParams[param.name].locals.push(param);\n          });\n        }\n      });\n    });\n    _this.globalParameters = _.values(globalParams);\n  };\n\n  this.onGlobalParametersChange = function () {\n    _this.globalParameters.forEach(function (global) {\n      global.locals.forEach(function (local) {\n        local.value = global.value;\n      });\n    });\n  };\n\n  var renderDashboard = function renderDashboard(dashboard, force) {\n    Title.set(dashboard.name);\n    var promises = [];\n\n    _this.dashboard.widgets.forEach(function (row) {\n      return row.forEach(function (widget) {\n        if (widget.visualization) {\n          var maxAge = force ? 0 : undefined;\n          var queryResult = widget.getQuery().getQueryResult(maxAge);\n          if (!_.isUndefined(queryResult)) {\n            promises.push(queryResult.toPromise());\n          }\n        }\n      });\n    });\n\n    _this.extractGlobalParameters();\n\n    $q.all(promises).then(function (queryResults) {\n      var filters = {};\n      queryResults.forEach(function (queryResult) {\n        var queryFilters = queryResult.getFilters();\n        queryFilters.forEach(function (queryFilter) {\n          var hasQueryStringValue = _.has($location.search(), queryFilter.name);\n\n          if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n            // If dashboard filters not enabled, or no query string value given,\n            // skip filters linking.\n            return;\n          }\n\n          if (hasQueryStringValue) {\n            queryFilter.current = $location.search()[queryFilter.name];\n          }\n\n          if (!_.has(filters, queryFilter.name)) {\n            var filter = _.extend({}, queryFilter);\n            filters[filter.name] = filter;\n            filters[filter.name].originFilters = [];\n          }\n\n          // TODO: merge values.\n          filters[queryFilter.name].originFilters.push(queryFilter);\n        });\n      });\n\n      _this.filters = _.values(filters);\n      _this.filtersOnChange = function (filter) {\n        _.each(filter.originFilters, function (originFilter) {\n          originFilter.current = filter.current;\n        });\n      };\n    });\n  };\n\n  this.loadDashboard = _.throttle(function (force) {\n    _this.dashboard = Dashboard.get({ slug: $routeParams.dashboardSlug }, function (dashboard) {\n      Events.record('view', 'dashboard', dashboard.id);\n      renderDashboard(dashboard, force);\n    }, function () {\n      // error...\n      // try again. we wrap loadDashboard with throttle so it doesn't happen too often.\n      // we might want to consider exponential backoff and also move this as a general\n      // solution in $http/$resource for all AJAX calls.\n      _this.loadDashboard();\n    });\n  }, 1000);\n\n  this.loadDashboard();\n\n  this.autoRefresh = function () {\n    $timeout(function () {\n      _this.loadDashboard(true);\n    }, _this.refreshRate.rate * 1000).then(function () {\n      return _this.autoRefresh();\n    });\n  };\n\n  this.archiveDashboard = function () {\n    var archive = function archive() {\n      Events.record('archive', 'dashboard', _this.dashboard.id);\n      _this.dashboard.$delete(function () {\n        $rootScope.$broadcast('reloadDashboards');\n      });\n    };\n\n    var title = 'Archive Dashboard';\n    var message = 'Are you sure you want to archive the \"' + _this.dashboard.name + '\" dashboard?';\n    var confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  this.showManagePermissionsModal = function () {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: 'api/dashboards/' + _this.dashboard.id + '/acl' }\n      }\n    });\n  };\n\n  this.editDashboard = function () {\n    var previousFiltersState = _this.dashboard.dashboard_filters_enabled;\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: function dashboard() {\n          return _this.dashboard;\n        }\n      }\n    }).result.then(function (dashboard) {\n      var shouldRenderDashboard = !previousFiltersState && dashboard.dashboard_filters_enabled;\n      _this.dashboard = dashboard;\n\n      if (shouldRenderDashboard) {\n        renderDashboard(_this.dashboard);\n      }\n    });\n  };\n\n  this.addWidget = function () {\n    $uibModal.open({\n      component: 'addWidgetDialog',\n      resolve: {\n        dashboard: function dashboard() {\n          return _this.dashboard;\n        }\n      }\n    }).result.then(function () {\n      return _this.extractGlobalParameters();\n    });\n  };\n\n  this.toggleFullscreen = function () {\n    _this.isFullscreen = !_this.isFullscreen;\n    document.querySelector('body').classList.toggle('headless');\n\n    if (_this.isFullscreen) {\n      $location.search('fullscreen', true);\n    } else {\n      $location.search('fullscreen', null);\n    }\n  };\n\n  this.togglePublished = function () {\n    Events.record('toggle_published', 'dashboard', _this.dashboard.id);\n    _this.dashboard.is_draft = !_this.dashboard.is_draft;\n    _this.saveInProgress = true;\n    Dashboard.save({\n      slug: _this.dashboard.id,\n      name: _this.dashboard.name,\n      layout: JSON.stringify(_this.dashboard.layout),\n      is_draft: _this.dashboard.is_draft\n    }, function (dashboard) {\n      _this.saveInProgress = false;\n      _this.dashboard.version = dashboard.version;\n      $rootScope.$broadcast('reloadDashboards');\n    });\n  };\n\n  if (_.has($location.search(), 'fullscreen')) {\n    this.toggleFullscreen();\n  }\n\n  this.openShareForm = function () {\n    $uibModal.open({\n      component: 'shareDashboard',\n      resolve: {\n        dashboard: _this.dashboard\n      }\n    });\n  };\n}\n\nvar ShareDashboardComponent = {\n  template: _shareDashboard2.default,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&'\n  },\n  controller: ['$http', function controller($http) {\n    'ngInject';\n\n    var _this2 = this;\n\n    this.dashboard = this.resolve.dashboard;\n\n    this.toggleSharing = function () {\n      var url = 'api/dashboards/' + _this2.dashboard.id + '/share';\n\n      if (!_this2.dashboard.publicAccessEnabled) {\n        // disable\n        $http.delete(url).success(function () {\n          _this2.dashboard.publicAccessEnabled = false;\n          delete _this2.dashboard.public_url;\n        }).error(function () {\n          _this2.dashboard.publicAccessEnabled = true;\n          // TODO: show message\n        });\n      } else {\n        $http.post(url).success(function (data) {\n          _this2.dashboard.publicAccessEnabled = true;\n          _this2.dashboard.public_url = data.public_url;\n        }).error(function () {\n          _this2.dashboard.publicAccessEnabled = false;\n          // TODO: show message\n        });\n      }\n    };\n  }]\n};\n\nfunction init(ngModule) {\n  ngModule.component('shareDashboard', ShareDashboardComponent);\n  ngModule.component('dashboardPage', {\n    template: _dashboard2.default,\n    controller: DashboardCtrl\n  });\n\n  return {\n    '/dashboard/:dashboardSlug': {\n      template: '<dashboard-page></dashboard-page>',\n      reloadOnSearch: false\n    }\n  };\n}\n\n/***/ }),\n/* 684 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row bg-white p-t-10 p-b-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>{{$ctrl.dashboard.name}}\\n        <span class=\\\"label label-default\\\" ng-if=\\\"$ctrl.dashboard.is_draft && !$ctrl.dashboard.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"$ctrl.dashboard.is_archived\\\" uib-popover=\\\"This dashboard is archived and and won't appear in the dashboards list or search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-if=\\\"!$ctrl.dashboard.is_archived && !public\\\" class=\\\"hidden-print\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button id=\\\"split-button\\\" type=\\\"button\\\"\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\"\\n                      class=\\\"btn\\\" ng-click=\\\"$ctrl.loadDashboard(true)\\\">\\n                <i class=\\\"zmdi zmdi-refresh\\\"></i> {{$ctrl.refreshRate === null ? 'Refresh' : $ctrl.refreshRate.name}}\\n              </button>\\n              <button type=\\\"button\\\" class=\\\"btn\\\" uib-dropdown-toggle\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\">\\n                <span class=\\\"caret\\\"></span>\\n                <span class=\\\"sr-only\\\">Split button!</span>\\n              </button>\\n              <ul class=\\\"dropdown-menu\\\" ng-model=\\\"$ctrl.refreshRate\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"split-button\\\">\\n                <li role=\\\"menuitem\\\" ng-repeat=\\\"refreshRate in $ctrl.refreshRates\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(refreshRate)\\\">{{refreshRate.name}}</a>\\n                </li>\\n                <li role=\\\"menuitem\\\" ng-if=\\\"$ctrl.refreshRate !== null\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(null)\\\">Stop auto refresh</a>\\n                </li>\\n              </ul>\\n            </div>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.isFullscreen, 'btn-primary': $ctrl.isFullscreen}\\\" tooltip=\\\"Enable/Disable Fullscreen display\\\" ng-click=\\\"$ctrl.toggleFullscreen()\\\">\\n              <span class=\\\"zmdi zmdi-fullscreen\\\"></span>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.dashboard.publicAccessEnabled, 'btn-primary': $ctrl.dashboard.publicAccessEnabled}\\\" tooltip=\\\"Enable/Disable Share URL\\\" ng-click=\\\"$ctrl.openShareForm()\\\" ng-if=\\\"$ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled\\\">\\n              <span class=\\\"zmdi zmdi-share\\\"></span>\\n            </button>\\n        </span>\\n            <div class=\\\"btn-group hidden-print\\\" role=\\\"group\\\" ng-show=\\\"$ctrl.dashboard.canEdit()\\\" uib-dropdown ng-if=\\\"!$ctrl.dashboard.is_archived\\\">\\n              <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                <span class=\\\"zmdi zmdi-more\\\"></span>\\n              </button>\\n              <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.editDashboard()\\\">Edit Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.addWidget()\\\">Add Widget</a></li>\\n                <li ng-if=\\\"$ctrl.showPermissionsControl\\\"><a ng-click=\\\"$ctrl.showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Unpublish Dashboard</a></li>\\n                <li ng-if=\\\"$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Publish Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.archiveDashboard()\\\">Archive Dashboard</a></li>\\n              </ul>\\n            </div>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <parameters parameters=\\\"$ctrl.globalParameters\\\" on-change=\\\"$ctrl.onGlobalParametersChange()\\\"></parameters>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\" filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange(filter, $modal)\\\"></filters>\\n  </div>\\n\\n  <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n    <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" on-delete=\\\"$ctrl.extractGlobalParameters()\\\"></dashboard-widget>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 685 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n  <h4 class=\\\"modal-title\\\"><i class=\\\"fa fa-share-alt\\\"></i> Share</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"checkbox\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.publicAccessEnabled\\\" ng-click=\\\"$ctrl.toggleSharing()\\\" ng-disabled=\\\"!$ctrl.dashboard.canEdit()\\\">\\n      Allow public access (using a secret URL).\\n    </label>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.dashboard.publicAccessEnabled\\\">\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" value=\\\"{{$ctrl.dashboard.public_url}}\\\">\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 686 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _redash_icon_small = __webpack_require__(70);\n\nvar _redash_icon_small2 = _interopRequireDefault(_redash_icon_small);\n\nvar _publicDashboardPage = __webpack_require__(687);\n\nvar _publicDashboardPage2 = _interopRequireDefault(_publicDashboardPage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PublicDashboardPage = {\n  template: _publicDashboardPage2.default,\n  bindings: {\n    dashboard: '<'\n  },\n  controller: ['$routeParams', 'Widget', function controller($routeParams, Widget) {\n    'ngInject';\n\n    // embed in params == headless\n\n    this.logoUrl = _redash_icon_small2.default;\n    this.headless = $routeParams.embed;\n    if (this.headless) {\n      document.querySelector('body').classList.add('headless');\n    }\n    this.public = true;\n    this.dashboard.widgets = this.dashboard.widgets.map(function (row) {\n      return row.map(function (widget) {\n        return new Widget(widget);\n      });\n    });\n  }]\n};\n\nfunction init(ngModule) {\n  session.$inject = ['$http', '$route', 'Auth'];\n  loadPublicDashboard.$inject = ['$http', '$route'];\n\n  ngModule.component('publicDashboardPage', PublicDashboardPage);\n\n  function loadPublicDashboard($http, $route) {\n    'ngInject';\n\n    var token = $route.current.params.token;\n    return $http.get('api/dashboards/public/' + token).then(function (response) {\n      return response.data;\n    });\n  }\n\n  function session($http, $route, Auth) {\n    var token = $route.current.params.token;\n    Auth.setApiKey(token);\n    return Auth.loadConfig();\n  }\n\n  ngModule.config(['$routeProvider', function ($routeProvider) {\n    $routeProvider.when('/public/dashboards/:token', {\n      template: '<public-dashboard-page dashboard=\"$resolve.dashboard\"></public-dashboard-page>',\n      reloadOnSearch: false,\n      resolve: {\n        dashboard: loadPublicDashboard,\n        session: session\n      }\n    });\n  }]);\n\n  return [];\n}\n\n/***/ }),\n/* 687 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<!-- simple nav bar -->\\n<nav class=\\\"navbar navbar-inverse navbar-fixed-top\\\" role=\\\"navigation\\\" ng-if=\\\"!$ctrl.headless\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <a class=\\\"navbar-brand\\\" href=\\\"/\\\" target=\\\"_self\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n  </div>\\n</nav>\\n\\n<div class=\\\"container\\\">\\n  <page-header title=\\\"{{$ctrl.dashboard.name}}\\\">\\n  </page-header>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\"></filters>\\n  </div>\\n\\n    <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n      <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" public=\\\"true\\\"></dashboard-widget>\\n    </div>\\n</div>\\n\"\n\n/***/ }),\n/* 688 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _list = __webpack_require__(689);\n\nvar _list2 = _interopRequireDefault(_list);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDataSourcesCtrl.$inject = ['$scope', '$location', 'currentUser', 'Events', 'DataSource'];\n\n\nfunction DataSourcesCtrl($scope, $location, currentUser, Events, DataSource) {\n  Events.record('view', 'page', 'admin/data_sources');\n\n  $scope.dataSources = DataSource.query();\n}\n\nfunction init(ngModule) {\n  ngModule.controller('DataSourcesCtrl', DataSourcesCtrl);\n\n  return {\n    '/data_sources': {\n      template: _list2.default,\n      controller: 'DataSourcesCtrl',\n      title: 'Data Sources'\n    }\n  };\n}\n\n/***/ }),\n/* 689 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"data_sources/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Data Source</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"data_sources/{{dataSource.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dataSource in dataSources\\\"><i class=\\\"fa fa-database\\\"></i> {{dataSource.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 690 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _show = __webpack_require__(691);\n\nvar _show2 = _interopRequireDefault(_show);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDataSourceCtrl.$inject = ['$scope', '$routeParams', '$http', '$location', 'toastr', 'currentUser', 'Events', 'DataSource'];\n\n\nvar logger = (0, _debug2.default)('redash:http');\n\nfunction DataSourceCtrl($scope, $routeParams, $http, $location, toastr, currentUser, Events, DataSource) {\n  Events.record('view', 'page', 'admin/data_source');\n\n  $scope.dataSourceId = $routeParams.dataSourceId;\n\n  if ($scope.dataSourceId === 'new') {\n    $scope.dataSource = new DataSource({ options: {} });\n  } else {\n    $scope.dataSource = DataSource.get({ id: $routeParams.dataSourceId });\n  }\n\n  $scope.$watch('dataSource.id', function (id) {\n    if (id !== $scope.dataSourceId && id !== undefined) {\n      $location.path('/data_sources/' + id).replace();\n    }\n  });\n\n  function deleteDataSource() {\n    Events.record('delete', 'datasource', $scope.dataSource.id);\n\n    $scope.dataSource.$delete(function () {\n      toastr.success('Data source deleted successfully.');\n      $location.path('/data_sources/');\n    }, function (httpResponse) {\n      logger('Failed to delete data source: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n      toastr.error('Failed to delete data source.');\n    });\n  }\n\n  function testConnection(callback) {\n    Events.record('test', 'datasource', $scope.dataSource.id);\n\n    DataSource.test({ id: $scope.dataSource.id }, function (httpResponse) {\n      if (httpResponse.ok) {\n        toastr.success('Success');\n      } else {\n        toastr.error(httpResponse.message, 'Connection Test Failed:', { timeOut: 10000 });\n      }\n      callback();\n    }, function (httpResponse) {\n      logger('Failed to test data source: ', httpResponse.status, httpResponse.statusText, httpResponse);\n      toastr.error('Unknown error occurred while performing connection test. Please try again later.', 'Connection Test Failed:', { timeOut: 10000 });\n      callback();\n    });\n  }\n\n  $scope.actions = [{ name: 'Delete', class: 'btn-danger', callback: deleteDataSource }, {\n    name: 'Test Connection', class: 'btn-default', callback: testConnection, disableWhenDirty: true\n  }];\n}\n\nfunction init(ngModule) {\n  ngModule.controller('DataSourceCtrl', DataSourceCtrl);\n\n  return {\n    '/data_sources/:dataSourceId': {\n      template: _show2.default,\n      controller: 'DataSourceCtrl',\n      title: 'Datasources'\n    }\n  };\n}\n\n/***/ }),\n/* 691 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-8\\\">\\n      <dynamic-form target=\\\"dataSource\\\" type=\\\"data_sources\\\" actions=\\\"actions\\\">\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 692 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _list = __webpack_require__(693);\n\nvar _list2 = _interopRequireDefault(_list);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDestinationsCtrl.$inject = ['$scope', '$location', 'toastr', 'currentUser', 'Events', 'Destination'];\n\n\nfunction DestinationsCtrl($scope, $location, toastr, currentUser, Events, Destination) {\n  Events.record('view', 'page', 'admin/destinations');\n\n  $scope.destinations = Destination.query();\n}\n\nfunction init(ngModule) {\n  ngModule.controller('DestinationsCtrl', DestinationsCtrl);\n\n  return {\n    '/destinations': {\n      template: _list2.default,\n      controller: 'DestinationsCtrl',\n      title: 'Destinations'\n    }\n  };\n}\n\n/***/ }),\n/* 693 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"destinations/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert Destination</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"destinations/{{destination.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"destination in destinations\\\"><i class=\\\"fa {{destination.icon}}\\\"></i> {{destination.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 694 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _debug = __webpack_require__(24);\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _show = __webpack_require__(695);\n\nvar _show2 = _interopRequireDefault(_show);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nDestinationCtrl.$inject = ['$scope', '$routeParams', '$http', '$location', 'toastr', 'currentUser', 'Events', 'Destination'];\n\n\nvar logger = (0, _debug2.default)('redash:http');\n\nfunction DestinationCtrl($scope, $routeParams, $http, $location, toastr, currentUser, Events, Destination) {\n  Events.record('view', 'page', 'admin/destination');\n\n  $scope.destinationId = $routeParams.destinationId;\n\n  if ($scope.destinationId === 'new') {\n    $scope.destination = new Destination({ options: {} });\n  } else {\n    $scope.destination = Destination.get({ id: $routeParams.destinationId });\n  }\n\n  $scope.$watch('destination.id', function (id) {\n    if (id !== $scope.destinationId && id !== undefined) {\n      $location.path('/destinations/' + id).replace();\n    }\n  });\n\n  $scope.delete = function () {\n    Events.record('delete', 'destination', $scope.destination.id);\n\n    $scope.destination.$delete(function () {\n      toastr.success('Destination deleted successfully.');\n      $location.path('/destinations/');\n    }, function (httpResponse) {\n      logger('Failed to delete destination: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n      toastr.error('Failed to delete destination.');\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('DestinationCtrl', DestinationCtrl);\n\n  return {\n    '/destinations/:destinationId': {\n      template: _show2.default,\n      controller: 'DestinationCtrl',\n      title: 'Destinations'\n    }\n  };\n}\n\n/***/ }),\n/* 695 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <dynamic-form target=\\\"destination\\\" type=\\\"destinations\\\">\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"destination.id\\\" ng-click=\\\"delete()\\\">Delete</button>\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 696 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _dataSources = __webpack_require__(697);\n\nvar _dataSources2 = _interopRequireDefault(_dataSources);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nGroupDataSourcesCtrl.$inject = ['$scope', '$routeParams', '$http', 'Events', 'Group', 'DataSource'];\n\n\nfunction GroupDataSourcesCtrl($scope, $routeParams, $http, Events, Group, DataSource) {\n  Events.record('view', 'group_data_sources', $scope.groupId);\n  $scope.group = Group.get({ id: $routeParams.groupId });\n  $scope.dataSources = Group.dataSources({ id: $routeParams.groupId });\n  $scope.newDataSource = {};\n\n  $scope.findDataSource = function () {\n    if ($scope.foundDataSources === undefined) {\n      DataSource.query(function (dataSources) {\n        var existingIds = $scope.dataSources.map(function (m) {\n          return m.id;\n        });\n        $scope.foundDataSources = dataSources.filter(function (ds) {\n          return !(0, _underscore.contains)(existingIds, ds.id);\n        });\n      });\n    }\n  };\n\n  $scope.addDataSource = function (dataSource) {\n    // Clear selection, to clear up the input control.\n    $scope.newDataSource.selected = undefined;\n\n    $http.post('api/groups/' + $routeParams.groupId + '/data_sources', { data_source_id: dataSource.id }).success(function () {\n      dataSource.view_only = false;\n      $scope.dataSources.unshift(dataSource);\n\n      if ($scope.foundDataSources) {\n        $scope.foundDataSources = $scope.foundDataSources.filter(function (ds) {\n          return ds !== dataSource;\n        });\n      }\n    });\n  };\n\n  $scope.changePermission = function (dataSource, viewOnly) {\n    $http.post('api/groups/' + $routeParams.groupId + '/data_sources/' + dataSource.id, { view_only: viewOnly }).success(function () {\n      dataSource.view_only = viewOnly;\n    });\n  };\n\n  $scope.removeDataSource = function (dataSource) {\n    $http.delete('api/groups/' + $routeParams.groupId + '/data_sources/' + dataSource.id).success(function () {\n      $scope.dataSources = $scope.dataSources.filter(function (ds) {\n        return dataSource !== ds;\n      });\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('GroupDataSourcesCtrl', GroupDataSourcesCtrl);\n\n  return {\n    '/groups/:groupId/data_sources': {\n      template: _dataSources2.default,\n      controller: 'GroupDataSourcesCtrl'\n    }\n  };\n}\n\n/***/ }),\n/* 697 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n    <div class=\\\"col-lg-8\\\">\\n      <ui-select ng-model=\\\"newDataSource.selected\\\" on-select=\\\"addDataSource($item)\\\">\\n        <ui-select-match placeholder=\\\"Add Data Source\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"dataSource in foundDataSources | filter:$select.search\\\"\\n                           refresh=\\\"findDataSource($select.search)\\\"\\n                           refresh-delay=\\\"0\\\">\\n          <div>\\n            {{dataSource.name}}\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dataSource in dataSources\\\">\\n          <td> {{dataSource.name}}</td>\\n          <td width=\\\"280px\\\" class=\\\"text-right\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-default dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"dataSource.view_only\\\">\\n                View Only <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-success dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"!dataSource.view_only\\\">\\n                Full Access <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\" uib-dropdown-menu>\\n                <li><a ng-click=\\\"changePermission(dataSource, false)\\\"><small ng-if=\\\"!dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> Full Access<br/></a></li>\\n                <li><a ng-click=\\\"changePermission(dataSource, true)\\\"><small ng-if=\\\"dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> View Only</a></li>\\n              </ul>\\n            </div>\\n\\n            <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeDataSource(dataSource)\\\">Remove</button>\\n          </td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 698 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _pagination = __webpack_require__(26);\n\nvar _list = __webpack_require__(699);\n\nvar _list2 = _interopRequireDefault(_list);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nGroupsCtrl.$inject = ['$scope', '$uibModal', 'currentUser', 'Events', 'Group'];\n\n\nfunction GroupsCtrl($scope, $uibModal, currentUser, Events, Group) {\n  Events.record('view', 'page', 'groups');\n  $scope.currentUser = currentUser;\n  $scope.groups = new _pagination.Paginator([], { itemsPerPage: 20 });\n  Group.query(function (groups) {\n    $scope.groups.updateRows(groups);\n  });\n\n  $scope.newGroup = function () {\n    $uibModal.open({\n      component: 'editGroupDialog',\n      size: 'sm',\n      resolve: {\n        group: function group() {\n          return new Group({});\n        }\n      }\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('GroupsCtrl', GroupsCtrl);\n\n  return {\n    '/groups': {\n      template: _list2.default,\n      controller: 'GroupsCtrl',\n      title: 'Groups'\n    }\n  };\n}\n\n/***/ }),\n/* 699 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"currentUser.hasPermission('admin')\\\">\\n        <a ng-click=\\\"newGroup()\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Group</a>\\n      </p>\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in groups.getPageRows()\\\">\\n            <td>\\n              <a href=\\\"groups/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"groups\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 700 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _show = __webpack_require__(701);\n\nvar _show2 = _interopRequireDefault(_show);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nGroupCtrl.$inject = ['$scope', '$routeParams', '$http', 'currentUser', 'Events', 'Group', 'User'];\n\n\nfunction GroupCtrl($scope, $routeParams, $http, currentUser, Events, Group, User) {\n  Events.record('view', 'group', $scope.groupId);\n\n  $scope.currentUser = currentUser;\n  $scope.group = Group.get({ id: $routeParams.groupId });\n  $scope.members = Group.members({ id: $routeParams.groupId });\n  $scope.newMember = {};\n\n  $scope.findUser = function (search) {\n    if (search === '') {\n      return;\n    }\n\n    if ($scope.foundUsers === undefined) {\n      User.query(function (users) {\n        var existingIds = $scope.members.map(function (m) {\n          return m.id;\n        });\n        users.forEach(function (user) {\n          user.alreadyMember = (0, _underscore.contains)(existingIds, user.id);\n        });\n        $scope.foundUsers = users;\n      });\n    }\n  };\n\n  $scope.addMember = function (user) {\n    // Clear selection, to clear up the input control.\n    $scope.newMember.selected = undefined;\n\n    $http.post('api/groups/' + $routeParams.groupId + '/members', { user_id: user.id }).success(function () {\n      $scope.members.unshift(user);\n      user.alreadyMember = true;\n    });\n  };\n\n  $scope.removeMember = function (member) {\n    $http.delete('api/groups/' + $routeParams.groupId + '/members/' + member.id).success(function () {\n      $scope.members = $scope.members.filter(function (m) {\n        return m !== member;\n      });\n\n      if ($scope.foundUsers) {\n        $scope.foundUsers.forEach(function (user) {\n          if (user.id === member.id) {\n            user.alreadyMember = false;\n          }\n        });\n      }\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('GroupCtrl', GroupCtrl);\n  return {\n    '/groups/:groupId': {\n      template: _show2.default,\n      controller: 'GroupCtrl'\n    }\n  };\n}\n\n/***/ }),\n/* 701 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" ng-if=\\\"currentUser.isAdmin\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n\\n    <div class=\\\"col-lg-8\\\" ng-if=\\\"currentUser.isAdmin\\\">\\n      <ui-select ng-model=\\\"newMember.selected\\\" on-select=\\\"addMember($item)\\\">\\n        <ui-select-match placeholder=\\\"Add New Member\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"user in foundUsers | filter:$select.search\\\"\\n                           refresh=\\\"findUser($select.search)\\\"\\n                           refresh-delay=\\\"0\\\"\\n                           ui-disable-choice=\\\"user.alreadyMember\\\">\\n          <div>\\n            <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n            <small ng-if=\\\"user.alreadyMember\\\">(already member in this group)</small>\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\" ng-show=\\\"members\\\">\\n        <tbody>\\n        <tr ng-repeat=\\\"member in members\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{member.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{member.name}} <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeMember(member)\\\" ng-if=\\\"currentUser.isAdmin\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n\\n      <div ng-hide=\\\"members.length\\\">\\n        No members.\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 702 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _home = __webpack_require__(703);\n\nvar _home2 = _interopRequireDefault(_home);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nHomeCtrl.$inject = ['$scope', '$uibModal', 'currentUser', 'Events', 'Dashboard', 'Query'];\n\n\nfunction HomeCtrl($scope, $uibModal, currentUser, Events, Dashboard, Query) {\n  Events.record('view', 'page', 'personal_homepage');\n\n  // todo: maybe this should come from some serivce as we have this logic elsewhere.\n  this.canCreateQuery = currentUser.hasPermission('create_query');\n  this.canCreateDashboard = currentUser.hasPermission('create_dashboard');\n  this.canCreateAlert = currentUser.hasPermission('list_alerts');\n\n  this.recentQueries = Query.recent();\n  this.recentDashboards = Dashboard.recent();\n\n  this.newDashboard = function () {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: function dashboard() {\n          return { name: null, layout: null };\n        }\n      }\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.component('homePage', {\n    template: _home2.default,\n    controller: HomeCtrl\n  });\n\n  return {\n    '/': {\n      template: '<home-page></home-page>',\n      title: 'Redash'\n    }\n  };\n}\n\n/***/ }),\n/* 703 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"tile m-t-10 m-b-5\\\" ng-if=\\\"$ctrl.canCreateQuery || $ctrl.canCreateDashboard || $ctrl.canCreateAlert\\\">\\n    <div class=\\\"t-body p-5\\\">\\n      <a href=\\\"queries/new\\\" ng-show=\\\"$ctrl.canCreateQuery\\\" class=\\\"btn btn-default\\\">New Query</a>\\n      <button ng-show=\\\"$ctrl.canCreateDashboard\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard\\n      </button>\\n      <a href=\\\"alerts/new\\\" ng-show=\\\"$ctrl.canCreateAlert\\\" class=\\\"btn btn-default\\\">New Alert</a>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-body tb-padding\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-md-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Recent Dashboards</p>\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"dashboard/{{dashboard.slug}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dashboard in $ctrl.recentDashboards\\\">\\n                {{dashboard.name}} <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n              </a>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"col-md-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Recent Queries</p>\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"queries/{{query.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"query in $ctrl.recentQueries\\\">{{query.name}} <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></a>\\n          </div>\\n        </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\"\n\n/***/ }),\n/* 704 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _pagination = __webpack_require__(26);\n\nvar _queriesList = __webpack_require__(705);\n\nvar _queriesList2 = _interopRequireDefault(_queriesList);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar QueriesListCtrl = function QueriesListCtrl($location, Title, Query) {\n  _classCallCheck(this, QueriesListCtrl);\n\n  var page = parseInt($location.search().page || 1, 10);\n\n  this.defaultOptions = {};\n\n  var self = this;\n\n  switch ($location.path()) {\n    case '/queries':\n      Title.set('Queries');\n      this.resource = Query.query;\n      break;\n    case '/queries/my':\n      Title.set('My Queries');\n      this.resource = Query.myQueries;\n      break;\n    default:\n      break;\n  }\n\n  function queriesFetcher(requestedPage, itemsPerPage, paginator) {\n    $location.search('page', requestedPage);\n\n    var request = _extends({}, self.defaultOptions, { page: requestedPage, page_size: itemsPerPage });\n\n    return self.resource(request).$promise.then(function (data) {\n      var rows = data.results.map(function (query) {\n        query.created_at = (0, _moment2.default)(query.created_at);\n        query.retrieved_at = (0, _moment2.default)(query.retrieved_at);\n        return query;\n      });\n\n      paginator.updateRows(rows, data.count);\n    });\n  }\n\n  this.paginator = new _pagination.LivePaginator(queriesFetcher, { page: page });\n\n  this.tabs = [{ name: 'My Queries', path: 'queries/my' }, { path: 'queries', name: 'All Queries', isActive: function isActive(path) {\n      return path === '/queries';\n    } }];\n};\n\nQueriesListCtrl.$inject = ['$location', 'Title', 'Query'];\nfunction init(ngModule) {\n  ngModule.component('pageQueriesList', {\n    template: _queriesList2.default,\n    controller: QueriesListCtrl\n  });\n\n  var route = {\n    template: '<page-queries-list></page-queries-list>',\n    reloadOnSearch: false\n  };\n\n  return {\n    '/queries': route,\n    '/queries/my': route\n  };\n}\n\n/***/ }),\n/* 705 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"Queries\\\"></page-header>\\n  <tab-nav tabs=\\\"$ctrl.tabs\\\"></tab-nav>\\n\\n  <div class=\\\"bg-white\\\">\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Created At</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n        <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n        <td>{{query.user.name}}</td>\\n        <td>{{query.created_at | dateTime}}</td>\\n        <td>{{query.runtime | durationHumanize}}</td>\\n        <td>{{query.retrieved_at | dateTime}}</td>\\n        <td>{{query.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n  </div>\\n</div>\\n\"\n\n/***/ }),\n/* 706 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _underscore = __webpack_require__(5);\n\nvar _pagination = __webpack_require__(26);\n\nvar _queriesSearchResultsPage = __webpack_require__(707);\n\nvar _queriesSearchResultsPage2 = _interopRequireDefault(_queriesSearchResultsPage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nQuerySearchCtrl.$inject = ['$location', '$filter', 'currentUser', 'Events', 'Query'];\n\n\nfunction QuerySearchCtrl($location, $filter, currentUser, Events, Query) {\n  var _this = this;\n\n  this.term = $location.search().q;\n  this.paginator = new _pagination.Paginator([], { itemsPerPage: 20 });\n\n  Query.search({ q: this.term, include_drafts: true }, function (results) {\n    var queries = results.map(function (query) {\n      query.created_at = (0, _moment2.default)(query.created_at);\n      return query;\n    });\n\n    _this.paginator.updateRows(queries);\n  });\n\n  this.search = function () {\n    if (!(0, _underscore.isString)(_this.term) || _this.term.trim() === '') {\n      _this.paginator.updateRows([]);\n    } else {\n      $location.search({ q: _this.term });\n    }\n  };\n\n  Events.record('search', 'query', '', { term: this.term });\n}\n\nfunction init(ngModule) {\n  ngModule.component('queriesSearchResultsPage', {\n    template: _queriesSearchResultsPage2.default,\n    controller: QuerySearchCtrl\n  });\n\n  return {\n    '/queries/search': {\n      template: '<queries-search-results-page></queries-search-results-page>',\n      reloadOnSearch: true,\n      title: 'Queries Search'\n    }\n  };\n}\n\n/***/ }),\n/* 707 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"container\\\">\\n    <div class=\\\"bg-white p-5 m-t-10 m-b-10\\\">\\n      <form class=\\\"form-inline\\\" role=\\\"form\\\" ng-submit=\\\"$ctrl.search()\\\">\\n        <div class=\\\"input-group\\\">\\n            <input class=\\\"form-control input-sm\\\" placeholder=\\\"Search...\\\" ng-model=\\\"$ctrl.term\\\" autofocus>\\n            <span class=\\\"input-group-btn\\\">\\n              <button class=\\\"btn btn-primary\\\" type=\\\"submit\\\">\\n                <span class=\\\"zmdi zmdi-search\\\"></span>\\n              </button>\\n            </span>\\n        </div>\\n      </form>\\n    </div>\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Created By</th>\\n            <th>Created At</th>\\n            <th>Update Schedule</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n            <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n            <td>{{query.user.name}}</td>\\n            <td>{{query.created_at | dateTime}}</td>\\n            <td>{{query.schedule | scheduleHumanize}}</td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n</div>\\n\"\n\n/***/ }),\n/* 708 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _query = __webpack_require__(291);\n\nvar _query2 = _interopRequireDefault(_query);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nQuerySourceCtrl.$inject = ['Events', 'toastr', '$controller', '$scope', '$location', '$http', '$q', 'AlertDialog', 'currentUser', 'Query', 'Visualization', 'KeyboardShortcuts'];\n\n\nfunction QuerySourceCtrl(Events, toastr, $controller, $scope, $location, $http, $q, AlertDialog, currentUser, Query, Visualization, KeyboardShortcuts) {\n  // extends QueryViewCtrl\n  $controller('QueryViewCtrl', { $scope: $scope });\n  // TODO:\n  // This doesn't get inherited. Setting it on this didn't work either (which is weird).\n  // Obviously it shouldn't be repeated, but we got bigger fish to fry.\n  var DEFAULT_TAB = 'table';\n\n  Events.record('view_source', 'query', $scope.query.id);\n\n  var isNewQuery = !$scope.query.id;\n  var queryText = $scope.query.query;\n  var saveQuery = $scope.saveQuery;\n\n  $scope.sourceMode = true;\n  $scope.isDirty = false;\n  $scope.base_url = $location.protocol() + '://' + $location.host() + ':' + $location.port();\n\n  $scope.newVisualization = undefined;\n\n  // @override\n  Object.defineProperty($scope, 'showDataset', {\n    get: function get() {\n      return $scope.queryResult && $scope.queryResult.getStatus() === 'done';\n    }\n  });\n\n  var shortcuts = {\n    'mod+s': function save() {\n      if ($scope.canEdit) {\n        $scope.saveQuery();\n      }\n    }\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', function () {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  $scope.canForkQuery = function () {\n    return currentUser.hasPermission('edit_query') && !$scope.dataSource.view_only;\n  };\n\n  // @override\n  $scope.saveQuery = function (options, data) {\n    var savePromise = saveQuery(options, data);\n\n    savePromise.then(function (savedQuery) {\n      queryText = savedQuery.query;\n      $scope.isDirty = $scope.query.query !== queryText;\n      // update to latest version number\n      $scope.query.version = savedQuery.version;\n\n      if (isNewQuery) {\n        // redirect to new created query (keep hash)\n        $location.path(savedQuery.getSourceLink());\n      }\n    });\n\n    return savePromise;\n  };\n\n  $scope.formatQuery = function () {\n    Query.format($scope.dataSource.syntax, $scope.query.query).then(function (query) {\n      $scope.query.query = query;\n    }).catch(function (error) {\n      return toastr.error(error);\n    });\n  };\n\n  $scope.duplicateQuery = function () {\n    Events.record('fork', 'query', $scope.query.id);\n\n    Query.fork({ id: $scope.query.id }, function (newQuery) {\n      $location.url(newQuery.getSourceLink()).replace();\n    });\n  };\n\n  $scope.deleteVisualization = function ($e, vis) {\n    $e.preventDefault();\n\n    var title = undefined;\n    var message = 'Are you sure you want to delete ' + vis.name + ' ?';\n    var confirm = { class: 'btn-danger', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(function () {\n      Events.record('delete', 'visualization', vis.id);\n\n      Visualization.delete({ id: vis.id }, function () {\n        if ($scope.selectedTab === String(vis.id)) {\n          $scope.selectedTab = DEFAULT_TAB;\n          $location.hash($scope.selectedTab);\n        }\n        $scope.query.visualizations = $scope.query.visualizations.filter(function (v) {\n          return vis.id !== v.id;\n        });\n      }, function () {\n        toastr.error(\"Error deleting visualization. Maybe it's used in a dashboard?\");\n      });\n    });\n  };\n\n  $scope.$watch('query.query', function (newQueryText) {\n    $scope.isDirty = newQueryText !== queryText;\n  });\n}\n\nfunction init(ngModule) {\n  ngModule.controller('QuerySourceCtrl', QuerySourceCtrl);\n\n  return {\n    '/queries/new': {\n      template: _query2.default,\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: ['Query', function newQuery(Query) {\n          'ngInject';\n\n          return Query.newQuery();\n        }],\n        dataSources: ['DataSource', function dataSources(DataSource) {\n          'ngInject';\n\n          return DataSource.query().$promise;\n        }]\n      }\n    },\n    '/queries/:queryId/source': {\n      template: _query2.default,\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: ['Query', '$route', function query(Query, $route) {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        }]\n      }\n    }\n  };\n}\n\n/***/ }),\n/* 709 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _query = __webpack_require__(291);\n\nvar _query2 = _interopRequireDefault(_query);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nQueryViewCtrl.$inject = ['$scope', 'Events', '$route', '$routeParams', '$location', '$window', '$q', 'KeyboardShortcuts', 'Title', 'AlertDialog', 'Notifications', 'clientConfig', 'toastr', '$uibModal', 'currentUser', 'Query', 'DataSource'];\n\n\nfunction QueryViewCtrl($scope, Events, $route, $routeParams, $location, $window, $q, KeyboardShortcuts, Title, AlertDialog, Notifications, clientConfig, toastr, $uibModal, currentUser, Query, DataSource) {\n  var DEFAULT_TAB = 'table';\n\n  function getQueryResult(maxAge) {\n    if (maxAge === undefined) {\n      maxAge = $location.search().maxAge;\n    }\n\n    if (maxAge === undefined) {\n      maxAge = -1;\n    }\n\n    $scope.showLog = false;\n    $scope.queryResult = $scope.query.getQueryResult(maxAge);\n  }\n\n  function getDataSourceId() {\n    // Try to get the query's data source id\n    var dataSourceId = $scope.query.data_source_id;\n\n    // If there is no source yet, then parse what we have in localStorage\n    //   e.g. `null` -> `NaN`, malformed data -> `NaN`, \"1\" -> 1\n    if (dataSourceId === undefined) {\n      dataSourceId = parseInt(localStorage.lastSelectedDataSourceId, 10);\n    }\n\n    // If we had an invalid value in localStorage (e.g. nothing, deleted source),\n    // then use the first data source\n    var isValidDataSourceId = !isNaN(dataSourceId) && (0, _underscore.some)($scope.dataSources, function (ds) {\n      return ds.id === dataSourceId;\n    });\n\n    if (!isValidDataSourceId) {\n      dataSourceId = $scope.dataSources[0].id;\n    }\n\n    // Return our data source id\n    return dataSourceId;\n  }\n\n  function toggleSchemaBrowser(hasSchema) {\n    $scope.hasSchema = hasSchema;\n    $scope.editorSize = hasSchema ? 'col-md-9' : 'col-md-12';\n  }\n\n  function getSchema() {\n    var refresh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n    DataSource.getSchema({ id: $scope.query.data_source_id, refresh: refresh }, function (data) {\n      var hasPrevSchema = refresh ? $scope.schema && $scope.schema.length > 0 : false;\n      var hasSchema = data && data.length > 0;\n\n      if (hasSchema) {\n        $scope.schema = data;\n        data.forEach(function (table) {\n          table.collapsed = true;\n        });\n      } else if (hasPrevSchema) {\n        toastr.error('Schema refresh failed. Please try again later.');\n      }\n\n      toggleSchemaBrowser(hasSchema || hasPrevSchema);\n    });\n  }\n\n  function updateSchema() {\n    toggleSchemaBrowser(false);\n    getSchema();\n  }\n\n  $scope.refreshSchema = function () {\n    return getSchema(true);\n  };\n\n  function updateDataSources(dataSources) {\n    // Filter out data sources the user can't query (or used by current query):\n    $scope.dataSources = dataSources.filter(function (dataSource) {\n      return !dataSource.view_only || dataSource.id === $scope.query.data_source_id;\n    });\n\n    if ($scope.dataSources.length === 0) {\n      $scope.noDataSources = true;\n      return;\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.query.data_source_id = getDataSourceId();\n    }\n\n    $scope.dataSource = (0, _underscore.find)(dataSources, function (ds) {\n      return ds.id === $scope.query.data_source_id;\n    });\n\n    $scope.canCreateQuery = (0, _underscore.any)(dataSources, function (ds) {\n      return !ds.view_only;\n    });\n\n    updateSchema();\n  }\n\n  $scope.executeQuery = function () {\n    if (!$scope.canExecuteQuery()) {\n      return;\n    }\n\n    if (!$scope.query.query) {\n      return;\n    }\n\n    getQueryResult(0);\n    $scope.lockButton(true);\n    $scope.cancelling = false;\n    Events.record('execute', 'query', $scope.query.id);\n\n    Notifications.getPermissions();\n  };\n\n  $scope.currentUser = currentUser;\n  $scope.dataSource = {};\n  $scope.query = $route.current.locals.query;\n  $scope.showPermissionsControl = clientConfig.showPermissionsControl;\n\n  var shortcuts = {\n    'mod+enter': $scope.executeQuery\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', function () {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  Events.record('view', 'query', $scope.query.id);\n  if ($scope.query.hasResult() || $scope.query.paramsRequired()) {\n    getQueryResult();\n  }\n  $scope.queryExecuting = false;\n\n  $scope.isQueryOwner = currentUser.id === $scope.query.user.id || currentUser.hasPermission('admin');\n  $scope.canEdit = currentUser.canEdit($scope.query) || $scope.query.can_edit;\n  $scope.canViewSource = currentUser.hasPermission('view_source');\n\n  $scope.canExecuteQuery = function () {\n    return currentUser.hasPermission('execute_query') && !$scope.dataSource.view_only;\n  };\n\n  $scope.canScheduleQuery = currentUser.hasPermission('schedule_query');\n\n  if ($route.current.locals.dataSources) {\n    $scope.dataSources = $route.current.locals.dataSources;\n    updateDataSources($route.current.locals.dataSources);\n  } else {\n    $scope.dataSources = DataSource.query(updateDataSources);\n  }\n\n  // in view mode, latest dataset is always visible\n  // source mode changes this behavior\n  $scope.showDataset = true;\n  $scope.showLog = false;\n\n  $scope.lockButton = function (lock) {\n    $scope.queryExecuting = lock;\n  };\n\n  $scope.showApiKey = function () {\n    $uibModal.open({\n      component: 'apiKeyDialog',\n      resolve: {\n        query: $scope.query\n      }\n    });\n  };\n\n  $scope.saveQuery = function (customOptions, data) {\n    var request = data;\n\n    if (request) {\n      // Don't save new query with partial data\n      if ($scope.query.isNew()) {\n        return $q.reject();\n      }\n      request.id = $scope.query.id;\n      request.version = $scope.query.version;\n    } else {\n      request = (0, _underscore.pick)($scope.query, ['schedule', 'query', 'id', 'description', 'name', 'data_source_id', 'options', 'latest_query_data_id', 'version', 'is_draft']);\n    }\n\n    var options = _extends({}, {\n      successMessage: 'Query saved',\n      errorMessage: 'Query could not be saved'\n    }, customOptions);\n\n    return Query.save(request, function (updatedQuery) {\n      toastr.success(options.successMessage);\n      $scope.query.version = updatedQuery.version;\n    }, function (error) {\n      if (error.status === 409) {\n        toastr.error('It seems like the query has been modified by another user. ' + 'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n      } else {\n        toastr.error(options.errorMessage);\n      }\n    }).$promise;\n  };\n\n  $scope.togglePublished = function () {\n    Events.record('toggle_published', 'query', $scope.query.id);\n    $scope.query.is_draft = !$scope.query.is_draft;\n    $scope.saveQuery(undefined, { is_draft: $scope.query.is_draft });\n  };\n\n  $scope.saveDescription = function () {\n    Events.record('edit_description', 'query', $scope.query.id);\n    $scope.saveQuery(undefined, { description: $scope.query.description });\n  };\n\n  $scope.saveName = function () {\n    Events.record('edit_name', 'query', $scope.query.id);\n\n    if ($scope.query.is_draft && clientConfig.autoPublishNamedQueries && $scope.query.name !== 'New Query') {\n      $scope.query.is_draft = false;\n    }\n\n    $scope.saveQuery(undefined, { name: $scope.query.name, is_draft: $scope.query.is_draft });\n  };\n\n  $scope.cancelExecution = function () {\n    $scope.cancelling = true;\n    $scope.queryResult.cancelExecution();\n    Events.record('cancel_execute', 'query', $scope.query.id);\n  };\n\n  $scope.archiveQuery = function () {\n    function archive() {\n      Query.delete({ id: $scope.query.id }, function () {\n        $scope.query.is_archived = true;\n        $scope.query.schedule = null;\n      }, function () {\n        toastr.error('Query could not be archived.');\n      });\n    }\n\n    var title = 'Archive Query';\n    var message = 'Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.';\n    var confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  $scope.updateDataSource = function () {\n    Events.record('update_data_source', 'query', $scope.query.id);\n    localStorage.lastSelectedDataSourceId = $scope.query.data_source_id;\n\n    $scope.query.latest_query_data = null;\n    $scope.query.latest_query_data_id = null;\n\n    if ($scope.query.id) {\n      Query.save({\n        id: $scope.query.id,\n        data_source_id: $scope.query.data_source_id,\n        latest_query_data_id: null\n      });\n    }\n\n    updateSchema();\n    $scope.dataSource = (0, _underscore.find)($scope.dataSources, function (ds) {\n      return ds.id === $scope.query.data_source_id;\n    });\n    $scope.executeQuery();\n  };\n\n  $scope.setVisualizationTab = function (visualization) {\n    $scope.selectedTab = visualization.id;\n    $location.hash(visualization.id);\n  };\n\n  $scope.$watch('query.name', function () {\n    Title.set($scope.query.name);\n  });\n\n  $scope.$watch('queryResult && queryResult.getData()', function (data) {\n    if (!data) {\n      return;\n    }\n\n    $scope.filters = $scope.queryResult.getFilters();\n  });\n\n  $scope.$watch('queryResult && queryResult.getStatus()', function (status) {\n    if (!status) {\n      return;\n    }\n\n    if (status === 'done') {\n      $scope.query.latest_query_data_id = $scope.queryResult.getId();\n      $scope.query.queryResult = $scope.queryResult;\n\n      Notifications.showNotification('Redash', $scope.query.name + ' updated.');\n    } else if (status === 'failed') {\n      Notifications.showNotification('Redash', $scope.query.name + ' failed to run: ' + $scope.queryResult.getError());\n    }\n\n    if (status === 'done' || status === 'failed') {\n      $scope.lockButton(false);\n    }\n\n    if ($scope.queryResult.getLog() != null) {\n      $scope.showLog = true;\n    }\n  });\n\n  $scope.openVisualizationEditor = function (visualization) {\n    function openModal() {\n      $uibModal.open({\n        windowClass: 'modal-xl',\n        component: 'editVisualizationDialog',\n        resolve: {\n          query: $scope.query,\n          visualization: visualization,\n          queryResult: $scope.queryResult,\n          onNewSuccess: function onNewSuccess() {\n            return $scope.setVisualizationTab;\n          }\n        }\n      });\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.saveQuery().then(function (query) {\n        // Because we have a path change, we need to \"signal\" the next page to\n        // open the visualization editor.\n        $location.path(query.getSourceLink()).hash('add');\n      });\n    } else {\n      openModal();\n    }\n  };\n\n  if ($location.hash() === 'add') {\n    $location.hash(null);\n    $scope.openVisualizationEditor();\n  }\n\n  $scope.openScheduleForm = function () {\n    if (!$scope.canEdit || !$scope.canScheduleQuery) {\n      return;\n    }\n\n    $uibModal.open({\n      component: 'scheduleDialog',\n      size: 'sm',\n      resolve: {\n        query: $scope.query,\n        saveQuery: function saveQuery() {\n          return $scope.saveQuery;\n        }\n      }\n    });\n  };\n\n  $scope.showEmbedDialog = function (query, visualization) {\n    $uibModal.open({\n      component: 'embedCodeDialog',\n      resolve: {\n        query: query,\n        visualization: visualization\n      }\n    });\n  };\n\n  $scope.$watch(function () {\n    return $location.hash();\n  }, function (hash) {\n    $scope.selectedTab = hash || DEFAULT_TAB;\n  });\n\n  $scope.showManagePermissionsModal = function () {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: 'api/queries/' + $routeParams.queryId + '/acl' }\n      }\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('QueryViewCtrl', QueryViewCtrl);\n\n  return {\n    '/queries/:queryId': {\n      template: _query2.default,\n      controller: 'QueryViewCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: ['Query', '$route', function query(Query, $route) {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        }]\n      }\n    }\n  };\n}\n\n/***/ }),\n/* 710 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\n__webpack_require__(711);\n\nvar _edit = __webpack_require__(712);\n\nvar _edit2 = _interopRequireDefault(_edit);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nSnippetCtrl.$inject = ['$routeParams', '$http', '$location', 'toastr', 'currentUser', 'Events', 'QuerySnippet'];\n\n\nfunction SnippetCtrl($routeParams, $http, $location, toastr, currentUser, Events, QuerySnippet) {\n  var _this = this;\n\n  this.snippetId = $routeParams.snippetId;\n  Events.record('view', 'query_snippet', this.snippetId);\n\n  this.editorOptions = {\n    mode: 'snippets',\n    advanced: {\n      behavioursEnabled: true,\n      enableSnippets: false,\n      autoScrollEditorIntoView: true\n    },\n    onLoad: function onLoad(editor) {\n      editor.$blockScrolling = Infinity;\n      editor.getSession().setUseWrapMode(true);\n      editor.setShowPrintMargin(false);\n    }\n  };\n\n  this.saveChanges = function () {\n    _this.snippet.$save(function (snippet) {\n      toastr.success('Saved.');\n      if (_this.snippetId === 'new') {\n        $location.path('/query_snippets/' + snippet.id).replace();\n      }\n    }, function () {\n      toastr.error('Failed saving snippet.');\n    });\n  };\n\n  this.delete = function () {\n    _this.snippet.$delete(function () {\n      $location.path('/query_snippets');\n      toastr.sucess('Query snippet deleted.');\n    }, function () {\n      toastr.error('Failed deleting query snippet.');\n    });\n  };\n\n  if (this.snippetId === 'new') {\n    this.snippet = new QuerySnippet({ description: '' });\n    this.canEdit = true;\n  } else {\n    this.snippet = QuerySnippet.get({ id: this.snippetId }, function (snippet) {\n      _this.canEdit = currentUser.canEdit(snippet);\n    });\n  }\n}\n\nfunction init(ngModule) {\n  ngModule.component('snippetPage', {\n    template: _edit2.default,\n    controller: SnippetCtrl\n  });\n\n  return {\n    '/query_snippets/:snippetId': {\n      template: '<snippet-page></snippet-page>',\n      title: 'Query Snippets'\n    }\n  };\n}\n\n/***/ }),\n/* 711 */,\n/* 712 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"\\\">\\n    <form name=\\\"snippetForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Trigger</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.trigger\\\" ng-disabled=\\\"!$ctrl.canEdit\\\" required autofocus>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Description</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.description\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Snippet</label>\\n        <pre ng-if=\\\"!$ctrl.canEdit\\\">{{$ctrl.snippet.snippet}}</pre>\\n        <div ui-ace=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.snippet.snippet\\\" style=\\\"height:300px\\\" ng-if=\\\"$ctrl.canEdit\\\"></div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n        <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!snippetForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.snippet.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n      </div>\\n      <small ng-if=\\\"$ctrl.snippet.user\\\">\\n        Created by: {{$ctrl.snippet.user.name}}\\n      </small>\\n    </form>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 713 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _pagination = __webpack_require__(26);\n\nvar _list = __webpack_require__(714);\n\nvar _list2 = _interopRequireDefault(_list);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nSnippetsCtrl.$inject = ['$location', 'currentUser', 'Events', 'QuerySnippet'];\n\n\nfunction SnippetsCtrl($location, currentUser, Events, QuerySnippet) {\n  var _this = this;\n\n  Events.record('view', 'page', 'query_snippets');\n\n  this.snippets = new _pagination.Paginator([], { itemsPerPage: 20 });\n  QuerySnippet.query(function (snippets) {\n    _this.snippets.updateRows(snippets);\n  });\n}\n\nfunction init(ngModule) {\n  ngModule.component('snippetsListPage', {\n    template: _list2.default,\n    controller: SnippetsCtrl\n  });\n\n  return {\n    '/query_snippets': {\n      template: '<snippets-list-page></snippets-list-page>',\n      title: 'Query Snippets'\n    }\n  };\n}\n\n/***/ }),\n/* 714 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n    <div class=\\\"row voffset1\\\">\\n        <div class=\\\"col-md-12\\\">\\n          <p>\\n            <a href=\\\"query_snippets/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Snippet</a>\\n          </p>\\n\\n          <table class=\\\"table table-condensed table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th>Trigger</th>\\n                <th>Description</th>\\n                <th>Snippet</th>\\n                <th>Created By</th>\\n                <th>Updated At</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr ng-repeat=\\\"row in $ctrl.snippets.getPageRows()\\\">\\n                <td>\\n                  <a href=\\\"query_snippets/{{row.id}}\\\">{{row.trigger}}</a>\\n                </td>\\n                <td>\\n                  {{row.description}}\\n                </td>\\n                <td>\\n                  {{row.snippet}}\\n                </td>\\n                <td>\\n                  {{row.user.name}}\\n                </td>\\n                <td>\\n                  <span am-time-ago=\\\"row.created_at\\\"></span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n          <paginator paginator=\\\"$ctrl.snippets\\\"></paginator>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 715 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _pagination = __webpack_require__(26);\n\nvar _list = __webpack_require__(716);\n\nvar _list2 = _interopRequireDefault(_list);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nUsersCtrl.$inject = ['currentUser', 'Events', 'User'];\n\n\nfunction UsersCtrl(currentUser, Events, User) {\n  var _this = this;\n\n  Events.record('view', 'page', 'users');\n\n  this.currentUser = currentUser;\n  this.users = new _pagination.Paginator([], { itemsPerPage: 20 });\n  User.query(function (users) {\n    _this.users.updateRows(users);\n  });\n}\n\nfunction init(ngModule) {\n  ngModule.component('usersListPage', {\n    controller: UsersCtrl,\n    template: _list2.default\n  });\n\n  return {\n    '/users': {\n      template: '<users-list-page></users-list-page>',\n      title: 'Users'\n    }\n  };\n}\n\n/***/ }),\n/* 716 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"$ctrl.currentUser.hasPermission('admin')\\\">\\n        <a href=\\\"users/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New User</a>\\n      </p>\\n\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Joined</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in $ctrl.users.getPageRows()\\\">\\n            <td>\\n              <img ng-src=\\\"{{row.gravatar_url}}\\\" height=\\\"40px\\\"/> <a href=\\\"users/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n            <td>\\n              <span am-time-ago=\\\"row.created_at\\\"></span>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.users\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 717 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _new = __webpack_require__(718);\n\nvar _new2 = _interopRequireDefault(_new);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nNewUserCtrl.$inject = ['$scope', '$location', 'toastr', 'currentUser', 'Events', 'User'];\n\n\nfunction NewUserCtrl($scope, $location, toastr, currentUser, Events, User) {\n  var _this = this;\n\n  Events.record('view', 'page', 'users/new');\n\n  $scope.user = new User({});\n  $scope.saveUser = function () {\n    if (!_this.userForm.$valid) {\n      return;\n    }\n\n    $scope.user.$save(function (user) {\n      $scope.user = user;\n      $scope.user.created = true;\n      toastr.success('Saved.');\n    }, function (error) {\n      var message = error.data.message || 'Failed saving.';\n      toastr.error(message);\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('NewUserCtrl', NewUserCtrl);\n\n  return {\n    '/users/new': {\n      template: _new2.default,\n      controller: 'NewUserCtrl',\n      controllerAs: '$ctrl',\n      bindToController: 'true'\n    }\n  };\n}\n\n/***/ }),\n/* 718 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n  <form class=\\\"form\\\" name=\\\"$ctrl.userForm\\\" ng-submit=\\\"saveUser()\\\" novalidate>\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  ($ctrl.userForm.email | showError:$ctrl.userForm )}\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input type=\\\"text\\\" name=\\\"name\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" ng-disabled=\\\"user.created\\\" required/ autofocus>\\n\\n      <error-messages input=\\\"$ctrl.userForm.name\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error': ($ctrl.userForm.email | showError:$ctrl.userForm ) }\\\">\\n      <label class=\\\"control-label\\\">Email</label>\\n      <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" ng-disabled=\\\"user.created\\\" required/>\\n\\n      <error-messages input=\\\"$ctrl.userForm.email\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"!user.created\\\">\\n      <button class=\\\"btn btn-primary\\\">Create</button>\\n    </div>\\n\\n\\n    <div ng-if=\\\"user.created\\\" class=\\\"alert alert-success\\\">\\n      <p>\\n        <strong>The user has been created and should receive an invite email soon.</strong>\\n      </p>\\n      <p>\\n        You can use the following link to invite them yourself:<br/>\\n        {{user.invite_link}}\\n      </p>\\n    </div>\\n  </form>\\n</settings-screen>\\n\"\n\n/***/ }),\n/* 719 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = init;\n\nvar _underscore = __webpack_require__(5);\n\nvar _show = __webpack_require__(720);\n\nvar _show2 = _interopRequireDefault(_show);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nUserCtrl.$inject = ['$scope', '$routeParams', '$http', '$location', 'toastr', 'clientConfig', 'currentUser', 'Events', 'User'];\n\n\nfunction UserCtrl($scope, $routeParams, $http, $location, toastr, clientConfig, currentUser, Events, User) {\n  $scope.userId = $routeParams.userId;\n  $scope.currentUser = currentUser;\n  $scope.clientConfig = clientConfig;\n\n  if ($scope.userId === 'me') {\n    $scope.userId = currentUser.id;\n  }\n\n  Events.record('view', 'user', $scope.userId);\n  $scope.canEdit = currentUser.hasPermission('admin') || currentUser.id === parseInt($scope.userId, 10);\n  $scope.showSettings = false;\n  $scope.showPasswordSettings = false;\n\n  $scope.selectTab = function (tab) {\n    $scope.selectedTab = tab;\n    (0, _underscore.each)($scope.tabs, function (v, k) {\n      $scope.tabs[k] = k === tab;\n    });\n  };\n\n  $scope.setTab = function (tab) {\n    $scope.selectedTab = tab;\n    $location.hash(tab);\n  };\n\n  $scope.tabs = {\n    profile: false,\n    apiKey: false,\n    settings: false,\n    password: false\n  };\n\n  $scope.selectTab($location.hash() || 'profile');\n\n  $scope.user = User.get({ id: $scope.userId }, function (user) {\n    if (user.auth_type === 'password') {\n      $scope.showSettings = $scope.canEdit;\n      $scope.showPasswordSettings = $scope.canEdit;\n    }\n  });\n\n  $scope.password = {\n    current: '',\n    new: '',\n    newRepeat: ''\n  };\n\n  $scope.savePassword = function (form) {\n    if (!form.$valid) {\n      return;\n    }\n\n    var data = {\n      id: $scope.user.id,\n      password: $scope.password.new,\n      old_password: $scope.password.current\n    };\n\n    User.save(data, function () {\n      toastr.success('Password Saved.');\n      $scope.password = {\n        current: '',\n        new: '',\n        newRepeat: ''\n      };\n    }, function (error) {\n      var message = error.data.message || 'Failed saving password.';\n      toastr.error(message);\n    });\n  };\n\n  $scope.updateUser = function (form) {\n    if (!form.$valid) {\n      return;\n    }\n\n    var data = {\n      id: $scope.user.id,\n      name: $scope.user.name,\n      email: $scope.user.email\n    };\n\n    User.save(data, function (user) {\n      toastr.success('Saved.');\n      $scope.user = user;\n    }, function (error) {\n      var message = error.data.message || 'Failed saving.';\n      toastr.error(message);\n    });\n  };\n\n  $scope.sendPasswordReset = function () {\n    $scope.disablePasswordResetButton = true;\n    $http.post('api/users/' + $scope.user.id + '/reset_password').success(function (data) {\n      $scope.disablePasswordResetButton = false;\n      $scope.passwordResetLink = data.reset_link;\n    });\n  };\n}\n\nfunction init(ngModule) {\n  ngModule.controller('UserCtrl', UserCtrl);\n\n  return {\n    '/users/:userId': {\n      template: _show2.default,\n      reloadOnSearch: false,\n      controller: 'UserCtrl',\n      title: 'Users'\n    }\n  };\n}\n\n/***/ }),\n/* 720 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n\\n  <h3 class=\\\"p-l-5\\\">{{user.name}}</h3>\\n\\n  <ul class=\\\"tab-nav\\\">\\n    <rd-tab tab-id=\\\"profile\\\" name=\\\"Profile\\\" ng-click=\\\"selectTab('profile')\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"apiKey\\\" name=\\\"API Key\\\" ng-click=\\\"selectTab('apiKey')\\\" ng-if=\\\"user.api_key\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"settings\\\" name=\\\"Settings\\\" ng-click=\\\"selectTab('settings')\\\" ng-if=\\\"showSettings\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"password\\\" name=\\\"Password\\\" ng-click=\\\"selectTab('password')\\\" ng-if=\\\"showPasswordSettings\\\"></rd-tab>\\n  </ul>\\n\\n  <div ng-show=\\\"selectedTab == 'profile'\\\" class=\\\"p-10\\\">\\n    <p>\\n      <img ng-src=\\\"{{user.gravatar_url}}\\\"/>\\n    </p>\\n\\n    <p>\\n      <strong>{{user.name}}</strong>\\n    </p>\\n\\n    <p>\\n      {{user.email}}\\n    </p>\\n    <div ng-if=\\\"currentUser.isAdmin\\\">\\n      <hr/>\\n      <div class=\\\"form-group\\\">\\n        <button class=\\\"btn btn-default\\\" ng-click=\\\"sendPasswordReset()\\\" ng-disabled=\\\"disablePasswordResetButton\\\">Send\\n          Password Reset Email\\n        </button>\\n      </div>\\n\\n      <div ng-if=\\\"passwordResetLink\\\" class=\\\"alert alert-success\\\">\\n        <p ng-if=\\\"!clientConfig.mailSettingMissing\\\">\\n          <strong>The user should receive a link to reset his password by email soon.</strong>\\n        </p>\\n        <p ng-if=\\\"clientConfig.mailSettingsMissing\\\">\\n          You don't have mail server configured, please send the following link\\n          to {{user.name}} to reset their password:<br/>\\n          <a ng-href=\\\"passwordResetLink\\\">{{passwordResetLink}}</a>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'apiKey'\\\" class=\\\"p-10\\\">\\n    API Key:\\n    <input type=\\\"text\\\" value=\\\"{{user.api_key}}\\\" size=\\\"44\\\" readonly/>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'settings'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userSettingsForm\\\" ng-submit=\\\"updateUser(userSettingsForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.name | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Name</label>\\n          <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.name\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.email | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Email</label>\\n          <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.email\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'password'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userPasswordForm\\\" ng-submit=\\\"savePassword(userPasswordForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.currentPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Current Password</label>\\n          <input name=\\\"currentPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.current\\\" required/>\\n          <error-messages input=\\\"userPasswordForm.currentPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.newPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">New Password</label>\\n          <input name=\\\"newPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.new\\\" ng-minlength=\\\"6\\\"\\n                 required/>\\n          <error-messages input=\\\"userPasswordForm.newPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.passwordRepeat | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Repeat New Password</label>\\n          <input name=\\\"passwordRepeat\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.newRepeat\\\"\\n                 compare-to=\\\"password.new\\\"/>\\n          <span class=\\\"help-block error\\\"\\n                ng-if=\\\"userPasswordForm.passwordRepeat.$error.compareTo\\\">Passwords don't match.</span>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n/***/ })\n]),[292]);\n\n\n// WEBPACK FOOTER //\n// app.681aa4ab9869dd2a6d16.js","export { default as Paginator } from './paginator';\nexport { default as LivePaginator } from './live-paginator';\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/pagination/index.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABl9pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTAwPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEwMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc5RUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjdBRUZGQTExRTRCODg4OThENzNBNThGM0VDPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOkEzNjMxNjc3RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOkEzNjMxNjc4RUZGQTExRTRCODg4OThENzNBNThGM0VDPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgICAgPHJkZjpTZXEvPgogICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1OjA1OjEyIDEwOjA1OjU4PC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuMy4yPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpLVWDGAAARGUlEQVR4Ae1dCYwcxRX91T3XXt7DYAsbYyfhEAEMOECCgCBEzJmgWML4CFeMYwjYHAkJNkhoOQIOuZB314mcBUUCedfaYCScgAIRCIIgCGESxBFuFtkG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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/assets/images/redash_icon_small.png\n// module id = 70\n// module chunks = 1","import debug from 'debug';\nimport moment from 'moment';\nimport { sortBy, uniq, contains, values, some, each, isArray, isNumber, isString, includes } from 'underscore';\n\nconst logger = debug('redash:services:QueryResult');\nconst filterTypes = ['filter', 'multi-filter', 'multiFilter'];\n\nconst ALL_VALUES = '*';\nconst NONE_VALUES = '-';\n\nfunction getColumnNameWithoutType(column) {\n  let typeSplit;\n  if (column.indexOf('::') !== -1) {\n    typeSplit = '::';\n  } else if (column.indexOf('__') !== -1) {\n    typeSplit = '__';\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === '' && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!contains(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nexport function getColumnCleanName(column) {\n  const name = getColumnNameWithoutType(column);\n  return name;\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, a =>\n    a.toUpperCase());\n}\n\nfunction addPointToSeries(point, seriesCollection, seriesName) {\n  if (seriesCollection[seriesName] === undefined) {\n    seriesCollection[seriesName] = {\n      name: seriesName,\n      type: 'column',\n      data: [],\n    };\n  }\n\n  seriesCollection[seriesName].data.push(point);\n}\n\n\nfunction QueryResultService($resource, $timeout, $q) {\n  const QueryResultResource = $resource('api/query_results/:id', { id: '@id' }, { post: { method: 'POST' } });\n  const Job = $resource('api/jobs/:id', { id: '@id' });\n  const statuses = {\n    1: 'waiting',\n    2: 'processing',\n    3: 'done',\n    4: 'failed',\n  };\n\n  class QueryResult {\n    constructor(props) {\n      this.deferred = $q.defer();\n      this.job = {};\n      this.query_result = {};\n      this.status = 'waiting';\n      this.filters = undefined;\n      this.filterFreeze = undefined;\n\n      this.updatedAt = moment();\n\n      if (props) {\n        this.update(props);\n      }\n    }\n\n    update(props) {\n      Object.assign(this, props);\n\n      if ('query_result' in props) {\n        this.status = 'done';\n        this.filters = undefined;\n        this.filterFreeze = undefined;\n\n        const columnTypes = {};\n\n        // TODO: we should stop manipulating incoming data, and switch to relaying\n        // on the column type set by the backend. This logic is prone to errors,\n        // and better be removed. Kept for now, for backward compatability.\n        each(this.query_result.data.rows, (row) => {\n          each(row, (v, k) => {\n            let newType = null;\n            if (isNumber(v)) {\n              newType = 'float';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n              row[k] = moment.utc(v);\n              newType = 'datetime';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n              row[k] = moment.utc(v);\n              newType = 'date';\n            } else if (typeof (v) === 'object' && v !== null) {\n              row[k] = JSON.stringify(v);\n            } else {\n              newType = 'string';\n            }\n\n            if (newType !== null) {\n              if (columnTypes[k] !== undefined && columnTypes[k] !== newType) {\n                columnTypes[k] = 'string';\n              } else {\n                columnTypes[k] = newType;\n              }\n            }\n          });\n        });\n\n        each(this.query_result.data.columns, (column) => {\n          if (columnTypes[column.name]) {\n            if (column.type == null || column.type === 'string') {\n              column.type = columnTypes[column.name];\n            }\n          }\n        });\n\n        this.deferred.resolve(this);\n      } else if (this.job.status === 3) {\n        this.status = 'processing';\n      } else {\n        this.status = undefined;\n      }\n    }\n\n    getId() {\n      let id = null;\n      if ('query_result' in this) {\n        id = this.query_result.id;\n      }\n      return id;\n    }\n\n    cancelExecution() {\n      Job.delete({ id: this.job.id });\n    }\n\n    getStatus() {\n      return this.status || statuses[this.job.status];\n    }\n\n    getError() {\n      // TODO: move this logic to the server...\n      if (this.job.error === 'None') {\n        return undefined;\n      }\n\n      return this.job.error;\n    }\n\n    getLog() {\n      if (!this.query_result.data ||\n          !this.query_result.data.log ||\n          this.query_result.data.log.length === 0) {\n        return null;\n      }\n\n      return this.query_result.data.log;\n    }\n\n    getUpdatedAt() {\n      return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n    }\n\n    getRuntime() {\n      return this.query_result.runtime;\n    }\n\n    getRawData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      const data = this.query_result.data.rows;\n\n      return data;\n    }\n\n    getData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      function filterValues(filters) {\n        if (!filters) {\n          return null;\n        }\n\n        return filters.reduce(\n          (str, filter) =>\n            str + filter.current\n          , '',\n        );\n      }\n\n      const filters = this.getFilters();\n      const filterFreeze = filterValues(filters);\n\n      if (this.filterFreeze !== filterFreeze) {\n        this.filterFreeze = filterFreeze;\n\n        if (filters) {\n          filters.forEach((filter) => {\n            if (filter.multiple && includes(filter.current, ALL_VALUES)) {\n              filter.current = filter.values.slice(2);\n            }\n\n            if (filter.multiple && includes(filter.current, NONE_VALUES)) {\n              filter.current = [];\n            }\n          });\n\n          this.filteredData = this.query_result.data.rows.filter(row =>\n            filters.reduce((memo, filter) => {\n              if (!isArray(filter.current)) {\n                filter.current = [filter.current];\n              }\n\n              return (memo && some(filter.current, (v) => {\n                const value = row[filter.name];\n                if (moment.isMoment(value)) {\n                  return value.isSame(v);\n                }\n                // We compare with either the value or the String representation of the value,\n                // because Select2 casts true/false to \"true\"/\"false\".\n                return (v === value || String(value) === v);\n              }));\n            }, true));\n        } else {\n          this.filteredData = this.query_result.data.rows;\n        }\n      }\n\n      return this.filteredData;\n    }\n\n    isEmpty() {\n      return this.getData() === null || this.getData().length === 0;\n    }\n\n    getChartData(mapping) {\n      const series = {};\n\n      this.getData().forEach((row) => {\n        let point = {};\n        let seriesName;\n        let xValue = 0;\n        const yValues = {};\n        let eValue = null;\n        let sizeValue = null;\n\n        each(row, (v, definition) => {\n          const name = definition.split('::')[0] || definition.split('__')[0];\n          let value = v;\n          let type = definition.split('::')[1] || definition.split('__')[1];\n          if (mapping) {\n            type = mapping[definition];\n          }\n\n          if (type === 'unused') {\n            return;\n          }\n\n          if (type === 'x') {\n            xValue = value;\n            point[type] = value;\n          }\n          if (type === 'y') {\n            if (value == null) {\n              value = 0;\n            }\n            yValues[name] = value;\n            point[type] = value;\n          }\n          if (type === 'yError') {\n            eValue = value;\n            point[type] = value;\n          }\n\n          if (type === 'series') {\n            seriesName = String(value);\n          }\n\n          if (type === 'size') {\n            point[type] = value;\n            sizeValue = value;\n          }\n\n          if (type === 'multiFilter' || type === 'multi-filter') {\n            seriesName = String(value);\n          }\n        });\n\n        if (seriesName === undefined) {\n          each(yValues, (yValue, ySeriesName) => {\n            point = { x: xValue, y: yValue };\n            if (eValue !== null) {\n              point.yError = eValue;\n            }\n\n            if (sizeValue !== null) {\n              point.size = sizeValue;\n            }\n            addPointToSeries(point, series, ySeriesName);\n          });\n        } else {\n          addPointToSeries(point, series, seriesName);\n        }\n      });\n      return sortBy(values(series), 'name');\n    }\n\n    getColumns() {\n      if (this.columns === undefined && this.query_result.data) {\n        this.columns = this.query_result.data.columns;\n      }\n\n      return this.columns;\n    }\n\n    getColumnNames() {\n      if (this.columnNames === undefined && this.query_result.data) {\n        this.columnNames = this.query_result.data.columns.map(v => v.name);\n      }\n\n      return this.columnNames;\n    }\n\n\n    getColumnCleanNames() {\n      return this.getColumnNames().map(col => getColumnCleanName(col));\n    }\n\n    getColumnFriendlyNames() {\n      return this.getColumnNames().map(col => getColumnFriendlyName(col));\n    }\n\n    getFilters() {\n      if (!this.filters) {\n        this.prepareFilters();\n      }\n\n      return this.filters;\n    }\n\n    prepareFilters() {\n      if (!this.getColumns()) {\n        return;\n      }\n\n      const filters = [];\n\n      this.getColumns().forEach((col) => {\n        const name = col.name;\n        const type = name.split('::')[1] || name.split('__')[1];\n        if (contains(filterTypes, type)) {\n          // filter found\n          const filter = {\n            name,\n            friendlyName: getColumnFriendlyName(name),\n            column: col,\n            values: [],\n            multiple: (type === 'multiFilter') || (type === 'multi-filter'),\n          };\n          filters.push(filter);\n        }\n      }, this);\n\n      this.getRawData().forEach((row) => {\n        filters.forEach((filter) => {\n          filter.values.push(row[filter.name]);\n          if (filter.values.length === 1) {\n            if (filter.multiple) {\n              filter.current = [row[filter.name]];\n            } else {\n              filter.current = row[filter.name];\n            }\n          }\n        });\n      });\n\n      filters.forEach((filter) => {\n        if (filter.multiple) {\n          filter.values.unshift(ALL_VALUES);\n          filter.values.unshift(NONE_VALUES);\n        }\n      });\n\n      filters.forEach((filter) => {\n        filter.values = uniq(filter.values, (v) => {\n          if (moment.isMoment(v)) {\n            return v.unix();\n          }\n          return v;\n        });\n      });\n\n      this.filters = filters;\n    }\n\n    toPromise() {\n      return this.deferred.promise;\n    }\n\n    static getById(id) {\n      const queryResult = new QueryResult();\n\n      QueryResultResource.get({ id }, (response) => {\n        queryResult.update(response);\n      });\n\n      return queryResult;\n    }\n\n    loadResult(tryCount) {\n      QueryResultResource.get(\n        { id: this.job.query_result_id },\n        (response) => {\n          this.update(response);\n        },\n        (error) => {\n          if (tryCount === undefined) {\n            tryCount = 0;\n          }\n\n          if (tryCount > 3) {\n            logger('Connection error while trying to load result', error);\n            this.update({\n              job: {\n                error: 'failed communicating with server. Please check your Internet connection and try again.',\n                status: 4,\n              },\n            });\n          } else {\n            $timeout(() => {\n              this.loadResult(tryCount + 1);\n            }, 1000 * Math.pow(2, tryCount));\n          }\n        },\n      );\n    }\n\n    refreshStatus(query) {\n      Job.get({ id: this.job.id }, (jobResponse) => {\n        this.update(jobResponse);\n\n        if (this.getStatus() === 'processing' && this.job.query_result_id && this.job.query_result_id !== 'None') {\n          this.loadResult();\n        } else if (this.getStatus() !== 'failed') {\n          $timeout(() => {\n            this.refreshStatus(query);\n          }, 3000);\n        }\n      }, (error) => {\n        logger('Connection error', error);\n        // TODO: use QueryResultError, or better yet: exception/reject of promise.\n        this.update({ job: { error: 'failed communicating with server. Please check your Internet connection and try again.', status: 4 } });\n      });\n    }\n\n    getLink(queryId, fileType, apiKey) {\n      let link = `api/queries/${queryId}/results/${this.getId()}.${fileType}`;\n      if (apiKey) {\n        link = `${link}?api_key=${apiKey}`;\n      }\n      return link;\n    }\n\n    getName(queryName, fileType) {\n      return `${queryName.replace(' ', '_') + moment(this.getUpdatedAt()).format('_YYYY_MM_DD')}.${fileType}`;\n    }\n\n    static get(dataSourceId, query, maxAge, queryId) {\n      const queryResult = new QueryResult();\n\n      const params = { data_source_id: dataSourceId, query, max_age: maxAge };\n      if (queryId !== undefined) {\n        params.query_id = queryId;\n      }\n\n      QueryResultResource.post(params, (response) => {\n        queryResult.update(response);\n\n        if ('job' in response) {\n          queryResult.refreshStatus(query);\n        }\n      }, (error) => {\n        if (error.status === 403) {\n          queryResult.update(error.data);\n        } else if (error.status === 400 && 'job' in error.data) {\n          queryResult.update(error.data);\n        } else {\n          logger('Unknown error', error);\n          queryResult.update({ job: { error: 'unknown error occurred. Please try again later.', status: 4 } });\n        }\n      });\n\n      return queryResult;\n    }\n  }\n\n\n  return QueryResult;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QueryResult', QueryResultService);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/query-result.js","module.exports = \"<div class=\\\"container\\\">\\n  <overlay ng-if=\\\"canCreateQuery === false && query.isNew()\\\">\\n    You don't have permission to create new queries on any of the data sources available to you. You can either <a\\n    href=\\\"queries\\\">browse existing queries</a>, or ask for additional permissions from your Redash admin.\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please\\n    create one first, and then start querying.\\n    <br/>\\n    <a href=\\\"data_sources/new\\\" class=\\\"btn btn-primary\\\">Create Data Source</a> <a href=\\\"groups\\\" class=\\\"btn btn-default\\\">Manage\\n    Group Permissions</a>\\n  </overlay>\\n  <overlay ng-if=\\\"noDataSources && !currentUser.isAdmin\\\">\\n    Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please ask\\n    your Redash admin to create one first.\\n  </overlay>\\n\\n  <alert-unsaved-changes ng-if=\\\"canEdit\\\" is-dirty=\\\"isDirty\\\"></alert-unsaved-changes>\\n\\n  <div class=\\\"row bg-white p-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>\\n        <edit-in-place editable=\\\"canEdit\\\" done=\\\"saveName\\\" ignore-blanks=\\\"true\\\" value=\\\"query.name\\\"></edit-in-place>\\n        <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft && !query.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"query.is_archived\\\" uib-popover=\\\"This query is archived and can't be used in dashboards, and won't appear in search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n      <p>\\n        <em>\\n          <edit-in-place editable=\\\"canEdit\\\"\\n                         done=\\\"saveDescription\\\"\\n                         editor=\\\"textarea\\\"\\n                         placeholder=\\\"No description\\\"\\n                         ignore-blanks='false'\\n                         value=\\\"query.description\\\"\\n                         markdown=\\\"true\\\">\\n          </edit-in-place>\\n        </em>\\n\\n      <ul class=\\\"list-inline m-t-20\\\">\\n        <li>\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Created By </span>\\n          <strong>{{query.user.name}}</strong>\\n        </li>\\n        <li ng-if=\\\"query.last_modified_by && query.user.id != query.last_modified_by.id\\\">\\n          <span class=\\\"zmdi zmdi-account\\\"></span>\\n          <span class=\\\"text-muted\\\">Last Modified By </span>\\n          <strong>{{query.last_modified_by.name}}</strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Updated at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n        <li>\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Created at </span>\\n          <strong>\\n            <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n      </p>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-show=\\\"query.id && canViewSource\\\">\\n            <a ng-show=\\\"!sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(true, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Show Source\\n            </a>\\n            <a ng-show=\\\"sourceMode\\\"\\n              ng-href=\\\"{{query.getUrl(false, selectedTab)}}\\\" class=\\\"btn btn-default\\\">Hide Source\\n            </a>\\n        </span>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <!-- editor -->\\n  <div class=\\\"container\\\">\\n      <div class=\\\"row bg-white p-b-5\\\" ng-if=\\\"sourceMode\\\" resizable r-directions=\\\"['bottom']\\\" r-height=\\\"300\\\" style=\\\"min-height:100px;\\\">\\n        <schema-browser class=\\\"col-md-3 hidden-sm hidden-xs schema-container\\\"\\n                        schema=\\\"schema\\\"\\n                        on-refresh=\\\"refreshSchema()\\\"\\n                        ng-show=\\\"hasSchema\\\">\\n        </schema-browser>\\n\\n        <div ng-class=\\\"editorSize\\\" style=\\\"height:100%;\\\">\\n            <div class=\\\"p-5\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-s\\\" ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\"\\n                      ng-click=\\\"executeQuery()\\\">\\n                <span class=\\\"zmdi zmdi-play\\\"></span> Execute\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-default btn-s\\\" ng-click=\\\"formatQuery()\\\">\\n                <span class=\\\"zmdi zmdi-format-indent-increase\\\"></span> Format Query\\n              </button>\\n\\n              <i class=\\\"fa fa-database\\\"></i>\\n              <span class=\\\"text-muted\\\">Data Source</span>\\n              <select ng-disabled=\\\"!isQueryOwner\\\" ng-model=\\\"query.data_source_id\\\" ng-change=\\\"updateDataSource()\\\"\\n                      ng-options=\\\"ds.id as ds.name for ds in dataSources\\\"></select>\\n\\n              <div class=\\\"pull-right\\\">\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"togglePublished()\\\" ng-if=\\\"query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n                </button>\\n                <button class=\\\"btn btn-s btn-default\\\" ng-click=\\\"duplicateQuery()\\\" ng-disabled=\\\"query.id === undefined || !canForkQuery()\\\">\\n                  <span class=\\\"zmdi zmdi-arrow-split\\\"></span> Fork\\n                </button>\\n                <button class=\\\"btn btn-default\\\" ng-show=\\\"canEdit\\\" ng-click=\\\"saveQuery()\\\">\\n                  <span class=\\\"fa fa-floppy-o\\\"> </span> Save<span\\n                  ng-show=\\\"isDirty\\\">&#42;</span>\\n                </button>\\n                <div ng-if=\\\"query.id != undefined\\\" class=\\\"btn-group\\\" role=\\\"group\\\" uib-dropdown>\\n                  <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                    <span class=\\\"zmdi zmdi-more\\\"></span>\\n                  </button>\\n                  <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"archiveQuery()\\\">Archive Query</a></li>\\n                    <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin')) && showPermissionsControl\\\"><a ng-click=\\\"showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                    <li ng-if=\\\"!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\"><a ng-click=\\\"togglePublished()\\\">Unpublish Query</a></li>\\n                    <li ng-if=\\\"query.id != undefined\\\"><a ng-click=\\\"showApiKey()\\\">Show API Key</a></li>\\n                  </ul>\\n                </div>\\n              </div>\\n            </div>\\n            <p style=\\\"height:calc(100% - 40px);\\\">\\n              <query-editor query=\\\"query\\\"\\n                            schema=\\\"schema\\\"\\n                            syntax=\\\"dataSource.syntax\\\"></query-editor>\\n            </p>\\n        </div>\\n      </div>\\n  </div>\\n  <!-- end of editor -->\\n\\n  <!-- Query Details-->\\n  <div class=\\\"container m-b-5 p-t-5 bg-ace\\\" ng-if=\\\"sourceMode\\\">\\n  </div>\\n  <!-- End of Query Details-->\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-header bg-ace\\\">\\n      <div class=\\\"pull-right\\\">\\n        <button class=\\\"btn btn-sm btn-default\\\" ng-click=\\\"executeQuery()\\\"\\n                ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\" title=\\\"Refresh Dataset\\\"\\n                ng-if=\\\"!sourceMode\\\"><span\\n          class=\\\"zmdi zmdi-refresh\\\"></span></button>\\n        <div class=\\\"btn-group\\\" uib-dropdown>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\"\\n                  ng-disabled=\\\"queryExecuting || !queryResult.getData()\\\" aria-haspopup=\\\"true\\\"\\n                  uib-dropdown-toggle aria-expanded=\\\"false\\\">\\n            Download Dataset <span class=\\\"caret\\\"></span>\\n          </button>\\n          <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n            <li>\\n              <a query-result-link target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n              </a>\\n            </li>\\n            <li>\\n              <a query-result-link file-type=\\\"xlsx\\\" target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n      <ul class=\\\"list-inline\\\">\\n        <li>\\n          <!-- runtime -->\\n          <span class=\\\"zmdi zmdi-timer\\\"></span>\\n          <span class=\\\"text-muted\\\">Runtime </span>\\n          <strong ng-show=\\\"!queryExecuting\\\">{{queryResult.getRuntime() | durationHumanize}}</strong>\\n          <span ng-show=\\\"queryExecuting\\\">Running&hellip;</span>\\n        </li>\\n        <li>\\n          <!-- rows -->\\n          <span class=\\\"zmdi zmdi-format-align-justify\\\"></span>\\n          <span class=\\\"text-muted\\\">Rows </span><strong>{{queryResult.getData().length}}</strong>\\n        </li>\\n        <li>\\n          <!-- refresh schedule -->\\n          <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n          <span class=\\\"text-muted\\\">Refresh Schedule</span>\\n          <a ng-click=\\\"openScheduleForm()\\\" ng-if=\\\"!query.isNew()\\\">{{query.schedule | scheduleHumanize}}</a>\\n          <span ng-if=\\\"query.isNew()\\\">Never</span>\\n        </li>\\n        <li>\\n          <!-- last update -->\\n          <span class=\\\"zmdi zmdi-time\\\"></span>\\n          <span class=\\\"text-muted\\\">Last update </span>\\n          <strong>\\n            <rd-time-ago value=\\\"queryResult.query_result.retrieved_at\\\"></rd-time-ago>\\n          </strong>\\n        </li>\\n      </ul>\\n\\n    </div>\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-12\\\">\\n          <parameters parameters=\\\"query.getParametersDefs()\\\" sync-values=\\\"!query.isNew()\\\" editable=\\\"sourceMode && canEdit\\\"></parameters>\\n          <!-- Query Execution Status -->\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'processing'\\\">\\n            Executing query&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-info\\\" ng-show=\\\"queryResult.getStatus() == 'waiting'\\\">\\n            Query in queue&hellip;\\n            <rd-timer timestamp=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n            <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\"\\n                    ng-click=\\\"cancelExecution()\\\">Cancel\\n            </button>\\n          </div>\\n          <div class=\\\"alert alert-danger\\\" ng-show=\\\"queryResult.getError()\\\">Error running query: <strong>{{queryResult.getError()}}</strong>\\n          </div>\\n          <!-- End of Query Execution Status -->\\n\\n          <!-- tabs and data -->\\n          <div ng-if=\\\"showDataset\\\">\\n            <div class=\\\"row p-10\\\" ng-show=\\\"showLog\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <p>Log Information:</p>\\n                <p ng-repeat=\\\"l in queryResult.getLog()\\\">{{l}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <ul class=\\\"tab-nav\\\">\\n                  <rd-tab tab-id=\\\"table\\\" name=\\\"Table\\\" base-path=\\\"query.getUrl(sourceMode)\\\"></rd-tab>\\n                  <rd-tab tab-id=\\\"{{vis.id}}\\\" name=\\\"{{vis.name}}\\\" ng-if=\\\"vis.type!='TABLE'\\\" base-path=\\\"query.getUrl(sourceMode)\\\"\\n                          ng-repeat=\\\"vis in query.visualizations\\\">\\n                          <span class=\\\"remove\\\" ng-click=\\\"deleteVisualization($event, vis)\\\"\\n                                ng-show=\\\"canEdit\\\"> &times;</span>\\n                  </rd-tab>\\n                  <li class=\\\"rd-tab\\\"><a ng-click=\\\"openVisualizationEditor()\\\" ng-if=\\\"sourceMode && canEdit\\\">&plus; New Visualization</a></li>\\n                </ul>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <div ng-show=\\\"selectedTab == 'table'\\\">\\n                  <filters filters=\\\"filters\\\"></filters>\\n                  <grid-renderer query-result=\\\"queryResult\\\" items-per-page=\\\"50\\\"></grid-renderer>\\n                  <!-- the ng-repeat is a lame hack to find the table visualization... -->\\n                  <div class=\\\"bg-ace p-5\\\" ng-repeat=\\\"vis in query.visualizations\\\" ng-if=\\\"vis.type == 'TABLE'\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-if=\\\"!query.isNew()\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n                <div ng-if=\\\"selectedTab == vis.id\\\" ng-repeat=\\\"vis in query.visualizations\\\">\\n                  <visualization-renderer visualization=\\\"vis\\\" query-result=\\\"queryResult\\\"></visualization-renderer>\\n                  <div class=\\\"bg-ace p-5\\\">\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"openVisualizationEditor(vis)\\\" ng-if=\\\"canEdit\\\">Edit</button>\\n                    <button class=\\\"btn btn-default\\\" ng-click=\\\"showEmbedDialog(query, vis)\\\"><i class=\\\"zmdi zmdi-code\\\"></i> Embed</button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/query.html\n// module id = 291\n// module chunks = 1","import '@/config/styles';\nimport ngModule from '@/config';\n\nngModule.config(($locationProvider, $compileProvider, uiSelectConfig, toastrConfig) => {\n  $compileProvider.debugInfoEnabled(false);\n  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|http|data):/);\n  $locationProvider.html5Mode(true);\n  uiSelectConfig.theme = 'bootstrap';\n\n  Object.assign(toastrConfig, {\n    positionClass: 'toast-bottom-right',\n    timeOut: 2000,\n  });\n});\n\n// Update ui-select's template to use Font-Awesome instead of glyphicon.\n// eslint-disable-next-line no-unused-vars\nngModule.run(($templateCache, OfflineListener) => {\n  const templateName = 'bootstrap/match.tpl.html';\n  let template = $templateCache.get(templateName);\n  template = template.replace('glyphicon glyphicon-remove', 'fa fa-remove');\n  $templateCache.put(templateName, template);\n});\n\nexport default ngModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/index.js","import 'material-design-iconic-font/dist/css/material-design-iconic-font.css';\nimport 'font-awesome/css/font-awesome.css';\nimport 'ui-select/dist/select.css';\nimport 'angular-toastr/dist/angular-toastr.css';\nimport 'angular-resizable/src/angular-resizable.css';\nimport 'angular-gridster/dist/angular-gridster.css';\nimport 'pace-progress/themes/blue/pace-theme-minimal.css';\n\nimport '@/assets/css/superflat_redash.css';\nimport '@/assets/css/redash.css';\nimport '@/assets/css/main.scss';\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/config/styles.js","// This polyfill is needed to support PhantomJS which we use to generate PNGs from embeds.\nimport 'core-js/fn/typed/array-buffer';\n\nimport 'pace-progress';\nimport debug from 'debug';\nimport angular from 'angular';\nimport ngSanitize from 'angular-sanitize';\nimport ngRoute from 'angular-route';\nimport ngResource from 'angular-resource';\nimport uiBootstrap from 'angular-ui-bootstrap';\nimport uiSelect from 'ui-select';\nimport ngMessages from 'angular-messages';\nimport toastr from 'angular-toastr';\nimport ngUpload from 'angular-base64-upload';\nimport vsRepeat from 'angular-vs-repeat';\nimport 'angular-moment';\nimport 'brace';\nimport 'angular-ui-ace';\nimport 'angular-resizable';\nimport ngGridster from 'angular-gridster';\nimport { each } from 'underscore';\n\nimport '@/lib/sortable';\n\nimport * as filters from '@/filters';\nimport registerDirectives from '@/directives';\nimport markdownFilter from '@/filters/markdown';\nimport dateTimeFilter from '@/filters/datetime';\n\nconst logger = debug('redash:config');\n\nconst requirements = [\n  ngRoute,\n  ngResource,\n  ngSanitize,\n  uiBootstrap,\n  ngMessages,\n  uiSelect,\n  'angularMoment',\n  toastr,\n  'ui.ace',\n  ngUpload,\n  'angularResizable',\n  vsRepeat,\n  'ui.sortable',\n  ngGridster.name,\n];\n\nconst ngModule = angular.module('app', requirements);\n\nfunction registerAll(context) {\n  const modules = context\n    .keys()\n    .map(context)\n    .map(module => module.default);\n\n  return modules.map(f => f(ngModule));\n}\n\nfunction registerComponents() {\n  // We repeat this code in other register functions, because if we don't use a literal for the path\n  // Webpack won't be able to statcily analyze our imports.\n  const context = require.context('@/components', true, /^((?![\\\\/]test[\\\\/]).)*\\.js$/);\n  registerAll(context);\n}\n\nfunction registerServices() {\n  const context = require.context('@/services', true, /^((?![\\\\/]test[\\\\/]).)*\\.js$/);\n  registerAll(context);\n}\n\nfunction registerVisualizations() {\n  const context = require.context('@/visualizations', true, /^((?![\\\\/]test[\\\\/]).)*\\.js$/);\n  registerAll(context);\n}\n\nfunction registerPages() {\n  const context = require.context('@/pages', true, /^((?![\\\\/]test[\\\\/]).)*\\.js$/);\n  const routesCollection = registerAll(context);\n  routesCollection.forEach((routes) => {\n    ngModule.config(($routeProvider) => {\n      each(routes, (route, path) => {\n        logger('Registering route: %s', path);\n        // This is a workaround, to make sure app-header and footer are loaded only\n        // for the authenticated routes.\n        // We should look into switching to ui-router, that has built in support for\n        // such things.\n        route.template = `<app-header></app-header><route-status></route-status>${route.template}<footer></footer>`;\n        route.authenticated = true;\n        $routeProvider.when(path, route);\n      });\n    });\n  });\n}\n\nfunction registerFilters() {\n  each(filters, (filter, name) => {\n    ngModule.filter(name, () => filter);\n  });\n}\n\nregisterDirectives(ngModule);\nregisterServices();\nregisterFilters();\nmarkdownFilter(ngModule);\ndateTimeFilter(ngModule);\nregisterComponents();\nregisterPages();\nregisterVisualizations(ngModule);\n\nexport default ngModule;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/config/index.js","var map = {\n\t\"./af\": 111,\n\t\"./af.js\": 111,\n\t\"./ar\": 112,\n\t\"./ar-dz\": 113,\n\t\"./ar-dz.js\": 113,\n\t\"./ar-kw\": 114,\n\t\"./ar-kw.js\": 114,\n\t\"./ar-ly\": 115,\n\t\"./ar-ly.js\": 115,\n\t\"./ar-ma\": 116,\n\t\"./ar-ma.js\": 116,\n\t\"./ar-sa\": 117,\n\t\"./ar-sa.js\": 117,\n\t\"./ar-tn\": 118,\n\t\"./ar-tn.js\": 118,\n\t\"./ar.js\": 112,\n\t\"./az\": 119,\n\t\"./az.js\": 119,\n\t\"./be\": 120,\n\t\"./be.js\": 120,\n\t\"./bg\": 121,\n\t\"./bg.js\": 121,\n\t\"./bn\": 122,\n\t\"./bn.js\": 122,\n\t\"./bo\": 123,\n\t\"./bo.js\": 123,\n\t\"./br\": 124,\n\t\"./br.js\": 124,\n\t\"./bs\": 125,\n\t\"./bs.js\": 125,\n\t\"./ca\": 126,\n\t\"./ca.js\": 126,\n\t\"./cs\": 127,\n\t\"./cs.js\": 127,\n\t\"./cv\": 128,\n\t\"./cv.js\": 128,\n\t\"./cy\": 129,\n\t\"./cy.js\": 129,\n\t\"./da\": 130,\n\t\"./da.js\": 130,\n\t\"./de\": 131,\n\t\"./de-at\": 132,\n\t\"./de-at.js\": 132,\n\t\"./de-ch\": 133,\n\t\"./de-ch.js\": 133,\n\t\"./de.js\": 131,\n\t\"./dv\": 134,\n\t\"./dv.js\": 134,\n\t\"./el\": 135,\n\t\"./el.js\": 135,\n\t\"./en-au\": 136,\n\t\"./en-au.js\": 136,\n\t\"./en-ca\": 137,\n\t\"./en-ca.js\": 137,\n\t\"./en-gb\": 138,\n\t\"./en-gb.js\": 138,\n\t\"./en-ie\": 139,\n\t\"./en-ie.js\": 139,\n\t\"./en-nz\": 140,\n\t\"./en-nz.js\": 140,\n\t\"./eo\": 141,\n\t\"./eo.js\": 141,\n\t\"./es\": 142,\n\t\"./es-do\": 143,\n\t\"./es-do.js\": 143,\n\t\"./es.js\": 142,\n\t\"./et\": 144,\n\t\"./et.js\": 144,\n\t\"./eu\": 145,\n\t\"./eu.js\": 145,\n\t\"./fa\": 146,\n\t\"./fa.js\": 146,\n\t\"./fi\": 147,\n\t\"./fi.js\": 147,\n\t\"./fo\": 148,\n\t\"./fo.js\": 148,\n\t\"./fr\": 149,\n\t\"./fr-ca\": 150,\n\t\"./fr-ca.js\": 150,\n\t\"./fr-ch\": 151,\n\t\"./fr-ch.js\": 151,\n\t\"./fr.js\": 149,\n\t\"./fy\": 152,\n\t\"./fy.js\": 152,\n\t\"./gd\": 153,\n\t\"./gd.js\": 153,\n\t\"./gl\": 154,\n\t\"./gl.js\": 154,\n\t\"./gom-latn\": 155,\n\t\"./gom-latn.js\": 155,\n\t\"./he\": 156,\n\t\"./he.js\": 156,\n\t\"./hi\": 157,\n\t\"./hi.js\": 157,\n\t\"./hr\": 158,\n\t\"./hr.js\": 158,\n\t\"./hu\": 159,\n\t\"./hu.js\": 159,\n\t\"./hy-am\": 160,\n\t\"./hy-am.js\": 160,\n\t\"./id\": 161,\n\t\"./id.js\": 161,\n\t\"./is\": 162,\n\t\"./is.js\": 162,\n\t\"./it\": 163,\n\t\"./it.js\": 163,\n\t\"./ja\": 164,\n\t\"./ja.js\": 164,\n\t\"./jv\": 165,\n\t\"./jv.js\": 165,\n\t\"./ka\": 166,\n\t\"./ka.js\": 166,\n\t\"./kk\": 167,\n\t\"./kk.js\": 167,\n\t\"./km\": 168,\n\t\"./km.js\": 168,\n\t\"./kn\": 169,\n\t\"./kn.js\": 169,\n\t\"./ko\": 170,\n\t\"./ko.js\": 170,\n\t\"./ky\": 171,\n\t\"./ky.js\": 171,\n\t\"./lb\": 172,\n\t\"./lb.js\": 172,\n\t\"./lo\": 173,\n\t\"./lo.js\": 173,\n\t\"./lt\": 174,\n\t\"./lt.js\": 174,\n\t\"./lv\": 175,\n\t\"./lv.js\": 175,\n\t\"./me\": 176,\n\t\"./me.js\": 176,\n\t\"./mi\": 177,\n\t\"./mi.js\": 177,\n\t\"./mk\": 178,\n\t\"./mk.js\": 178,\n\t\"./ml\": 179,\n\t\"./ml.js\": 179,\n\t\"./mr\": 180,\n\t\"./mr.js\": 180,\n\t\"./ms\": 181,\n\t\"./ms-my\": 182,\n\t\"./ms-my.js\": 182,\n\t\"./ms.js\": 181,\n\t\"./my\": 183,\n\t\"./my.js\": 183,\n\t\"./nb\": 184,\n\t\"./nb.js\": 184,\n\t\"./ne\": 185,\n\t\"./ne.js\": 185,\n\t\"./nl\": 186,\n\t\"./nl-be\": 187,\n\t\"./nl-be.js\": 187,\n\t\"./nl.js\": 186,\n\t\"./nn\": 188,\n\t\"./nn.js\": 188,\n\t\"./pa-in\": 189,\n\t\"./pa-in.js\": 189,\n\t\"./pl\": 190,\n\t\"./pl.js\": 190,\n\t\"./pt\": 191,\n\t\"./pt-br\": 192,\n\t\"./pt-br.js\": 192,\n\t\"./pt.js\": 191,\n\t\"./ro\": 193,\n\t\"./ro.js\": 193,\n\t\"./ru\": 194,\n\t\"./ru.js\": 194,\n\t\"./sd\": 195,\n\t\"./sd.js\": 195,\n\t\"./se\": 196,\n\t\"./se.js\": 196,\n\t\"./si\": 197,\n\t\"./si.js\": 197,\n\t\"./sk\": 198,\n\t\"./sk.js\": 198,\n\t\"./sl\": 199,\n\t\"./sl.js\": 199,\n\t\"./sq\": 200,\n\t\"./sq.js\": 200,\n\t\"./sr\": 201,\n\t\"./sr-cyrl\": 202,\n\t\"./sr-cyrl.js\": 202,\n\t\"./sr.js\": 201,\n\t\"./ss\": 203,\n\t\"./ss.js\": 203,\n\t\"./sv\": 204,\n\t\"./sv.js\": 204,\n\t\"./sw\": 205,\n\t\"./sw.js\": 205,\n\t\"./ta\": 206,\n\t\"./ta.js\": 206,\n\t\"./te\": 207,\n\t\"./te.js\": 207,\n\t\"./tet\": 208,\n\t\"./tet.js\": 208,\n\t\"./th\": 209,\n\t\"./th.js\": 209,\n\t\"./tl-ph\": 210,\n\t\"./tl-ph.js\": 210,\n\t\"./tlh\": 211,\n\t\"./tlh.js\": 211,\n\t\"./tr\": 212,\n\t\"./tr.js\": 212,\n\t\"./tzl\": 213,\n\t\"./tzl.js\": 213,\n\t\"./tzm\": 214,\n\t\"./tzm-latn\": 215,\n\t\"./tzm-latn.js\": 215,\n\t\"./tzm.js\": 214,\n\t\"./uk\": 216,\n\t\"./uk.js\": 216,\n\t\"./ur\": 217,\n\t\"./ur.js\": 217,\n\t\"./uz\": 218,\n\t\"./uz-latn\": 219,\n\t\"./uz-latn.js\": 219,\n\t\"./uz.js\": 218,\n\t\"./vi\": 220,\n\t\"./vi.js\": 220,\n\t\"./x-pseudo\": 221,\n\t\"./x-pseudo.js\": 221,\n\t\"./yo\": 222,\n\t\"./yo.js\": 222,\n\t\"./zh-cn\": 223,\n\t\"./zh-cn.js\": 223,\n\t\"./zh-hk\": 224,\n\t\"./zh-hk.js\": 224,\n\t\"./zh-tw\": 225,\n\t\"./zh-tw.js\": 225\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 353;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 353\n// module chunks = 1","/* eslint-disable */\n/*\nTODO:\n1. export module name.\n2. publish into its own repo?\n3. fix lint errors.\n*/\nimport angular from 'angular';\nimport jQuery from 'jquery';\nimport sortable from 'jquery-ui/ui/widgets/sortable';\n\n/*\n jQuery UI Sortable plugin wrapper\n\n @param [ui-sortable] {object} Options to pass to $.fn.sortable() merged onto ui.config\n */\nangular.module('ui.sortable', [])\n  .value('uiSortableConfig', {\n    // the default for jquery-ui sortable is \"> *\", we need to restrict this to\n    // ng-repeat items\n    // if the user uses\n    items: '> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]',\n  })\n  .directive('uiSortable', [\n    'uiSortableConfig', '$timeout', '$log',\n    function (uiSortableConfig, $timeout, $log) {\n      return {\n        require: '?ngModel',\n        scope: {\n          ngModel: '=',\n          uiSortable: '=',\n        },\n        link(scope, element, attrs, ngModel) {\n          let savedNodes;\n          element = jQuery(element);\n\n          function combineCallbacks(first, second) {\n            const firstIsFunc = typeof first === 'function';\n            const secondIsFunc = typeof second === 'function';\n            if (firstIsFunc && secondIsFunc) {\n              return function () {\n                first.apply(this, arguments);\n                second.apply(this, arguments);\n              };\n            } else if (secondIsFunc) {\n              return second;\n            }\n            return first;\n          }\n\n          function getSortableWidgetInstance(element) {\n            // this is a fix to support jquery-ui prior to v1.11.x\n            // otherwise we should be using `element.sortable('instance')`\n            const data = element.data('ui-sortable');\n            if (data && typeof data === 'object' && data.widgetFullName === 'ui-sortable') {\n              return data;\n            }\n            return null;\n          }\n\n          function patchSortableOption(key, value) {\n            if (callbacks[key]) {\n              if (key === 'stop') {\n                // call apply after stop\n                value = combineCallbacks(\n                  value, () => { scope.$apply(); });\n\n                value = combineCallbacks(value, afterStop);\n              }\n              // wrap the callback\n              value = combineCallbacks(callbacks[key], value);\n            } else if (wrappers[key]) {\n              value = wrappers[key](value);\n            }\n\n            // patch the options that need to have values set\n            if (!value && (key === 'items' || key === 'ui-model-items')) {\n              value = uiSortableConfig.items;\n            }\n\n            return value;\n          }\n\n          function patchUISortableOptions(newVal, oldVal, sortableWidgetInstance) {\n            function addDummyOptionKey(value, key) {\n              if (!(key in opts)) {\n                // add the key in the opts object so that\n                // the patch function detects and handles it\n                opts[key] = null;\n              }\n            }\n            // for this directive to work we have to attach some callbacks\n            angular.forEach(callbacks, addDummyOptionKey);\n\n            // only initialize it in case we have to\n            // update some options of the sortable\n            let optsDiff = null;\n\n            if (oldVal) {\n              // reset deleted options to default\n              let defaultOptions;\n              angular.forEach(oldVal, (oldValue, key) => {\n                if (!newVal || !(key in newVal)) {\n                  if (key in directiveOpts) {\n                    if (key === 'ui-floating') {\n                      opts[key] = 'auto';\n                    } else {\n                      opts[key] = patchSortableOption(key, undefined);\n                    }\n                    return;\n                  }\n\n                  if (!defaultOptions) {\n                    defaultOptions = sortable().options;\n                  }\n                  let defaultValue = defaultOptions[key];\n                  defaultValue = patchSortableOption(key, defaultValue);\n\n                  if (!optsDiff) {\n                    optsDiff = {};\n                  }\n                  optsDiff[key] = defaultValue;\n                  opts[key] = defaultValue;\n                }\n              });\n            }\n\n            // update changed options\n            angular.forEach(newVal, (value, key) => {\n              // if it's a custom option of the directive,\n              // handle it approprietly\n              if (key in directiveOpts) {\n                if (key === 'ui-floating' && (value === false || value === true) && sortableWidgetInstance) {\n                  sortableWidgetInstance.floating = value;\n                }\n\n                opts[key] = patchSortableOption(key, value);\n                return;\n              }\n\n              value = patchSortableOption(key, value);\n\n              if (!optsDiff) {\n                optsDiff = {};\n              }\n              optsDiff[key] = value;\n              opts[key] = value;\n            });\n\n            return optsDiff;\n          }\n\n          function getPlaceholderElement(element) {\n            const placeholder = element.sortable('option', 'placeholder');\n\n            // placeholder.element will be a function if the placeholder, has\n            // been created (placeholder will be an object).  If it hasn't\n            // been created, either placeholder will be false if no\n            // placeholder class was given or placeholder.element will be\n            // undefined if a class was given (placeholder will be a string)\n            if (placeholder && placeholder.element && typeof placeholder.element === 'function') {\n              let result = placeholder.element();\n              // workaround for jquery ui 1.9.x,\n              // not returning jquery collection\n              result = jQuery(result);\n              return result;\n            }\n            return null;\n          }\n\n          function getPlaceholderExcludesludes(element, placeholder) {\n            // exact match with the placeholder's class attribute to handle\n            // the case that multiple connected sortables exist and\n            // the placeholder option equals the class of sortable items\n            const notCssSelector = opts['ui-model-items'].replace(/[^,]*>/g, '');\n            const excludes = element.find(`[class=\"${placeholder.attr('class')}\"]:not(${notCssSelector})`);\n            return excludes;\n          }\n\n          function hasSortingHelper(element, ui) {\n            const helperOption = element.sortable('option', 'helper');\n            return helperOption === 'clone' || (typeof helperOption === 'function' && ui.item.sortable.isCustomHelperUsed());\n          }\n\n          function getSortingHelper(element, ui, savedNodes) {\n            let result = null;\n            if (hasSortingHelper(element, ui) &&\n                element.sortable('option', 'appendTo') === 'parent') {\n              // The .ui-sortable-helper element (that's the default class name)\n              // is placed last.\n              result = savedNodes.last();\n            }\n            return result;\n          }\n\n          // thanks jquery-ui\n          function isFloating(item) {\n            return (/left|right/).test(item.css('float')) || (/inline|table-cell/).test(item.css('display'));\n          }\n\n          function getElementScope(elementScopes, element) {\n            let result = null;\n            for (let i = 0; i < elementScopes.length; i++) {\n              const x = elementScopes[i];\n              if (x.element[0] === element[0]) {\n                result = x.scope;\n                break;\n              }\n            }\n            return result;\n          }\n\n          function afterStop(e, ui) {\n            ui.item.sortable._destroy();\n          }\n\n          // return the index of ui.item among the items\n          // we can't just do ui.item.index() because there it might have siblings\n          // which are not items\n          function getItemIndex(item) {\n            return item.parent()\n              .find(opts['ui-model-items'])\n              .index(item);\n          }\n\n          let opts = {};\n\n          // directive specific options\n          let directiveOpts = {\n            'ui-floating': undefined,\n            'ui-model-items': uiSortableConfig.items,\n          };\n\n          let callbacks = {\n            receive: null,\n            remove: null,\n            start: null,\n            stop: null,\n            update: null,\n          };\n\n          let wrappers = {\n            helper: null,\n          };\n\n          angular.extend(opts, directiveOpts, uiSortableConfig, scope.uiSortable);\n\n          function wireUp() {\n            // When we add or remove elements, we need the sortable to 'refresh'\n            // so it can find the new/removed elements.\n            scope.$watchCollection('ngModel', () => {\n              // Timeout to let ng-repeat modify the DOM\n              $timeout(() => {\n                // ensure that the jquery-ui-sortable widget instance\n                // is still bound to the directive's element\n                if (!!getSortableWidgetInstance(element)) {\n                  element.sortable('refresh');\n                }\n              }, 0, false);\n            });\n\n            callbacks.start = function (e, ui) {\n              if (opts['ui-floating'] === 'auto') {\n                // since the drag has started, the element will be\n                // absolutely positioned, so we check its siblings\n                const siblings = ui.item.siblings();\n                const sortableWidgetInstance = getSortableWidgetInstance(jQuery(e.target));\n                sortableWidgetInstance.floating = isFloating(siblings);\n              }\n\n              // Save the starting position of dragged item\n              const index = getItemIndex(ui.item);\n              ui.item.sortable = {\n                model: ngModel.$modelValue[index],\n                index,\n                source: ui.item.parent(),\n                sourceModel: ngModel.$modelValue,\n                cancel() {\n                  ui.item.sortable._isCanceled = true;\n                },\n                isCanceled() {\n                  return ui.item.sortable._isCanceled;\n                },\n                isCustomHelperUsed() {\n                  return !!ui.item.sortable._isCustomHelperUsed;\n                },\n                _isCanceled: false,\n                _isCustomHelperUsed: ui.item.sortable._isCustomHelperUsed,\n                _destroy() {\n                  angular.forEach(ui.item.sortable, (value, key) => {\n                    ui.item.sortable[key] = undefined;\n                  });\n                },\n              };\n            };\n\n            callbacks.activate = function (e, ui) {\n              // We need to make a copy of the current element's contents so\n              // we can restore it after sortable has messed it up.\n              // This is inside activate (instead of start) in order to save\n              // both lists when dragging between connected lists.\n              savedNodes = element.contents();\n\n              // If this list has a placeholder (the connected lists won't),\n              // don't inlcude it in saved nodes.\n              const placeholder = getPlaceholderElement(element);\n              if (placeholder && placeholder.length) {\n                const excludes = getPlaceholderExcludesludes(element, placeholder);\n                savedNodes = savedNodes.not(excludes);\n              }\n\n              // save the directive's scope so that it is accessible from ui.item.sortable\n              const connectedSortables = ui.item.sortable._connectedSortables || [];\n\n              connectedSortables.push({\n                element,\n                scope,\n              });\n\n              ui.item.sortable._connectedSortables = connectedSortables;\n            };\n\n            callbacks.update = function (e, ui) {\n              // Save current drop position but only if this is not a second\n              // update that happens when moving between lists because then\n              // the value will be overwritten with the old value\n              if (!ui.item.sortable.received) {\n                ui.item.sortable.dropindex = getItemIndex(ui.item);\n                const droptarget = ui.item.parent();\n                ui.item.sortable.droptarget = droptarget;\n\n                const droptargetScope = getElementScope(ui.item.sortable._connectedSortables, droptarget);\n                ui.item.sortable.droptargetModel = droptargetScope.ngModel;\n\n                // Cancel the sort (let ng-repeat do the sort for us)\n                // Don't cancel if this is the received list because it has\n                // already been canceled in the other list, and trying to cancel\n                // here will mess up the DOM.\n                element.sortable('cancel');\n              }\n\n              // Put the nodes back exactly the way they started (this is very\n              // important because ng-repeat uses comment elements to delineate\n              // the start and stop of repeat sections and sortable doesn't\n              // respect their order (even if we cancel, the order of the\n              // comments are still messed up).\n              const sortingHelper = !ui.item.sortable.received && getSortingHelper(element, ui, savedNodes);\n              if (sortingHelper && sortingHelper.length) {\n                // Restore all the savedNodes except from the sorting helper element.\n                // That way it will be garbage collected.\n                savedNodes = savedNodes.not(sortingHelper);\n              }\n              savedNodes.appendTo(element);\n\n              // If this is the target connected list then\n              // it's safe to clear the restored nodes since:\n              // update is currently running and\n              // stop is not called for the target list.\n              if (ui.item.sortable.received) {\n                savedNodes = null;\n              }\n\n              // If received is true (an item was dropped in from another list)\n              // then we add the new item to this list otherwise wait until the\n              // stop event where we will know if it was a sort or item was\n              // moved here from another list\n              if (ui.item.sortable.received && !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0,\n                                             ui.item.sortable.moved);\n                });\n              }\n            };\n\n            callbacks.stop = function (e, ui) {\n              // If the received flag hasn't be set on the item, this is a\n              // normal sort, if dropindex is set, the item was moved, so move\n              // the items in the list.\n              if (!ui.item.sortable.received &&\n                 ('dropindex' in ui.item.sortable) &&\n                 !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(\n                    ui.item.sortable.dropindex, 0,\n                    ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0]);\n                });\n              } else {\n                // if the item was not moved, then restore the elements\n                // so that the ngRepeat's comment are correct.\n                if ((!('dropindex' in ui.item.sortable) || ui.item.sortable.isCanceled()) &&\n                    !angular.equals(element.contents(), savedNodes)) {\n                  const sortingHelper = getSortingHelper(element, ui, savedNodes);\n                  if (sortingHelper && sortingHelper.length) {\n                    // Restore all the savedNodes except from the sorting helper element.\n                    // That way it will be garbage collected.\n                    savedNodes = savedNodes.not(sortingHelper);\n                  }\n                  savedNodes.appendTo(element);\n                }\n              }\n\n              // It's now safe to clear the savedNodes\n              // since stop is the last callback.\n              savedNodes = null;\n            };\n\n            callbacks.receive = function (e, ui) {\n              // An item was dropped here from another list, set a flag on the\n              // item.\n              ui.item.sortable.received = true;\n            };\n\n            callbacks.remove = function (e, ui) {\n              // Workaround for a problem observed in nested connected lists.\n              // There should be an 'update' event before 'remove' when moving\n              // elements. If the event did not fire, cancel sorting.\n              if (!('dropindex' in ui.item.sortable)) {\n                element.sortable('cancel');\n                ui.item.sortable.cancel();\n              }\n\n              // Remove the item from this list's model and copy data into item,\n              // so the next list can retrive it\n              if (!ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ui.item.sortable.moved = ngModel.$modelValue.splice(\n                    ui.item.sortable.index, 1)[0];\n                });\n              }\n            };\n\n            wrappers.helper = function (inner) {\n              if (inner && typeof inner === 'function') {\n                return function (e, item) {\n                  const oldItemSortable = item.sortable;\n                  const index = getItemIndex(item);\n                  item.sortable = {\n                    model: ngModel.$modelValue[index],\n                    index,\n                    source: item.parent(),\n                    sourceModel: ngModel.$modelValue,\n                    _restore() {\n                      angular.forEach(item.sortable, (value, key) => {\n                        item.sortable[key] = undefined;\n                      });\n\n                      item.sortable = oldItemSortable;\n                    },\n                  };\n\n                  const innerResult = inner.apply(this, arguments);\n                  item.sortable._restore();\n                  item.sortable._isCustomHelperUsed = item !== innerResult;\n                  return innerResult;\n                };\n              }\n              return inner;\n            };\n\n            scope.$watchCollection('uiSortable', (newVal, oldVal) => {\n              // ensure that the jquery-ui-sortable widget instance\n              // is still bound to the directive's element\n              const sortableWidgetInstance = getSortableWidgetInstance(element);\n              if (!!sortableWidgetInstance) {\n                const optsDiff = patchUISortableOptions(newVal, oldVal, sortableWidgetInstance);\n\n                if (optsDiff) {\n                  element.sortable('option', optsDiff);\n                }\n              }\n            }, true);\n\n            patchUISortableOptions(opts);\n          }\n\n          function init() {\n            if (ngModel) {\n              wireUp();\n            } else {\n              $log.info('ui.sortable: ngModel not provided!', element);\n            }\n\n            // Create sortable\n            element.sortable(opts);\n          }\n\n          function initIfEnabled() {\n            if (scope.uiSortable && scope.uiSortable.disabled) {\n              return false;\n            }\n\n            init();\n\n            // Stop Watcher\n            initIfEnabled.cancelWatcher();\n            initIfEnabled.cancelWatcher = angular.noop;\n\n            return true;\n          }\n\n          initIfEnabled.cancelWatcher = angular.noop;\n\n          if (!initIfEnabled()) {\n            initIfEnabled.cancelWatcher = scope.$watch('uiSortable.disabled', initIfEnabled);\n          }\n        },\n      };\n    },\n  ]);\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/sortable.js","import moment from 'moment';\nimport _capitalize from 'underscore.string/capitalize';\nimport { isEmpty } from 'underscore';\n\n// eslint-disable-next-line\nconst urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\nexport function durationHumanize(duration) {\n  let humanized = '';\n\n  if (duration === undefined) {\n    humanized = '-';\n  } else if (duration < 60) {\n    const seconds = Math.round(duration);\n    humanized = `${seconds}s`;\n  } else if (duration > 3600 * 24) {\n    const days = Math.round(parseFloat(duration) / 60.0 / 60.0 / 24.0);\n    humanized = `${days}days`;\n  } else if (duration >= 3600) {\n    const hours = Math.round(parseFloat(duration) / 60.0 / 60.0);\n    humanized = `${hours}h`;\n  } else {\n    const minutes = Math.round(parseFloat(duration) / 60.0);\n    humanized = `${minutes}m`;\n  }\n  return humanized;\n}\n\nexport function scheduleHumanize(schedule) {\n  if (schedule === null) {\n    return 'Never';\n  } else if (schedule.match(/\\d\\d:\\d\\d/) !== null) {\n    const parts = schedule.split(':');\n    const localTime = moment.utc()\n      .hour(parts[0])\n      .minute(parts[1])\n      .local()\n      .format('HH:mm');\n\n    return `Every day at ${localTime}`;\n  }\n\n  return `Every ${durationHumanize(parseInt(schedule, 10))}`;\n}\n\nexport function toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, a =>\n    a.toUpperCase());\n}\n\nexport function colWidth(widgetWidth) {\n  if (widgetWidth === 0) {\n    return 0;\n  } else if (widgetWidth === 1) {\n    return 6;\n  } else if (widgetWidth === 2) {\n    return 12;\n  }\n  return widgetWidth;\n}\n\nexport function capitalize(text) {\n  if (text) {\n    return _capitalize(text);\n  }\n\n  return null;\n}\n\nexport function linkify(text) {\n  return text.replace(urlPattern, \"$1<a href='$2' target='_blank'>$2</a>\");\n}\n\nexport function remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  let notEquals;\n\n  if (item instanceof Array) {\n    notEquals = other => item.indexOf(other) === -1;\n  } else {\n    notEquals = other => item !== other;\n  }\n\n  const filtered = [];\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\nexport function notEmpty(collection) {\n  return !isEmpty(collection);\n}\n\nexport function showError(field, form) {\n  return (field.$touched && field.$invalid) || form.$submitted;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/filters/index.js","import debug from 'debug';\n\nconst logger = debug('redash:directives');\n\nfunction compareTo() {\n  return {\n    require: 'ngModel',\n    scope: {\n      otherModelValue: '=compareTo',\n    },\n    link(scope, element, attributes, ngModel) {\n      const validate = (value) => {\n        ngModel.$setValidity('compareTo', value === scope.otherModelValue);\n      };\n\n      scope.$watch('otherModelValue', () => {\n        validate(ngModel.$modelValue);\n      });\n\n      ngModel.$parsers.push((value) => {\n        validate(value);\n        return value;\n      });\n    },\n  };\n}\n\nfunction autofocus($timeout) {\n  return {\n    link(scope, element) {\n      $timeout(() => {\n        element[0].focus();\n      });\n    },\n  };\n}\n\nfunction TitleService($rootScope) {\n  const Title = {\n    title: 'Redash',\n    set(newTitle) {\n      this.title = newTitle;\n      $rootScope.$broadcast('$titleChange');\n    },\n    get() {\n      return this.title;\n    },\n  };\n\n  return Title;\n}\n\nfunction title($rootScope, Title) {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      function updateTitle() {\n        const newTitle = Title.get();\n        logger('Updating title to: %s', newTitle);\n        element.text(newTitle);\n      }\n\n      $rootScope.$on('$routeChangeSuccess', (event, to) => {\n        if (to.title) {\n          Title.set(to.title);\n        }\n      });\n      $rootScope.$on('$titleChange', updateTitle);\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Title', TitleService);\n  ngModule.directive('title', title);\n  ngModule.directive('compareTo', compareTo);\n  ngModule.directive('autofocus', autofocus);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/directives/index.js","import { markdown } from 'markdown';\n\nexport default function init(ngModule) {\n  ngModule.filter('markdown', ($sce, clientConfig) =>\n    function parseMarkdown(text) {\n      if (!text) {\n        return '';\n      }\n\n      let html = markdown.toHTML(String(text));\n      if (clientConfig.allowScriptsInUserInput) {\n        html = $sce.trustAsHtml(html);\n      }\n\n      return html;\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/filters/markdown.js","import moment from 'moment';\n\nexport default function init(ngModule) {\n  ngModule.filter('toMilliseconds', () => value => value * 1000.0);\n\n  ngModule.filter('dateTime', clientConfig =>\n    function dateTime(value) {\n      if (!value) {\n        return '-';\n      }\n\n      return moment(value).format(clientConfig.dateTimeFormat);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/filters/datetime.js","var map = {\n\t\"./alerts/alert-subscriptions/index.js\": 374,\n\t\"./app-header/index.js\": 376,\n\t\"./cancel-query-button/index.js\": 379,\n\t\"./dashboards/add-widget-dialog.js\": 380,\n\t\"./dashboards/edit-dashboard-dialog.js\": 382,\n\t\"./dashboards/widget.js\": 384,\n\t\"./dynamic-form.js\": 387,\n\t\"./dynamic-table/index.js\": 390,\n\t\"./edit-in-place.js\": 393,\n\t\"./email-settings-warning/index.js\": 394,\n\t\"./error-messages.js\": 395,\n\t\"./filters.js\": 396,\n\t\"./footer/index.js\": 398,\n\t\"./groups/edit-group-dialog.js\": 400,\n\t\"./groups/group-name.js\": 402,\n\t\"./overlay.js\": 403,\n\t\"./page-header/index.js\": 404,\n\t\"./paginator.js\": 406,\n\t\"./parameters.js\": 407,\n\t\"./permissions-editor/index.js\": 411,\n\t\"./queries/alert-unsaved-changes.js\": 413,\n\t\"./queries/api-key-dialog.js\": 414,\n\t\"./queries/embed-code-dialog.js\": 415,\n\t\"./queries/query-editor.js\": 417,\n\t\"./queries/query-results-link.js\": 423,\n\t\"./queries/schedule-dialog.js\": 424,\n\t\"./queries/schema-browser.js\": 426,\n\t\"./queries/visualization-embed.js\": 428,\n\t\"./query-link.js\": 430,\n\t\"./rd-tab/index.js\": 431,\n\t\"./rd-time-ago.js\": 432,\n\t\"./rd-timer.js\": 433,\n\t\"./route-status.js\": 434,\n\t\"./settings-screen.js\": 435,\n\t\"./sort-icon.js\": 437,\n\t\"./tab-nav/index.js\": 438,\n\t\"./visualization-name.js\": 439\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 373;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components ^((?![\\\\/]test[\\\\/]).)*\\.js$\n// module id = 373\n// module chunks = 1","import { contains, without, compact } from 'underscore';\nimport template from './alert-subscriptions.html';\n\nfunction controller($scope, $q, $sce, currentUser, AlertSubscription, Destination, toastr) {\n  'ngInject';\n\n  $scope.newSubscription = {};\n  $scope.subscribers = [];\n  $scope.destinations = [];\n  $scope.currentUser = currentUser;\n\n  $q\n    .all([\n      Destination.query().$promise,\n      AlertSubscription.query({ alertId: $scope.alertId }).$promise,\n    ])\n    .then((responses) => {\n      const destinations = responses[0];\n      const subscribers = responses[1];\n\n      const mapF = s => s.destination && s.destination.id;\n      const subscribedDestinations = compact(subscribers.map(mapF));\n\n      const subscribedUsers = compact(subscribers.map(s => !s.destination && s.user.id));\n\n      $scope.destinations = destinations.filter(d => !contains(subscribedDestinations, d.id));\n\n      if (!contains(subscribedUsers, currentUser.id)) {\n        $scope.destinations.unshift({ user: { name: currentUser.name } });\n      }\n\n      $scope.newSubscription.destination = $scope.destinations[0];\n      $scope.subscribers = subscribers;\n    });\n\n  $scope.destinationsDisplay = (d) => {\n    if (!d) {\n      return '';\n    }\n\n    let destination = d;\n    if (d.destination) {\n      destination = destination.destination;\n    } else if (destination.user) {\n      destination = {\n        name: `${d.user.name} (Email)`,\n        icon: 'fa-envelope',\n        type: 'user',\n      };\n    }\n\n    return $sce.trustAsHtml(`<i class=\"fa ${destination.icon}\"></i>&nbsp;${destination.name}`);\n  };\n\n  $scope.saveSubscriber = () => {\n    const sub = new AlertSubscription({ alert_id: $scope.alertId });\n    if ($scope.newSubscription.destination.id) {\n      sub.destination_id = $scope.newSubscription.destination.id;\n    }\n\n    sub.$save(\n      () => {\n        toastr.success('Subscribed.');\n        $scope.subscribers.push(sub);\n        $scope.destinations = without($scope.destinations, $scope.newSubscription.destination);\n        if ($scope.destinations.length > 0) {\n          $scope.newSubscription.destination = $scope.destinations[0];\n        } else {\n          $scope.newSubscription.destination = undefined;\n        }\n      },\n      () => {\n        toastr.error('Failed saving subscription.');\n      },\n    );\n  };\n\n  $scope.unsubscribe = (subscriber) => {\n    const destination = subscriber.destination;\n    const user = subscriber.user;\n\n    subscriber.$delete(\n      () => {\n        toastr.success('Unsubscribed');\n        $scope.subscribers = without($scope.subscribers, subscriber);\n        if (destination) {\n          $scope.destinations.push(destination);\n        } else if (user.id === currentUser.id) {\n          $scope.destinations.push({ user: { name: currentUser.name } });\n        }\n\n        if ($scope.destinations.length === 1) {\n          $scope.newSubscription.destination = $scope.destinations[0];\n        }\n      },\n      () => {\n        toastr.error('Failed unsubscribing.');\n      },\n    );\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('alertSubscriptions', () => ({\n    restrict: 'E',\n    replace: true,\n    scope: {\n      alertId: '=',\n    },\n    template,\n    controller,\n  }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/alerts/alert-subscriptions/index.js","module.exports = \"<div class=\\\"p-5\\\">\\n  <h4>Notifications</h4>\\n\\n  <div>\\n    <ui-select ng-model=\\\"newSubscription.destination\\\" ng-disabled=\\\"destinations.length == 0\\\">\\n      <ui-select-match><span ng-bind-html=\\\"destinationsDisplay($select.selected)\\\"></span></ui-select-match>\\n      <ui-select-choices repeat=\\\"d in destinations\\\">\\n        <span ng-bind-html=\\\"destinationsDisplay(d)\\\"></span>\\n      </ui-select-choices>\\n    </ui-select>\\n  </div>\\n  <div class=\\\"m-t-5\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"saveSubscriber()\\\" ng-disabled=\\\"destinations.length == 0\\\" style=\\\"width:50%;\\\">Add</button>\\n    <span class=\\\"pull-right m-t-5\\\">\\n      <a href=\\\"destinations/new\\\" ng-if=\\\"currentUser.isAdmin\\\">Create New Destination</a>\\n    </span>\\n  </div>\\n\\n  <hr/>\\n\\n  <div>\\n    <div class=\\\"list-group-item\\\" ng-repeat=\\\"subscriber in subscribers\\\">\\n      <span ng-bind-html=\\\"destinationsDisplay(subscriber)\\\"></span>\\n      <button class=\\\"btn btn-xs btn-danger pull-right\\\" ng-click=\\\"unsubscribe(subscriber)\\\" ng-if=\\\"currentUser.isAdmin || currentUser.id == subscriber.user.id\\\">Remove</button>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/alerts/alert-subscriptions/alert-subscriptions.html\n// module id = 375\n// module chunks = 1","import debug from 'debug';\n\nimport logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './app-header.html';\nimport './app-header.css';\n\nconst logger = debug('redash:appHeader');\n\nfunction controller($rootScope, $location, $uibModal, Auth, currentUser, clientConfig, Dashboard) {\n  this.logoUrl = logoUrl;\n  this.basePath = clientConfig.basePath;\n  this.currentUser = currentUser;\n  this.showQueriesMenu = currentUser.hasPermission('view_query');\n  this.showAlertsLink = currentUser.hasPermission('list_alerts');\n  this.showNewQueryMenu = currentUser.hasPermission('create_query');\n  this.showSettingsMenu = currentUser.hasPermission('list_users');\n  this.showDashboardsMenu = currentUser.hasPermission('list_dashboards');\n\n  this.reloadDashboards = () => {\n    logger('Reloading dashboards.');\n    this.dashboards = Dashboard.recent();\n  };\n\n  this.reloadDashboards();\n\n  $rootScope.$on('reloadDashboards', this.reloadDashboards);\n\n  this.newDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => ({ name: null, layout: null }),\n      },\n    });\n  };\n\n  this.searchQueries = () => {\n    $location.path('/queries/search').search({ q: this.term });\n  };\n\n  this.logout = () => {\n    Auth.logout();\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('appHeader', {\n    template,\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/app-header/index.js","module.exports = \"<nav class=\\\"navbar navbar-inverse navbar-fixed-top app-header\\\" role=\\\"navigation\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"isNavOpen = !isNavOpen\\\">\\n        <span class=\\\"sr-only\\\">Toggle navigation</span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n      </button>\\n      <a class=\\\"navbar-brand\\\" ng-href=\\\"{{$ctrl.basePath}}\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n    <div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"!isNavOpen\\\">\\n      <ul class=\\\"nav navbar-nav\\\">\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showDashboardsMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle title=\\\"Dashboards\\\">\\n            <span class=\\\"visible-xs visible-md visible-lg\\\">Dashboards <b class=\\\"caret\\\"></b></span>\\n            <span class=\\\"visible-sm\\\"><i class=\\\"zmdi zmdi-view-dashboard\\\"></i> <b class=\\\"caret\\\"></b></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li><a ng-show=\\\"$ctrl.currentUser.hasPermission('create_dashboard')\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard</a></li>\\n            <li><a href=\\\"dashboards\\\">Dashboards</a></li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.dashboards | notEmpty\\\"></li>\\n            <li ng-repeat=\\\"dashboard in $ctrl.dashboards\\\">\\n              <a href=\\\"dashboard/{{dashboard.slug}}\\\" ng-bind=\\\"dashboard.name\\\"></a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li class=\\\"dropdown\\\" ng-show=\\\"$ctrl.showQueriesMenu\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle>Queries <b class=\\\"caret\\\"></b></a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-show=\\\"$ctrl.showNewQueryMenu\\\"><a href=\\\"queries/new\\\">New Query</a></li>\\n            <li><a href=\\\"queries\\\">Queries</a></li>\\n          </ul>\\n        </li>\\n        <li ng-if=\\\"$ctrl.showAlertsLink\\\">\\n          <a href=\\\"alerts\\\">Alerts</a>\\n        </li>\\n      </ul>\\n      <form class=\\\"navbar-form navbar-left\\\" role=\\\"search\\\" ng-submit=\\\"$ctrl.searchQueries()\\\">\\n        <div class=\\\"input-group menu-search\\\">\\n          <input type=\\\"text\\\" ng-model=\\\"$ctrl.term\\\" class=\\\"form-control\\\" placeholder=\\\"Search queries...\\\">\\n          <span class=\\\"input-group-btn\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default\\\"><span class=\\\"zmdi zmdi-search\\\"></span></button>\\n          </span>\\n        </div>\\n      </form>\\n      <ul class=\\\"nav navbar-nav navbar-right\\\">\\n        <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n          <a href=\\\"data_sources\\\" title=\\\"Data Sources\\\"><i class=\\\"fa fa-database\\\"></i></a>\\n        </li>\\n        <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n          <a href=\\\"users\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a>\\n        </li>\\n        <li class=\\\"dropdown\\\" uib-dropdown>\\n          <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle><span ng-bind=\\\"$ctrl.currentUser.name\\\"></span> <span\\n            class=\\\"caret\\\"></span></a>\\n          <ul class=\\\"dropdown-menu\\\" dropdown-menu>\\n            <li style=\\\"width:300px\\\">\\n              <a ng-href=\\\"users/{{$ctrl.currentUser.id}}\\\">\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-sm-2\\\">\\n                    <img ng-src=\\\"{{$ctrl.currentUser.gravatar_url}}\\\" size=\\\"40px\\\" class=\\\"img-circle\\\" />\\n                  </div>\\n                  <div class=\\\"col-sm-10\\\">\\n                    <p><strong>{{$ctrl.currentUser.name}}</strong></p>\\n                  </div>\\n                </div>\\n              </a>\\n            </li>\\n            <li class=\\\"divider\\\" ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\">\\n              <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n              <li class=\\\"divider\\\">\\n              </li>\\n              <li>\\n                <a ng-click=\\\"$ctrl.logout()\\\">Log out</a>\\n              </li>\\n          </ul>\\n          </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/app-header/app-header.html\n// module id = 377\n// module chunks = 1","function cancelQueryButton() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryId: '=',\n      taskId: '=',\n    },\n    transclude: true,\n    template: '<button class=\"btn btn-default\" ng-disabled=\"inProgress\" ng-click=\"cancelExecution()\"><i class=\"zmdi zmdi-spinner zmdi-hc-spin\" ng-if=\"inProgress\"></i> Cancel</button>',\n    replace: true,\n    controller($scope, $http, currentUser, Events) {\n      $scope.inProgress = false;\n\n      $scope.cancelExecution = () => {\n        $http.delete(`api/jobs/${$scope.taskId}`).success(() => {\n        });\n\n        let queryId = $scope.queryId;\n        if ($scope.queryId === 'adhoc') {\n          queryId = null;\n        }\n\n        Events.record('cancel_execute', 'query', queryId, { admin: true });\n        $scope.inProgress = true;\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('cancelQueryButton', cancelQueryButton);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/cancel-query-button/index.js","import template from './add-widget-dialog.html';\n\nconst AddWidgetDialog = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($sce, toastr, Query, Widget) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n    this.saveInProgress = false;\n    this.widgetSize = 1;\n    this.selectedVis = null;\n    this.query = {};\n    this.selected_query = undefined;\n    this.text = '';\n    this.existing_text = '';\n    this.new_text = '';\n    this.widgetSizes = [{\n      name: 'Regular',\n      value: 1,\n    }, {\n      name: 'Double',\n      value: 2,\n    }];\n\n    this.type = 'visualization';\n\n    this.trustAsHtml = html => $sce.trustAsHtml(html);\n    this.isVisualization = () => this.type === 'visualization';\n    this.isTextBox = () => this.type === 'textbox';\n\n    this.setType = (type) => {\n      this.type = type;\n      if (type === 'textbox') {\n        this.widgetSizes.push({ name: 'Hidden', value: 0 });\n      } else if (this.widgetSizes.length > 2) {\n        this.widgetSizes.pop();\n      }\n    };\n\n    this.onQuerySelect = () => {\n      if (!this.query.selected) {\n        return;\n      }\n\n      Query.get({ id: this.query.selected.id }, (query) => {\n        if (query) {\n          this.selected_query = query;\n          if (query.visualizations.length) {\n            this.selectedVis = query.visualizations[0];\n          }\n        }\n      });\n    };\n\n    this.searchQueries = (term) => {\n      if (!term || term.length < 3) {\n        return;\n      }\n\n      Query.search({ q: term }, (results) => {\n        this.queries = results;\n      });\n    };\n\n    this.saveWidget = () => {\n      this.saveInProgress = true;\n      const widget = new Widget({\n        visualization_id: this.selectedVis && this.selectedVis.id,\n        dashboard_id: this.dashboard.id,\n        options: {},\n        width: this.widgetSize,\n        text: this.text,\n      });\n\n      widget.$save().then((response) => {\n        // update dashboard layout\n        this.dashboard.layout = response.layout;\n        this.dashboard.version = response.version;\n        const newWidget = new Widget(response.widget);\n        if (response.new_row) {\n          this.dashboard.widgets.push([newWidget]);\n        } else {\n          this.dashboard.widgets[this.dashboard.widgets.length - 1].push(newWidget);\n        }\n        this.close();\n      }).catch(() => {\n        toastr.error('Widget can not be added');\n      }).finally(() => {\n        this.saveInProgress = false;\n      });\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('addWidgetDialog', AddWidgetDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dashboards/add-widget-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\" ng-click=\\\"$ctrl.dismiss()\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Add Widget</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p class=\\\"btn-group\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isVisualization()}\\\" ng-click=\\\"$ctrl.setType('visualization')\\\">Visualization</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{active: $ctrl.isTextBox()}\\\" ng-click=\\\"$ctrl.setType('textbox')\\\">Text Box</button>\\n  </p>\\n\\n  <div ng-show=\\\"$ctrl.isTextBox()\\\">\\n      <div class=\\\"form-group\\\">\\n          <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.text\\\" rows=\\\"3\\\"></textarea>\\n      </div>\\n      <div ng-show=\\\"$ctrl.text\\\">\\n          <strong>Preview:</strong>\\n          <p ng-bind-html=\\\"$ctrl.text | markdown\\\"></p>\\n      </div>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.isVisualization()\\\">\\n      <div class=\\\"form-group\\\">\\n          <ui-select ng-model=\\\"$ctrl.query.selected\\\" theme=\\\"bootstrap\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelect($item, $model)\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                  <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n          </ui-select>\\n      </div>\\n\\n      <div ng-show=\\\"$ctrl.selected_query\\\">\\n          <div class=\\\"form-group\\\">\\n              <label for=\\\"\\\">Choose Visualization</label>\\n              <select ng-model=\\\"$ctrl.selectedVis\\\" ng-options=\\\"vis as vis.name group by vis.type for vis in $ctrl.selected_query.visualizations\\\" class=\\\"form-control\\\"></select>\\n          </div>\\n      </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n      <label for=\\\"\\\">Widget Size</label>\\n      <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.widgetSize\\\"\\n              ng-options=\\\"c.value as c.name for c in $ctrl.widgetSizes\\\"></select>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !($ctrl.selectedVis || $ctrl.isTextBox())\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Add to Dashboard</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dashboards/add-widget-dialog.html\n// module id = 381\n// module chunks = 1","import { isEmpty, sortBy } from 'underscore';\nimport template from './edit-dashboard-dialog.html';\n\nconst EditDashboardDialog = {\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n  controller($rootScope, $location, $http, toastr, Events, Dashboard) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n    this.gridsterOptions = {\n      margins: [5, 5],\n      rowHeight: 100,\n      colWidth: 260,\n      columns: 2,\n      mobileModeEnabled: false,\n      swapping: true,\n      minRows: 1,\n      draggable: {\n        enabled: true,\n      },\n      resizable: {\n        enabled: false,\n      },\n    };\n\n    this.items = [];\n\n    if (this.dashboard.widgets) {\n      this.dashboard.widgets.forEach((row, rowIndex) => {\n        row.forEach((widget, colIndex) => {\n          this.items.push({\n            id: widget.id,\n            col: colIndex,\n            row: rowIndex,\n            sizeY: 1,\n            sizeX: widget.width,\n            name: widget.getName(), // visualization.query.name\n          });\n        });\n      });\n    }\n\n    this.isFormValid = () => !isEmpty(this.dashboard.name);\n\n    this.saveDashboard = () => {\n      this.saveInProgress = true;\n\n      if (this.dashboard.id) {\n        const layout = [];\n        const sortedItems = sortBy(this.items, item => item.row * 10 + item.col);\n\n        sortedItems.forEach((item) => {\n          layout[item.row] = layout[item.row] || [];\n          if (item.col > 0 && layout[item.row][item.col - 1] === undefined) {\n            layout[item.row][item.col - 1] = item.id;\n          } else {\n            layout[item.row][item.col] = item.id;\n          }\n        });\n\n        const request = {\n          slug: this.dashboard.id,\n          name: this.dashboard.name,\n          version: this.dashboard.version,\n          dashboard_filters_enabled: this.dashboard.dashboard_filters_enabled,\n          layout: JSON.stringify(layout),\n        };\n\n        Dashboard.save(request, (dashboard) => {\n          this.dashboard = dashboard;\n          this.saveInProgress = false;\n          this.close({ $value: this.dashboard });\n          $rootScope.$broadcast('reloadDashboards');\n        }, (error) => {\n          this.saveInProgress = false;\n          if (error.status === 403) {\n            toastr.error('Unable to save dashboard: Permission denied.');\n          } else if (error.status === 409) {\n            toastr.error('It seems like the dashboard has been modified by another user. ' +\n                'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n          }\n        });\n        Events.record('edit', 'dashboard', this.dashboard.id);\n      } else {\n        $http.post('api/dashboards', {\n          name: this.dashboard.name,\n        }).success((response) => {\n          this.close();\n          $location.path(`/dashboard/${response.slug}`).replace();\n        });\n        Events.record('create', 'dashboard');\n      }\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editDashboardDialog', EditDashboardDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dashboards/edit-dashboard-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"$ctrl.dismiss()\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\">&times;</button>\\n  <h4 class=\\\"modal-title\\\">Edit: {{$ctrl.dashboard.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <p>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Dashboard Name\\\" ng-model=\\\"$ctrl.dashboard.name\\\" autofocus>\\n  </p>\\n\\n  <p ng-if=\\\"$ctrl.dashboard.id\\\">\\n    <label>\\n        <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\">\\n        Use Dashboard Level Filters\\n    </label>\\n  </p>\\n\\n  <div gridster=\\\"$ctrl.gridsterOptions\\\" ng-if=\\\"$ctrl.items | notEmpty\\\">\\n    <ul>\\n      <li gridster-item=\\\"item\\\" ng-repeat=\\\"item in $ctrl.items\\\" class=\\\"widget panel panel-default gs-w\\\">\\n        <div class=\\\"heading\\\">{{item.name}}</div>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !$ctrl.isFormValid()\\\" ng-click=\\\"$ctrl.saveDashboard()\\\">Save</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dashboards/edit-dashboard-dialog.html\n// module id = 383\n// module chunks = 1","import template from './widget.html';\nimport editTextBoxTemplate from './edit-text-box.html';\n\nconst EditTextBoxComponent = {\n  template: editTextBoxTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller(toastr) {\n    'ngInject';\n\n    this.saveInProgress = false;\n    this.widget = this.resolve.widget;\n    this.saveWidget = () => {\n      this.saveInProgress = true;\n      if (this.widget.new_text !== this.widget.existing_text) {\n        this.widget.text = this.widget.new_text;\n        this.widget.$save().then(() => {\n          this.close();\n        }).catch(() => {\n          toastr.error('Widget can not be updated');\n        }).finally(() => {\n          this.saveInProgress = false;\n        });\n      } else {\n        this.close();\n      }\n    };\n  },\n};\n\nfunction DashboardWidgetCtrl($location, $uibModal, $window, Events, currentUser) {\n  this.canViewQuery = currentUser.hasPermission('view_query');\n\n  this.editTextBox = () => {\n    this.widget.existing_text = this.widget.text;\n    this.widget.new_text = this.widget.text;\n    $uibModal.open({\n      component: 'editTextBox',\n      resolve: {\n        widget: this.widget,\n      },\n    });\n  };\n\n  this.localParametersDefs = () => {\n    if (!this.localParameters) {\n      this.localParameters = this.widget.query.getParametersDefs().filter(p => !p.global);\n    }\n    return this.localParameters;\n  };\n\n  this.deleteWidget = () => {\n    if (!$window.confirm(`Are you sure you want to remove \"${this.widget.getName()}\" from the dashboard?`)) {\n      return;\n    }\n\n    Events.record('delete', 'widget', this.widget.id);\n\n    this.widget.$delete((response) => {\n      this.dashboard.widgets =\n        this.dashboard.widgets.map(row => row.filter(widget => widget.id !== undefined));\n\n      this.dashboard.widgets = this.dashboard.widgets.filter(row => row.length > 0);\n\n      this.dashboard.layout = response.layout;\n      this.dashboard.version = response.version;\n\n      if (this.deleted) {\n        this.deleted({});\n      }\n    });\n  };\n\n  Events.record('view', 'widget', this.widget.id);\n\n  this.reload = (force) => {\n    let maxAge = $location.search().maxAge;\n    if (force) {\n      maxAge = 0;\n    }\n    this.queryResult = this.query.getQueryResult(maxAge);\n  };\n\n  if (this.widget.visualization) {\n    Events.record('view', 'query', this.widget.visualization.query.id, { dashboard: true });\n    Events.record('view', 'visualization', this.widget.visualization.id, { dashboard: true });\n\n    this.query = this.widget.getQuery();\n    this.reload(false);\n\n    this.type = 'visualization';\n  } else if (this.widget.restricted) {\n    this.type = 'restricted';\n  } else {\n    this.type = 'textbox';\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('editTextBox', EditTextBoxComponent);\n  ngModule.component('dashboardWidget', {\n    template,\n    controller: DashboardWidgetCtrl,\n    bindings: {\n      widget: '<',\n      public: '<',\n      dashboard: '<',\n      deleted: '&onDelete',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dashboards/widget.js","module.exports = \"<div class=\\\"col-lg-{{$ctrl.widget.width | colWidth}}\\\">\\n    <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='visualization'\\\">\\n        <div class=\\\"t-header widget\\\">\\n            <div class=\\\"th-title\\\">\\n                <p class=\\\"hidden-print\\\">\\n                    <span ng-hide=\\\"$ctrl.canViewQuery\\\">{{$ctrl.query.name}}</span>\\n                    <query-link query=\\\"$ctrl.query\\\" visualization=\\\"$ctrl.widget.visualization\\\" ng-show=\\\"$ctrl.canViewQuery\\\"></query-link>\\n                    <small><visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/></small>\\n                </p>\\n                <p class=\\\"visible-print\\\">\\n                  {{$ctrl.query.name}}\\n                  <visualization-name visualization=\\\"$ctrl.widget.visualization\\\"/>\\n                </p>\\n                <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n            </div>\\n          <div class=\\\"actions dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public\\\">\\n            <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n\\n            <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">Download as CSV File</a></li>\\n              <li ng-class=\\\"{'disabled': $ctrl.queryResult.isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx')}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\" target=\\\"_self\\\">Download as Excel File</a></li>\\n              <li><a ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.widget.visualization.id}}\\\" ng-show=\\\"$ctrl.canViewQuery\\\">View Query</a></li>\\n              <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <parameters parameters=\\\"$ctrl.localParametersDefs()\\\"></parameters>\\n\\n        <div ng-switch=\\\"$ctrl.queryResult.getStatus()\\\">\\n          <div ng-switch-when=\\\"failed\\\">\\n            <div class=\\\"alert alert-danger m-5\\\" ng-show=\\\"$ctrl.queryResult.getError()\\\">Error running query: <strong>{{$ctrl.queryResult.getError()}}</strong></div>\\n          </div>\\n          <div ng-switch-when=\\\"done\\\">\\n              <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\"></visualization-renderer>\\n          </div>\\n          <div ng-switch-default class=\\\"text-center\\\">\\n            <i class=\\\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\\\"></i>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"p-5 clearfix\\\" style=\\\"line-height:28px;\\\">\\n            <span class=\\\"small hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n            <span class=\\\"visible-print\\\">\\n              Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}\\n            </span>\\n            <button class=\\\"btn btn-sm btn-default pull-right hidden-print\\\" ng-click=\\\"$ctrl.reload(true)\\\" ng-if=\\\"!$ctrl.public\\\"><i class=\\\"zmdi zmdi-refresh\\\"></i></button>\\n        </div>\\n    </div>\\n\\n  <div class=\\\"tile\\\" ng-if=\\\"$ctrl.type=='restricted'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"text-center\\\">\\n        <h1><span class=\\\"zmdi zmdi-lock\\\"></span></h1>\\n        <p class=\\\"text-muted\\\">\\n          This widget requires access to a data source you don't have access to.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\" ng-hide=\\\"$ctrl.widget.width === 0\\\" ng-if=\\\"$ctrl.type=='textbox'\\\">\\n    <div class=\\\"t-body\\\">\\n      <div class=\\\"dropdown\\\" uib-dropdown ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n        <div class=\\\"dropdown-header\\\">\\n          <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle class=\\\"actions\\\"><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n        </div>\\n\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.editTextBox()\\\">Edit</a></li>\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n        </ul>\\n      </div>\\n      <p ng-bind-html=\\\"$ctrl.widget.text | markdown\\\" class=\\\"p-5\\\"></p>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dashboards/widget.html\n// module id = 385\n// module chunks = 1","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Edit TextBox</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"form-group\\\">\\n    <textarea class=\\\"form-control\\\" ng-model=\\\"$ctrl.widget.new_text\\\" rows=\\\"3\\\"></textarea>\\n  </div>\\n  <div ng-show=\\\"$ctrl.widget.new_text\\\">\\n    <strong>Preview:</strong>\\n    <p ng-bind-html=\\\"$ctrl.widget.new_text | markdown\\\"></p>\\n  </div>\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.saveWidget()\\\">Save</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dashboards/edit-text-box.html\n// module id = 386\n// module chunks = 1","import { isUndefined, each, contains, find } from 'underscore';\nimport endsWith from 'underscore.string/endsWith';\nimport template from './dynamic-form.html';\n\nfunction DynamicForm($http, toastr, $q) {\n  function orderedInputs(properties, order) {\n    const inputs = new Array(order.length);\n    Object.keys(properties).forEach((key) => {\n      const position = order.indexOf(key);\n      const input = { name: key, property: properties[key] };\n      if (position > -1) {\n        inputs[position] = input;\n      } else {\n        inputs.push(input);\n      }\n    });\n    return inputs;\n  }\n\n  return {\n    restrict: 'E',\n    replace: 'true',\n    transclude: true,\n    template,\n    scope: {\n      target: '=',\n      type: '@type',\n      actions: '=',\n    },\n    link($scope) {\n      function setType(types) {\n        if ($scope.target.type === undefined) {\n          $scope.target.type = types[0].type;\n        }\n\n        const type = find(types, t => t.type === $scope.target.type);\n        const configurationSchema = type.configuration_schema;\n\n        $scope.fields = orderedInputs(\n          configurationSchema.properties,\n          configurationSchema.order || [],\n        );\n\n        return type;\n      }\n\n      $scope.inProgressActions = {};\n      if ($scope.actions) {\n        $scope.actions.forEach((action) => {\n          const originalCallback = action.callback;\n          const name = action.name;\n          action.callback = () => {\n            action.name = `<i class=\"zmdi zmdi-spinner zmdi-hc-spin\"></i> ${name}`;\n\n            $scope.inProgressActions[action.name] = true;\n            function release() {\n              $scope.inProgressActions[action.name] = false;\n              action.name = name;\n            }\n\n            originalCallback(release);\n          };\n        });\n      }\n\n      $scope.files = {};\n\n      $scope.$watchCollection('files', () => {\n        each($scope.files, (v, k) => {\n          // THis is needed because angular-base64-upload sets the value to null at initialization,\n          // causing the field to be marked as dirty even if it wasn't changed.\n          if (!v && $scope.target.options[k]) {\n            $scope.dataSourceForm.$setPristine();\n          }\n          if (v) {\n            $scope.target.options[k] = v.base64;\n          }\n        });\n      });\n\n      const typesPromise = $http.get(`api/${$scope.type}/types`);\n\n      $q.all([typesPromise, $scope.target.$promise]).then((responses) => {\n        const types = responses[0].data;\n        setType(types);\n\n        $scope.types = types;\n\n        types.forEach((type) => {\n          each(type.configuration_schema.properties, (prop, name) => {\n            if (name === 'password' || name === 'passwd') {\n              prop.type = 'password';\n            }\n\n            if (endsWith(name, 'File')) {\n              prop.type = 'file';\n            }\n\n            if (prop.type === 'boolean') {\n              prop.type = 'checkbox';\n            }\n\n            prop.required = contains(type.configuration_schema.required, name);\n          });\n        });\n\n        $scope.$watch('target.type', (current, prev) => {\n          if (prev !== current) {\n            if (prev !== undefined) {\n              $scope.target.options = {};\n            }\n\n            const type = setType($scope.types);\n\n            if (Object.keys($scope.target.options).length === 0) {\n              const properties = type.configuration_schema.properties;\n              Object.keys(properties).forEach((property) => {\n                if (!isUndefined(properties[property].default)) {\n                  $scope.target.options[property] = properties[property].default;\n                }\n              });\n            }\n          }\n        });\n      });\n\n\n      $scope.saveChanges = () => {\n        $scope.target.$save(\n          () => {\n            toastr.success('Saved.');\n            $scope.dataSourceForm.$setPristine();\n          },\n          (error) => {\n            if (error.status === 400 && 'message' in error.data) {\n              toastr.error(error.data.message);\n            } else {\n              toastr.error('Failed saving.');\n            }\n          },\n        );\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicForm', DynamicForm);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dynamic-form.js","module.exports = \"<form name=\\\"dataSourceForm\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"type\\\">Type</label>\\n        <select name=\\\"type\\\" class=\\\"form-control\\\" ng-options=\\\"type.type as type.name for type in types\\\" ng-model=\\\"target.type\\\" autofocus></select>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"dataSourceName\\\">Name</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" name=\\\"dataSourceName\\\" ng-model=\\\"target.name\\\" required>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-class='{\\\"has-error\\\": !inner.input.$valid}' ng-form=\\\"inner\\\" ng-repeat=\\\"field in fields\\\">\\n        <label ng-if=\\\"field.property.type !== 'checkbox'\\\">{{field.property.title || field.name | capitalize}}</label>\\n        <input name=\\\"input\\\" type=\\\"{{field.property.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"target.options[field.name]\\\" ng-required=\\\"field.property.required\\\"\\n               ng-if=\\\"field.property.type !== 'file' && field.property.type !== 'checkbox'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{field.property.default}}\\\">\\n\\n        <label ng-if=\\\"field.property.type=='checkbox'\\\">\\n            <input name=\\\"input\\\" type=\\\"{{field.property.type}}\\\" ng-model=\\\"target.options[field.name]\\\" ng-required=\\\"field.property.required\\\"\\n                   ng-if=\\\"field.property.type !== 'file'\\\" accesskey=\\\"tab\\\" placeholder=\\\"{{field.property.default}}\\\">\\n            {{field.property.title || field.name | capitalize}}\\n        </label>\\n\\n        <input name=\\\"input\\\" type=\\\"file\\\" class=\\\"form-control\\\" ng-model=\\\"files[field.name]\\\" ng-required=\\\"field.property.required && !target.options[field.name]\\\"\\n               base-sixty-four-input\\n               ng-if=\\\"field.property.type === 'file'\\\">\\n    </div>\\n\\n    <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!dataSourceForm.$valid\\\" ng-click=\\\"saveChanges()\\\">Save</button>\\n    <span ng-repeat=\\\"action in actions\\\">\\n        <button class=\\\"btn\\\"\\n                ng-class=\\\"action.class\\\"\\n                ng-if=\\\"target.id\\\"\\n                ng-disabled=\\\"(action.disableWhenDirty && dataSourceForm.$dirty) || inProgressActions[action.name]\\\"\\n                ng-click=\\\"action.callback()\\\" ng-bind-html=\\\"action.name\\\"></button>\\n    </span>\\n\\n    <span ng-transclude>\\n\\n    </span>\\n</form>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dynamic-form.html\n// module id = 389\n// module chunks = 1","import { sortBy } from 'underscore';\nimport template from './dynamic-table.html';\nimport './dynamic-table.css';\n\nfunction DynamicTable($sanitize) {\n  'ngInject';\n\n  this.itemsPerPage = this.count = 15;\n  this.page = 1;\n  this.rowsCount = 0;\n  this.orderByField = undefined;\n  this.orderByReverse = false;\n\n  this.pageChanged = () => {\n    const first = this.count * (this.page - 1);\n    const last = this.count * (this.page);\n\n    this.rowsToDisplay = this.rows.slice(first, last);\n  };\n\n  this.$onChanges = (changes) => {\n    if (changes.columns) {\n      this.columns = changes.columns.currentValue;\n    }\n\n    if (changes.rows) {\n      this.rows = changes.rows.currentValue;\n    }\n\n    this.rowsCount = this.rows.length;\n\n    this.pageChanged();\n  };\n\n  this.orderBy = (column) => {\n    if (column === this.orderByField) {\n      this.orderByReverse = !this.orderByReverse;\n    } else {\n      this.orderByField = column;\n      this.orderByReverse = false;\n    }\n\n    if (this.orderByField) {\n      this.rows = sortBy(this.rows, this.orderByField.name);\n      if (this.orderByReverse) {\n        this.rows = this.rows.reverse();\n      }\n      this.pageChanged();\n    }\n  };\n\n  this.sanitize = value => $sanitize(value);\n\n  this.sortIcon = (column) => {\n    if (column !== this.orderByField) {\n      return null;\n    }\n\n    if (this.orderByReverse) {\n      return 'desc';\n    }\n\n    return 'asc';\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('dynamicTable', {\n    template,\n    controller: DynamicTable,\n    bindings: {\n      rows: '<',\n      columns: '<',\n      count: '<',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/dynamic-table/index.js","module.exports = \"<div>\\n  <table class=\\\"table table-condensed table-hover\\\">\\n    <thead>\\n    <tr>\\n      <th ng-repeat=\\\"column in $ctrl.columns\\\" ng-click=\\\"$ctrl.orderBy(column)\\\" class=\\\"sortable-column\\\">\\n        {{column.title}} <span ng-if=\\\"$ctrl.sortIcon(column)\\\"><i class=\\\"fa fa-sort-{{$ctrl.sortIcon(column)}}\\\"></i></span>\\n      </th>\\n    </tr>\\n\\n    </thead>\\n    <tbody>\\n    <tr ng-repeat=\\\"row in $ctrl.rowsToDisplay\\\">\\n      <td ng-repeat=\\\"column in $ctrl.columns\\\" ng-bind-html=\\\"$ctrl.sanitize(column.formatFunction(row[column.name]))\\\">\\n      </td>\\n    </tr>\\n    </tbody>\\n  </table>\\n</div>\\n<div class=\\\"text-center\\\">\\n  <ul uib-pagination total-items=\\\"$ctrl.rowsCount\\\"\\n      items-per-page=\\\"$ctrl.itemsPerPage\\\"\\n      ng-model=\\\"$ctrl.page\\\"\\n      max-size=\\\"6\\\"\\n      class=\\\"pagination\\\"\\n      boundary-link-numbers=\\\"true\\\"\\n      rotate=\\\"false\\\"\\n      next-text='>'\\n      previous-text='<'\\n      ng-change=\\\"$ctrl.pageChanged()\\\"></ul>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/dynamic-table/dynamic-table.html\n// module id = 391\n// module chunks = 1","import $ from 'jquery';\nimport { isEmpty } from 'underscore';\n\n// From: http://jsfiddle.net/joshdmiller/NDFHg/\nfunction EditInPlace() {\n  return {\n    restrict: 'E',\n    scope: {\n      value: '=',\n      ignoreBlanks: '=',\n      editable: '=',\n      done: '=',\n    },\n    template(tElement, tAttrs) {\n      const elType = tAttrs.editor || 'input';\n      const placeholder = tAttrs.placeholder || 'Click to edit';\n\n      let viewMode = '';\n\n      if (tAttrs.markdown === 'true') {\n        viewMode = '<span ng-click=\"editable && edit()\" ng-bind-html=\"value|markdown\" ng-class=\"{editable: editable}\"></span>';\n      } else {\n        viewMode = '<span ng-click=\"editable && edit()\" ng-bind=\"value\" ng-class=\"{editable: editable}\"></span>';\n      }\n\n      const placeholderSpan = `<span ng-click=\"editable && edit()\"\n                                     ng-show=\"editable && !value\"\n                                     ng-class=\"{editable: editable}\">${placeholder}</span>`;\n      const editor = '<{elType} ng-model=\"value\" class=\"rd-form-control\"></{elType}>'.replace('{elType}', elType);\n\n      return viewMode + placeholderSpan + editor;\n    },\n    link($scope, element) {\n      // Let's get a reference to the input element, as we'll want to reference it.\n      const inputElement = $(element.children()[2]);\n      const keycodeEnter = 13;\n      const keycodeEscape = 27;\n\n      // This directive should have a set class so we can style it.\n      element.addClass('edit-in-place');\n\n      // Initially, we're not editing.\n      $scope.editing = false;\n\n      // ng-click handler to activate edit-in-place\n      $scope.edit = () => {\n        $scope.oldValue = $scope.value;\n\n        $scope.editing = true;\n\n        // We control display through a class on the directive itself. See the CSS.\n        element.addClass('active');\n\n        // And we must focus the element.\n        // `angular.element()` provides a chainable array, like jQuery so to access\n        // a native DOM function, we have to reference the first element in the array.\n        inputElement[0].focus();\n      };\n\n      function save() {\n        if ($scope.editing) {\n          if ($scope.ignoreBlanks && isEmpty($scope.value)) {\n            $scope.value = $scope.oldValue;\n          }\n          $scope.editing = false;\n          element.removeClass('active');\n\n          if ($scope.value !== $scope.oldValue) {\n            if ($scope.done) {\n              $scope.done();\n            }\n          }\n        }\n      }\n\n      $(inputElement).keydown((e) => {\n        // 'return' or 'enter' key pressed\n        // allow 'shift' to break lines\n        if (e.which === keycodeEnter && !e.shiftKey) {\n          e.preventDefault();\n          save();\n        } else if (e.which === keycodeEscape) {\n          $scope.value = $scope.oldValue;\n          $scope.$apply(() => {\n            $(inputElement[0]).blur();\n          });\n        }\n      }).blur(() => {\n        save();\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('editInPlace', EditInPlace);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/edit-in-place.js","function controller(clientConfig, currentUser) {\n  this.showMailWarning = clientConfig.mailSettingsMissing && currentUser.isAdmin;\n}\n\nexport default function init(ngModule) {\n  ngModule.component('emailSettingsWarning', {\n    bindings: {\n      function: '<',\n    },\n    template: '<p class=\"alert alert-danger\" ng-if=\"$ctrl.showMailWarning\">It looks like your mail server isn\\'t configured. Make sure to configure it for the {{$ctrl.function}} to work.</p>',\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/email-settings-warning/index.js","const ErrorMessagesComponent = {\n  template: `\n  <div class=\"help-block\" ng-messages=\"$ctrl.input.$error\" ng-show=\"$ctrl.input.$touched || $ctrl.form.$submitted\">\n    <span class=\"error\" ng-message=\"required\">This field is required.</span>\n    <span class=\"error\" ng-message=\"minlength\">This field is too short.</span>\n    <span class=\"error\" ng-message=\"email\">This needs to be a valid email.</span>\n  </div>\n  `,\n  replace: true,\n  bindings: {\n    input: '<',\n    form: '<',\n  },\n  controller() {\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('errorMessages', ErrorMessagesComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/error-messages.js","import template from './filters.html';\n\nconst FiltersComponent = {\n  template,\n  bindings: {\n    onChange: '&',\n    filters: '<',\n  },\n  controller() {\n    'ngInject';\n\n    this.filterChangeListener = (filter, modal) => {\n      this.onChange({ filter, $modal: modal });\n    };\n\n    this.itemGroup = (item) => {\n      if (item === '*' || item === '-') {\n        return '';\n      }\n\n      return 'Values';\n    };\n  },\n};\n\n\nexport default function init(ngModule) {\n  ngModule.component('filters', FiltersComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/filters.js","module.exports = \"<div class=\\\"container bg-white p-5\\\" ng-show=\\\"$ctrl.filters | notEmpty\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 m-t-5\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <label>{{filter.friendlyName}}</label>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-6 m-t-5\\\" ng-repeat=\\\"filter in $ctrl.filters\\\">\\n      <ui-select ng-model=\\\"filter.current\\\" ng-if=\\\"!filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\" on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        remove-selected=\\\"false\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{$select.selected | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\">\\n          {{value | filterValue:filter }}\\n        </ui-select-choices>\\n      </ui-select>\\n\\n      <ui-select ng-model=\\\"filter.current\\\" multiple ng-if=\\\"filter.multiple\\\" on-select=\\\"$ctrl.filterChangeListener(filter, $model)\\\"\\n        on-remove=\\\"$ctrl.filterChangeListener(filter, $model)\\\" remove-selected=\\\"false\\\">\\n        <ui-select-match placeholder=\\\"Select value for {{filter.friendlyName}}...\\\">{{$item | filterValue:filter}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in filter.values | filter: $select.search\\\" group-by=\\\"$ctrl.itemGroup\\\">\\n          <span ng-if=\\\"value == '*'\\\">\\n            Select All\\n          </span>\\n          <span ng-if=\\\"value == '-'\\\">\\n            Clear\\n          </span>\\n          <span ng-if=\\\"value != '*' && value != '-'\\\">\\n            {{value | filterValue:filter }}\\n          </span>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/filters.html\n// module id = 397\n// module chunks = 1","import template from './footer.html';\n\nfunction controller(clientConfig, currentUser) {\n  this.version = clientConfig.version;\n  this.newVersionAvailable = clientConfig.newVersionAvailable && currentUser.isAdmin;\n}\n\nexport default function init(ngModule) {\n  ngModule.component('footer', {\n    template,\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/footer/index.js","module.exports = \"<div id=\\\"footer\\\">\\n    <a href=\\\"http://redash.io\\\">Redash</a> <span ng-bind=\\\"$ctrl.version\\\"></span> <small ng-if=\\\"$ctrl.newVersionAvailable\\\" ng-cloak class=\\\"ng-cloak\\\"><a href=\\\"https://version.redash.io/\\\">(New Redash version available)</a></small>\\n\\n    <ul class=\\\"f-menu\\\">\\n        <li><a href=\\\"https://redash.io/help/\\\">Documentation</a></li>\\n        <li><a href=\\\"http://github.com/getredash/redash\\\">Contribute</a></li>\\n    </ul>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/footer/footer.html\n// module id = 399\n// module chunks = 1","import template from './edit-group-dialog.html';\n\nconst EditGroupDialogComponent = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($location) {\n    'ngInject';\n\n    this.group = this.resolve.group;\n    const newGroup = this.group.id === undefined;\n\n    if (newGroup) {\n      this.saveButtonText = 'Create';\n      this.title = 'Create a New Group';\n    } else {\n      this.saveButtonText = 'Save';\n      this.title = 'Edit Group';\n    }\n\n    this.ok = () => {\n      this.group.$save((group) => {\n        if (newGroup) {\n          $location.path(`/groups/${group.id}`).replace();\n          this.close();\n        } else {\n          this.close();\n        }\n      });\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editGroupDialog', EditGroupDialogComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/groups/edit-group-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\">{{$ctrl.title}}</h3>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <form class=\\\"form\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.group.name\\\" placeholder=\\\"Group Name\\\" class=\\\"form-control\\\" autofocus/>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.close()\\\">Cancel</button>\\n    <button class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.ok()\\\">{{$ctrl.saveButtonText}}</button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/groups/edit-group-dialog.html\n// module id = 401\n// module chunks = 1","function controller($window, $location, toastr, currentUser) {\n  this.canEdit = () => currentUser.isAdmin && this.group.type !== 'builtin';\n\n  this.saveName = () => {\n    this.group.$save();\n  };\n\n  this.deleteGroup = () => {\n    if ($window.confirm('Are you sure you want to delete this group?')) {\n      this.group.$delete(() => {\n        $location.path('/groups').replace();\n        toastr.success('Group deleted successfully.');\n      });\n    }\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('groupName', {\n    bindings: {\n      group: '<',\n    },\n    transclude: true,\n    template: `\n      <h2 class=\"p-l-5\">\n        <edit-in-place editable=\"$ctrl.canEdit()\" done=\"$ctrl.saveName\" ignore-blanks='true' value=\"$ctrl.group.name\"></edit-in-place>&nbsp;\n        <button class=\"btn btn-xs btn-danger\" ng-if=\"$ctrl.canEdit()\" ng-click=\"$ctrl.deleteGroup()\">Delete this group</button>\n      </h2>\n    `,\n    replace: true,\n    controller,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/groups/group-name.js","const Overlay = {\n  template: `\n  <div>\n    <div class=\"overlay\"></div>\n    <div style=\"width: 100%; position:absolute; top:50px; z-index:2000\">\n      <div class=\"well well-lg\" style=\"width: 70%; margin: auto;\" ng-transclude>\n      </div>\n    </div>\n  </div>\n  `,\n  transclude: true,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('overlay', Overlay);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/overlay.js","import template from './page-header.html';\n\nfunction controller() {\n\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageHeader', {\n    template,\n    controller,\n    transclude: true,\n    bindings: {\n      title: '@',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/page-header/index.js","module.exports = \"<div class=\\\"row bg-white p-10 p-l-15 p-r-15 m-b-10\\\">\\n  <div class=\\\"col-sm-9\\\">\\n    <h3>{{$ctrl.title}}</h3>\\n  </div>\\n  <div class=\\\"col-sm-3 text-right\\\">\\n    <h3 ng-transclude>\\n    </h3>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/page-header/page-header.html\n// module id = 405\n// module chunks = 1","class PaginatorCtrl {\n  constructor() {\n    this.page = this.paginator.page;\n  }\n  pageChanged() {\n    this.paginator.setPage(this.page);\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('paginator', {\n    template: `\n<div class=\"text-center\">\n  <ul uib-pagination total-items=\"$ctrl.paginator.totalCount\"\n                     items-per-page=\"$ctrl.paginator.itemsPerPage\"\n                     ng-model=\"$ctrl.page\"\n                     max-size=\"6\"\n                     class=\"pagination\"\n                     boundary-link-numbers=\"true\"\n                     rotate=\"false\"\n                     next-text='>'\n                     previous-text='<'\n                     ng-change=\"$ctrl.pageChanged()\"></ul>\n</div>\n    `,\n    bindings: {\n      paginator: '<',\n    },\n    controller: PaginatorCtrl,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/paginator.js","import { find } from 'underscore';\nimport template from './parameters.html';\nimport queryBasedParameterTemplate from './query-based-parameter.html';\nimport parameterSettingsTemplate from './parameter-settings.html';\n\nconst ParameterSettingsComponent = {\n  template: parameterSettingsTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($sce, Query) {\n    'ngInject';\n\n    this.trustAsHtml = html => $sce.trustAsHtml(html);\n    this.parameter = this.resolve.parameter;\n\n    if (this.parameter.queryId) {\n      Query.get({ id: this.parameter.queryId }, (query) => {\n        this.queries = [query];\n      });\n    }\n\n    this.searchQueries = (term) => {\n      if (!term || term.length < 3) {\n        return;\n      }\n\n      Query.search({ q: term }, (results) => {\n        this.queries = results;\n      });\n    };\n  },\n};\n\nfunction optionsFromQueryResult(queryResult) {\n  const columns = queryResult.data.columns;\n  const numColumns = columns.length;\n  let options = [];\n  // If there are multiple columns, check if there is a column\n  // named 'name' and column named 'value'. If name column is present\n  // in results, use name from name column. Similar for value column.\n  // Default: Use first string column for name and value.\n  if (numColumns > 0) {\n    let nameColumn = null;\n    let valueColumn = null;\n    columns.forEach((column) => {\n      const columnName = column.name.toLowerCase();\n      if (columnName === 'name') {\n        nameColumn = column.name;\n      }\n      if (columnName === 'value') {\n        valueColumn = column.name;\n      }\n      // Assign first string column as name and value column.\n      if (nameColumn === null) {\n        nameColumn = column.name;\n      }\n      if (valueColumn === null) {\n        valueColumn = column.name;\n      }\n    });\n    if (nameColumn !== null && valueColumn !== null) {\n      options = queryResult.data.rows.map((row) => {\n        const queryResultOption = {\n          name: row[nameColumn],\n          value: row[valueColumn],\n        };\n        return queryResultOption;\n      });\n    }\n  }\n  return options;\n}\n\nfunction updateCurrentValue(param, options) {\n  const found = find(options, option => option.value === param.value) !== undefined;\n\n  if (!found) {\n    param.value = options[0].value;\n  }\n}\n\nconst QueryBasedParameterComponent = {\n  template: queryBasedParameterTemplate,\n  bindings: {\n    param: '<',\n    queryId: '<',\n  },\n  controller(Query) {\n    'ngInject';\n\n    this.$onChanges = (changes) => {\n      if (changes.queryId) {\n        Query.resultById({ id: this.queryId }, (result) => {\n          const queryResult = result.query_result;\n          this.queryResultOptions = optionsFromQueryResult(queryResult);\n          updateCurrentValue(this.param, this.queryResultOptions);\n        });\n      }\n    };\n  },\n};\n\nfunction ParametersDirective($location, $uibModal) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: {\n      parameters: '=',\n      syncValues: '=?',\n      editable: '=?',\n      changed: '&onChange',\n    },\n    template,\n    link(scope) {\n      // is this the correct location for this logic?\n      if (scope.syncValues !== false) {\n        scope.$watch('parameters', () => {\n          if (scope.changed) {\n            scope.changed({});\n          }\n          scope.parameters.forEach((param) => {\n            if (param.value !== null || param.value !== '') {\n              $location.search(`p_${param.name}`, param.value);\n            }\n          });\n        }, true);\n      }\n\n      // These are input as newline delimited values,\n      // so we split them here.\n      scope.extractEnumOptions = (enumOptions) => {\n        if (enumOptions) {\n          return enumOptions.split('\\n');\n        }\n        return [];\n      };\n      scope.showParameterSettings = (param) => {\n        $uibModal.open({\n          component: 'parameterSettings',\n          resolve: {\n            parameter: param,\n          },\n        });\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('parameters', ParametersDirective);\n  ngModule.component('queryBasedParameter', QueryBasedParameterComponent);\n  ngModule.component('parameterSettings', ParameterSettingsComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/parameters.js","module.exports = \"<div class=\\\"form-inline bg-white p-5\\\"\\n     ng-if=\\\"parameters | notEmpty\\\"\\n     ui-sortable=\\\"{ 'ui-floating': true, 'disabled': !editable }\\\"\\n     ng-model=\\\"parameters\\\">\\n  <div class=\\\"form-group m-l-10 m-r-10\\\"\\n       ng-repeat=\\\"param in parameters\\\">\\n    <label class=\\\"parameter-label\\\">{{param.title}}</label>\\n    <button class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"showParameterSettings(param)\\\"\\n            ng-if=\\\"editable\\\">\\n        <i class=\\\"zmdi zmdi-settings\\\"></i>\\n    </button>\\n    <span ng-switch=\\\"param.type\\\">\\n      <input ng-switch-when=\\\"datetime-with-seconds\\\" type=\\\"datetime-local\\\" step=\\\"1\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"datetime-local\\\" type=\\\"datetime-local\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <input ng-switch-when=\\\"date\\\" type=\\\"date\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n      <span ng-switch-when=\\\"enum\\\">\\n        <select ng-model=\\\"param.value\\\" class=\\\"form-control\\\">\\n          <option ng-repeat=\\\"option in extractEnumOptions(param.enumOptions)\\\" value=\\\"{{option}}\\\">{{option}}</option>\\n        </select>\\n      </span>\\n      <span ng-switch-when=\\\"query\\\">\\n        <query-based-parameter param=\\\"param\\\" query-id=\\\"param.queryId\\\"></query-based-parameter>\\n      </span>\\n      <input ng-switch-default type=\\\"{{param.type}}\\\" class=\\\"form-control\\\" ng-model=\\\"param.ngModel\\\">\\n    </span>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/parameters.html\n// module id = 408\n// module chunks = 1","module.exports = \"<select ng-model=\\\"$ctrl.param.value\\\" class=\\\"form-control\\\" ng-options=\\\"option.value as option.name for option in $ctrl.queryResultOptions\\\">\\n</select>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/query-based-parameter.html\n// module id = 409\n// module chunks = 1","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">{{$ctrl.parameter.name}}</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Title</label>\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.parameter.title\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>Type</label>\\n        <select ng-model=\\\"$ctrl.parameter.type\\\" class=\\\"form-control\\\">\\n          <option value=\\\"text\\\">Text</option>\\n          <option value=\\\"number\\\">Number</option>\\n          <option value=\\\"enum\\\">Dropdown List</option>\\n          <option value=\\\"query\\\">Query Based Dropdown List</option>\\n          <option value=\\\"date\\\">Date</option>\\n          <option value=\\\"datetime-local\\\">Date and Time</option>\\n          <option value=\\\"datetime-with-seconds\\\">Date and Time (with seconds)</option>\\n        </select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" class=\\\"form-inline\\\" ng-model=\\\"$ctrl.parameter.global\\\">\\n          Global\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.parameter.type === 'enum'\\\">\\n        <label>Dropdown List Values (newline delimited)</label>\\n        <textarea class=\\\"form-control\\\" rows=\\\"3\\\" ng-model=\\\"$ctrl.parameter.enumOptions\\\"></textarea>\\n      </div>\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.parameter.type === 'query'\\\">\\n        <label>Query to load dropdown values from:</label>\\n        <ui-select ng-model=\\\"$ctrl.parameter.queryId\\\" reset-search-input=\\\"false\\\">\\n            <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n            <ui-select-choices repeat=\\\"q.id as q in $ctrl.queries\\\"\\n                               refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                               refresh-delay=\\\"0\\\">\\n            <div class=\\\"form-group\\\" ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n            </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/parameter-settings.html\n// module id = 410\n// module chunks = 1","import { contains, each } from 'underscore';\nimport template from './permissions-editor.html';\n\nconst PermissionsEditorComponent = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($http, User) {\n    'ngInject';\n\n    this.grantees = [];\n    this.newGrantees = {};\n    this.aclUrl = this.resolve.aclUrl.url;\n\n    // List users that are granted permissions\n    const loadGrantees = () => {\n      $http.get(this.aclUrl).success((result) => {\n        this.grantees = [];\n\n        each(result, (grantees, accessType) => {\n          grantees.forEach((grantee) => {\n            grantee.access_type = accessType;\n            this.grantees.push(grantee);\n          });\n        });\n      });\n    };\n\n    loadGrantees();\n\n    // Search for user\n    this.findUser = (search) => {\n      if (search === '') {\n        return;\n      }\n\n      if (this.foundUsers === undefined) {\n        User.query((users) => {\n          const existingIds = this.grantees.map(m => m.id);\n          users.forEach((user) => { user.alreadyGrantee = contains(existingIds, user.id); });\n          this.foundUsers = users;\n        });\n      }\n    };\n\n    // Add new user to grantees list\n    this.addGrantee = (user) => {\n      this.newGrantees.selected = undefined;\n      const body = { access_type: 'modify', user_id: user.id };\n      $http.post(this.aclUrl, body).success(() => {\n        user.alreadyGrantee = true;\n        loadGrantees();\n      });\n    };\n\n    // Remove user from grantees list\n    this.removeGrantee = (user) => {\n      const body = { access_type: 'modify', user_id: user.id };\n      $http({\n        url: this.aclUrl,\n        method: 'DELETE',\n        data: body,\n        headers: { 'Content-Type': 'application/json' },\n      }).success(() => {\n        this.grantees = this.grantees.filter(m => m !== user);\n\n        if (this.foundUsers) {\n          this.foundUsers.forEach((u) => { if (u.id === user.id) { u.alreadyGrantee = false; } });\n        }\n      });\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('permissionsEditor', PermissionsEditorComponent);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/permissions-editor/index.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Manage Permissions</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div style=\\\"overflow: auto; height: 300px\\\">\\n    <ui-select ng-model=\\\"$ctrl.newGrantee.selected\\\" on-select=\\\"$ctrl.addGrantee($item)\\\">\\n       <ui-select-match placeholder=\\\"Add New User\\\"></ui-select-match>\\n       <ui-select-choices repeat=\\\"user in $ctrl.foundUsers | filter:$select.search\\\"\\n                         refresh=\\\"$ctrl.findUser($select.search)\\\"\\n                         refresh-delay=\\\"0\\\"\\n                         ui-disable-choice=\\\"user.alreadyGrantee\\\">\\n        <div>\\n          <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n          <small ng-if=\\\"user.alreadyGrantee\\\">(already has permission)</small>\\n        </div>\\n       </ui-select-choices>\\n    </ui-select>\\n      <br/>\\n       <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th></th>\\n            <th>User</th>\\n            <th>Permission</th>\\n            <th></th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"grantee in $ctrl.grantees\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{grantee.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{grantee.name}} </td>\\n          <td>{{grantee.access_type}}</td>\\n          <td><button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"$ctrl.removeGrantee(grantee)\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/permissions-editor/permissions-editor.html\n// module id = 412\n// module chunks = 1","function alertUnsavedChanges($window) {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      isDirty: '=',\n    },\n    link($scope) {\n      const unloadMessage = 'You will lose your changes if you leave';\n      const confirmMessage = `${unloadMessage}\\n\\nAre you sure you want to leave this page?`;\n      // store original handler (if any)\n      const _onbeforeunload = $window.onbeforeunload;\n\n      $window.onbeforeunload = function onbeforeunload() {\n        return $scope.isDirty ? unloadMessage : null;\n      };\n\n      $scope.$on('$locationChangeStart', (event, next, current) => {\n        if (next.split('?')[0] === current.split('?')[0] || next.split('#')[0] === current.split('#')[0]) {\n          return;\n        }\n\n        if ($scope.isDirty && !$window.confirm(confirmMessage)) {\n          event.preventDefault();\n        }\n      });\n\n      $scope.$on('$destroy', () => {\n        $window.onbeforeunload = _onbeforeunload;\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('alertUnsavedChanges', alertUnsavedChanges);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/alert-unsaved-changes.js","const ApiKeyDialog = {\n  template: `<div class=\"modal-header\">\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" ng-click=\"$ctrl.close()\"><span aria-hidden=\"true\">&times;</span></button>\n</div>\n<div class=\"modal-body\">\n    <h5>API Key</h5>\n    <pre>{{$ctrl.apiKey}}</pre>\n\n    <h5>Example API Calls:</h5>\n\n    <div>\n        Results in CSV format:\n\n        <pre>{{$ctrl.csvUrl}}</pre>\n\n        Results in JSON format:\n\n        <pre>{{$ctrl.jsonUrl}}</pre>\n    </div>\n</div>`,\n  controller(clientConfig) {\n    'ngInject';\n\n    this.apiKey = this.resolve.query.api_key;\n    this.csvUrl = `${clientConfig.basePath}api/queries/${this.resolve.query.id}/results.csv?api_key=${this.apiKey}`;\n    this.jsonUrl = `${clientConfig.basePath}api/queries/${this.resolve.query.id}/results.json?api_key=${this.apiKey}`;\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('apiKeyDialog', ApiKeyDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/api-key-dialog.js","import template from './embed-code-dialog.html';\n\nconst EmbedCodeDialog = {\n  controller(clientConfig) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.visualization = this.resolve.visualization;\n\n    this.embedUrl = `${clientConfig.basePath}embed/query/${this.query.id}/visualization/${this.visualization.id}?api_key=${this.query.api_key}`;\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(this.query, this.visualization);\n    }\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('embedCodeDialog', EmbedCodeDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/embed-code-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Embed Code</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <h5>IFrame Embed</h5>\\n  <div>\\n    <code>&lt;iframe src=\\\"{{ $ctrl.embedUrl }}\\\" width=\\\"720\\\" height=\\\"391\\\"&gt;&lt;/iframe&gt;</code>\\n  </div>\\n  <span class=\\\"text-muted\\\">(height should be adjusted)</span>\\n  <div ng-if=\\\"$ctrl.snapshotUrl\\\">\\n    <h5>Image Embed</h5>\\n    <div>\\n      <code style=\\\"overflow-wrap:break-word;\\\">{{$ctrl.snapshotUrl}}</code>\\n    </div>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/queries/embed-code-dialog.html\n// module id = 416\n// module chunks = 1","import 'brace';\nimport 'brace/mode/python';\nimport 'brace/mode/sql';\nimport 'brace/mode/json';\nimport 'brace/ext/language_tools';\nimport { map } from 'underscore';\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  window.ace.define(`ace/snippets/${mode}`, ['require', 'exports', 'module'], (require, exports) => {\n    exports.snippetText = '';\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets('python');\ndefineDummySnippets('sql');\ndefineDummySnippets('json');\n\nfunction queryEditor(QuerySnippet) {\n  return {\n    restrict: 'E',\n    scope: {\n      query: '=',\n      schema: '=',\n      syntax: '=',\n    },\n    template: '<div ui-ace=\"editorOptions\" ng-model=\"query.query\"></div>',\n    link: {\n      pre($scope) {\n        $scope.syntax = $scope.syntax || 'sql';\n\n        $scope.editorOptions = {\n          mode: 'json',\n          // require: ['ace/ext/language_tools'],\n          advanced: {\n            behavioursEnabled: true,\n            enableSnippets: true,\n            enableBasicAutocompletion: true,\n            enableLiveAutocompletion: true,\n            autoScrollEditorIntoView: true,\n          },\n          onLoad(editor) {\n            // Release Cmd/Ctrl+L to the browser\n            editor.commands.bindKey('Cmd+L', null);\n            editor.commands.bindKey('Ctrl+L', null);\n\n            QuerySnippet.query((snippets) => {\n              window.ace.acequire(['ace/snippets'], (snippetsModule) => {\n                const snippetManager = snippetsModule.snippetManager;\n                const m = {\n                  snippetText: '',\n                };\n                m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n                snippets.forEach((snippet) => {\n                  m.snippets.push(snippet.getSnippet());\n                });\n\n                snippetManager.register(m.snippets || [], m.scope);\n              });\n            });\n\n            editor.$blockScrolling = Infinity;\n            editor.getSession().setUseWrapMode(true);\n            editor.setShowPrintMargin(false);\n\n            $scope.$watch('syntax', (syntax) => {\n              const newMode = `ace/mode/${syntax}`;\n              editor.getSession().setMode(newMode);\n            });\n\n            $scope.$watch('schema', (newSchema, oldSchema) => {\n              if (newSchema !== oldSchema) {\n                const tokensCount =\n                  newSchema.reduce((totalLength, table) => totalLength + table.columns.length, 0);\n                // If there are too many tokens we disable live autocomplete,\n                // as it makes typing slower.\n                if (tokensCount > 5000) {\n                  editor.setOption('enableLiveAutocompletion', false);\n                } else {\n                  editor.setOption('enableLiveAutocompletion', true);\n                }\n              }\n            });\n\n            $scope.$parent.$on('angular-resizable.resizing', () => {\n              editor.resize();\n            });\n\n            editor.focus();\n          },\n        };\n\n\n        const schemaCompleter = {\n          getCompletions(state, session, pos, prefix, callback) {\n            if (prefix.length === 0 || !$scope.schema) {\n              callback(null, []);\n              return;\n            }\n\n            if (!$scope.schema.keywords) {\n              const keywords = {};\n\n              $scope.schema.forEach((table) => {\n                keywords[table.name] = 'Table';\n\n                table.columns.forEach((c) => {\n                  keywords[c] = 'Column';\n                  keywords[`${table.name}.${c}`] = 'Column';\n                });\n              });\n\n              $scope.schema.keywords = map(keywords, (v, k) =>\n                ({\n                  name: k,\n                  value: k,\n                  score: 0,\n                  meta: v,\n                }));\n            }\n            callback(null, $scope.schema.keywords);\n          },\n        };\n\n\n        window.ace.acequire(['ace/ext/language_tools'], (langTools) => {\n          langTools.addCompleter(schemaCompleter);\n        });\n      },\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('queryEditor', queryEditor);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/query-editor.js","import moment from 'moment';\n\nfunction queryResultLink() {\n  return {\n    restrict: 'A',\n    link(scope, element, attrs) {\n      const fileType = attrs.fileType ? attrs.fileType : 'csv';\n      scope.$watch('queryResult && queryResult.getData()', (data) => {\n        if (!data) {\n          return;\n        }\n\n        if (scope.queryResult.getId() == null) {\n          element.attr('href', '');\n        } else {\n          element.attr('href', `api/queries/${scope.query.id}/results/${scope.queryResult.getId()}.${fileType}${scope.embed ? `?api_key=${scope.apiKey}` : ''}`);\n          element.attr('download', `${scope.query.name.replace(' ', '_') + moment(scope.queryResult.getUpdatedAt()).format('_YYYY_MM_DD')}.${fileType}`);\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('queryResultLink', queryResultLink);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/query-results-link.js","import moment from 'moment';\nimport { map, range, partial } from 'underscore';\n\nimport template from './schedule-dialog.html';\n\nfunction padWithZeros(size, v) {\n  let str = String(v);\n  if (str.length < size) {\n    str = `0${str}`;\n  }\n  return str;\n}\n\nfunction queryTimePicker() {\n  return {\n    restrict: 'E',\n    scope: {\n      refreshType: '=',\n      query: '=',\n      saveQuery: '=',\n    },\n    template: `\n      <select ng-disabled=\"refreshType != 'daily'\" ng-model=\"hour\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in hourOptions\"></select> :\n      <select ng-disabled=\"refreshType != 'daily'\" ng-model=\"minute\" ng-change=\"updateSchedule()\" ng-options=\"c as c for c in minuteOptions\"></select>\n    `,\n    link($scope) {\n      $scope.hourOptions = map(range(0, 24), partial(padWithZeros, 2));\n      $scope.minuteOptions = map(range(0, 60, 5), partial(padWithZeros, 2));\n\n      if ($scope.query.hasDailySchedule()) {\n        const parts = $scope.query.scheduleInLocalTime().split(':');\n        $scope.minute = parts[1];\n        $scope.hour = parts[0];\n      } else {\n        $scope.minute = '15';\n        $scope.hour = '00';\n      }\n\n      $scope.updateSchedule = () => {\n        const newSchedule = moment().hour($scope.hour)\n          .minute($scope.minute)\n          .utc()\n          .format('HH:mm');\n\n        if (newSchedule !== $scope.query.schedule) {\n          $scope.query.schedule = newSchedule;\n          $scope.saveQuery();\n        }\n      };\n\n      $scope.$watch('refreshType', () => {\n        if ($scope.refreshType === 'daily') {\n          $scope.updateSchedule();\n        }\n      });\n    },\n  };\n}\n\nfunction queryRefreshSelect() {\n  return {\n    restrict: 'E',\n    scope: {\n      refreshType: '=',\n      query: '=',\n      saveQuery: '=',\n    },\n    template: `<select\n                ng-disabled=\"refreshType != 'periodic'\"\n                ng-model=\"query.schedule\"\n                ng-change=\"saveQuery()\"\n                ng-options=\"c.value as c.name for c in refreshOptions\">\n                <option value=\"\">No Refresh</option>\n                </select>`,\n    link($scope) {\n      $scope.refreshOptions = [\n        {\n          value: '60',\n          name: 'Every minute',\n        },\n      ];\n\n      [5, 10, 15, 30].forEach((i) => {\n        $scope.refreshOptions.push({\n          value: String(i * 60),\n          name: `Every ${i} minutes`,\n        });\n      });\n\n      range(1, 13).forEach((i) => {\n        $scope.refreshOptions.push({\n          value: String(i * 3600),\n          name: `Every ${i}h`,\n        });\n      });\n\n      $scope.refreshOptions.push({\n        value: String(24 * 3600),\n        name: 'Every 24h',\n      });\n      $scope.refreshOptions.push({\n        value: String(7 * 24 * 3600),\n        name: 'Every 7 days',\n      });\n      $scope.refreshOptions.push({\n        value: String(14 * 24 * 3600),\n        name: 'Every 14 days',\n      });\n      $scope.refreshOptions.push({\n        value: String(30 * 24 * 3600),\n        name: 'Every 30 days',\n      });\n\n      $scope.$watch('refreshType', () => {\n        if ($scope.refreshType === 'periodic') {\n          if ($scope.query.hasDailySchedule()) {\n            $scope.query.schedule = null;\n            $scope.saveQuery();\n          }\n        }\n      });\n    },\n\n  };\n}\n\nconst ScheduleForm = {\n  controller() {\n    this.query = this.resolve.query;\n    this.saveQuery = this.resolve.saveQuery;\n\n    if (this.query.hasDailySchedule()) {\n      this.refreshType = 'daily';\n    } else {\n      this.refreshType = 'periodic';\n    }\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.directive('queryTimePicker', queryTimePicker);\n  ngModule.directive('queryRefreshSelect', queryRefreshSelect);\n  ngModule.component('scheduleDialog', ScheduleForm);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/schedule-dialog.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Refresh Schedule</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"periodic\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-refresh-select refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-refresh-select>\\n        </label>\\n    </div>\\n    <div class=\\\"radio\\\">\\n        <label>\\n            <input type=\\\"radio\\\" value=\\\"daily\\\" ng-model=\\\"$ctrl.refreshType\\\">\\n            <query-time-picker refresh-type=\\\"$ctrl.refreshType\\\" query=\\\"$ctrl.query\\\" save-query=\\\"$ctrl.saveQuery\\\"></query-time-picker>\\n        </label>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/queries/schedule-dialog.html\n// module id = 425\n// module chunks = 1","import template from './schema-browser.html';\n\nfunction SchemaBrowserCtrl($scope) {\n  'ngInject';\n\n  this.showTable = (table) => {\n    table.collapsed = !table.collapsed;\n    $scope.$broadcast('vsRepeatTrigger');\n  };\n\n  this.getSize = (table) => {\n    let size = 18;\n\n    if (!table.collapsed) {\n      size += 18 * table.columns.length;\n    }\n\n    return size;\n  };\n}\n\nconst SchemaBrowser = {\n  bindings: {\n    schema: '<',\n    onRefresh: '&',\n  },\n  controller: SchemaBrowserCtrl,\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('schemaBrowser', SchemaBrowser);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/schema-browser.js","module.exports = \"<div class=\\\"schema-container\\\">\\n  <div class=\\\"schema-control\\\">\\n    <input type=\\\"text\\\" placeholder=\\\"Search schema...\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.schemaFilter\\\">\\n    <button class=\\\"btn btn-default\\\"\\n            title=\\\"Refresh Schema\\\"\\n            ng-click=\\\"$ctrl.onRefresh()\\\">\\n      <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"schema-browser\\\" vs-repeat vs-size=\\\"$ctrl.getSize(table)\\\">\\n    <div ng-repeat=\\\"table in $ctrl.schema | filter:$ctrl.schemaFilter track by table.name\\\">\\n      <div class=\\\"table-name\\\" ng-click=\\\"$ctrl.showTable(table)\\\">\\n        <i class=\\\"fa fa-table\\\"></i>\\n        <strong>\\n          <span title=\\\"{{table.name}}\\\">{{table.name}}</span>\\n          <span ng-if=\\\"table.size !== undefined\\\"> ({{table.size}})</span>\\n        </strong>\\n      </div>\\n      <div uib-collapse=\\\"table.collapsed\\\">\\n        <div ng-repeat=\\\"column in table.columns track by column\\\" style=\\\"padding-left:16px;\\\">{{column}}</div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/queries/schema-browser.html\n// module id = 427\n// module chunks = 1","import { find } from 'underscore';\nimport logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './visualization-embed.html';\n\nconst VisualizationEmbed = {\n  template,\n  bindings: {\n    data: '<',\n  },\n  controller($routeParams, Query, QueryResult) {\n    'ngInject';\n\n    document.querySelector('body').classList.add('headless');\n    const visualizationId = parseInt($routeParams.visualizationId, 10);\n    this.showQueryDescription = $routeParams.showDescription;\n    this.apiKey = $routeParams.api_key;\n    this.logoUrl = logoUrl;\n    this.query = new Query(this.data[0]);\n    this.queryResult = new QueryResult(this.data[1]);\n    this.visualization =\n      find(this.query.visualizations, visualization => visualization.id === visualizationId);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('visualizationEmbed', VisualizationEmbed);\n\n  function session($http, $route, Auth) {\n    'ngInject';\n\n    const apiKey = $route.current.params.api_key;\n    Auth.setApiKey(apiKey);\n    return Auth.loadConfig();\n  }\n\n  function loadData($http, $route, $q, Auth) {\n    return session($http, $route, Auth).then(() => {\n      const queryId = $route.current.params.queryId;\n      const query = $http.get(`api/queries/${queryId}`).then(response => response.data);\n      const queryResult = $http.get(`api/queries/${queryId}/results.json${location.search}`).then(response => response.data);\n      return $q.all([query, queryResult]);\n    });\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/embed/query/:queryId/visualization/:visualizationId', {\n      template: '<visualization-embed data=\"$resolve.data\"></visualization-embed>',\n      resolve: {\n        data: loadData,\n      },\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/queries/visualization-embed.js","module.exports = \"<div class=\\\"tile m-10\\\">\\n  <div class=\\\"t-heading p-10\\\">\\n    <h3 class=\\\"th-title\\\">\\n      <p>\\n        <img ng-src=\\\"{{$ctrl.logoUrl}}\\\" style=\\\"height: 24px;\\\"/>\\n        {{$ctrl.query.name}}\\n        <small><visualization-name visualization=\\\"$ctrl.visualization\\\"/></small>\\n      </p>\\n      <small ng-if=\\\"$ctrl.showQueryDescription\\\">\\n        <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n      </small>\\n    </h3>\\n  </div>\\n\\n  <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\">\\n  </visualization-renderer>\\n\\n  <div class=\\\"bg-ace clearfix p-10\\\">\\n    <div class=\\\"col-sm-6\\\">\\n      <span class=\\\"label label-default hidden-print\\\">Updated: <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\"></span></span>\\n      <span class=\\\"label label-default visible-print\\\">Updated: {{$ctrl.queryResult.getUpdatedAt() | dateTime}}</span>\\n    </div>\\n    <div class=\\\"col-sm-6 text-right hidden-print\\\">\\n      <a class=\\\"btn btn-default btn-xs\\\" ng-href=\\\"queries/{{$ctrl.query.id}}#{{$ctrl.visualization.id}}\\\" target=\\\"_blank\\\" tooltip=\\\"Open in Redash\\\">\\n        <span class=\\\"zmdi zmdi-link\\\"></span>\\n      </a>\\n\\n      <div class=\\\"btn-group\\\" uib-dropdown>\\n        <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs dropdown-toggle\\\" aria-haspopup=\\\"true\\\" uib-dropdown-toggle\\n                aria-expanded=\\\"false\\\">\\n          Download Dataset <span class=\\\"caret\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n            </a>\\n          </li>\\n          <li>\\n            <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\"  target=\\\"_self\\\">\\n              <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n            </a>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/queries/visualization-embed.html\n// module id = 429\n// module chunks = 1","\nfunction QueryLinkController() {\n  let hash = null;\n  if (this.visualization) {\n    if (this.visualization.type === 'TABLE') {\n      // link to hard-coded table tab instead of the (hidden) visualization tab\n      hash = 'table';\n    } else {\n      hash = this.visualization.id;\n    }\n  }\n\n  this.link = this.query.getUrl(false, hash);\n}\n\nexport default function init(ngModule) {\n  ngModule.component('queryLink', {\n    bindings: {\n      query: '<',\n      visualization: '<',\n    },\n    template: '<a ng-href=\"{{$ctrl.link}}\" class=\"query-link\">{{$ctrl.query.name}}</a>',\n    controller: QueryLinkController,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/query-link.js","function rdTab($location) {\n  return {\n    restrict: 'E',\n    scope: {\n      tabId: '@',\n      name: '@',\n      basePath: '=?',\n    },\n    transclude: true,\n    template: '<li class=\"rd-tab\" ng-class=\"{active: tabId==selectedTab}\"><a href=\"{{basePath}}#{{tabId}}\">{{name}}<span ng-transclude></span></a></li>',\n    replace: true,\n    link(scope) {\n      scope.basePath = scope.basePath || $location.path().substring(1);\n      scope.$watch(\n        () => scope.$parent.selectedTab,\n        (tab) => { scope.selectedTab = tab; },\n      );\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('rdTab', rdTab);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/rd-tab/index.js","const RdTimeAgo = {\n  bindings: {\n    value: '=',\n  },\n  controller() {\n  },\n  template: '<span>' +\n      '<span ng-show=\"$ctrl.value\" am-time-ago=\"$ctrl.value\"></span>' +\n      '<span ng-hide=\"$ctrl.value\">-</span>' +\n      '</span>',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('rdTimeAgo', RdTimeAgo);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/rd-time-ago.js","import moment from 'moment';\n\nfunction rdTimer() {\n  return {\n    restrict: 'E',\n    scope: { timestamp: '=' },\n    template: '{{currentTime}}',\n    controller($scope) {\n      $scope.currentTime = '00:00:00';\n\n      // We're using setInterval directly instead of $timeout, to avoid using $apply, to\n      // prevent the digest loop being run every second.\n      let currentTimer = setInterval(() => {\n        $scope.currentTime = moment(moment() - moment($scope.timestamp)).utc().format('HH:mm:ss');\n        $scope.$digest();\n      }, 1000);\n\n      $scope.$on('$destroy', () => {\n        if (currentTimer) {\n          clearInterval(currentTimer);\n          currentTimer = null;\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('rdTimer', rdTimer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/rd-timer.js","export default function init(ngModule) {\n  ngModule.component('routeStatus', {\n    template: '<overlay ng-if=\"$ctrl.permissionDenied\">You do not have permission to load this page.',\n\n    controller($rootScope) {\n      this.permissionDenied = false;\n\n      $rootScope.$on('$routeChangeSuccess', () => {\n        this.permissionDenied = false;\n      });\n\n      $rootScope.$on('$routeChangeError', (event, current, previous, rejection) => {\n        if (rejection.status === 403) {\n          this.permissionDenied = true;\n        }\n      });\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/route-status.js","import startsWith from 'underscore.string/startsWith';\nimport template from './settings-screen.html';\n\nexport default function init(ngModule) {\n  ngModule.directive('settingsScreen', $location => ({\n    restrict: 'E',\n    transclude: true,\n    template,\n    controller($scope, currentUser) {\n      $scope.usersPage = startsWith($location.path(), '/users');\n      $scope.groupsPage = startsWith($location.path(), '/groups');\n      $scope.dsPage = startsWith($location.path(), '/data_sources');\n      $scope.destinationsPage = startsWith($location.path(), '/destinations');\n      $scope.snippetsPage = startsWith($location.path(), '/query_snippets');\n\n      $scope.showGroupsLink = currentUser.hasPermission('list_users');\n      $scope.showUsersLink = currentUser.hasPermission('list_users');\n      $scope.showDsLink = currentUser.hasPermission('admin');\n      $scope.showDestinationsLink = currentUser.hasPermission('admin');\n      $scope.showQuerySnippetsLink = currentUser.hasPermission('create_query');\n    },\n  }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/settings-screen.js","module.exports = \"<page-header title=\\\"Settings\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li ng-class=\\\"{'active': dsPage }\\\" ng-if=\\\"showDsLink\\\"><a href=\\\"data_sources\\\">Data Sources</a></li>\\n      <li ng-class=\\\"{'active': usersPage }\\\" ng-if=\\\"showUsersLink\\\"><a href=\\\"users\\\">Users</a></li>\\n      <li ng-class=\\\"{'active': groupsPage }\\\" ng-if=\\\"showGroupsLink\\\"><a href=\\\"groups\\\">Groups</a></li>\\n      <li ng-class=\\\"{'active': destinationsPage }\\\" ng-if=\\\"showDestinationsLink\\\"><a href=\\\"destinations\\\">Alert Destinations</a></li>\\n      <li ng-class=\\\"{'active': snippetsPage }\\\" ng-if=\\\"showQuerySnippetsLink\\\"><a href=\\\"query_snippets\\\">Query Snippets</a></li>\\n    </ul>\\n\\n    <div ng-transclude>\\n\\n    </div>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/components/settings-screen.html\n// module id = 436\n// module chunks = 1","export default function init(ngModule) {\n  ngModule.component('sortIcon', {\n    template: '<span ng-if=\"$ctrl.showIcon\"><i class=\"fa fa-sort-{{$ctrl.icon}}\"></i></span>',\n    bindings: {\n      column: '<',\n      sortColumn: '<',\n      reverse: '<',\n    },\n    controller() {\n      this.$onChanges = (changes) => {\n        ['column', 'sortColumn', 'reverse'].forEach((v) => {\n          if (v in changes) {\n            this[v] = changes[v].currentValue;\n          }\n        });\n\n        this.showIcon = false;\n\n        if (this.column === this.sortColumn) {\n          this.showIcon = true;\n          this.icon = this.reverse ? 'desc' : 'asc';\n        }\n      };\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/sort-icon.js","import startsWith from 'underscore.string/startsWith';\n\nfunction controller($location) {\n  this.tabs.forEach((tab) => {\n    if (tab.isActive) {\n      tab.active = tab.isActive($location.path());\n    } else {\n      tab.active = startsWith($location.path(), `/${tab.path}`);\n    }\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.component('tabNav', {\n    template: '<ul class=\"tab-nav bg-white\">' +\n                '<li ng-repeat=\"tab in $ctrl.tabs\" ng-class=\"{\\'active\\': tab.active }\"><a ng-href=\"{{tab.path}}\">{{tab.name}}</a></li>' +\n              '</ul>',\n    controller,\n    bindings: {\n      tabs: '<',\n    },\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/tab-nav/index.js","export default function VisualizationName(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n    },\n    template: '{{name}}',\n    replace: false,\n    link(scope) {\n      const currentType = scope.visualization.type;\n      const nameByType = Visualization.visualizations[currentType].name;\n      const currentName = scope.visualization.name;\n      if (nameByType !== currentName) {\n        scope.name = scope.visualization.name;\n      }\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/components/visualization-name.js","var map = {\n\t\"./alert-dialog.js\": 441,\n\t\"./alert-subscription.js\": 442,\n\t\"./alert.js\": 443,\n\t\"./auth.js\": 444,\n\t\"./dashboard.js\": 445,\n\t\"./data-source.js\": 446,\n\t\"./destination.js\": 447,\n\t\"./events.js\": 448,\n\t\"./group.js\": 449,\n\t\"./keyboard-shortcuts.js\": 450,\n\t\"./notifications.js\": 453,\n\t\"./offline-listener.js\": 454,\n\t\"./query-result.js\": 232,\n\t\"./query-snippet.js\": 455,\n\t\"./query.js\": 456,\n\t\"./user.js\": 458,\n\t\"./widget.js\": 459\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 440;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/services ^((?![\\\\/]test[\\\\/]).)*\\.js$\n// module id = 440\n// module chunks = 1","const AlertDialogComponent = {\n  template: `\n<div class=\"modal-header\">\n    <h4 class=\"modal-title\" ng-if=\"$ctrl.title\">{{$ctrl.title}}</h4>\n</div>\n<div class=\"modal-body\">\n  <p ng-bind-html=\"$ctrl.message\"></p>\n</div>\n<div class=\"modal-footer\">\n  <button class=\"btn btn-default\" ng-click=\"$ctrl.dismiss()\">Cancel</button>\n  <button class=\"btn\" ng-class=\"$ctrl.confirm.class\" ng-click=\"$ctrl.close()\" ng-if=\"$ctrl.confirm.show\">{{$ctrl.confirm.title}}</button>\n</div>\n  `,\n  bindings: {\n    close: '&',\n    dismiss: '&',\n    resolve: '<',\n  },\n  controller() {\n    this.title = this.resolve.title;\n    this.message = this.resolve.message;\n    this.confirm = Object.assign({}, { class: 'btn-sucess', show: true, title: 'OK' }, this.resolve.confirm);\n  },\n};\n\nfunction AlertDialog($uibModal) {\n  const service = {\n    open(title, message, confirm) {\n      return $uibModal.open({\n        component: 'alertDialog',\n        resolve: {\n          title: () => title,\n          message: () => message,\n          confirm: () => confirm,\n        },\n      }).result;\n    },\n  };\n\n  return service;\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertDialog', AlertDialogComponent);\n  ngModule.factory('AlertDialog', AlertDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/alert-dialog.js","function AlertSubscription($resource) {\n  const resource = $resource('api/alerts/:alertId/subscriptions/:subscriberId', { alertId: '@alert_id', subscriberId: '@id' });\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('AlertSubscription', AlertSubscription);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/alert-subscription.js","function Alert($resource, $http) {\n  const actions = {\n    save: {\n      method: 'POST',\n      transformRequest: [(data) => {\n        const newData = Object.assign({}, data);\n        if (newData.query_id === undefined) {\n          newData.query_id = newData.query.id;\n          newData.destination_id = newData.destinations;\n          delete newData.query;\n          delete newData.destinations;\n        }\n\n        return newData;\n      }].concat($http.defaults.transformRequest),\n    },\n  };\n  const resource = $resource('api/alerts/:id', { id: '@id' }, actions);\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Alert', Alert);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/alert.js","import debug from 'debug';\n\nconst logger = debug('redash:auth');\nconst SESSION_ITEM = 'session';\nconst session = { loaded: false };\n\nfunction storeSession(sessionData) {\n  logger('Updating session to be:', sessionData);\n  Object.assign(session, sessionData, { loaded: true });\n}\n\nfunction getLocalSessionData() {\n  if (session.loaded) {\n    return session;\n  }\n\n  const sessionData = window.sessionStorage.getItem(SESSION_ITEM);\n  if (sessionData) {\n    storeSession(JSON.parse(sessionData));\n  }\n\n  return session;\n}\n\nfunction AuthService($window, $location, $q, $http) {\n  const Auth = {\n    isAuthenticated() {\n      const sessionData = getLocalSessionData();\n      return sessionData.loaded && sessionData.user.id;\n    },\n    login() {\n      const next = encodeURI($location.url());\n      logger('Calling login with next = %s', next);\n      window.location.href = `login?next=${next}`;\n    },\n    logout() {\n      logger('Logout.');\n      window.sessionStorage.removeItem(SESSION_ITEM);\n      $window.location.href = 'logout';\n    },\n    loadSession() {\n      logger('Loading session');\n      const sessionData = getLocalSessionData();\n      if (sessionData.loaded && sessionData.user.id) {\n        logger('Resolving with local value.');\n        return $q.resolve(sessionData);\n      }\n\n      this.setApiKey(null);\n      return $http.get('api/session').then((response) => {\n        storeSession(response.data);\n        return session;\n      });\n    },\n    loadConfig() {\n      logger('Loading config');\n      return $http.get('/api/config').then((response) => {\n        storeSession({ client_config: response.data.client_config, user: { permissions: [] } });\n        return response.data;\n      });\n    },\n    setApiKey(apiKey) {\n      logger('Set API key to: %s', apiKey);\n      this.apiKey = apiKey;\n    },\n    getApiKey() {\n      return this.apiKey;\n    },\n  };\n\n  return Auth;\n}\n\nfunction CurrentUserService() {\n  const sessionData = getLocalSessionData();\n  Object.assign(this, sessionData.user);\n\n  this.canEdit = (object) => {\n    const userId = object.user_id || (object.user && object.user.id);\n    return this.hasPermission('admin') || (userId && (userId === this.id));\n  };\n\n  this.hasPermission = permission => this.permissions.indexOf(permission) !== -1;\n\n  this.isAdmin = this.hasPermission('admin');\n}\n\nfunction ClientConfigService() {\n  Object.assign(this, getLocalSessionData().client_config);\n}\n\nfunction apiKeyHttpInterceptor($injector) {\n  return {\n    request(config) {\n      const Auth = $injector.get('Auth');\n      const apiKey = Auth.getApiKey();\n      if (apiKey) {\n        config.headers.Authorization = `Key ${apiKey}`;\n      }\n\n      return config;\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Auth', AuthService);\n  ngModule.service('currentUser', CurrentUserService);\n  ngModule.service('clientConfig', ClientConfigService);\n  ngModule.factory('apiKeyHttpInterceptor', apiKeyHttpInterceptor);\n\n  ngModule.config(($httpProvider) => {\n    $httpProvider.interceptors.push('apiKeyHttpInterceptor');\n  });\n\n  ngModule.run(($location, $window, $rootScope, $route, Auth) => {\n    $rootScope.$on('$routeChangeStart', (event, to) => {\n      if (to.authenticated && !Auth.isAuthenticated()) {\n        logger('Requested authenticated route: ', to);\n        event.preventDefault();\n        // maybe we only miss the session? try to load session\n        Auth.loadSession().then(() => {\n          logger('Loaded session');\n          $route.reload();\n        }).catch(() => {\n          logger('Need to login, redirecting');\n          Auth.login();\n        });\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/auth.js","import { map, isArray } from 'underscore';\n\nfunction Dashboard($resource, $http, currentUser, Widget) {\n  function transformSingle(dashboard) {\n    dashboard.widgets = map(dashboard.widgets, row => row.map(widget => new Widget(widget)));\n    dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  }\n\n  const transform = $http.defaults.transformResponse.concat((data) => {\n    if (isArray(data)) {\n      data.forEach(transformSingle);\n    } else {\n      transformSingle(data);\n    }\n    return data;\n  });\n\n  const resource = $resource('api/dashboards/:slug', { slug: '@slug' }, {\n    get: { method: 'GET', transformResponse: transform },\n    save: { method: 'POST', transformResponse: transform },\n    query: { method: 'GET', isArray: true, transformResponse: transform },\n    recent: {\n      method: 'get',\n      isArray: true,\n      url: 'api/dashboards/recent',\n      transformResponse: transform,\n    },\n  });\n\n  resource.prototype.canEdit = function canEdit() {\n    return currentUser.canEdit(this) || this.can_edit;\n  };\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Dashboard', Dashboard);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/dashboard.js","function DataSource($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    test: {\n      method: 'POST', cache: false, isArray: false, url: 'api/data_sources/:id/test',\n    },\n    getSchema: {\n      method: 'GET', cache: false, isArray: true, url: 'api/data_sources/:id/schema',\n    },\n  };\n\n  const DataSourceResource = $resource('api/data_sources/:id', { id: '@id' }, actions);\n\n  return DataSourceResource;\n}\n\n\nexport default function init(ngModule) {\n  ngModule.factory('DataSource', DataSource);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/data-source.js","function Destination($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n  };\n\n  const DestinationResource = $resource('api/destinations/:id', { id: '@id' }, actions);\n\n  return DestinationResource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Destination', Destination);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/destination.js","import { debounce } from 'underscore';\n\nfunction Events($http) {\n  this.events = [];\n\n  this.post = debounce(() => {\n    const events = this.events;\n    this.events = [];\n\n    $http.post('api/events', events);\n  }, 1000);\n\n  this.record = function record(action, objectType, objectId, additionalProperties) {\n    const event = {\n      action,\n      object_type: objectType,\n      object_id: objectId,\n      timestamp: Date.now() / 1000.0,\n    };\n    Object.assign(event, additionalProperties);\n    this.events.push(event);\n\n    this.post();\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.service('Events', Events);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/events.js","function Group($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    members: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/members',\n    },\n    dataSources: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/data_sources',\n    },\n  };\n  const resource = $resource('api/groups/:id', { id: '@id' }, actions);\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Group', Group);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/group.js","import { each } from 'underscore';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/global-bind/mousetrap-global-bind';\n\n\nfunction KeyboardShortcuts() {\n  this.bind = function bind(keymap) {\n    each(keymap, (fn, key) => {\n      Mousetrap.bindGlobal(key, (e) => {\n        e.preventDefault();\n        fn();\n      });\n    });\n  };\n\n  this.unbind = function unbind(keymap) {\n    each(keymap, (fn, key) => {\n      Mousetrap.unbind(key);\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.service('KeyboardShortcuts', KeyboardShortcuts);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/keyboard-shortcuts.js","import debug from 'debug';\n\nconst logger = debug('redash:notifications');\n\nfunction Notifications(currentUser, Events) {\n  const notificationService = { pageVisible: true };\n\n  notificationService.monitorVisibility = function monitorVisibility() {\n    let hidden;\n    let visibilityChange;\n\n    if (typeof document.hidden !== 'undefined') {\n      hidden = 'hidden';\n      visibilityChange = 'visibilitychange';\n    } else if (typeof document.msHidden !== 'undefined') {\n      hidden = 'msHidden';\n      visibilityChange = 'msvisibilitychange';\n    }\n\n    let documentHidden = document[hidden];\n\n    document.addEventListener(visibilityChange, () => {\n      if (documentHidden !== document[hidden]) {\n        if (document[hidden]) {\n          notificationService.pageVisible = false;\n        } else {\n          notificationService.pageVisible = true;\n        }\n\n        documentHidden = document[hidden];\n      }\n    });\n  };\n\n  notificationService.monitorVisibility();\n\n  notificationService.isSupported = () => {\n    if ('Notification' in window) {\n      return true;\n    }\n\n    logger('HTML5 notifications are not supported.');\n    return false;\n  };\n\n  notificationService.getPermissions = function getPermissions() {\n    if (!this.isSupported()) {\n      return;\n    }\n\n    if (Notification.permission === 'default') {\n      Notification.requestPermission((status) => {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      });\n    }\n  };\n\n  notificationService.showNotification = function showNotification(title, content) {\n    if (!this.isSupported() || this.pageVisible || Notification.permission !== 'granted') {\n      return;\n    }\n\n    // using the 'tag' to avoid showing duplicate notifications\n    const notification = new Notification(title, { tag: title + content, body: content, icon: '/images/redash_icon_small.png' });\n    setTimeout(() => {\n      notification.close();\n    }, 3000);\n    notification.onclick = function onClick() {\n      window.focus();\n      this.close();\n      Events.record('click', 'notification');\n    };\n  };\n\n  return notificationService;\n}\n\n\nexport default function init(ngModule) {\n  ngModule.factory('Notifications', Notifications);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/notifications.js","function OfflineListener(toastr) {\n  function addOnlineListener(toast) {\n    function onlineStateHandler() {\n      toastr.remove(toast.toastId);\n      window.removeEventListener('online', onlineStateHandler);\n    }\n    window.addEventListener('online', onlineStateHandler);\n  }\n\n  window.addEventListener('offline', () => {\n    const toast = toastr.warning('<div>Please check your Internet connection.</div>', '', {\n      allowHtml: true,\n      autoDismiss: false,\n      timeOut: false,\n      tapToDismiss: true,\n    });\n    addOnlineListener(toast);\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.service('OfflineListener', OfflineListener);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/offline-listener.js","function QuerySnippet($resource) {\n  const resource = $resource('api/query_snippets/:id', { id: '@id' });\n  resource.prototype.getSnippet = function getSnippet() {\n    let name = this.trigger;\n    if (this.description !== '') {\n      name = `${this.trigger}: ${this.description}`;\n    }\n\n    return {\n      name,\n      content: this.snippet,\n      tabTrigger: this.trigger,\n    };\n  };\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QuerySnippet', QuerySnippet);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/query-snippet.js","import moment from 'moment';\nimport debug from 'debug';\nimport Mustache from 'mustache';\nimport { each, object, isEmpty, pluck, filter, contains, union, uniq, has } from 'underscore';\n\nconst logger = debug('redash:services:query');\n\nfunction collectParams(parts) {\n  let parameters = [];\n\n  parts.forEach((part) => {\n    if (part[0] === 'name' || part[0] === '&') {\n      parameters.push(part[1]);\n    } else if (part[0] === '#') {\n      parameters = union(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nclass QueryResultError {\n  constructor(errorMessage) {\n    this.errorMessage = errorMessage;\n  }\n\n  getError() {\n    return this.errorMessage;\n  }\n\n  static getStatus() {\n    return 'failed';\n  }\n\n  static getData() {\n    return null;\n  }\n\n  static getLog() {\n    return null;\n  }\n\n  static getChartData() {\n    return null;\n  }\n}\n\nclass Parameter {\n  constructor(parameter) {\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.value = parameter.value;\n    this.global = parameter.global;\n    this.enumOptions = parameter.enumOptions;\n    this.queryId = parameter.queryId;\n  }\n\n  get ngModel() {\n    if (\n      this.type === 'date' ||\n      this.type === 'datetime-local' ||\n      this.type === 'datetime-with-seconds'\n    ) {\n      this.$$value = this.$$value || moment(this.value).toDate();\n      return this.$$value;\n    } else if (this.type === 'number') {\n      this.$$value = this.$$value || parseInt(this.value, 10);\n      return this.$$value;\n    }\n\n    return this.value;\n  }\n\n  set ngModel(value) {\n    if (value && this.type === 'date') {\n      this.value = moment(value).format('YYYY-MM-DD');\n      this.$$value = moment(this.value).toDate();\n    } else if (value && this.type === 'datetime-local') {\n      this.value = moment(value).format('YYYY-MM-DD HH:mm');\n      this.$$value = moment(this.value).toDate();\n    } else if (value && this.type === 'datetime-with-seconds') {\n      this.value = moment(value).format('YYYY-MM-DD HH:mm:ss');\n      this.$$value = moment(this.value).toDate();\n    } else {\n      this.value = this.$$value = value;\n    }\n  }\n}\n\nclass Parameters {\n  constructor(query, queryString) {\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  parseQuery() {\n    let parameters = [];\n    try {\n      const parts = Mustache.parse(this.query.query);\n      parameters = uniq(collectParams(parts));\n    } catch (e) {\n      logger('Failed parsing parameters: ', e);\n    }\n    return parameters;\n  }\n\n  updateParameters() {\n    if (this.query.query === this.cachedQueryText) {\n      return;\n    }\n\n    this.cachedQueryText = this.query.query;\n    const parameterNames = this.parseQuery();\n\n    this.query.options.parameters = this.query.options.parameters || [];\n\n    const parametersMap = {};\n    this.query.options.parameters.forEach((param) => {\n      parametersMap[param.name] = param;\n    });\n\n    parameterNames.forEach((param) => {\n      if (!has(parametersMap, param)) {\n        this.query.options.parameters.push({\n          title: param,\n          name: param,\n          type: 'text',\n          value: null,\n          global: false,\n        });\n      }\n    });\n\n    const parameterExists = p => contains(parameterNames, p.name);\n    this.query.options.parameters = this.query.options.parameters\n      .filter(parameterExists)\n      .map(p => new Parameter(p));\n  }\n\n  initFromQueryString(queryString) {\n    this.get().forEach((param) => {\n      const queryStringName = `p_${param.name}`;\n      if (has(queryString, queryStringName)) {\n        param.value = queryString[queryStringName];\n      }\n    });\n  }\n\n  get() {\n    this.updateParameters();\n    return this.query.options.parameters;\n  }\n\n  getMissing() {\n    return pluck(filter(this.get(), p => p.value === null || p.value === ''), 'title');\n  }\n\n  isRequired() {\n    return !isEmpty(this.get());\n  }\n\n  getValues() {\n    const params = this.get();\n    return object(pluck(params, 'name'), pluck(params, 'value'));\n  }\n}\n\nfunction QueryResource($resource, $http, $q, $location, currentUser, QueryResult) {\n  const Query = $resource(\n    'api/queries/:id',\n    { id: '@id' },\n    {\n      search: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/search',\n      },\n      recent: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/recent',\n      },\n      query: {\n        isArray: false,\n      },\n      myQueries: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/my',\n      },\n      fork: {\n        method: 'post',\n        isArray: false,\n        url: 'api/queries/:id/fork',\n        params: { id: '@id' },\n      },\n      resultById: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/:id/results.json',\n      },\n    },\n  );\n\n  Query.newQuery = function newQuery() {\n    return new Query({\n      query: '',\n      name: 'New Query',\n      schedule: null,\n      user: currentUser,\n      options: {},\n    });\n  };\n\n  Query.format = function formatQuery(syntax, query) {\n    if (syntax === 'json') {\n      try {\n        const formatted = JSON.stringify(JSON.parse(query), ' ', 4);\n        return $q.resolve(formatted);\n      } catch (err) {\n        return $q.reject(String(err));\n      }\n    } else if (syntax === 'sql') {\n      return $http.post('api/queries/format', { query }).then(response => response.data.query);\n    } else {\n      return $q.reject('Query formatting is not supported for your data source syntax.');\n    }\n  };\n\n  Query.prototype.getSourceLink = function getSourceLink() {\n    return `/queries/${this.id}/source`;\n  };\n\n  Query.prototype.isNew = function isNew() {\n    return this.id === undefined;\n  };\n\n  Query.prototype.hasDailySchedule = function hasDailySchedule() {\n    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n  };\n\n  Query.prototype.scheduleInLocalTime = function scheduleInLocalTime() {\n    const parts = this.schedule.split(':');\n    return moment\n      .utc()\n      .hour(parts[0])\n      .minute(parts[1])\n      .local()\n      .format('HH:mm');\n  };\n\n  Query.prototype.hasResult = function hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  };\n\n  Query.prototype.paramsRequired = function paramsRequired() {\n    return this.getParameters().isRequired();\n  };\n\n  Query.prototype.getQueryResult = function getQueryResult(maxAge) {\n    if (!this.query) {\n      return new QueryResultError(\"Can't execute empty query.\");\n    }\n    let queryText = this.query;\n\n    const parameters = this.getParameters();\n    const missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      let paramsWord = 'parameter';\n      let valuesWord = 'value';\n      if (missingParams.length > 1) {\n        paramsWord = 'parameters';\n        valuesWord = 'values';\n      }\n\n      return new QueryResult({\n        job: {\n          error: `missing ${valuesWord} for ${missingParams.join(', ')} ${paramsWord}.`,\n          status: 4,\n        },\n      });\n    }\n\n    if (parameters.isRequired()) {\n      queryText = Mustache.render(queryText, parameters.getValues());\n\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({\n          query_result: this.latest_query_data,\n        });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.latest_query_data_id);\n      }\n    } else if (this.data_source_id) {\n      this.queryResult = QueryResult.get(this.data_source_id, queryText, maxAge, this.id);\n    } else {\n      return new QueryResultError('Please select data source to run this query.');\n    }\n\n    return this.queryResult;\n  };\n\n  Query.prototype.getUrl = function getUrl(source, hash) {\n    let url = `queries/${this.id}`;\n\n    if (source) {\n      url += '/source';\n    }\n\n    let params = '';\n    if (this.getParameters().isRequired()) {\n      each(this.getParameters().getValues(), (value, name) => {\n        if (value === null) {\n          return;\n        }\n\n        if (params !== '') {\n          params += '&';\n        }\n\n        params += `p_${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n      });\n    }\n\n    if (params !== '') {\n      url += `?${params}`;\n    }\n\n    if (hash) {\n      url += `#${hash}`;\n    }\n\n    return url;\n  };\n\n  Query.prototype.getQueryResultPromise = function getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  };\n\n  Query.prototype.getParameters = function getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, $location.search());\n    }\n\n    return this.$parameters;\n  };\n\n  Query.prototype.getParametersDefs = function getParametersDefs() {\n    return this.getParameters().get();\n  };\n\n  return Query;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Query', QueryResource);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/query.js","import { isArray } from 'underscore';\n\nfunction transformSingle(user) {\n  if (user.groups !== undefined) {\n    user.admin = user.groups.indexOf('admin') !== -1;\n  }\n}\n\nfunction transform(data) {\n  if (isArray(data)) {\n    data.forEach(transformSingle);\n  } else {\n    transformSingle(data);\n  }\n\n  return data;\n}\n\nfunction User($resource, $http) {\n  const transformResponse = $http.defaults.transformResponse.concat(transform);\n\n  const actions = {\n    get: { method: 'GET', transformResponse },\n    save: { method: 'POST', transformResponse },\n    query: { method: 'GET', isArray: true, transformResponse },\n    delete: { method: 'DELETE', transformResponse },\n  };\n\n  const UserResource = $resource('api/users/:id', { id: '@id' }, actions);\n\n  return UserResource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('User', User);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/user.js","import truncate from 'underscore.string/truncate';\n\nfunction Widget($resource, Query) {\n  const WidgetResource = $resource('api/widgets/:id', { id: '@id' });\n\n  WidgetResource.prototype.getQuery = function getQuery() {\n    if (!this.query && this.visualization) {\n      this.query = new Query(this.visualization.query);\n    }\n\n    return this.query;\n  };\n\n  WidgetResource.prototype.getName = function getName() {\n    if (this.visualization) {\n      return `${this.visualization.query.name} (${this.visualization.name})`;\n    }\n    return truncate(this.text, 20);\n  };\n\n  return WidgetResource;\n}\n\n\nexport default function init(ngModule) {\n  ngModule.factory('Widget', Widget);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/services/widget.js","var map = {\n\t\"./box-plot/index.js\": 462,\n\t\"./chart/index.js\": 465,\n\t\"./chart/plotly.js\": 468,\n\t\"./cohort/index.js\": 628,\n\t\"./counter/index.js\": 632,\n\t\"./edit-visualization-dialog.js\": 636,\n\t\"./index.js\": 638,\n\t\"./map/index.js\": 639,\n\t\"./pivot/index.js\": 650,\n\t\"./sankey/index.js\": 654,\n\t\"./sunburst/index.js\": 657,\n\t\"./table/index.js\": 660,\n\t\"./word-cloud/index.js\": 662\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 461;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations ^((?![\\\\/]test[\\\\/]).)*\\.js$\n// module id = 461\n// module chunks = 1","import d3 from 'd3';\nimport box from '@/lib/visualizations/d3box';\nimport editorTemplate from './box-plot-editor.html';\n\nfunction boxPlotRenderer() {\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    link($scope, elm) {\n      function calcIqr(k) {\n        return (d) => {\n          const q1 = d.quartiles[0];\n          const q3 = d.quartiles[2];\n          const iqr = (q3 - q1) * k;\n\n          let i = -1;\n          let j = d.length;\n\n          // eslint-disable-next-line no-plusplus\n          while (d[++i] < q1 - iqr);\n          // eslint-disable-next-line no-plusplus\n          while (d[--j] > q3 + iqr);\n          return [i, j];\n        };\n      }\n\n      $scope.$watch('[queryResult && queryResult.getData(), visualization.options]', () => {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        const data = $scope.queryResult.getData();\n        const parentWidth = d3.select(elm[0].parentNode).node().getBoundingClientRect().width;\n        const margin = {\n          top: 10, right: 50, bottom: 40, left: 50, inner: 25,\n        };\n        const width = parentWidth - margin.right - margin.left;\n        const height = 500 - margin.top - margin.bottom;\n\n        let min = Infinity;\n        let max = -Infinity;\n        const mydata = [];\n        let value = 0;\n        let d = [];\n        const xAxisLabel = $scope.visualization.options.xAxisLabel;\n        const yAxisLabel = $scope.visualization.options.yAxisLabel;\n\n        const columns = $scope.queryResult.getColumnNames();\n        const xscale = d3.scale.ordinal()\n          .domain(columns)\n          .rangeBands([0, parentWidth - margin.left - margin.right]);\n\n        let boxWidth;\n        if (columns.length > 1) {\n          boxWidth = Math.min(xscale(columns[1]), 120.0);\n        } else {\n          boxWidth = 120.0;\n        }\n        margin.inner = boxWidth / 3.0;\n\n        columns.forEach((column, i) => {\n          d = mydata[i] = [];\n          data.forEach((row) => {\n            value = row[column];\n            d.push(value);\n            if (value > max) max = Math.ceil(value);\n            if (value < min) min = Math.floor(value);\n          });\n        });\n\n        const yscale = d3.scale.linear()\n          .domain([min * 0.99, max * 1.01])\n          .range([height, 0]);\n\n        const chart = box()\n          .whiskers(calcIqr(1.5))\n          .width(boxWidth - 2 * margin.inner)\n          .height(height)\n          .domain([min * 0.99, max * 1.01]);\n        const xAxis = d3.svg.axis()\n          .scale(xscale)\n          .orient('bottom');\n\n\n        const yAxis = d3.svg.axis()\n          .scale(yscale)\n          .orient('left');\n\n        const xLines = d3.svg.axis()\n          .scale(xscale)\n          .tickSize(height)\n          .orient('bottom');\n\n        const yLines = d3.svg.axis()\n          .scale(yscale)\n          .tickSize(width)\n          .orient('right');\n\n        function barOffset(i) {\n          return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n        }\n\n        d3.select(elm[0]).selectAll('svg').remove();\n\n        const plot = d3.select(elm[0])\n          .append('svg')\n          .attr('width', parentWidth)\n          .attr('height', height + margin.bottom + margin.top)\n          .append('g')\n          .attr('width', parentWidth - margin.left - margin.right)\n          .attr('transform', `translate(${margin.left},${margin.top})`);\n\n        d3.select('svg').append('text')\n          .attr('class', 'box')\n          .attr('x', parentWidth / 2.0)\n          .attr('text-anchor', 'middle')\n          .attr('y', height + margin.bottom)\n          .text(xAxisLabel);\n\n        d3.select('svg').append('text')\n          .attr('class', 'box')\n          .attr('transform', `translate(10,${(height + margin.top + margin.bottom) / 2.0})rotate(-90)`)\n          .attr('text-anchor', 'middle')\n          .text(yAxisLabel);\n\n        plot.append('rect')\n          .attr('class', 'grid-background')\n          .attr('width', width)\n          .attr('height', height);\n\n        plot.append('g')\n          .attr('class', 'grid')\n          .call(yLines);\n\n        plot.append('g')\n          .attr('class', 'grid')\n          .call(xLines);\n\n        plot.append('g')\n          .attr('class', 'x axis')\n          .attr('transform', `translate(0,${height})`)\n          .call(xAxis);\n\n        plot.append('g')\n          .attr('class', 'y axis')\n          .call(yAxis);\n\n        plot.selectAll('.box').data(mydata)\n          .enter().append('g')\n          .attr('class', 'box')\n          .attr('width', boxWidth)\n          .attr('height', height)\n          .attr('transform', (_, i) => `translate(${barOffset(i)},${0})`)\n          .call(chart);\n      }, true);\n    },\n  };\n}\n\nfunction boxPlotEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('boxplotRenderer', boxPlotRenderer);\n  ngModule.directive('boxplotEditor', boxPlotEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<boxplot-renderer ' +\n        'options=\"visualization.options\" query-result=\"queryResult\">' +\n        '</boxplot-renderer>';\n\n    const editTemplate = '<boxplot-editor></boxplot-editor>';\n\n    VisualizationProvider.registerVisualization({\n      type: 'BOXPLOT',\n      name: 'Boxplot (Deprecated)',\n      renderTemplate,\n      editorTemplate: editTemplate,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/box-plot/index.js","/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nfunction box() {\n  let width = 1,\n    height = 1,\n    duration = 0,\n    domain = null,\n    value = Number,\n    whiskers = boxWhiskers,\n    quartiles = boxQuartiles,\n    tickFormat = null;\n\n  // For each small multiple\n  function box(g) {\n    g.each(function(d, i) {\n      d = d.map(value).sort(d3.ascending);\n      let g = d3.select(this),\n        n = d.length,\n        min = d[0],\n        max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      const quartileData = (d.quartiles = quartiles(d));\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      let whiskerIndices = whiskers && whiskers.call(this, d, i),\n        whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]);\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      const outlierIndices = whiskerIndices\n        ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\n        : d3.range(n);\n\n      // Compute the new x-scale.\n      const x1 = d3.scale\n        .linear()\n        .domain((domain && domain.call(this, d, i)) || [min, max])\n        .range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      const x0 =\n        this.__chart__ ||\n        d3.scale\n          .linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      const center = g.selectAll('line.center').data(whiskerData ? [whiskerData] : []);\n\n      center\n        .enter()\n        .insert('line', 'rect')\n        .attr('class', 'center')\n        .attr('x1', width / 2)\n        .attr('y1', d => x0(d[0]))\n        .attr('x2', width / 2)\n        .attr('y2', d => x0(d[1]))\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .style('opacity', 1)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]));\n\n      center\n        .transition()\n        .duration(duration)\n        .style('opacity', 1)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]));\n\n      center\n        .exit()\n        .transition()\n        .duration(duration)\n        .style('opacity', 1e-6)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]))\n        .remove();\n\n      // Update innerquartile box.\n      const box = g.selectAll('rect.box').data([quartileData]);\n\n      box\n        .enter()\n        .append('rect')\n        .attr('class', 'box')\n        .attr('x', 0)\n        .attr('y', d => x0(d[2]))\n        .attr('width', width)\n        .attr('height', d => x0(d[0]) - x0(d[2]))\n        .transition()\n        .duration(duration)\n        .attr('y', d => x1(d[2]))\n        .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box\n        .transition()\n        .duration(duration)\n        .attr('y', d => x1(d[2]))\n        .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box.exit().remove();\n\n      // Update median line.\n      const medianLine = g.selectAll('line.median').data([quartileData[1]]);\n\n      medianLine\n        .enter()\n        .append('line')\n        .attr('class', 'median')\n        .attr('x1', 0)\n        .attr('y1', x0)\n        .attr('x2', width)\n        .attr('y2', x0)\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1);\n\n      medianLine\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      const whisker = g.selectAll('line.whisker').data(whiskerData || []);\n\n      whisker\n        .enter()\n        .insert('line', 'circle, text')\n        .attr('class', 'whisker')\n        .attr('x1', 0)\n        .attr('y1', x0)\n        .attr('x2', width)\n        .attr('y2', x0)\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1);\n\n      whisker\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1);\n\n      whisker\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1e-6)\n        .remove();\n\n      // Update outliers.\n      const outlier = g.selectAll('circle.outlier').data(outlierIndices, Number);\n\n      outlier\n        .enter()\n        .insert('circle', 'text')\n        .attr('class', 'outlier')\n        .attr('r', 5)\n        .attr('cx', width / 2)\n        .attr('cy', i => x0(d[i]))\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1);\n\n      outlier\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1);\n\n      outlier\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1e-6)\n        .remove();\n\n      // Compute the tick format.\n      const format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      const boxTick = g.selectAll('text.box').data(quartileData);\n\n      boxTick\n        .enter()\n        .append('text')\n        .attr('class', 'box')\n        .attr('dy', '.3em')\n        .attr('dx', (d, i) => (i & 1 ? 6 : -6))\n        .attr('x', (d, i) => (i & 1 ? width : 0))\n        .attr('y', x0)\n        .attr('text-anchor', (d, i) => (i & 1 ? 'start' : 'end'))\n        .text(format)\n        .transition()\n        .duration(duration)\n        .attr('y', x1);\n\n      boxTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr('y', x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      const whiskerTick = g.selectAll('text.whisker').data(whiskerData || []);\n\n      whiskerTick\n        .enter()\n        .append('text')\n        .attr('class', 'whisker')\n        .attr('dy', '.3em')\n        .attr('dx', 6)\n        .attr('x', width)\n        .attr('y', x0)\n        .text(format)\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('y', x1)\n        .style('opacity', 1);\n\n      whiskerTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr('y', x1)\n        .style('opacity', 1);\n\n      whiskerTick\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('y', x1)\n        .style('opacity', 1e-6)\n        .remove();\n    });\n    d3.timer.flush();\n  }\n\n  box.width = function(x) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function(x) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function(x) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function(x) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function(x) {\n    if (!arguments.length) return domain;\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function(x) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function(x) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function(x) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d) {\n  return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n}\n\nexport default box;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/visualizations/d3box.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">X Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.xAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Y Axis Label</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"visualization.options.yAxisLabel\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/box-plot/box-plot-editor.html\n// module id = 464\n// module chunks = 1","import { some, extend, has, partial, intersection, without, contains, isUndefined, sortBy, each, pluck, keys, difference } from 'underscore';\nimport template from './chart.html';\nimport editorTemplate from './chart-editor.html';\n\nfunction ChartRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    template,\n    replace: false,\n    controller($scope) {\n      $scope.chartSeries = [];\n\n      function zIndexCompare(series) {\n        if ($scope.options.seriesOptions[series.name]) {\n          return $scope.options.seriesOptions[series.name].zIndex;\n        }\n        return 0;\n      }\n\n      function reloadData() {\n        if (!isUndefined($scope.queryResult) && $scope.queryResult.getData()) {\n          const data = $scope.queryResult.getChartData($scope.options.columnMapping);\n          $scope.chartSeries = sortBy(data, zIndexCompare);\n        }\n      }\n\n      function reloadChart() {\n        reloadData();\n        $scope.plotlyOptions = $scope.options;\n      }\n\n      $scope.$watch('options', reloadChart, true);\n      $scope.$watch('queryResult && queryResult.getData()', reloadData);\n    },\n  };\n}\n\nfunction ChartEditor(ColorPalette, clientConfig) {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    scope: {\n      queryResult: '=',\n      options: '=?',\n    },\n    link(scope) {\n      scope.currentTab = 'general';\n      scope.colors = extend({ Automatic: null }, ColorPalette);\n\n      scope.stackingOptions = {\n        Disabled: null,\n        Enabled: 'normal',\n        Percent: 'percent',\n      };\n\n      scope.changeTab = (tab) => {\n        scope.currentTab = tab;\n      };\n\n      scope.chartTypes = {\n        line: { name: 'Line', icon: 'line-chart' },\n        column: { name: 'Bar', icon: 'bar-chart' },\n        area: { name: 'Area', icon: 'area-chart' },\n        pie: { name: 'Pie', icon: 'pie-chart' },\n        scatter: { name: 'Scatter', icon: 'circle-o' },\n        bubble: { name: 'Bubble', icon: 'circle-o' },\n        box: { name: 'Box', icon: 'square-o' },\n      };\n\n      if (clientConfig.allowCustomJSVisualizations) {\n        scope.chartTypes.custom = { name: 'Custom', icon: 'code' };\n      }\n\n      scope.xAxisScales = ['datetime', 'linear', 'logarithmic', 'category'];\n      scope.yAxisScales = ['linear', 'logarithmic', 'datetime', 'category'];\n\n      scope.chartTypeChanged = () => {\n        keys(scope.options.seriesOptions).forEach((key) => {\n          scope.options.seriesOptions[key].type = scope.options.globalSeriesType;\n        });\n      };\n\n      scope.showSizeColumnPicker = () => some(scope.options.seriesOptions, options => options.type === 'bubble');\n\n      if (scope.options.customCode === undefined) {\n        scope.options.customCode = `// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/`;\n      }\n\n      function refreshColumns() {\n        scope.columns = scope.queryResult.getColumns();\n        scope.columnNames = pluck(scope.columns, 'name');\n        if (scope.columnNames.length > 0) {\n          each(difference(keys(scope.options.columnMapping), scope.columnNames), (column) => {\n            delete scope.options.columnMapping[column];\n          });\n        }\n      }\n\n      function refreshColumnsAndForm() {\n        refreshColumns();\n        if (!scope.queryResult.getData() ||\n            scope.queryResult.getData().length === 0 ||\n            scope.columns.length === 0) {\n          return;\n        }\n        scope.form.yAxisColumns = intersection(scope.form.yAxisColumns, scope.columnNames);\n        if (!contains(scope.columnNames, scope.form.xAxisColumn)) {\n          scope.form.xAxisColumn = undefined;\n        }\n        if (!contains(scope.columnNames, scope.form.groupby)) {\n          scope.form.groupby = undefined;\n        }\n      }\n\n      function refreshSeries() {\n        const seriesNames = pluck(scope.queryResult.getChartData(scope.options.columnMapping), 'name');\n        const existing = keys(scope.options.seriesOptions);\n        each(difference(seriesNames, existing), (name) => {\n          scope.options.seriesOptions[name] = {\n            type: scope.options.globalSeriesType,\n            yAxis: 0,\n          };\n          scope.form.seriesList.push(name);\n        });\n        each(difference(existing, seriesNames), (name) => {\n          scope.form.seriesList = without(scope.form.seriesList, name);\n          delete scope.options.seriesOptions[name];\n        });\n      }\n\n      function setColumnRole(role, column) {\n        scope.options.columnMapping[column] = role;\n      }\n\n      function unsetColumn(column) {\n        setColumnRole('unused', column);\n      }\n\n      refreshColumns();\n\n      scope.$watch('options.columnMapping', () => {\n        if (scope.queryResult.status === 'done') {\n          refreshSeries();\n        }\n      }, true);\n\n      scope.$watch(() => [scope.queryResult.getId(), scope.queryResult.status], (changed) => {\n        if (!changed[0] || changed[1] !== 'done') {\n          return;\n        }\n\n        refreshColumnsAndForm();\n        refreshSeries();\n      }, true);\n\n      scope.form = {\n        yAxisColumns: [],\n        seriesList: sortBy(keys(scope.options.seriesOptions), name =>\n          scope.options.seriesOptions[name].zIndex),\n      };\n\n      scope.$watchCollection('form.seriesList', (value) => {\n        each(value, (name, index) => {\n          scope.options.seriesOptions[name].zIndex = index;\n          scope.options.seriesOptions[name].index = 0; // is this needed?\n        });\n      });\n\n\n      scope.$watchCollection('form.yAxisColumns', (value, old) => {\n        each(old, unsetColumn);\n        each(value, partial(setColumnRole, 'y'));\n      });\n\n      scope.$watch('form.xAxisColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) { setColumnRole('x', value); }\n      });\n\n      scope.$watch('form.errorColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('yError', value);\n        }\n      });\n\n      scope.$watch('form.sizeColumn', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('size', value);\n        }\n      });\n\n\n      scope.$watch('form.groupby', (value, old) => {\n        if (old !== undefined) {\n          unsetColumn(old);\n        }\n        if (value !== undefined) {\n          setColumnRole('series', value);\n        }\n      });\n\n      if (!has(scope.options, 'legend')) {\n        scope.options.legend = { enabled: true };\n      }\n\n      if (!has(scope.options, 'bottomMargin')) {\n        scope.options.bottomMargin = 50;\n      }\n\n      if (scope.columnNames) {\n        each(scope.options.columnMapping, (value, key) => {\n          if (scope.columnNames.length > 0 && !contains(scope.columnNames, key)) {\n            return;\n          }\n          if (value === 'x') {\n            scope.form.xAxisColumn = key;\n          } else if (value === 'y') {\n            scope.form.yAxisColumns.push(key);\n          } else if (value === 'series') {\n            scope.form.groupby = key;\n          } else if (value === 'yError') {\n            scope.form.errorColumn = key;\n          } else if (value === 'size') {\n            scope.form.sizeColumn = key;\n          }\n        });\n      }\n    },\n  };\n}\n\nconst ColorBox = {\n  bindings: {\n    color: '<',\n  },\n  template: \"<span style='width: 12px; height: 12px; background-color: {{$ctrl.color}}; display: inline-block; margin-right: 5px;'></span>\",\n};\n\nexport default function init(ngModule) {\n  ngModule.component('colorBox', ColorBox);\n  ngModule.directive('chartRenderer', ChartRenderer);\n  ngModule.directive('chartEditor', ChartEditor);\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate = '<chart-renderer options=\"visualization.options\" query-result=\"queryResult\"></chart-renderer>';\n    const editTemplate = '<chart-editor options=\"visualization.options\" query-result=\"queryResult\"></chart-editor>';\n\n    const defaultOptions = {\n      globalSeriesType: 'column',\n      sortX: true,\n      legend: { enabled: true },\n      yAxis: [{ type: 'linear' }, { type: 'linear', opposite: true }],\n      xAxis: { type: 'datetime', labels: { enabled: true } },\n      error_y: { type: 'data', visible: true },\n      series: { stacking: null, error_y: { type: 'data', visible: true } },\n      seriesOptions: {},\n      columnMapping: {},\n      bottomMargin: 50,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'CHART',\n      name: 'Chart',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/chart/index.js","module.exports = \"<div ng-if=\\\"plotlyOptions.globalSeriesType != 'custom'\\\">\\n  <plotly-chart options='plotlyOptions' series='chartSeries' height=\\\"300\\\"></plotly-chart>\\n</div>\\n<div ng-if=\\\"plotlyOptions.globalSeriesType == 'custom'\\\">\\n  <custom-plotly-chart series='chartSeries' options='plotlyOptions' height=\\\"300\\\"></custom-plotly-chart>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/chart/chart.html\n// module id = 466\n// module chunks = 1","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'xAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('xAxis')\\\">X Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'yAxis'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('yAxis')\\\">Y Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'series'}\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"changeTab('series')\\\">Series</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Chart Type</label>\\n      <div ng-if=\\\"chartTypes\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.globalSeriesType\\\" on-select=\\\"chartTypeChanged()\\\">\\n          <ui-select-match placeholder=\\\"Choose chart type...\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n              {{$select.selected.value.name}}\\n            </div>\\n          </ui-select-match>\\n          <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n            <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n              ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': chartEditor.xAxisColumn.$invalid}\\\">\\n      <label class=\\\"control-label\\\">X Column</label>\\n\\n      <ui-select name=\\\"xAxisColumn\\\" required ng-model=\\\"form.xAxisColumn\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices-->\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': !form.yAxisColumns || form.yAxisColumns.length == 0}\\\">\\n      <label class=\\\"control-label\\\">Y Columns</label>\\n\\n      <ui-select multiple name=\\\"yAxisColumns\\\" required ng-model=\\\"form.yAxisColumns\\\">\\n        <ui-select-match placeholder=\\\"Choose columns...\\\">{{$item}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.groupby | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Group by</label>\\n      <ui-select name=\\\"groupby\\\" ng-model=\\\"form.groupby\\\" class=\\\"clearable\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">\\n          {{$select.selected}}\\n        </ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"showSizeColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Bubble size column</label>\\n\\n      <ui-select name=\\\"sizeColumn\\\" ng-model=\\\"form.sizeColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Errors column</label>\\n\\n      <ui-select name=\\\"errorColumn\\\" ng-model=\\\"form.errorColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:form.yAxisColumns | remove:form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.legend.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Legend\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'box'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.showpoints\\\">\\n        <i class=\\\"input-helper\\\"></i> Show All Points\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType != 'custom'\\\">\\n      <label class=\\\"control-label\\\">Stacking</label>\\n\\n      <div ng-if=\\\"stackingOptions\\\"><!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"options.series.stacking\\\"\\n                   ng-disabled=\\\"['line', 'area', 'column'].indexOf(options.globalSeriesType) == -1\\\">\\n          <ui-select-match placeholder=\\\"Choose Stacking...\\\">{{$select.selected.key | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"value.value as (key, value) in stackingOptions\\\">\\n            <div ng-bind-html=\\\"value.key | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'box'\\\">\\n      <label>\\n        <label class=\\\"control-label\\\">Graph Height</label>\\n        <input name=\\\"graph-height\\\" type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"options.height\\\">\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label class=\\\"control-label\\\">Custom code</label>\\n    <textarea ng-model=\\\"options.customCode\\\" class=\\\"form-control v-resizable\\\" rows=\\\"10\\\">\\n    </textarea>\\n  </div>\\n\\n  <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"options.enableConsoleLogs\\\">\\n      <i class=\\\"input-helper\\\"></i> Show errors in the console\\n    </label>\\n  </div>\\n\\n  <div class=\\\"checkbox\\\" ng-if=\\\"options.globalSeriesType == 'custom'\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"options.autoRedraw\\\">\\n      <i class=\\\"input-helper\\\"></i> Auto update graph\\n    </label>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'xAxis'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Scale</label>\\n      <ui-select ng-model=\\\"options.xAxis.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"scaleType in xAxisScales\\\">\\n          <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input ng-model=\\\"options.xAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.sortX\\\">\\n        <i class=\\\"input-helper\\\"></i> Sort Values\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"options.xAxis.labels.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Labels\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Height</label>\\n      <input name=\\\"x-axis-height\\\" type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"options.bottomMargin\\\">\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'yAxis'\\\">\\n    <div ng-repeat=\\\"yAxis in options.yAxis\\\">\\n      <h4>{{$index == 0 ? 'Left' : 'Right'}} Y Axis</h4>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Scale</label>\\n        <ui-select ng-model=\\\"yAxis.type\\\">\\n          <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"scaleType in yAxisScales\\\">\\n            <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Name</label>\\n        <input ng-model=\\\"yAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Min Value</label>\\n        <input ng-model=\\\"yAxis.rangeMin\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Max Value</label>\\n        <input ng-model=\\\"yAxis.rangeMax\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\"></input>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab=='series'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>zIndex</th>\\n      <th>Left Y Axis</th>\\n      <th>Right Y Axis</th>\\n      <th>Label</th>\\n      <th>Color</th>\\n      <th>Type</th>\\n      </thead>\\n      <tbody ui-sortable ng-model=\\\"form.seriesList\\\">\\n      <tr ng-repeat=\\\"name in form.seriesList\\\">\\n        <td style=\\\"cursor: move;\\\"><i class=\\\"fa fa-arrows-v\\\"></i> <span\\n          ng-bind=\\\"options.seriesOptions[name].zIndex + 1\\\"></span></td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"0\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td>\\n          <input type=\\\"radio\\\" ng-value=\\\"1\\\" ng-model=\\\"options.seriesOptions[name].yAxis\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <input placeholder=\\\"{{name}}\\\" class=\\\"form-control input-sm super-small-input\\\" type=\\\"text\\\"\\n                 ng-model=\\\"options.seriesOptions[name].name\\\">\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 105px;\\\">\\n          <ui-select ng-model=\\\"options.seriesOptions[name].type\\\">\\n            <ui-select-match placeholder=\\\"Chart Type\\\">\\n              <div>\\n                <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n                {{$select.selected.value.name}}\\n              </div>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in chartTypes\\\">\\n              <div><i class=\\\"fa fa-{{info.value.icon}}\\\"></i><span> </span><span\\n                ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span></div>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/chart/chart-editor.html\n// module id = 467\n// module chunks = 1","import { isEmpty, isEqual, isArray, isNumber, isUndefined, contains, min, max, has, each, values, sortBy, union, pluck, identity } from 'underscore';\nimport d3 from 'd3';\nimport Plotly from 'plotly.js/lib/core';\nimport bar from 'plotly.js/lib/bar';\nimport pie from 'plotly.js/lib/pie';\nimport histogram from 'plotly.js/lib/histogram';\nimport box from 'plotly.js/lib/box';\n\nimport moment from 'moment';\n\nPlotly.register([bar, pie, histogram, box]);\nPlotly.setPlotConfig({\n  modeBarButtonsToRemove: ['sendDataToCloud'],\n});\n\n// The following colors will be used if you pick \"Automatic\" color.\nconst BaseColors = {\n  Blue: '#4572A7',\n  Red: '#AA4643',\n  Green: '#89A54E',\n  Purple: '#80699B',\n  Cyan: '#3D96AE',\n  Orange: '#DB843D',\n  'Light Blue': '#92A8CD',\n  Lilac: '#A47D7C',\n  'Light Green': '#B5CA92',\n  Brown: '#A52A2A',\n  Black: '#000000',\n  Gray: '#808080',\n  Pink: '#FFC0CB',\n  'Dark Blue': '#00008b',\n};\n\n// Additional colors for the user to choose from:\nconst ColorPalette = Object.assign({}, BaseColors, {\n  'Indian Red': '#F8766D',\n  'Green 2': '#53B400',\n  'Green 3': '#00C094',\n  DarkTurquoise: '#00B6EB',\n  'Dark Violet': '#A58AFF',\n  'Pink 2': '#FB61D7',\n});\n\nconst ColorPaletteArray = values(BaseColors);\n\nfunction fillXValues(seriesList) {\n  const xValues = sortBy(union(...pluck(seriesList, 'x')), identity);\n  seriesList.forEach((series) => {\n    series.x = sortBy(series.x, identity);\n\n    each(xValues, (value, index) => {\n      if (series.x[index] !== value) {\n        series.x.splice(index, 0, value);\n        series.y.splice(index, 0, null);\n      }\n    });\n  });\n}\n\nfunction storeOriginalHeightForEachSeries(seriesList) {\n  seriesList.forEach((series) => {\n    if (!has(series, 'visible')) {\n      series.visible = true;\n      series.original_y = series.y.slice();\n    }\n  });\n}\n\nfunction getEnabledSeries(seriesList) {\n  return seriesList.filter(series => series.visible === true);\n}\n\nfunction initializeTextAndHover(seriesList) {\n  seriesList.forEach((series) => {\n    series.text = [];\n    series.hoverinfo = 'text+name';\n  });\n}\n\nfunction normalAreaStacking(seriesList) {\n  fillXValues(seriesList);\n  storeOriginalHeightForEachSeries(seriesList);\n  initializeTextAndHover(seriesList);\n\n  const enabledSeriesList = getEnabledSeries(seriesList);\n\n  each(enabledSeriesList, (series, seriesIndex, list) => {\n    each(series.y, (_, yIndex) => {\n      const cumulativeHeightOfPreviousSeries =\n        seriesIndex > 0 ? list[seriesIndex - 1].y[yIndex] : 0;\n      const cumulativeHeightWithThisSeries =\n        cumulativeHeightOfPreviousSeries + series.original_y[yIndex];\n\n      series.y[yIndex] = cumulativeHeightWithThisSeries;\n      series.text.push(`Value: ${series.original_y[yIndex]}<br>Sum: ${cumulativeHeightWithThisSeries}`);\n    });\n  });\n}\n\nfunction lastVisibleY(seriesList, lastSeriesIndex, yIndex) {\n  for (let i = lastSeriesIndex; i >= 0; i -= 1) {\n    if (seriesList[i].visible === true) {\n      return seriesList[i].y[yIndex];\n    }\n  }\n  return 0;\n}\n\nfunction percentAreaStacking(seriesList) {\n  if (seriesList.length === 0) {\n    return;\n  }\n  fillXValues(seriesList);\n  storeOriginalHeightForEachSeries(seriesList);\n  initializeTextAndHover(seriesList);\n\n  each(seriesList[0].y, (seriesY, yIndex) => {\n    const sumOfCorrespondingDataPoints = seriesList.reduce(\n      (total, series) =>\n        total + series.original_y[yIndex]\n      , 0,\n    );\n\n    each(seriesList, (series, seriesIndex) => {\n      const percentage = (series.original_y[yIndex] / sumOfCorrespondingDataPoints) * 100;\n      const previousVisiblePercentage = lastVisibleY(seriesList, seriesIndex - 1, yIndex);\n      series.y[yIndex] = percentage + previousVisiblePercentage;\n      series.text.push(`Value: ${series.original_y[yIndex]}<br>Relative: ${percentage.toFixed(2)}%`);\n    });\n  });\n}\n\nfunction percentBarStacking(seriesList) {\n  if (seriesList.length === 0) {\n    return;\n  }\n  fillXValues(seriesList);\n  initializeTextAndHover(seriesList);\n\n  for (let i = 0; i < seriesList[0].y.length; i += 1) {\n    let sum = 0;\n    for (let j = 0; j < seriesList.length; j += 1) {\n      sum += seriesList[j].y[i];\n    }\n    for (let j = 0; j < seriesList.length; j += 1) {\n      const value = seriesList[j].y[i] / sum * 100;\n      seriesList[j].text.push(`Value: ${seriesList[j].y[i]}<br>Relative: ${value.toFixed(2)}%`);\n      seriesList[j].y[i] = value;\n    }\n  }\n}\n\nfunction normalizeValue(value) {\n  if (moment.isMoment(value)) {\n    return value.format('YYYY-MM-DD HH:mm:ss');\n  }\n  return value;\n}\n\nfunction seriesMinValue(series) {\n  return min(series.map(s => min(s.y)));\n}\n\nfunction seriesMaxValue(series) {\n  return max(series.map(s => max(s.y)));\n}\n\nfunction leftAxisSeries(series) {\n  return series.filter(s => s.yaxis !== 'y2');\n}\n\nfunction rightAxisSeries(series) {\n  return series.filter(s => s.yaxis === 'y2');\n}\n\nfunction getScaleType(scale) {\n  if (scale === 'datetime') {\n    return 'date';\n  }\n  if (scale === 'logarithmic') {\n    return 'log';\n  }\n  return scale;\n}\n\nfunction getColor(index) {\n  return ColorPaletteArray[index % ColorPaletteArray.length];\n}\n\nconst PlotlyChart = () => {\n  let bottomMargin = 50;\n  return {\n    restrict: 'E',\n    template: '<div></div>',\n    scope: {\n      options: '=',\n      series: '=',\n      height: '=',\n    },\n    link(scope, element) {\n      function calculateHeight() {\n        const height = Math.max(scope.height, (scope.height - 50) + bottomMargin);\n        if (scope.options.globalSeriesType === 'box') {\n          return scope.options.height || height;\n        }\n        return height;\n      }\n\n      function setType(series, type) {\n        if (type === 'column') {\n          series.type = 'bar';\n        } else if (type === 'line') {\n          series.mode = 'lines';\n        } else if (type === 'area') {\n          series.fill = scope.options.series.stacking === null ? 'tozeroy' : 'tonexty';\n          series.mode = 'lines';\n        } else if (type === 'scatter') {\n          series.type = 'scatter';\n          series.mode = 'markers';\n        } else if (type === 'bubble') {\n          series.mode = 'markers';\n        } else if (type === 'box') {\n          series.type = 'box';\n          series.mode = 'markers';\n        }\n      }\n\n      function getTitle(axis) {\n        if (!isUndefined(axis) && !isUndefined(axis.title)) {\n          return axis.title.text;\n        }\n        return null;\n      }\n\n\n      function recalculateOptions() {\n        scope.data.length = 0;\n        scope.layout.showlegend = has(scope.options, 'legend') ? scope.options.legend.enabled : true;\n        if (has(scope.options, 'bottomMargin')) {\n          bottomMargin = parseInt(scope.options.bottomMargin, 10);\n          scope.layout.margin.b = bottomMargin;\n        }\n        delete scope.layout.barmode;\n        delete scope.layout.xaxis;\n        delete scope.layout.yaxis;\n        delete scope.layout.yaxis2;\n\n        if (scope.options.globalSeriesType === 'pie') {\n          const hasX = contains(values(scope.options.columnMapping), 'x');\n          const rows = scope.series.length > 2 ? 2 : 1;\n          const cellsInRow = Math.ceil(scope.series.length / rows);\n          const cellWidth = 1 / cellsInRow;\n          const cellHeight = 1 / rows;\n          const xPadding = 0.02;\n          const yPadding = 0.05;\n\n          each(scope.series, (series, index) => {\n            const xPosition = (index % cellsInRow) * cellWidth;\n            const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n            const plotlySeries = {\n              values: [],\n              labels: [],\n              type: 'pie',\n              hole: 0.4,\n              marker: { colors: ColorPaletteArray },\n              text: series.name,\n              textposition: 'inside',\n              name: series.name,\n              domain: {\n                x: [xPosition, xPosition + cellWidth - xPadding],\n                y: [yPosition, yPosition + cellHeight - yPadding],\n              },\n            };\n\n            series.data.forEach((row) => {\n              plotlySeries.values.push(row.y);\n              plotlySeries.labels.push(hasX ? row.x : `Slice ${index}`);\n            });\n\n            scope.data.push(plotlySeries);\n          });\n          return;\n        }\n\n        if (scope.options.globalSeriesType === 'box') {\n          scope.layout.boxmode = 'group';\n          scope.layout.boxgroupgap = 0.50;\n        }\n\n        let hasY2 = false;\n        const sortX = scope.options.sortX === true || scope.options.sortX === undefined;\n        const useUnifiedXaxis = sortX && scope.options.xAxis.type === 'category' && scope.options.globalSeriesType !== 'box';\n\n        let unifiedX = null;\n        if (useUnifiedXaxis) {\n          unifiedX = sortBy(union(...scope.series.map(s => pluck(s.data, 'x'))), identity);\n        }\n\n        each(scope.series, (series, index) => {\n          const seriesOptions = scope.options.seriesOptions[series.name] ||\n            { type: scope.options.globalSeriesType };\n\n          const seriesColor = seriesOptions.color ? seriesOptions.color : getColor(index);\n\n          const plotlySeries = {\n            x: [],\n            y: [],\n            error_y: {\n              array: [],\n              color: seriesColor,\n            },\n            name: seriesOptions.name || series.name,\n            marker: { color: seriesColor },\n          };\n\n          if (seriesOptions.yAxis === 1 && (scope.options.series.stacking === null || seriesOptions.type === 'line')) {\n            hasY2 = true;\n            plotlySeries.yaxis = 'y2';\n          }\n\n          setType(plotlySeries, seriesOptions.type);\n          let data = series.data;\n          if (sortX) {\n            data = sortBy(data, 'x');\n          }\n\n          if (useUnifiedXaxis && index === 0) {\n            const yValues = {};\n            const eValues = {};\n\n            data.forEach((row) => {\n              yValues[row.x] = row.y;\n              if (row.yError) {\n                eValues[row.x] = row.yError;\n              }\n            });\n\n            unifiedX.forEach((x) => {\n              plotlySeries.x.push(normalizeValue(x));\n              plotlySeries.y.push(normalizeValue(yValues[x] || null));\n              if (!isUndefined(eValues[x])) {\n                plotlySeries.error_y.array.push(normalizeValue(eValues[x] || null));\n              }\n            });\n          } else {\n            data.forEach((row) => {\n              plotlySeries.x.push(normalizeValue(row.x));\n              plotlySeries.y.push(normalizeValue(row.y));\n              if (row.yError !== undefined) {\n                plotlySeries.error_y.array.push(normalizeValue(row.yError));\n              }\n            });\n          }\n          if (!plotlySeries.error_y.length) {\n            delete plotlySeries.error_y.length;\n          }\n\n          if (seriesOptions.type === 'bubble') {\n            plotlySeries.marker = {\n              size: pluck(data, 'size'),\n            };\n          }\n\n          if (seriesOptions.type === 'box') {\n            plotlySeries.boxpoints = 'outliers';\n            plotlySeries.marker = {\n              color: seriesColor,\n              size: 3,\n            };\n            if (scope.options.showpoints) {\n              plotlySeries.boxpoints = 'all';\n              plotlySeries.jitter = 0.3;\n              plotlySeries.pointpos = -1.8;\n            }\n          }\n\n          scope.data.push(plotlySeries);\n        });\n\n        scope.layout.xaxis = {\n          title: getTitle(scope.options.xAxis),\n          type: getScaleType(scope.options.xAxis.type),\n        };\n\n        if (!isUndefined(scope.options.xAxis.labels)) {\n          scope.layout.xaxis.showticklabels = scope.options.xAxis.labels.enabled;\n        }\n\n        if (isArray(scope.options.yAxis)) {\n          scope.layout.yaxis = {\n            title: getTitle(scope.options.yAxis[0]),\n            type: getScaleType(scope.options.yAxis[0].type),\n          };\n\n          if (isNumber(scope.options.yAxis[0].rangeMin) ||\n              isNumber(scope.options.yAxis[0].rangeMax)) {\n            const minY = scope.options.yAxis[0].rangeMin ||\n              Math.min(0, seriesMinValue(leftAxisSeries(scope.data)));\n            const maxY = scope.options.yAxis[0].rangeMax ||\n              seriesMaxValue(leftAxisSeries(scope.data));\n\n            scope.layout.yaxis.range = [minY, maxY];\n          }\n        }\n        if (hasY2 && !isUndefined(scope.options.yAxis)) {\n          scope.layout.yaxis2 = {\n            title: getTitle(scope.options.yAxis[1]),\n            type: getScaleType(scope.options.yAxis[1].type),\n            overlaying: 'y',\n            side: 'right',\n          };\n\n          if (isNumber(scope.options.yAxis[1].rangeMin) ||\n              isNumber(scope.options.yAxis[1].rangeMax)) {\n            const minY = scope.options.yAxis[1].rangeMin ||\n              Math.min(0, seriesMinValue(rightAxisSeries(scope.data)));\n            const maxY = scope.options.yAxis[1].rangeMax ||\n              seriesMaxValue(rightAxisSeries(scope.data));\n\n            scope.layout.yaxis2.range = [minY, maxY];\n          }\n        } else {\n          delete scope.layout.yaxis2;\n        }\n\n        if (scope.options.series.stacking === 'normal') {\n          scope.layout.barmode = 'stack';\n          if (scope.options.globalSeriesType === 'area') {\n            normalAreaStacking(scope.data);\n          }\n        } else if (scope.options.series.stacking === 'percent') {\n          scope.layout.barmode = 'stack';\n          if (scope.options.globalSeriesType === 'area') {\n            percentAreaStacking(scope.data);\n          } else if (scope.options.globalSeriesType === 'column') {\n            percentBarStacking(scope.data);\n          }\n        }\n\n        scope.layout.margin.b = bottomMargin;\n        scope.layout.height = calculateHeight();\n      }\n\n      scope.$watch('series', recalculateOptions);\n      scope.$watch('options', recalculateOptions, true);\n\n      scope.layout = {\n        margin: {\n          l: 50, r: 50, b: bottomMargin, t: 20, pad: 4,\n        },\n        height: calculateHeight(),\n        autosize: true,\n      };\n      scope.plotlyOptions = { showLink: false, displaylogo: false };\n      scope.data = [];\n\n      const plotlyElement = element[0].children[0];\n      Plotly.newPlot(plotlyElement, scope.data, scope.layout, scope.plotlyOptions);\n\n      plotlyElement.on('plotly_afterplot', () => {\n        if (scope.options.globalSeriesType === 'area' && (scope.options.series.stacking === 'normal' || scope.options.series.stacking === 'percent')) {\n          document.querySelectorAll('.legendtoggle').forEach((rectDiv, i) => {\n            d3.select(rectDiv).on('click', () => {\n              const maxIndex = scope.data.length - 1;\n              const itemClicked = scope.data[maxIndex - i];\n\n              itemClicked.visible = (itemClicked.visible === true) ? 'legendonly' : true;\n              if (scope.options.series.stacking === 'normal') {\n                normalAreaStacking(scope.data);\n              } else if (scope.options.series.stacking === 'percent') {\n                percentAreaStacking(scope.data);\n              }\n              Plotly.redraw(plotlyElement);\n            });\n          });\n        }\n      });\n      scope.$watch('layout', (layout, old) => {\n        if (isEqual(layout, old)) {\n          return;\n        }\n        Plotly.relayout(plotlyElement, layout);\n      }, true);\n\n      scope.$watch('data', (data) => {\n        if (!isEmpty(data)) {\n          Plotly.redraw(plotlyElement);\n        }\n      }, true);\n    },\n  };\n};\n\nconst CustomPlotlyChart = (clientConfig) => {\n  const customChart = {\n    restrict: 'E',\n    template: '<div></div>',\n    scope: {\n      series: '=',\n      options: '=',\n      height: '=',\n    },\n    link(scope, element) {\n      if (!clientConfig.allowCustomJSVisualizations) {\n        return;\n      }\n      const refresh = () => {\n        // Clear existing data with blank data for succeeding codeCall adds data to existing plot.\n        Plotly.newPlot(element[0].children[0]);\n\n        // eslint-disable-next-line no-eval\n        const codeCall = eval(`codeCall = function(x, ys, element, Plotly){ ${scope.options.customCode} }`);\n        codeCall(scope.x, scope.ys, element[0].children[0], Plotly);\n      };\n      const timeSeriesToPlotlySeries = () => {\n        scope.x = [];\n        scope.ys = {};\n        each(scope.series, (series) => {\n          scope.ys[series.name] = [];\n          each(series.data, (point) => {\n            scope.x.push(normalizeValue(point.x));\n            scope.ys[series.name].push(normalizeValue(point.y));\n          });\n        });\n      };\n      scope.$watch('[options.customCode, options.autoRedraw]', () => {\n        try {\n          if (scope.options.autoRedraw) {\n            refresh();\n          }\n        } catch (err) {\n          if (scope.options.enableConsoleLogs) {\n            // eslint-disable-next-line no-console\n            console.log(`Error while executing custom graph: ${err}`);\n          }\n        }\n      }, true);\n      scope.$watch('series', () => {\n        timeSeriesToPlotlySeries();\n        refresh();\n      }, true);\n    },\n  };\n  return customChart;\n};\n\nexport default function init(ngModule) {\n  ngModule.constant('ColorPalette', ColorPalette);\n  ngModule.directive('plotlyChart', PlotlyChart);\n  ngModule.directive('customPlotlyChart', CustomPlotlyChart);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/chart/plotly.js","/* global Cornelius */\nimport _ from 'underscore';\nimport moment from 'moment';\nimport angular from 'angular';\nimport 'cornelius/src/cornelius';\nimport 'cornelius/src/cornelius.css';\n\nimport editorTemplate from './cohort-editor.html';\n\nconst momentInterval = {\n  weekly: 'weeks',\n  daily: 'days',\n  monthly: 'months',\n};\n\nfunction prepareData(rawData, timeInterval) {\n  const sortedData = _.sortBy(rawData, r => r.date + parseInt(r.day_number, 10));\n  const grouped = _.groupBy(sortedData, 'date');\n  const initialDate = moment(sortedData[0].date).toDate();\n  const lastDate = moment(sortedData[sortedData.length - 1].date);\n  const zeroBased = _.min(_.pluck(rawData, 'day_number')) === 0;\n\n  let previousDay = null;\n  const data = [];\n\n  _.each(grouped, (values) => {\n    if (previousDay !== null) {\n      let diff = Math.abs(previousDay.diff(values[0].date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        data.push([0]);\n        diff -= 1;\n      }\n    }\n\n    previousDay = moment(values[0].date);\n\n    const row = [parseInt(values[0].total, 10)];\n    let maxDays = lastDate.diff(moment(values[0].date), momentInterval[timeInterval]);\n    if (zeroBased) {\n      maxDays += 1;\n    }\n\n    _.each(values, (value) => {\n      const index = zeroBased ? value.day_number + 1 : value.day_number;\n      row[index] = parseInt(value.value, 10);\n    });\n\n    for (let i = 0; i <= maxDays; i += 1) {\n      if (row[i] === undefined) {\n        row[i] = 0;\n      }\n    }\n\n    data.push(row);\n  });\n\n  return { data, initialDate };\n}\n\nfunction cohortRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      options: '=',\n    },\n    template: '',\n    replace: false,\n    link($scope, element) {\n      $scope.options.timeInterval = $scope.options.timeInterval || 'daily';\n\n      function updateCohort() {\n        if ($scope.queryResult.getData() === null) {\n          return;\n        }\n\n        const { data, initialDate } = prepareData(\n          $scope.queryResult.getData(),\n          $scope.options.timeInterval,\n        );\n\n        const container = angular.element(element)[0];\n\n        Cornelius.draw({\n          initialDate,\n          container,\n          cohort: data,\n          title: null,\n          timeInterval: $scope.options.timeInterval,\n          labels: {\n            time: 'Time',\n            people: 'Users',\n            weekOf: 'Week of',\n          },\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updateCohort);\n      $scope.$watch('options.timeInterval', updateCohort);\n    },\n  };\n}\n\nfunction cohortEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('cohortRenderer', cohortRenderer);\n  ngModule.directive('cohortEditor', cohortEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const editTemplate = '<cohort-editor></cohort-editor>';\n    const defaultOptions = {\n      timeInterval: 'daily',\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COHORT',\n      name: 'Cohort',\n      renderTemplate: '<cohort-renderer options=\"visualization.options\" query-result=\"queryResult\"></cohort-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/cohort/index.js","module.exports = \"<div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Time Interval</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"visualization.options.timeInterval\\\">\\n      <option value=\\\"daily\\\">Daily</option>\\n      <option value=\\\"weekly\\\">Weekly</option>\\n      <option value=\\\"monthly\\\">Monthly</option>\\n    </select>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/cohort/cohort-editor.html\n// module id = 631\n// module chunks = 1","import numberFormat from 'underscore.string/numberFormat';\nimport { isNumber as isNum } from 'underscore';\n\nimport counterTemplate from './counter.html';\nimport counterEditorTemplate from './counter-editor.html';\n\nfunction getRowNumber(index, size) {\n  if (index >= 0) {\n    return index - 1;\n  }\n\n  if (Math.abs(index) > size) {\n    index %= size;\n  }\n\n  return size + index;\n}\n\nfunction CounterRenderer() {\n  return {\n    restrict: 'E',\n    template: counterTemplate,\n    link($scope) {\n      const refreshData = () => {\n        const queryData = $scope.queryResult.getData();\n        if (queryData) {\n          const rowNumber = getRowNumber($scope.visualization.options.rowNumber, queryData.length);\n          const targetRowNumber =\n            getRowNumber($scope.visualization.options.targetRowNumber, queryData.length);\n          const counterColName = $scope.visualization.options.counterColName;\n          const targetColName = $scope.visualization.options.targetColName;\n\n          if ($scope.visualization.options.countRow) {\n            $scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            $scope.counterValue = queryData[rowNumber][counterColName];\n          }\n          if (targetColName) {\n            $scope.targetValue = queryData[targetRowNumber][targetColName];\n\n            if ($scope.targetValue) {\n              $scope.delta = $scope.counterValue - $scope.targetValue;\n              $scope.trendPositive = $scope.delta >= 0;\n            }\n          } else {\n            $scope.targetValue = null;\n          }\n\n          $scope.isNumber = isNum($scope.counterValue);\n          if ($scope.isNumber) {\n            $scope.stringPrefix = $scope.visualization.options.stringPrefix;\n            $scope.stringSuffix = $scope.visualization.options.stringSuffix;\n\n            const stringDecimal = $scope.visualization.options.stringDecimal;\n            const stringDecChar = $scope.visualization.options.stringDecChar;\n            const stringThouSep = $scope.visualization.options.stringThouSep;\n            if (stringDecimal || stringDecChar || stringThouSep) {\n              $scope.counterValue = numberFormat(\n                $scope.counterValue,\n                stringDecimal,\n                stringDecChar,\n                stringThouSep,\n              );\n              $scope.isNumber = false;\n            }\n          } else {\n            $scope.stringPrefix = null;\n            $scope.stringSuffix = null;\n          }\n        }\n      };\n\n      $scope.$watch('visualization.options', refreshData, true);\n      $scope.$watch('queryResult && queryResult.getData()', refreshData);\n    },\n  };\n}\n\nfunction CounterEditor() {\n  return {\n    restrict: 'E',\n    template: counterEditorTemplate,\n    link(scope) {\n      scope.currentTab = 'general';\n      scope.changeTab = (tab) => {\n        scope.currentTab = tab;\n      };\n      scope.isValueNumber = () => {\n        const queryData = scope.queryResult.getData();\n        if (queryData) {\n          const rowNumber = getRowNumber(scope.visualization.options.rowNumber, queryData.length);\n          const counterColName = scope.visualization.options.counterColName;\n\n          if (scope.visualization.options.countRow) {\n            scope.counterValue = queryData.length;\n          } else if (counterColName) {\n            scope.counterValue = queryData[rowNumber][counterColName];\n          }\n        }\n        return isNum(scope.counterValue);\n      };\n    },\n  };\n}\n\n\nexport default function init(ngModule) {\n  ngModule.directive('counterEditor', CounterEditor);\n  ngModule.directive('counterRenderer', CounterRenderer);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<counter-renderer ' +\n        'options=\"visualization.options\" query-result=\"queryResult\">' +\n        '</counter-renderer>';\n\n    const editTemplate = '<counter-editor></counter-editor>';\n    const defaultOptions = {\n      counterColName: 'counter',\n      rowNumber: 1,\n      targetRowNumber: 1,\n      stringDecimal: 0,\n      stringDecChar: '.',\n      stringThouSep: ',',\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'COUNTER',\n      name: 'Counter',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/counter/index.js","module.exports = \"<counter ng-class=\\\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\\\">\\n  <value ng-if=\\\"isNumber\\\">{{stringPrefix}}{{counterValue|number}}{{stringSuffix}}</value>\\n  <value ng-if=\\\"!isNumber\\\">{{stringPrefix}}{{counterValue}}{{stringSuffix}}</value>\\n  <counter-target ng-if=\\\"targetValue\\\">({{targetValue|number}})</counter-target>\\n  <counter-name>{{visualization.name}}</counter-name>\\n</counter>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/counter/counter.html\n// module id = 634\n// module chunks = 1","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\">\\n      <a ng-click=\\\"changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: currentTab == 'format'}\\\">\\n      <a ng-click=\\\"changeTab('format')\\\">Format</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.counterColName\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\"></select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.rowNumber\\\" class=\\\"form-control\\\" ng-disabled=\\\"visualization.options.countRow\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.targetColName\\\" class=\\\"form-control\\\">\\n          <option value=\\\"\\\">No target value</option>\\n        </select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-if=\\\"visualization.options.targetColName\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.targetRowNumber\\\" class=\\\"form-control\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.countRow\\\">\\n        <i class=\\\"input-helper\\\"></i> Count Rows\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'format'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Place</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"visualization.options.stringDecimal\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Character</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringDecChar\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Thousands Separator</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringThouSep\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Prefix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringPrefix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Suffix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"visualization.options.stringSuffix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/counter/counter-editor.html\n// module id = 635\n// module chunks = 1","import { pluck } from 'underscore';\nimport { copy } from 'angular';\nimport template from './edit-visualization-dialog.html';\n\nconst EditVisualizationDialog = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($window, currentUser, Events, Visualization, toastr) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.queryResult = this.resolve.queryResult;\n    this.originalVisualization = this.resolve.visualization;\n    this.onNewSuccess = this.resolve.onNewSuccess;\n    this.visualization = copy(this.originalVisualization);\n    this.visTypes = Visualization.visualizationTypes;\n\n    this.newVisualization = () =>\n      ({\n        type: Visualization.defaultVisualization.type,\n        name: Visualization.defaultVisualization.name,\n        description: '',\n        options: Visualization.defaultVisualization.defaultOptions,\n      });\n    if (!this.visualization) {\n      this.visualization = this.newVisualization();\n    }\n\n    this.typeChanged = (oldType) => {\n      const type = this.visualization.type;\n      // if not edited by user, set name to match type\n      // todo: this is wrong, because he might have edited it before.\n      if (type && oldType !== type && this.visualization && !this.visForm.name.$dirty) {\n        this.visualization.name = Visualization.visualizations[this.visualization.type].name;\n      }\n\n      // Bring default options\n      if (type && oldType !== type && this.visualization) {\n        this.visualization.options =\n          Visualization.visualizations[this.visualization.type].defaultOptions;\n      }\n    };\n\n    this.submit = () => {\n      if (this.visualization.id) {\n        Events.record('update', 'visualization', this.visualization.id, { type: this.visualization.type });\n      } else {\n        Events.record('create', 'visualization', null, { type: this.visualization.type });\n      }\n\n      this.visualization.query_id = this.query.id;\n\n      Visualization.save(this.visualization, (result) => {\n        toastr.success('Visualization saved');\n\n        const visIds = pluck(this.query.visualizations, 'id');\n        const index = visIds.indexOf(result.id);\n        if (index > -1) {\n          this.query.visualizations[index] = result;\n        } else {\n          // new visualization\n          this.query.visualizations.push(result);\n          if (this.onNewSuccess) {\n            this.onNewSuccess(result);\n          }\n        }\n        this.close();\n      }, () => {\n        toastr.error('Visualization could not be saved');\n      });\n    };\n\n    this.closeDialog = () => {\n      if (this.visForm.$dirty) {\n        if ($window.confirm('Are you sure you want to close the editor without saving?')) {\n          this.close();\n        }\n      } else {\n        this.close();\n      }\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editVisualizationDialog', EditVisualizationDialog);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/edit-visualization-dialog.js","module.exports = \"<div>\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.closeDialog()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    <h4 class=\\\"modal-title\\\">Visualization Editor</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-5 p-r-5\\\">\\n        <div>\\n          <form name=\\\"$ctrl.visForm\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Type</label>\\n\\n              <select required ng-model=\\\"$ctrl.visualization.type\\\"\\n                      ng-options=\\\"type.type as type.name for type in $ctrl.visTypes\\\" class=\\\"form-control\\\"\\n                      ng-change=\\\"$ctrl.typeChanged('{{$ctrl.visualization.type}}')\\\"></select>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Visualization Name</label>\\n              <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.visualization.name\\\"\\n                     placeholder=\\\"{{$ctrl.visualization.type | capitalize}}\\\">\\n            </div>\\n\\n            <visualization-options-editor visualization=\\\"$ctrl.visualization\\\"\\n                                          query-result=\\\"$ctrl.queryResult\\\"\\n                                          query=\\\"$ctrl.query\\\">\\n            </visualization-options-editor>\\n          </form>\\n        </div>\\n      </div>\\n      <div class=\\\"col-md-7\\\" style=\\\"border: 1px solid #eee\\\">\\n        <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\"></visualization-renderer>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.closeDialog()\\\">Close</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"$ctrl.submit()\\\">Save</button>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/edit-visualization-dialog.html\n// module id = 637\n// module chunks = 1","import moment from 'moment';\nimport { isArray, reduce } from 'underscore';\n\nfunction VisualizationProvider() {\n  this.visualizations = {};\n  // this.visualizationTypes = {};\n  this.visualizationTypes = [];\n  const defaultConfig = {\n    defaultOptions: {},\n    skipTypes: false,\n    editorTemplate: null,\n  };\n\n  this.registerVisualization = (config) => {\n    const visualization = Object.assign({}, defaultConfig, config);\n\n    // TODO: this is prone to errors; better refactor.\n    if (this.defaultVisualization === undefined && !visualization.name.match(/Deprecated/)) {\n      this.defaultVisualization = visualization;\n    }\n\n    this.visualizations[config.type] = visualization;\n\n    if (!config.skipTypes) {\n      this.visualizationTypes.push({ name: config.name, type: config.type });\n    }\n  };\n\n  this.getSwitchTemplate = (property) => {\n    const pattern = /(<[a-zA-Z0-9-]*?)( |>)/;\n\n    let mergedTemplates = reduce(\n      this.visualizations,\n      (templates, visualization) => {\n        if (visualization[property]) {\n          const ngSwitch = `$1 ng-switch-when=\"${visualization.type}\" $2`;\n          const template = visualization[property].replace(pattern, ngSwitch);\n\n          return `${templates}\\n${template}`;\n        }\n\n        return templates;\n      },\n      '',\n    );\n\n    mergedTemplates = `<div ng-switch on=\"visualization.type\">${mergedTemplates}</div>`;\n\n    return mergedTemplates;\n  };\n\n  this.$get = ($resource) => {\n    const Visualization = $resource('api/visualizations/:id', { id: '@id' });\n    Visualization.visualizations = this.visualizations;\n    Visualization.visualizationTypes = this.visualizationTypes;\n    Visualization.renderVisualizationsTemplate = this.getSwitchTemplate('renderTemplate');\n    Visualization.editorTemplate = this.getSwitchTemplate('editorTemplate');\n    Visualization.defaultVisualization = this.defaultVisualization;\n\n    return Visualization;\n  };\n}\n\nfunction VisualizationName(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n    },\n    template: '{{name}}',\n    replace: false,\n    link(scope) {\n      if (Visualization.visualizations[scope.visualization.type]) {\n        const defaultName = Visualization.visualizations[scope.visualization.type].name;\n        if (defaultName !== scope.visualization.name) {\n          scope.name = scope.visualization.name;\n        }\n      }\n    },\n  };\n}\n\nfunction VisualizationRenderer(Visualization) {\n  return {\n    restrict: 'E',\n    scope: {\n      visualization: '=',\n      queryResult: '=',\n    },\n    // TODO: using switch here (and in the options editor) might introduce errors and bad\n    // performance wise. It's better to eventually show the correct template based on the\n    // visualization type and not make the browser render all of them.\n    template: `<filters filters=\"filters\"></filters>\\n${Visualization.renderVisualizationsTemplate}`,\n    replace: false,\n    link(scope) {\n      scope.$watch('queryResult && queryResult.getFilters()', (filters) => {\n        if (filters) {\n          scope.filters = filters;\n        }\n      });\n    },\n  };\n}\n\nfunction VisualizationOptionsEditor(Visualization) {\n  return {\n    restrict: 'E',\n    template: Visualization.editorTemplate,\n    replace: false,\n    scope: {\n      visualization: '=',\n      query: '=',\n      queryResult: '=',\n    },\n  };\n}\n\nfunction FilterValueFilter(clientConfig) {\n  return (value, filter) => {\n    let firstValue = value;\n    if (isArray(value)) {\n      firstValue = value[0];\n    }\n\n    // TODO: deduplicate code with table.js:\n    if (filter.column.type === 'date') {\n      if (firstValue && moment.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateFormat);\n      }\n    } else if (filter.column.type === 'datetime') {\n      if (firstValue && moment.isMoment(firstValue)) {\n        return firstValue.format(clientConfig.dateTimeFormat);\n      }\n    }\n\n    return firstValue;\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.provider('Visualization', VisualizationProvider);\n  ngModule.directive('visualizationRenderer', VisualizationRenderer);\n  ngModule.directive('visualizationOptionsEditor', VisualizationOptionsEditor);\n  ngModule.directive('visualizationName', VisualizationName);\n  ngModule.filter('filterValue', FilterValueFilter);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/index.js","import _ from 'underscore';\nimport d3 from 'd3';\nimport angular from 'angular';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerIconRetina from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\n\nimport template from './map.html';\nimport editorTemplate from './map-editor.html';\n\n/*\nThis is a workaround for an issue with giving Leaflet load the icon on its own.\n*/\nL.Icon.Default.mergeOptions({\n  iconUrl: markerIcon,\n  iconRetinaUrl: markerIconRetina,\n  shadowUrl: markerShadow,\n});\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\n\nfunction mapRenderer() {\n  return {\n    restrict: 'E',\n    template,\n    link($scope, elm) {\n      const colorScale = d3.scale.category10();\n      const map = L.map(elm[0].children[0].children[0], { scrollWheelZoom: false });\n      const mapControls = L.control.layers().addTo(map);\n      const layers = {};\n      const tileLayer = L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      }).addTo(map);\n\n      function getBounds() {\n        $scope.visualization.options.bounds = map.getBounds();\n      }\n\n      function setBounds() {\n        const b = $scope.visualization.options.bounds;\n\n        if (b) {\n          map.fitBounds([[b._southWest.lat, b._southWest.lng],\n            [b._northEast.lat, b._northEast.lng]]);\n        } else if (layers) {\n          const allMarkers = _.flatten(_.map(_.values(layers), l => l.getLayers()));\n          // eslint-disable-next-line new-cap\n          const group = new L.featureGroup(allMarkers);\n          map.fitBounds(group.getBounds());\n        }\n      }\n\n\n      map.on('focus', () => { map.on('moveend', getBounds); });\n      map.on('blur', () => { map.off('moveend', getBounds); });\n\n      function resize() {\n        if (!map) return;\n        map.invalidateSize(false);\n        setBounds();\n      }\n\n      const createMarker = (lat, lon) => L.marker([lat, lon]);\n\n      const heatpoint = (lat, lon, color) => {\n        const style = {\n          fillColor: color,\n          fillOpacity: 0.9,\n          stroke: false,\n        };\n\n        return L.circleMarker([lat, lon], style);\n      };\n\n      function createDescription(latCol, lonCol, row) {\n        const lat = row[latCol];\n        const lon = row[lonCol];\n\n        let description = '<ul style=\"list-style-type: none;padding-left: 0\">';\n        description += `<li><strong>${lat}, ${lon}</strong>`;\n\n        _.each(row, (v, k) => {\n          if (!(k === latCol || k === lonCol)) {\n            description += `<li>${k}: ${v}</li>`;\n          }\n        });\n\n        return description;\n      }\n\n      function removeLayer(layer) {\n        if (layer) {\n          mapControls.removeLayer(layer);\n          map.removeLayer(layer);\n        }\n      }\n\n      function addLayer(name, points) {\n        const latCol = $scope.visualization.options.latColName || 'lat';\n        const lonCol = $scope.visualization.options.lonColName || 'lon';\n        const classify = $scope.visualization.options.classify;\n\n        let markers;\n        if ($scope.visualization.options.clusterMarkers) {\n          const color = $scope.visualization.options.groups[name].color;\n          const options = {};\n\n          if (classify) {\n            options.iconCreateFunction = (cluster) => {\n              const childCount = cluster.getChildCount();\n\n              let c = ' marker-cluster-';\n              if (childCount < 10) {\n                c += 'small';\n              } else if (childCount < 100) {\n                c += 'medium';\n              } else {\n                c += 'large';\n              }\n\n              c = '';\n\n              const style = `color: white; background-color: ${color};`;\n              return L.divIcon({ html: `<div style=\"${style}\"><span>${childCount}</span></div>`, className: `marker-cluster${c}`, iconSize: new L.Point(40, 40) });\n            };\n          }\n\n          markers = L.markerClusterGroup(options);\n        } else {\n          markers = L.layerGroup();\n        }\n\n        // create markers\n        _.each(points, (row) => {\n          let marker;\n\n          const lat = row[latCol];\n          const lon = row[lonCol];\n\n          if (lat === null || lon === null) return;\n\n          if (classify && classify !== 'none') {\n            const groupColor = $scope.visualization.options.groups[name].color;\n            marker = heatpoint(lat, lon, groupColor);\n          } else {\n            marker = createMarker(lat, lon);\n          }\n\n          marker.bindPopup(createDescription(latCol, lonCol, row));\n          markers.addLayer(marker);\n        });\n\n        markers.addTo(map);\n\n        layers[name] = markers;\n        mapControls.addOverlay(markers, name);\n      }\n\n      function render() {\n        const queryData = $scope.queryResult.getData();\n        const classify = $scope.visualization.options.classify;\n\n        $scope.visualization.options.mapTileUrl = $scope.visualization.options.mapTileUrl || '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n        tileLayer.setUrl($scope.visualization.options.mapTileUrl);\n\n        if ($scope.visualization.options.clusterMarkers === undefined) {\n          $scope.visualization.options.clusterMarkers = true;\n        }\n\n        if (queryData) {\n          let pointGroups;\n          if (classify && classify !== 'none') {\n            pointGroups = _.groupBy(queryData, classify);\n          } else {\n            pointGroups = { All: queryData };\n          }\n\n          const groupNames = _.keys(pointGroups);\n          const options = _.map(groupNames, (group) => {\n            if ($scope.visualization.options.groups && $scope.visualization.options.groups[group]) {\n              return $scope.visualization.options.groups[group];\n            }\n            return { color: colorScale(group) };\n          });\n\n          $scope.visualization.options.groups = _.object(groupNames, options);\n\n          _.each(layers, (v) => {\n            removeLayer(v);\n          });\n\n          _.each(pointGroups, (v, k) => {\n            addLayer(k, v);\n          });\n\n          setBounds();\n        }\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', render);\n      $scope.$watch('visualization.options', render, true);\n      angular.element(window).on('resize', resize);\n      $scope.$watch('visualization.options.height', resize);\n    },\n  };\n}\n\nfunction mapEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n    link($scope) {\n      $scope.currentTab = 'general';\n      $scope.columns = $scope.queryResult.getColumns();\n      $scope.columnNames = _.pluck($scope.columns, 'name');\n      $scope.classify_columns = $scope.columnNames.concat('none');\n      $scope.mapTiles = [\n        {\n          name: 'OpenStreetMap',\n          url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap BW',\n          url: '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap DE',\n          url: '//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap FR',\n          url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenStreetMap Hot',\n          url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Thunderforest',\n          url: '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Thunderforest Spinal',\n          url: '//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenMapSurfer',\n          url: '//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}',\n        },\n        {\n          name: 'Stamen Toner',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Stamen Toner Background',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'Stamen Toner Lite',\n          url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png',\n        },\n        {\n          name: 'OpenTopoMap',\n          url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n        },\n      ];\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('mapRenderer', mapRenderer);\n  ngModule.directive('mapEditor', mapEditor);\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<map-renderer ' +\n      'options=\"visualization.options\" query-result=\"queryResult\">' +\n      '</map-renderer>';\n\n    const editTemplate = '<map-editor></map-editor>';\n    const defaultOptions = {\n      height: 500,\n      classify: 'none',\n      clusterMarkers: true,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'MAP',\n      name: 'Map',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/map/index.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/leaflet/dist/images/marker-icon.png\n// module id = 643\n// module chunks = 1","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7c3grY3grg8hJo3grY4g7c4g7c3grU0gLI4grY9hrpBi79HkMM2frE0daA0fq82gbROlslbo9Vgp9dcpNZQmcxFjsIwd6QzeKk3gbRfptdepdZcpdY2gLMtd5s3gLNZotVSntNPnNJLmtFImdBZodU1f7A2f7A1frA2f7I2f7FHmNBUnM9Wn9VGmNAydaNYoNJOm9M9hLc0e6w3fa46f7BKmdFFltBVndE1fK1Els82fq41fK1Dlc89g7RClc9XoNVUndQ0eqxClM9Jl9FRms81eqo0eqpHltFBk89Fi75Qm9M/k89KkcYzealSjbadvdPH2ufz9/r4+vzP3+qlxNljmL08gLNSnNQzeKgydqUzeKg/ks6NtM/////+/v8+kc/f6fFAgK1CiLwydKIzd6c8kM6Tt9C1zd5OmdNBh7pTjLRzn78xdKIydqU7j86jwdbM3egxdKIydaQydaMydKNGlNE6js5OiLAxc6FKkshDk9E5jc09e6Zekrcxc6I4jc03eagyc6FIldI3jM0wcaBMl9J+psNKltIwcZ82i83k7fMubJhLlc81is1Lg6pklbZNl9I/j9AvbJlEjcVdkLPt8/cwcZ4ubZkwcJ00icy0y9swcJwvb5wzicxHkcpTh60ubZhCkNAyiMwvbpoxh8xAicBHj8hGk9FHks0+jdAubJcubJdEkdEwhsw6i88ubJgta5cvhswxapgubJcuhcstbJcubZcuhMsubJcvbJZBjMgthMsubJcvbZkubJcrg8stbJctbZcubJgrgssua5gubJc6is8qgcs8i9A9iMYtg8spgcoogMo7hcMrbZcubJcngMonf8olfsoubJc4gr8kfckua5g5iM8jfMk4iM8he8k1froua5g7itAgeskubJc2hs8eecgzfLcofssdeMg0hc4ubJccd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqjbZ8obAAAA7HRSTlMAHDdTb4yPA+L/7ZxE/////yYLgvb///////8SYf/////qB/////////+1wNHd//////8s////r/////////+O/P///////////8f///////////////////////+P2P///////////3f//////////5j/////tczn//////L///////////////////////8+////////R/////Ww////tf////9q////////////4P/////Yd/8W+P/xov+UNv///STN/7hc1P/AUv//////////MMT///+m//+e//////+M//+C////////6cqo94AAAAXmSURBVHgBrNKDoipBGADgbHMRpjuKi2xOdu//MHe2Y6tvOdZvuhGzxWqzO2xWi9lp+g6L3eV+5PH6vmpltrv8nDsQDIWCAbef83jDpo9FojFeJxhPJO8JosQzYnb5oxYpVzodiCcyhiwA2esPEAPpdM727vT+eSH0x7McwoTmOUpxIcvF/RAWI29byCUIpUQ2m8A0/xwx8kIQls2vW4QrihIHQMDqGyQBgAiVnOXVTuWUtAaAnq++I48B0PxKrPZiq8qKvy4IpPqBhiDUm0rl+ca12h1NQN3eh7pI6MN26WnfooNBPIHU4SdUlBAHg9Hj0seDEEJ08pxKqfoio4tQaDAOP0xrMEWIzB4NCWaIK8xJ7ymXItQcFO/jcLGIF+bLRytW4LS18Wbd5SNcEBcLn8mw2TYZ2+3vLRuMaYdme7sdTA8iY8flQ0mPscC2fB1ku12z4+necs7YebDlri9JZ3rvoazB1tutxdiuy1TXl4/Zer95ufzneq7524qBAIBr61TmtxXX/MK4FC6cKIwvViozXMDMzLbCTF+1JBn/4/EtLi2vrK6tbywsbE506vVxnZ3fF7YIIQamdX7dVqb/RtnCr1X+n3F9gA2MdA7Vsl87nzEDId2MTUCHSdr+As/Y1DKvM1uYFWBGpTtggrFuYrMPApgc0jhMTNmdvInLbn8NqNImgEG7jWzZnwB1KAg79t1V3mzPvgm6Q+n9m98n/e5ZQI+iw6Dby1v43AzApPIIs24/Cbg1GFcRE+h29xpvseJ2v4cxjzQOmjtAgqF5PRyRZvTXIfcqbxUNPdOnI1JYnw8FSSwUp4mklKDzoRRvkw7N0vF6QTwUI4aMRsNZyUQnMhkzb2HMZeJ0RhUMUy1jIP68lRaKUpLSXN7FW5jz+QnqKEoFas37yX6pD8tFpYybpQpv4S3lEGv5KvaV9olNDPwNHUhh1ETex5scpsQOVg8UxAFhI0dCHKPjRIogDorT1aZPzkTuHC9U2oPnQlySRzFxhYkTJYHHIXFt5srNnhBxLDSyV+L2IyF395vnhQflpHCuifv80g3/a+UPIXWNEDEAQEE0HR23weEk6XGnwR1iH3eJu7udbt26fe30I17x/PYH+9iv+CB5qT1v+YhlL5WeS5ZV72RZftvlNF6Wj75Zdn2kHcl6e5Sy/A3D7DsBMP0gd/DkC/Bp9l3gW5Y7a5asWVCm3WcaAFSHnFtxAXivwwAsWf9E25dl+TiwhwIKPVRgD33Ct6wvom0ijKapOBllpkEcf6ZCMsqjyCgjuvKIoajXYgya8vhIJ7rKKnKOP+sxjOPJZmV0DRRHGIZx/KW6npaOvor3M/G+pqalS00TT5q4G7qzPGe4O+wu7mxw59wt8p3LCre//pn/J+iupIwe1HKcpVdXI8c9QB9l9QMDnHVQF8+9xdAw5YzgBmfuHdVh4bj7GKO8cZYxW/UmvHkAeEl5pgncMJt7JzVZzOYaTFGh6WRGEDVJ5pniCDOCWw0Ns3MaLA0NdRijYm+AmQZhXoO1YQFYpBJLqGloGF1W1ZuMfKRSL1OZFVXJyNBlUhhD7evXk6sqZl+/rscaKfUDC68FtYn19Xr64xU+oo7nxQ2FWZ6vxyapuTyEdV5WTgR+HZ3DpGoN9Szzu8Qkzz9CH6kbZhlpa7uELO2gs4I0bOKRJInFC1GyPsMuaanoxPre1n6hbXlvB90dpKkPj4Q9sXAi7gnfcEDaOjqxIxwe5e1vCcforiIdu/gkyyenOSeyrBthqrpxvHV2lF0cHW4d47ySdB3g29bWiSPjZMvZBDvpqzxPZk7Ti9PDLZcyomBHk/PwxJ1ycsgiv4guzrgOz9wexn126EVbNV3oVzLj8zBaEYXqNnjP/G4W8Z8F0GYiKisTPGMZ31kQGKdymGwIhMIeTzgUgM1EZRkHgmGfL8wi01Qe0wQCYSaAESrXNBCJRiN6EYURxKLRmF5E4Q0QjwNvyIAlJBKYIiNegnlJhowBY2RMP9BPBn38SEYtLpKG/+tgQe8M5cY7AAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/leaflet/dist/images/marker-icon-2x.png\n// module id = 646\n// module chunks = 1","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/leaflet/dist/images/marker-shadow.png\n// module id = 647\n// module chunks = 1","module.exports = \"<div style='margin:1%;width:98%;height:{{visualization.options.height}}px'>\\n    <div style=\\\"width:100%; height:100%;\\\"></div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/map/map.html\n// module id = 648\n// module chunks = 1","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: currentTab == 'general'}\\\"><a ng-click=\\\"currentTab='general'\\\">General</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'groups'}\\\"><a ng-click=\\\"currentTab='groups'\\\">Groups</a></li>\\n    <li ng-class=\\\"{active: currentTab == 'map'}\\\"><a ng-click=\\\"currentTab='map'\\\">Map Settings</a></li>\\n  </ul>\\n\\n  <div ng-show=\\\"currentTab == 'general'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Latitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.latColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.lonColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Longitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.lonColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in columnNames | remove:visualization.options.classify | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Group By</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"visualization.options.classify\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in classify_columns | remove:visualization.options.lonColName | remove:visualization.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'groups'\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>Name</th>\\n      <th>Color</th>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"(name, options) in visualization.options.groups\\\">\\n        <td>{{name}}</td>\\n        <td>\\n            <input class=\\\"form-control\\\" type=\\\"color\\\" ng-model=\\\"options.color\\\"/>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-show=\\\"currentTab == 'map'\\\">\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.clusterMarkers\\\">\\n        <i class=\\\"input-helper\\\"></i> Cluster Markers\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Height (px)</label>\\n      <input class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\"/>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Tiles</label>\\n      <select ng-options=\\\"tile.url as tile.name for tile in mapTiles\\\" ng-model=\\\"visualization.options.mapTileUrl\\\"\\n              class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/map/map-editor.html\n// module id = 649\n// module chunks = 1","import angular from 'angular';\nimport $ from 'jquery';\nimport 'pivottable';\nimport 'pivottable/dist/pivot.css';\n\nimport editorTemplate from './pivottable-editor.html';\n\n\nfunction pivotTableRenderer() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      visualization: '=',\n    },\n    template: '',\n    replace: false,\n    link($scope, element) {\n      function removeControls() {\n        const hideControls =\n          $scope.visualization.options.controls &&\n          $scope.visualization.options.controls.enabled;\n\n        document.querySelectorAll('.pvtAxisContainer, .pvtRenderer, .pvtVals').forEach((control) => {\n          if (hideControls) {\n            control.style.display = 'none';\n          } else {\n            control.style.display = '';\n          }\n        });\n      }\n\n      function updatePivot() {\n        $scope.$watch('queryResult && queryResult.getData()', (data) => {\n          if (!data) {\n            return;\n          }\n\n          if ($scope.queryResult.getData() !== null) {\n            // We need to give the pivot table its own copy of the data, because it changes\n            // it which interferes with other visualizations.\n            data = angular.copy($scope.queryResult.getData());\n            const options = {\n              renderers: $.pivotUtilities.renderers,\n              onRefresh(config) {\n                const configCopy = Object.assign({}, config);\n                // delete some values which are functions\n                delete configCopy.aggregators;\n                delete configCopy.renderers;\n                delete configCopy.onRefresh;\n                // delete some bulky default values\n                delete configCopy.rendererOptions;\n                delete configCopy.localeStrings;\n\n                if ($scope.visualization) {\n                  $scope.visualization.options = configCopy;\n                }\n              },\n            };\n\n            if ($scope.visualization) {\n              Object.assign(options, $scope.visualization.options);\n            }\n\n            $(element).pivotUI(data, options, true);\n            removeControls();\n          }\n        });\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', updatePivot);\n      $scope.$watch('visualization.options.controls.enabled', removeControls);\n    },\n  };\n}\n\nfunction pivotTableEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('pivotTableRenderer', pivotTableRenderer);\n  ngModule.directive('pivotTableEditor', pivotTableEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const editTemplate = '<pivot-table-editor></pivot-table-editor>';\n    const defaultOptions = {\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'PIVOT',\n      name: 'Pivot Table',\n      renderTemplate: '<pivot-table-renderer visualization=\"visualization\" query-result=\"queryResult\"></pivot-table-renderer>',\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/pivot/index.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"col-lg-6\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.options.controls.enabled\\\">\\n        Hide Pivot Controls\\n      </label>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/pivot/pivottable-editor.html\n// module id = 653\n// module chunks = 1","import angular from 'angular';\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport d3 from 'd3';\n\nimport d3sankey from '@/lib/visualizations/d3sankey';\nimport editorTemplate from './sankey-editor.html';\n\nfunction getConnectedNodes(node) {\n  // source link = this node is the source, I need the targets\n  const nodes = [];\n  node.sourceLinks.forEach((link) => { nodes.push(link.target); });\n  node.targetLinks.forEach((link) => { nodes.push(link.source); });\n\n  return nodes;\n}\n\nfunction graph(data) {\n  const nodesDict = {};\n  const links = {};\n  const nodes = [];\n\n  const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n  const keys = _.sortBy(_.filter(_.keys(data[0]), validKey), _.identity);\n\n  function normalizeName(name) {\n    if (name) {\n      return name;\n    }\n\n    return 'Exit';\n  }\n\n  function getNode(name, level) {\n    name = normalizeName(name);\n    const key = `${name}:${String(level)}`;\n    let node = nodesDict[key];\n    if (!node) {\n      node = { name };\n      const id = nodes.push(node) - 1;\n      node.id = id;\n      nodesDict[key] = node;\n    }\n    return node;\n  }\n\n  function getLink(source, target) {\n    let link = links[[source, target]];\n    if (!link) {\n      link = { target, source, value: 0 };\n      links[[source, target]] = link;\n    }\n\n    return link;\n  }\n\n  function addLink(sourceName, targetName, value, depth) {\n    if ((sourceName === '' || !sourceName) && depth > 1) {\n      return;\n    }\n\n    const source = getNode(sourceName, depth);\n    const target = getNode(targetName, depth + 1);\n    const link = getLink(source.id, target.id);\n    link.value += parseInt(value, 10);\n  }\n\n  data.forEach((row) => {\n    addLink(row[keys[0]], row[keys[1]], row.value, 1);\n    addLink(row[keys[1]], row[keys[2]], row.value, 2);\n    addLink(row[keys[2]], row[keys[3]], row.value, 3);\n    addLink(row[keys[3]], row[keys[4]], row.value, 4);\n  });\n\n  return { nodes, links: _.values(links) };\n}\n\nfunction spreadNodes(height, data) {\n  const nodesByBreadth = d3.nest()\n    .key(d => d.x)\n    .entries(data.nodes)\n    .map(d => d.values);\n\n  nodesByBreadth.forEach((nodes) => {\n    nodes = _.filter(_.sortBy(nodes, node => -node.value), node =>\n      node.name !== 'Exit');\n\n    const sum = d3.sum(nodes, o => o.dy);\n    const padding = (height - sum) / nodes.length;\n\n    _.reduce(nodes, (y0, node) => {\n      node.y = y0;\n      return y0 + node.dy + padding;\n    }, 0);\n  });\n}\n\nfunction createSankey(element, sankeyHeight, data) {\n  const margin = {\n    top: 10, right: 10, bottom: 10, left: 10,\n  };\n  const width = $(element).parent().width() - margin.left - margin.right;\n  const height = sankeyHeight - margin.top - margin.bottom;\n\n  const format = d => d3.format(',.0f')(d);\n  const color = d3.scale.category20();\n\n  data = graph(data);\n  data.nodes = _.map(\n    data.nodes,\n    d => _.extend(d, {\n      color: color(d.name.replace(/ .*/, '')),\n    }),\n  );\n\n  // append the svg canvas to the page\n  const svg = d3.select(element).append('svg')\n    .attr('class', 'sankey')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr(\n      'transform',\n      `translate(${margin.left},${margin.top})`,\n    );\n\n  // Set the sankey diagram properties\n  const sankey = d3sankey()\n    .nodeWidth(15)\n    .nodePadding(10)\n    .size([width, height]);\n\n  const path = sankey.link();\n\n  sankey\n    .nodes(data.nodes)\n    .links(data.links)\n    .layout(0);\n\n  spreadNodes(height, data);\n  sankey.relayout();\n\n  // add in the links\n  const link = svg.append('g').selectAll('.link')\n    .data(data.links)\n    .enter()\n    .append('path')\n    .filter(l => l.target.name !== 'Exit')\n    .attr('class', 'link')\n    .attr('d', path)\n    .style('stroke-width', d => Math.max(1, d.dy))\n    .sort((a, b) => b.dy - a.dy);\n\n  // add the link titles\n  link.append('title')\n    .text(d =>\n      `${d.source.name}  ${d.target.name}\\n${format(d.value)}`);\n\n  const node = svg.append('g').selectAll('.node')\n    .data(data.nodes)\n    .enter()\n    .append('g')\n    .filter(n => n.name !== 'Exit')\n    .attr('class', 'node')\n    .attr('transform', d => `translate(${d.x},${d.y})`);\n\n  function nodeMouseOver(currentNode) {\n    let nodes = getConnectedNodes(currentNode);\n    nodes = _.pluck(nodes, 'id');\n    node.filter((d) => {\n      if (d === currentNode) {\n        return false;\n      }\n\n      if (_.contains(nodes, d.id)) {\n        return false;\n      }\n\n      return true;\n    }).style('opacity', 0.2);\n    link.filter(l =>\n      !(_.include(currentNode.sourceLinks, l) || _.include(currentNode.targetLinks, l))).style('opacity', 0.2);\n  }\n\n  function nodeMouseOut() {\n    node.style('opacity', 1);\n    link.style('opacity', 1);\n  }\n\n  // add in the nodes\n  node.on('mouseover', nodeMouseOver)\n    .on('mouseout', nodeMouseOut);\n\n  // add the rectangles for the nodes\n  node.append('rect')\n    .attr('height', d => d.dy)\n    .attr('width', sankey.nodeWidth())\n    .style('fill', d => d.color)\n    .style('stroke', d => d3.rgb(d.color).darker(2))\n    .append('title')\n    .text(d => `${d.name}\\n${format(d.value)}`);\n\n  // add in the title for the nodes\n  node.append('text')\n    .attr('x', -6)\n    .attr('y', d => d.dy / 2)\n    .attr('dy', '.35em')\n    .attr('text-anchor', 'end')\n    .attr('transform', null)\n    .text(d => d.name)\n    .filter(d => d.x < width / 2)\n    .attr('x', 6 + sankey.nodeWidth())\n    .attr('text-anchor', 'start');\n}\n\nfunction sankeyRenderer() {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      function refreshData() {\n        const queryData = scope.queryResult.getData();\n        if (queryData) {\n          // do the render logic.\n          angular.element(element[0]).empty();\n          createSankey(element[0], scope.visualization.options.height, queryData);\n        }\n      }\n\n      angular.element(window).on('resize', refreshData);\n      scope.$watch('queryResult && queryResult.getData()', refreshData);\n      scope.$watch('visualization.options.height', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          refreshData();\n        }\n      });\n    },\n  };\n}\n\nfunction sankeyEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('sankeyRenderer', sankeyRenderer);\n  ngModule.directive('sankeyEditor', sankeyEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n        '<sankey-renderer options=\"visualization.options\" query-result=\"queryResult\"></sankey-renderer>';\n\n    const editTemplate = '<sankey-editor></sankey-editor>';\n    const defaultOptions = {\n      height: 300,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SANKEY',\n      name: 'Sankey',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/sankey/index.js","/* eslint-disable */\n\nimport d3 from 'd3';\n\nfunction center(node) {\n  return node.y + node.dy / 2;\n}\n\nfunction value(link) {\n  return link.value;\n}\n\nfunction Sankey() {\n  const sankey = {};\n  let nodeWidth = 24;\n  let nodePadding = 8;\n  let size = [1, 1];\n  let nodes = [];\n  let links = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(node => {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(link => {\n      let source = link.source;\n      let target = link.target;\n      if (typeof source === 'number') source = link.source = nodes[link.source];\n      if (typeof target === 'number') target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(node => {\n      node.value = Math.max(d3.sum(node.sourceLinks, value), d3.sum(node.targetLinks, value));\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach(node => {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach(node => {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes;\n    let x = 0;\n\n    function assignBreadth(node) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach(link => {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach(node => {\n      if (!node.targetLinks.length) {\n        node.x = d3.min(node.sourceLinks, d => d.target.x) - 1;\n      }\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    const nodesByBreadth = d3\n      .nest()\n      .key(d => d.x)\n      .sortKeys(d3.ascending)\n      .entries(nodes)\n      .map(d => d.values);\n\n    function initializeNodeDepth() {\n      const ky = d3.min(\n        nodesByBreadth,\n        n => (size[1] - (n.length - 1) * nodePadding) / d3.sum(n, value),\n      );\n\n      nodesByBreadth.forEach(n => {\n        n.forEach((node, i) => {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(link => {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach(n => {\n        n.forEach(node => {\n          if (node.targetLinks.length) {\n            const y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(nodes => {\n        const n = nodes.length;\n        let node;\n        let dy;\n        let y0 = 0;\n        let i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(nodes => {\n        let node,\n          dy,\n          y0 = 0,\n          n = nodes.length,\n          i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (let alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft((alpha *= 0.99));\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth\n        .slice()\n        .reverse()\n        .forEach(nodes => {\n          nodes.forEach(node => {\n            if (node.sourceLinks.length) {\n              const y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(node => {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(node => {\n      let sy = 0,\n        ty = 0;\n      node.sourceLinks.forEach(link => {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach(link => {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  sankey.nodeWidth = function(_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function(_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function(_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function(_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function(_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function(iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function() {\n    let curvature = 0.5;\n\n    function link(d) {\n      const x0 = d.source.x + d.source.dx;\n      const x1 = d.target.x;\n      const xi = d3.interpolateNumber(x0, x1);\n      const x2 = xi(curvature);\n      const x3 = xi(1 - curvature);\n      const y0 = d.source.y + d.sy + d.dy / 2;\n      const y1 = d.target.y + d.ty + d.dy / 2;\n\n      return `M${x0},${y0}C${x2},${y0} ${x3},${y1} ${x1},${y1}`;\n    }\n\n    link.curvature = _ => {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  return sankey;\n}\n\nexport default Sankey;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/visualizations/d3sankey.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in the following format:\\n\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/sankey/sankey-editor.html\n// module id = 656\n// module chunks = 1","import jQuery from 'jquery';\nimport Sunburst from '@/lib/visualizations/sunburst';\nimport editorTemplate from './sunburst-sequence-editor.html';\n\nfunction sunburstSequenceRenderer() {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      let sunburst = new Sunburst(scope, element);\n\n      function resize() {\n        sunburst.remove();\n        sunburst = new Sunburst(scope, element);\n      }\n\n      jQuery(window).on('resize', resize);\n      scope.$watch('visualization.options.height', (oldValue, newValue) => {\n        if (oldValue !== newValue) {\n          resize();\n        }\n      });\n    },\n  };\n}\n\nfunction sunburstSequenceEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('sunburstSequenceRenderer', sunburstSequenceRenderer);\n  ngModule.directive('sunburstSequenceEditor', sunburstSequenceEditor);\n\n  ngModule.config((VisualizationProvider) => {\n    const renderTemplate =\n      '<sunburst-sequence-renderer options=\"visualization.options\" query-result=\"queryResult\"></sunburst-sequence-renderer>';\n\n    const editTemplate = '<sunburst-sequence-editor></sunburst-sequence-editor>';\n    const defaultOptions = {\n      height: 300,\n    };\n\n    VisualizationProvider.registerVisualization({\n      type: 'SUNBURST_SEQUENCE',\n      name: 'Sunburst Sequence',\n      renderTemplate,\n      editorTemplate: editTemplate,\n      defaultOptions,\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/sunburst/index.js","import * as d3 from 'd3';\nimport _ from 'underscore';\nimport angular from 'angular';\n\nconst exitNode = '<<<Exit>>>';\nconst colors = d3.scale.category10();\n\n// helper function colorMap - color gray if \"end\" is detected\nfunction colorMap(d) {\n  return colors(d.name);\n}\n\n// Return array of ancestors of nodes, highest first, but excluding the root.\nfunction getAncestors(node) {\n  const path = [];\n  let current = node;\n\n  while (current.parent) {\n    path.unshift(current);\n    current = current.parent;\n  }\n  return path;\n}\n\n// The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\nfunction Sunburst(scope, element) {\n  this.element = element;\n  this.watches = [];\n\n  // svg dimensions\n  const width = element[0].parentElement.clientWidth;\n  const height = scope.visualization.options.height;\n  const radius = Math.min(width, height) / 2;\n\n  // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n  const b = {\n    w: width / 6,\n    h: 30,\n    s: 3,\n    t: 10,\n  };\n\n  // margins\n  const margin = {\n    top: radius,\n    bottom: 50,\n    left: radius,\n    right: 0,\n  };\n\n  /**\n   * Drawing variables:\n   *\n   * e.g. colors, totalSize, partitions, arcs\n   */\n  // Mapping of nodes to colorscale.\n\n  // Total size of all nodes, to be used later when data is loaded\n  let totalSize = 0;\n\n  // create d3.layout.partition\n  const partition = d3.layout\n    .partition()\n    .size([2 * Math.PI, radius * radius])\n    .value(d => d.size);\n\n  // create arcs for drawing D3 paths\n  const arc = d3.svg\n    .arc()\n    .startAngle(d => d.x)\n    .endAngle(d => d.x + d.dx)\n    .innerRadius(d => Math.sqrt(d.y))\n    .outerRadius(d => Math.sqrt(d.y + d.dy));\n\n  /**\n   * Define and initialize D3 select references and div-containers\n   *\n   * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n   */\n  // create main vis selection\n  const vis = d3\n    .select(element[0])\n    .append('div')\n    .classed('vis-container', true)\n    .style('position', 'relative')\n    .style('margin-top', '5px')\n    .style('height', `${height + 2 * b.h}px`);\n\n  // create and position breadcrumbs container and svg\n  const breadcrumbs = vis\n    .append('div')\n    .classed('breadcrumbs-container', true)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', b.h)\n    .attr('fill', 'white')\n    .attr('font-weight', 600);\n\n  const marginLeft = (width - radius * 2) / 2;\n\n  // create and position SVG\n  const sunburst = vis\n    .append('div')\n    .classed('sunburst-container', true)\n    .style('z-index', '2')\n    // .style(\"margin-left\", marginLeft + \"px\")\n    .style('left', `${marginLeft}px`)\n    .style('position', 'absolute')\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // create last breadcrumb element\n  const lastCrumb = breadcrumbs.append('text').classed('lastCrumb', true);\n\n  // create and position summary container\n  const summary = vis\n    .append('div')\n    .classed('summary-container', true)\n    .style('position', 'absolute')\n    .style('top', `${b.h + radius * 0.8}px`)\n    .style('left', `${marginLeft + radius / 2}px`)\n    .style('width', `${radius}px`)\n    .style('height', `${radius}px`)\n    .style('text-align', 'center')\n    .style('font-size', '11px')\n    .style('color', '#666')\n    .style('z-index', '1');\n\n  // Generate a string representation for drawing a breadcrumb polygon.\n  function breadcrumbPoints(d, i) {\n    const points = [];\n    points.push('0,0');\n    points.push(`${b.w},0`);\n    points.push(`${b.w + b.t},${b.h / 2}`);\n    points.push(`${b.w},${b.h}`);\n    points.push(`0,${b.h}`);\n\n    if (i > 0) {\n      // Leftmost breadcrumb; don't include 6th vertex.\n      points.push(`${b.t},${b.h / 2}`);\n    }\n    return points.join(' ');\n  }\n\n  // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n  function updateBreadcrumbs(ancestors, percentageString) {\n    // Data join, where primary key = name + depth.\n    const g = breadcrumbs.selectAll('g').data(ancestors, d => d.name + d.depth);\n\n    // Add breadcrumb and label for entering nodes.\n    const breadcrumb = g.enter().append('g');\n\n    breadcrumb\n      .append('polygon')\n      .classed('breadcrumbs-shape', true)\n      .attr('points', breadcrumbPoints)\n      .attr('fill', colorMap);\n\n    breadcrumb\n      .append('text')\n      .classed('breadcrumbs-text', true)\n      .attr('x', (b.w + b.t) / 2)\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('font-size', '10px')\n      .attr('text-anchor', 'middle')\n      .text(d => d.name);\n\n    // Set position for entering and updating nodes.\n    g.attr('transform', (d, i) => `translate(${i * (b.w + b.s)}, 0)`);\n\n    // Remove exiting nodes.\n    g.exit().remove();\n\n    // Update percentage at the lastCrumb.\n    lastCrumb\n      .attr('x', (ancestors.length + 0.5) * (b.w + b.s))\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'black')\n      .attr('font-weight', 600)\n      .text(percentageString);\n  }\n\n  // helper function mouseover to handle mouseover events/animations and calculation\n  // of ancestor nodes etc\n  function mouseover(d) {\n    // build percentage string\n    const percentage = (100 * d.value / totalSize).toPrecision(3);\n    let percentageString = `${percentage}%`;\n    if (percentage < 1) {\n      percentageString = '< 1.0%';\n    }\n\n    // update breadcrumbs (get all ancestors)\n    const ancestors = getAncestors(d);\n    updateBreadcrumbs(ancestors, percentageString);\n\n    // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n    sunburst.selectAll('path').attr('opacity', 0.3);\n    sunburst\n      .selectAll('path')\n      .filter(node => ancestors.indexOf(node) >= 0)\n      .attr('opacity', 1);\n\n    // update summary\n    summary.html(`Stage: ${d.depth}<br />` +\n        `<span class='percentage' style='font-size: 2em;'>${percentageString}</span><br />${d.value} of ${totalSize}<br />`);\n\n    // display summary and breadcrumbs if hidden\n    summary.style('visibility', '');\n    breadcrumbs.style('visibility', '');\n  }\n\n  // helper function click to handle mouseleave events/animations\n  function click() {\n    // Deactivate all segments then retransition each segment to full opacity.\n    sunburst.selectAll('path').on('mouseover', null);\n    sunburst\n      .selectAll('path')\n      .transition()\n      .duration(1000)\n      .attr('opacity', 1)\n      .each('end', function endClick() {\n        d3.select(this).on('mouseover', mouseover);\n      });\n\n    // hide summary and breadcrumbs if visible\n    breadcrumbs.style('visibility', 'hidden');\n    summary.style('visibility', 'hidden');\n  }\n\n  // helper function to draw the sunburst and breadcrumbs\n  function drawSunburst(json) {\n    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n    // 0.005 radians = 0.29 degrees\n    const nodes = partition.nodes(json).filter(d => d.dx > 0.005 && d.name !== exitNode);\n\n    // this section is required to update the colors.domain() every time the data updates\n    const uniqueNames = (function uniqueNames(a) {\n      const output = [];\n      a.forEach((d) => {\n        if (output.indexOf(d.name) === -1) output.push(d.name);\n      });\n      return output;\n    }(nodes));\n    colors.domain(uniqueNames); // update domain colors\n\n    // create path based on nodes\n    const path = sunburst\n      .data([json])\n      .selectAll('path')\n      .data(nodes)\n      .enter()\n      .append('path')\n      .classed('nodePath', true)\n      .attr('display', d => (d.depth ? null : 'none'))\n      .attr('d', arc)\n      .attr('fill', colorMap)\n      .attr('opacity', 1)\n      .attr('stroke', 'white')\n      .on('mouseover', mouseover);\n\n    // // trigger mouse click over sunburst to reset visualization summary\n    vis.on('click', click);\n\n    // Update totalSize of the tree = value of root node from partition.\n    totalSize = path.node().__data__.value;\n  }\n\n  // visualize json tree structure\n  function createVisualization(json) {\n    drawSunburst(json); // draw sunburst\n  }\n\n  function removeVisualization() {\n    sunburst.selectAll('.nodePath').remove();\n    // legend.selectAll(\"g\").remove();\n  }\n\n  function buildNodes(raw) {\n    let values;\n\n    if (\n      _.has(raw[0], 'sequence') &&\n      _.has(raw[0], 'stage') &&\n      _.has(raw[0], 'node') &&\n      _.has(raw[0], 'value')\n    ) {\n      const grouped = _.groupBy(raw, 'sequence');\n\n      values = _.map(grouped, (value) => {\n        const sorted = _.sortBy(value, 'stage');\n        return {\n          size: value[0].value,\n          sequence: value[0].sequence,\n          nodes: _.pluck(sorted, 'node'),\n        };\n      });\n    } else {\n      const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n      const keys = _.sortBy(_.filter(_.keys(raw[0]), validKey), _.identity);\n\n      values = _.map(raw, (row, sequence) => ({\n        size: row.value,\n        sequence,\n        nodes: _.compact(_.map(keys, key => row[key])),\n      }));\n    }\n\n    return values;\n  }\n\n  function buildHierarchy(csv) {\n    const data = buildNodes(csv);\n\n    // build tree\n    const root = {\n      name: 'root',\n      children: [],\n    };\n\n    data.forEach((d) => {\n      const nodes = d.nodes;\n      const size = parseInt(d.size, 10);\n\n      // build graph, nodes, and child nodes\n      let currentNode = root;\n      for (let j = 0; j < nodes.length; j += 1) {\n        let children = currentNode.children;\n        const nodeName = nodes[j];\n        const isLeaf = j + 1 === nodes.length;\n\n        if (!children) {\n          currentNode.children = children = [];\n          children.push({\n            name: exitNode,\n            size: currentNode.size,\n          });\n        }\n\n        let childNode = _.find(children, child => child.name === nodeName);\n\n        if (isLeaf && childNode) {\n          childNode.children.push({\n            name: exitNode,\n            size,\n          });\n        } else if (isLeaf) {\n          children.push({\n            name: nodeName,\n            size,\n          });\n        } else {\n          if (!childNode) {\n            childNode = {\n              name: nodeName,\n              children: [],\n            };\n            children.push(childNode);\n          }\n\n          currentNode = childNode;\n        }\n      }\n    });\n\n    return root;\n  }\n\n  function render(data) {\n    const json = buildHierarchy(data); // build json tree\n    removeVisualization(); // remove existing visualization if any\n    createVisualization(json); // visualize json tree\n  }\n\n  function refreshData() {\n    const queryData = scope.queryResult.getData();\n    if (queryData) {\n      render(queryData);\n    }\n  }\n\n  refreshData();\n  this.watches.push(scope.$watch('visualization.options', refreshData, true));\n  this.watches.push(scope.$watch('queryResult && queryResult.getData()', refreshData));\n}\n\nSunburst.prototype.remove = function remove() {\n  this.watches.forEach((unregister) => {\n    unregister();\n  });\n  angular.element(this.element[0]).empty('.vis-container');\n};\n\nexport default Sunburst;\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/visualizations/sunburst.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Height</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"number\\\" ng-model=\\\"visualization.options.height\\\" min=\\\"1\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div>\\n    <hr>\\n    This visualization expects the query result to have rows in one of the following formats:\\n\\n    <strong>Option 1:</strong>\\n    <ul>\\n      <li><strong>sequence</strong> - sequence id</li>\\n      <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\\n      <li><strong>node</strong> - stage name</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n\\n    <strong>Option 2:</strong>\\n    <ul>\\n      <li><strong>stage1</strong> - stage 1 value</li>\\n      <li><strong>stage2</strong> - stage 2 value (or null)</li>\\n      <li><strong>stage3</strong> - stage 3 value (or null)</li>\\n      <li><strong>stage4</strong> - stage 4 value (or null)</li>\\n      <li><strong>stage5</strong> - stage 5 value (or null)</li>\\n      <li><strong>value</strong> - number of times this sequence occurred</li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/sunburst/sunburst-sequence-editor.html\n// module id = 659\n// module chunks = 1","import moment from 'moment';\nimport { _, partial, isString } from 'underscore';\nimport { getColumnCleanName } from '@/services/query-result';\nimport template from './table.html';\n\nfunction formatValue($filter, clientConfig, value, type) {\n  let formattedValue = value;\n  switch (type) {\n    case 'integer':\n      formattedValue = $filter('number')(value, 0);\n      break;\n    case 'float':\n      formattedValue = $filter('number')(value, 2);\n      break;\n    case 'boolean':\n      if (value !== undefined) {\n        formattedValue = String(value);\n      }\n      break;\n    case 'date':\n      if (value && moment.isMoment(value)) {\n        formattedValue = value.format(clientConfig.dateFormat);\n      }\n      break;\n    case 'datetime':\n      if (value && moment.isMoment(value)) {\n        formattedValue = value.format(clientConfig.dateTimeFormat);\n      }\n      break;\n    default:\n      if (isString(value)) {\n        formattedValue = $filter('linkify')(value);\n      }\n      break;\n  }\n\n  return formattedValue;\n}\n\nfunction GridRenderer(clientConfig) {\n  return {\n    restrict: 'E',\n    scope: {\n      queryResult: '=',\n      itemsPerPage: '=',\n    },\n    template,\n    replace: false,\n    controller($scope, $filter) {\n      $scope.gridColumns = [];\n      $scope.gridRows = [];\n\n      $scope.$watch('queryResult && queryResult.getData()', (queryResult) => {\n        if (!queryResult) {\n          return;\n        }\n\n        if ($scope.queryResult.getData() == null) {\n          $scope.gridColumns = [];\n          $scope.filters = [];\n        } else {\n          $scope.filters = $scope.queryResult.getFilters();\n\n          const columns = $scope.queryResult.getColumns();\n          columns.forEach((col) => {\n            col.title = getColumnCleanName(col.name);\n            col.formatFunction = partial(formatValue, $filter, clientConfig, _, col.type);\n          });\n\n          $scope.gridRows = $scope.queryResult.getData();\n          $scope.gridColumns = columns;\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.config((VisualizationProvider) => {\n    VisualizationProvider.registerVisualization({\n      type: 'TABLE',\n      name: 'Table',\n      renderTemplate: '<grid-renderer options=\"visualization.options\" query-result=\"queryResult\"></grid-renderer>',\n      skipTypes: true,\n    });\n  });\n  ngModule.directive('gridRenderer', GridRenderer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/table/index.js","module.exports = \"<dynamic-table rows=\\\"gridRows\\\" columns=\\\"gridColumns\\\"></dynamic-table>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/table/table.html\n// module id = 661\n// module chunks = 1","import d3 from 'd3';\nimport angular from 'angular';\nimport cloud from 'd3-cloud';\nimport { each } from 'underscore';\n\nimport editorTemplate from './word-cloud-editor.html';\n\nfunction findWordFrequencies(data, columnName) {\n  const wordsHash = {};\n\n  data.forEach((row) => {\n    const wordsList = row[columnName].toString().split(' ');\n    wordsList.forEach((d) => {\n      if (d in wordsHash) {\n        wordsHash[d] += 1;\n      } else {\n        wordsHash[d] = 1;\n      }\n    });\n  });\n\n  return wordsHash;\n}\n\n\nfunction wordCloudRenderer() {\n  return {\n    restrict: 'E',\n    link($scope, elem) {\n      function reloadCloud() {\n        if (!angular.isDefined($scope.queryResult)) return;\n\n        const data = $scope.queryResult.getData();\n        let wordsHash = {};\n\n        if ($scope.visualization.options.column) {\n          wordsHash = findWordFrequencies(data, $scope.visualization.options.column);\n        }\n\n        const wordList = [];\n        each(wordsHash, (v, key) => {\n          wordList.push({ text: key, size: 10 + Math.pow(v, 2) });\n        });\n\n        const fill = d3.scale.category20();\n        const layout = cloud()\n          .size([500, 500])\n          .words(wordList)\n          .padding(5)\n          .rotate(() => Math.floor(Math.random() * 2) * 90)\n          .font('Impact')\n          .fontSize(d => d.size);\n\n        function draw(words) {\n          d3.select(elem[0].parentNode)\n            .select('svg')\n            .remove();\n\n          d3.select(elem[0].parentNode)\n            .append('svg')\n            .attr('width', layout.size()[0])\n            .attr('height', layout.size()[1])\n            .append('g')\n            .attr('transform', `translate(${layout.size()[0] / 2},${layout.size()[1] / 2})`)\n            .selectAll('text')\n            .data(words)\n            .enter()\n            .append('text')\n            .style('font-size', d => `${d.size}px`)\n            .style('font-family', 'Impact')\n            .style('fill', (d, i) => fill(i))\n            .attr('text-anchor', 'middle')\n            .attr('transform', d =>\n              `translate(${[d.x, d.y]})rotate(${d.rotate})`)\n            .text(d => d.text);\n        }\n\n        layout.on('end', draw);\n\n        layout.start();\n      }\n\n      $scope.$watch('queryResult && queryResult.getData()', reloadCloud);\n      $scope.$watch('visualization.options.column', reloadCloud);\n    },\n  };\n}\n\nfunction wordCloudEditor() {\n  return {\n    restrict: 'E',\n    template: editorTemplate,\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('wordCloudEditor', wordCloudEditor);\n  ngModule.directive('wordCloudRenderer', wordCloudRenderer);\n\n  ngModule.config((VisualizationProvider) => {\n    VisualizationProvider.registerVisualization({\n      type: 'WORD_CLOUD',\n      name: 'Word Cloud',\n      renderTemplate: '<word-cloud-renderer options=\"visualization.options\" query-result=\"queryResult\"></word-cloud-renderer>',\n      editorTemplate: '<word-cloud-editor></word-cloud-editor>',\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/visualizations/word-cloud/index.js","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Word Cloud Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"name for name in queryResult.getColumnNames()\\\" ng-model=\\\"visualization.options.column\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/visualizations/word-cloud/word-cloud-editor.html\n// module id = 666\n// module chunks = 1","var map = {\n\t\"./admin/outdated-queries/index.js\": 668,\n\t\"./admin/status/index.js\": 672,\n\t\"./admin/tasks/index.js\": 674,\n\t\"./alert/index.js\": 676,\n\t\"./alerts-list/index.js\": 678,\n\t\"./dashboards/dashboard-list.js\": 680,\n\t\"./dashboards/dashboard.js\": 683,\n\t\"./dashboards/public-dashboard-page.js\": 686,\n\t\"./data-sources/list.js\": 688,\n\t\"./data-sources/show.js\": 690,\n\t\"./destinations/list.js\": 692,\n\t\"./destinations/show.js\": 694,\n\t\"./groups/data-sources.js\": 696,\n\t\"./groups/list.js\": 698,\n\t\"./groups/show.js\": 700,\n\t\"./home/index.js\": 702,\n\t\"./queries-list/index.js\": 704,\n\t\"./queries/queries-search-results-page.js\": 706,\n\t\"./queries/source-view.js\": 708,\n\t\"./queries/view.js\": 709,\n\t\"./query-snippets/edit.js\": 710,\n\t\"./query-snippets/list.js\": 713,\n\t\"./users/list.js\": 715,\n\t\"./users/new.js\": 717,\n\t\"./users/show.js\": 719\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 667;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages ^((?![\\\\/]test[\\\\/]).)*\\.js$\n// module id = 667\n// module chunks = 1","import moment from 'moment';\n\nimport { Paginator } from '@/lib/pagination';\nimport template from './outdated-queries.html';\n\nfunction OutdatedQueriesCtrl($scope, Events, $http, $timeout) {\n  Events.record('view', 'page', 'admin/outdated_queries');\n  $scope.autoUpdate = true;\n\n  this.queries = new Paginator([], { itemsPerPage: 50 });\n\n  const refresh = () => {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = moment().add(1, 'minutes');\n      $http.get('/api/admin/queries/outdated').success((data) => {\n        this.queries.updateRows(data.queries);\n        $scope.updatedAt = data.updated_at * 1000.0;\n      });\n    }\n\n    const timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function init(ngModule) {\n  ngModule.component('outdatedQueriesPage', {\n    template,\n    controller: OutdatedQueriesCtrl,\n  });\n\n  return {\n    '/admin/queries/outdated': {\n      template: '<outdated-queries-page></outdated-queries-page>',\n      title: 'Outdated Queries',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/outdated-queries/index.js","import { sortBy } from 'underscore';\n\nexport default class Paginator {\n  constructor(rows, { page = 1, itemsPerPage = 20, totalCount = undefined } = {}) {\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.updateRows(rows, totalCount);\n    this.orderByField = undefined;\n    this.orderByReverse = false;\n  }\n\n  setPage(page) {\n    this.page = page;\n  }\n\n  getPageRows() {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = this.itemsPerPage * (this.page);\n\n    return this.rows.slice(first, last);\n  }\n\n  updateRows(rows, totalCount = undefined) {\n    this.rows = rows;\n    if (this.rows) {\n      this.totalCount = totalCount || rows.length;\n    } else {\n      this.totalCount = 0;\n    }\n  }\n\n  orderBy(column) {\n    if (column === this.orderByField) {\n      this.orderByReverse = !this.orderByReverse;\n    } else {\n      this.orderByField = column;\n      this.orderByReverse = false;\n    }\n\n    if (this.orderByField) {\n      this.rows = sortBy(this.rows, this.orderByField);\n      if (this.orderByReverse) {\n        this.rows = this.rows.reverse();\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/pagination/paginator.js","export default class LivePaginator {\n  constructor(rowsFetcher, { page = 1, itemsPerPage = 20 } = {}) {\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.rowsFetcher = rowsFetcher;\n    this.rowsFetcher(this.page, this.itemsPerPage, this);\n  }\n\n  setPage(page) {\n    this.page = page;\n    this.rowsFetcher(page, this.itemsPerPage, this);\n  }\n\n  getPageRows() {\n    return this.rows;\n  }\n\n  updateRows(rows, totalCount = undefined) {\n    this.rows = rows;\n    if (this.rows) {\n      this.totalCount = totalCount || rows.length;\n    } else {\n      this.totalCount = 0;\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/lib/pagination/live-paginator.js","module.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Created At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.queries.getPageRows()\\\">\\n        <td>\\n          {{row.data_source_id}}\\n        </td>\\n        <td>\\n          <a ng-href=\\\"queries/{{row.id}}\\\">{{row.name}}</a>\\n        </td>\\n        <td>{{row.user.name}}</td>\\n        <td>{{row.runtime | durationHumanize}}</td>\\n        <td>{{row.retrieved_at | dateTime}}</td>\\n        <td>{{row.created_at | dateTime }}</td>\\n        <td>{{row.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.queries\\\"></paginator>\\n\\n    <div class=\\\"badge\\\">\\n      Last update: <span am-time-ago=\\\"updatedAt\\\"></span>\\n    </div>\\n    (<label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>)\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/admin/outdated-queries/outdated-queries.html\n// module id = 671\n// module chunks = 1","import template from './status.html';\n\n// TODO: switch to $ctrl instead of $scope.\nfunction AdminStatusCtrl($scope, $http, $timeout, currentUser, Events) {\n  Events.record('view', 'page', 'admin/status');\n\n  const refresh = () => {\n    $http.get('/status.json').success((data) => {\n      $scope.workers = data.workers;\n      delete data.workers;\n      $scope.manager = data.manager;\n      delete data.manager;\n      $scope.status = data;\n    });\n\n    const timer = $timeout(refresh, 59 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function init(ngModule) {\n  ngModule.component('statusPage', {\n    template,\n    controller: AdminStatusCtrl,\n  });\n\n  return {\n    '/admin/status': {\n      template: '<status-page></status-page>',\n      title: 'System Status',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/status/index.js","module.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li class=\\\"active\\\"><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <div>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">General</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in status\\\">\\n          <span class=\\\"badge\\\">{{value}}</span>\\n          {{name | toHuman}}\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Manager</li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.last_refresh_at*1000.0\\\"></span>\\n          Last Refresh\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\" am-time-ago=\\\"manager.started_at*1000.0\\\"></span>\\n          Started\\n        </li>\\n        <li class=\\\"list-group-item\\\">\\n          <span class=\\\"badge\\\">{{manager.outdated_queries_count}}</span>\\n          Outdated Queries Count\\n        </li>\\n      </ul>\\n\\n      <ul class=\\\"list-group col-lg-4\\\">\\n        <li class=\\\"list-group-item active\\\">Queues</li>\\n        <li class=\\\"list-group-item\\\" ng-repeat=\\\"(name, value) in manager.queues\\\">\\n          <span class=\\\"badge\\\">{{value.size}}</span>\\n          {{name}} <span uib-popover=\\\"{{value.data_sources}}\\\" popover-trigger=\\\"'mouseenter'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/admin/status/status.html\n// module id = 673\n// module chunks = 1","import moment from 'moment';\n\nimport { Paginator } from '@/lib/pagination';\nimport template from './tasks.html';\n\nfunction TasksCtrl($scope, $location, $http, $timeout, Events) {\n  Events.record('view', 'page', 'admin/tasks');\n  $scope.autoUpdate = true;\n\n  $scope.selectedTab = 'in_progress';\n\n  $scope.tasks = {\n    waiting: [],\n    in_progress: [],\n    done: [],\n  };\n\n  this.tasksPaginator = new Paginator([], { itemsPerPage: 50 });\n\n  $scope.setTab = (tab) => {\n    $scope.selectedTab = tab;\n    this.tasksPaginator.updateRows($scope.tasks[tab]);\n  };\n\n  $scope.setTab($location.hash() || 'in_progress');\n\n  const refresh = () => {\n    if ($scope.autoUpdate) {\n      $scope.refresh_time = moment().add(1, 'minutes');\n      $http.get('/api/admin/queries/tasks').success((data) => {\n        $scope.tasks = data;\n        this.tasksPaginator.updateRows($scope.tasks[$scope.selectedTab]);\n      });\n    }\n\n    const timer = $timeout(refresh, 5 * 1000);\n\n    $scope.$on('$destroy', () => {\n      if (timer) {\n        $timeout.cancel(timer);\n      }\n    });\n  };\n\n  refresh();\n}\n\nexport default function init(ngModule) {\n  ngModule.component('tasksPage', {\n    template,\n    controller: TasksCtrl,\n  });\n\n  return {\n    '/admin/queries/tasks': {\n      template: '<tasks-page></tasks-page>',\n      title: 'Running Queries',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/admin/tasks/index.js","module.exports = \"<page-header title=\\\"Admin\\\">\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"container bg-white p-5\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li><a href=\\\"admin/status\\\">System Status</a></li>\\n      <li class=\\\"active\\\"><a href=\\\"admin/queries/tasks\\\">Queries Queue</a></li>\\n      <li><a href=\\\"admin/queries/outdated\\\">Outdated Queries</a></li>\\n    </ul>\\n\\n    <ul class=\\\"tab-nav\\\">\\n      <rd-tab tab-id=\\\"in_progress\\\" name=\\\"In Progress ({{tasks.in_progress.length}})\\\" ng-click=\\\"setTab('in_progress')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"waiting\\\" name=\\\"Waiting ({{tasks.waiting.length}})\\\" ng-click=\\\"setTab('waiting')\\\"></rd-tab>\\n      <rd-tab tab-id=\\\"done\\\" name=\\\"Done\\\" ng-click=\\\"setTab('done')\\\"></rd-tab>\\n    </ul>\\n\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Data Source ID</th>\\n        <th>Username</th>\\n        <th>State</th>\\n        <th>Query ID</th>\\n        <th>Query Hash</th>\\n        <th>Runtime</th>\\n        <th>Created At</th>\\n        <th>Started At</th>\\n        <th>Updated At</th>\\n        <th ng-if=\\\"selectedTab === 'in_progress'\\\"></th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.tasksPaginator.getPageRows()\\\">\\n        <td>{{row.data_source_id}}</td>\\n        <td>{{row.username}}</td>\\n        <td>{{row.state}} <span ng-if=\\\"row.state === 'failed'\\\" uib-popover=\\\"{{row.error}}\\\" popover-trigger=\\\"mouseenter\\\" class=\\\"zmdi zmdi-help\\\"></span></td>\\n        <td><a href=\\\"queries/{{row.query_id}}\\\">{{row.query_id}}</a></td>\\n        <td>{{row.query_hash}}</td>\\n        <td>{{row.run_time | durationHumanize}}</td>\\n        <td>{{row.created_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.started_at | toMilliseconds | dateTime }}</td>\\n        <td>{{row.updated_at | toMilliseconds | dateTime }}</td>\\n        <td ng-if=\\\"selectedTab === 'in_progress'\\\">\\n          <cancel-query-button query-id=\\\"row.query_id\\\" task-id=\\\"row.task_id\\\"></cancel-query-button>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.tasksPaginator\\\"></paginator>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"autoUpdate\\\"> Auto Update</label>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/admin/tasks/tasks.html\n// module id = 675\n// module chunks = 1","import { template as templateBuilder } from 'underscore';\nimport template from './alert.html';\n\nfunction AlertCtrl($routeParams, $location, $sce, toastr, currentUser, Query, Events, Alert) {\n  this.alertId = $routeParams.alertId;\n\n  if (this.alertId === 'new') {\n    Events.record('view', 'page', 'alerts/new');\n  } else {\n    Events.record('view', 'alert', this.alertId);\n  }\n\n  this.trustAsHtml = html => $sce.trustAsHtml(html);\n\n  this.onQuerySelected = (item) => {\n    this.selectedQuery = item;\n    item.getQueryResultPromise().then((result) => {\n      this.queryResult = result;\n      this.alert.options.column = this.alert.options.column || result.getColumnNames()[0];\n    });\n  };\n\n  if (this.alertId === 'new') {\n    this.alert = new Alert({ options: {} });\n    this.canEdit = true;\n  } else {\n    this.alert = Alert.get({ id: this.alertId }, (alert) => {\n      this.onQuerySelected(new Query(alert.query));\n      this.canEdit = currentUser.canEdit(this.alert);\n    });\n  }\n\n  this.ops = ['greater than', 'less than', 'equals'];\n  this.selectedQuery = null;\n\n  const defaultNameBuilder = templateBuilder('<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>');\n\n  this.getDefaultName = () => {\n    if (!this.alert.query) {\n      return undefined;\n    }\n    return defaultNameBuilder(this.alert);\n  };\n\n  this.searchQueries = (term) => {\n    if (!term || term.length < 3) {\n      return;\n    }\n\n    Query.search({ q: term }, (results) => {\n      this.queries = results;\n    });\n  };\n\n  this.saveChanges = () => {\n    if (this.alert.name === undefined || this.alert.name === '') {\n      this.alert.name = this.getDefaultName();\n    }\n    if (this.alert.rearm === '' || this.alert.rearm === 0) {\n      this.alert.rearm = null;\n    }\n    this.alert.$save(\n      (alert) => {\n        toastr.success('Saved.');\n        if (this.alertId === 'new') {\n          $location.path(`/alerts/${alert.id}`).replace();\n        }\n      },\n      () => {\n        toastr.error('Failed saving alert.');\n      },\n    );\n  };\n\n  this.delete = () => {\n    this.alert.$delete(\n      () => {\n        $location.path('/alerts');\n        toastr.success('Alert deleted.');\n      },\n      () => {\n        toastr.error('Failed deleting alert.');\n      },\n    );\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertPage', {\n    template,\n    controller: AlertCtrl,\n  });\n\n  return {\n    '/alerts/:alertId': {\n      template: '<alert-page></alert-page>',\n      title: 'Alerts',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/alert/index.js","module.exports = \"<page-header title='{{$ctrl.alert.name || $ctrl.getDefaultName() || \\\"New\\\" }}'>\\n</page-header>\\n\\n<div class=\\\"container\\\">\\n  <email-settings-warning function=\\\"'alert emails'\\\"></email-settings-warning>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row bg-white p-10\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>Query</label>\\n            <ui-select ng-model=\\\"$ctrl.alert.query\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onQuerySelected($item)\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n              <ui-select-match placeholder=\\\"Search a query by name\\\">{{$select.selected.name}}</ui-select-match>\\n              <ui-select-choices repeat=\\\"q in $ctrl.queries\\\"\\n                                 refresh=\\\"$ctrl.searchQueries($select.search)\\\"\\n                                 refresh-delay=\\\"0\\\">\\n                <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-show=\\\"$ctrl.selectedQuery\\\">\\n            <label>Name</label>\\n            <input type=\\\"string\\\" placeholder=\\\"{{$ctrl.getDefaultName()}}\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.name\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n          </div>\\n\\n          <div ng-show=\\\"$ctrl.queryResult\\\" class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Value column</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.queryResult.getColumnNames()\\\" ng-model=\\\"$ctrl.alert.options.column\\\"\\n                        class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Value</label>\\n              <div class=\\\"col-md-4\\\">\\n                <p class=\\\"form-control-static\\\">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Op</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.ops\\\" ng-model=\\\"$ctrl.alert.options.op\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Reference</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" step=\\\"any\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.options.value\\\" placeholder=\\\"reference value\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"\\n                       required/>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Rearm seconds</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.rearm\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"/>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n            <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!alertForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n            <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.alert.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.alert.id\\\">\\n        <alert-subscriptions alert-id=\\\"$ctrl.alert.id\\\"></alert-subscriptions>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/alert/alert.html\n// module id = 677\n// module chunks = 1","import { Paginator } from '@/lib/pagination';\nimport template from './alerts-list.html';\n\nconst stateClass = {\n  ok: 'label label-success',\n  triggered: 'label label-danger',\n  unknown: 'label label-warning',\n};\n\nclass AlertsListCtrl {\n  constructor(Events, Alert) {\n    Events.record('view', 'page', 'alerts');\n\n    this.alerts = new Paginator([], { itemsPerPage: 20 });\n    Alert.query((alerts) => {\n      this.alerts.updateRows(alerts.map(alert => ({\n        id: alert.id,\n        name: alert.name,\n        state: alert.state,\n        class: stateClass[alert.state],\n        created_by: alert.user.name,\n        created_at: alert.created_at,\n        updated_at: alert.updated_at,\n      })));\n    });\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertsListPage', {\n    template,\n    controller: AlertsListCtrl,\n  });\n\n  return {\n    '/alerts': {\n      template: '<alerts-list-page></alerts-list-page>',\n      title: 'Alerts',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/alerts-list/index.js","module.exports = \"<div>\\n  <page-header title=\\\"Alerts\\\">\\n    <a href=\\\"alerts/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert</a>\\n  </page-header>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('name')\\\">Name <sort-icon column=\\\"'name'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('created_by')\\\">Created By <sort-icon column=\\\"'created_by'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('state')\\\">State <sort-icon column=\\\"'state'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n          <th class=\\\"sortable-column\\\" ng-click=\\\"$ctrl.alerts.orderBy('created_at')\\\">Created By <sort-icon column=\\\"'created_at'\\\" sort-column=\\\"$ctrl.alerts.orderByField\\\" reverse=\\\"$ctrl.alerts.orderByReverse\\\"></sort-icon></th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"row in $ctrl.alerts.getPageRows()\\\">\\n          <td><a href=\\\"alerts/{{row.id}}\\\">{{row.name}}</a></td>\\n          <td>{{row.created_by}}</td>\\n          <td><span ng-class=\\\"row.class\\\">{{row.state | uppercase}}</span> since <span am-time-ago=\\\"row.updated_at\\\"></span></td>\\n          <td><span am-time-ago=\\\"row.created_at\\\"></span></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.alerts\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/alerts-list/alerts-list.html\n// module id = 679\n// module chunks = 1","import _ from 'underscore';\n\nimport { Paginator } from '@/lib/pagination';\nimport template from './dashboard-list.html';\nimport './dashboard-list.css';\n\n\nfunction DashboardListCtrl(Dashboard, $location, clientConfig) {\n  const TAGS_REGEX = /(^([\\w\\s]|[^\\u0000-\\u007F])+):|(#([\\w-]|[^\\u0000-\\u007F])+)/ig;\n\n  this.logoUrl = clientConfig.logoUrl;\n  const page = parseInt($location.search().page || 1, 10);\n\n  this.defaultOptions = {};\n  this.dashboards = Dashboard.query({}); // shared promise\n\n  this.selectedTags = []; // in scope because it needs to be accessed inside a table refresh\n  this.searchText = '';\n\n  this.tagIsSelected = tag => this.selectedTags.indexOf(tag) > -1;\n\n  this.toggleTag = ($event, tag) => {\n    if (this.tagIsSelected(tag)) {\n      if ($event.shiftKey) {\n        this.selectedTags = this.selectedTags.filter(e => e !== tag);\n      } else {\n        this.selectedTags = [];\n      }\n    } else if ($event.shiftKey) {\n      this.selectedTags.push(tag);\n    } else {\n      this.selectedTags = [tag];\n    }\n\n    this.update();\n  };\n\n  this.allTags = [];\n  this.dashboards.$promise.then((data) => {\n    const out = data.map(dashboard => dashboard.name.match(TAGS_REGEX));\n    this.allTags = _.unique(_.flatten(out)).filter(e => e).map(tag => tag.replace(/:$/, ''));\n    this.allTags.sort();\n  });\n\n  this.paginator = new Paginator([], { page });\n\n  this.update = () => {\n    this.dashboards.$promise.then((data) => {\n      data = _.sortBy(data, 'name');\n      const filteredDashboards = data.map((dashboard) => {\n        dashboard.tags = (dashboard.name.match(TAGS_REGEX) || []).map(tag => tag.replace(/:$/, ''));\n        dashboard.untagged_name = dashboard.name.replace(TAGS_REGEX, '').trim();\n        return dashboard;\n      }).filter((value) => {\n        if (this.selectedTags.length) {\n          const valueTags = new Set(value.tags);\n          const tagMatch = this.selectedTags;\n          const filteredMatch = tagMatch.filter(x => valueTags.has(x));\n          if (tagMatch.length !== filteredMatch.length) {\n            return false;\n          }\n        }\n        if (this.searchText && this.searchText.length) {\n          if (!value.untagged_name.toLowerCase().includes(this.searchText.toLowerCase())) {\n            return false;\n          }\n        }\n        return true;\n      });\n\n      this.paginator.updateRows(filteredDashboards, data.count);\n    });\n  };\n\n  this.update();\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageDashboardList', {\n    template,\n    controller: DashboardListCtrl,\n  });\n\n  const route = {\n    template: '<page-dashboard-list></page-dashboard-list>',\n    reloadOnSearch: false,\n    title: 'Dashboards',\n  };\n\n  return {\n    '/dashboards': route,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/dashboard-list.js","module.exports = \"<div class='container row'>\\n  <page-header title=\\\"Dashboards\\\"></page-header>\\n  <div class=\\\"col-lg-3\\\">\\n    <input type='text' class='form-control' placeholder=\\\"Search Dashboards...\\\" \\n      ng-change=\\\"$ctrl.update()\\\" ng-model=\\\"$ctrl.searchText\\\" autofocus/>\\n    <div class='list-group m-t-20 tags-list'>\\n      <a ng-repeat='tag in $ctrl.allTags' ng-class='{\\\"active\\\": $ctrl.tagIsSelected(tag)}'\\n      class='list-group-item' ng-click='$ctrl.toggleTag($event, tag)'>\\n        {{ tag }}\\n      </a>\\n    </div>\\n  </div>\\n  <div class=\\\"col-lg-9\\\">\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        <tr>\\n          <th>Name</th>\\n          <th>Created At</th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dashboard in $ctrl.paginator.getPageRows()\\\">\\n          <td>\\n            <a href=\\\"dashboard/{{ dashboard.slug }}\\\">\\n              <span class=\\\"label label-primary m-2\\\" ng-bind=\\\"tag\\\" ng-repeat=\\\"tag in dashboard.tags\\\"></span> {{ dashboard.untagged_name }}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n            </a>\\n          </td>\\n          <td>{{ dashboard.created_at | dateTime }}</td>\\n        </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/dashboard-list.html\n// module id = 681\n// module chunks = 1","import * as _ from 'underscore';\nimport template from './dashboard.html';\nimport shareDashboardTemplate from './share-dashboard.html';\n\nfunction DashboardCtrl(\n  $rootScope, $routeParams, $location, $timeout, $q, $uibModal,\n  Title, AlertDialog, Dashboard, currentUser, clientConfig, Events,\n) {\n  this.isFullscreen = false;\n  this.refreshRate = null;\n  this.showPermissionsControl = clientConfig.showPermissionsControl;\n  this.currentUser = currentUser;\n  this.globalParameters = [];\n  this.refreshRates = [\n    { name: '10 seconds', rate: 10 },\n    { name: '30 seconds', rate: 30 },\n    { name: '1 minute', rate: 60 },\n    { name: '5 minutes', rate: 60 * 5 },\n    { name: '10 minutes', rate: 60 * 10 },\n    { name: '30 minutes', rate: 60 * 30 },\n    { name: '1 hour', rate: 60 * 60 },\n    { name: '12 hour', rate: 12 * 60 * 60 },\n    { name: '24 hour', rate: 24 * 60 * 60 },\n  ];\n\n  this.setRefreshRate = (rate) => {\n    this.refreshRate = rate;\n    if (rate !== null) {\n      this.loadDashboard(true);\n      this.autoRefresh();\n    }\n  };\n\n  this.extractGlobalParameters = () => {\n    let globalParams = {};\n    this.dashboard.widgets.forEach(row =>\n      row.forEach((widget) => {\n        if (widget.getQuery()) {\n          widget.getQuery().getParametersDefs().filter(p => p.global).forEach((param) => {\n            const defaults = {};\n            defaults[param.name] = _.create(Object.getPrototypeOf(param), param);\n            defaults[param.name].locals = [];\n            globalParams = _.defaults(globalParams, defaults);\n            globalParams[param.name].locals.push(param);\n          });\n        }\n      }));\n    this.globalParameters = _.values(globalParams);\n  };\n\n  this.onGlobalParametersChange = () => {\n    this.globalParameters.forEach((global) => {\n      global.locals.forEach((local) => {\n        local.value = global.value;\n      });\n    });\n  };\n\n  const renderDashboard = (dashboard, force) => {\n    Title.set(dashboard.name);\n    const promises = [];\n\n    this.dashboard.widgets.forEach(row =>\n      row.forEach((widget) => {\n        if (widget.visualization) {\n          const maxAge = force ? 0 : undefined;\n          const queryResult = widget.getQuery().getQueryResult(maxAge);\n          if (!_.isUndefined(queryResult)) {\n            promises.push(queryResult.toPromise());\n          }\n        }\n      }));\n\n    this.extractGlobalParameters();\n\n    $q.all(promises).then((queryResults) => {\n      const filters = {};\n      queryResults.forEach((queryResult) => {\n        const queryFilters = queryResult.getFilters();\n        queryFilters.forEach((queryFilter) => {\n          const hasQueryStringValue = _.has($location.search(), queryFilter.name);\n\n          if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n            // If dashboard filters not enabled, or no query string value given,\n            // skip filters linking.\n            return;\n          }\n\n          if (hasQueryStringValue) {\n            queryFilter.current = $location.search()[queryFilter.name];\n          }\n\n          if (!_.has(filters, queryFilter.name)) {\n            const filter = _.extend({}, queryFilter);\n            filters[filter.name] = filter;\n            filters[filter.name].originFilters = [];\n          }\n\n          // TODO: merge values.\n          filters[queryFilter.name].originFilters.push(queryFilter);\n        });\n      });\n\n      this.filters = _.values(filters);\n      this.filtersOnChange = (filter) => {\n        _.each(filter.originFilters, (originFilter) => {\n          originFilter.current = filter.current;\n        });\n      };\n    });\n  };\n\n  this.loadDashboard = _.throttle((force) => {\n    this.dashboard = Dashboard.get({ slug: $routeParams.dashboardSlug }, (dashboard) => {\n      Events.record('view', 'dashboard', dashboard.id);\n      renderDashboard(dashboard, force);\n    }, () => {\n      // error...\n      // try again. we wrap loadDashboard with throttle so it doesn't happen too often.\n      // we might want to consider exponential backoff and also move this as a general\n      // solution in $http/$resource for all AJAX calls.\n      this.loadDashboard();\n    });\n  }, 1000);\n\n  this.loadDashboard();\n\n  this.autoRefresh = () => {\n    $timeout(() => {\n      this.loadDashboard(true);\n    }, this.refreshRate.rate * 1000).then(() => this.autoRefresh());\n  };\n\n  this.archiveDashboard = () => {\n    const archive = () => {\n      Events.record('archive', 'dashboard', this.dashboard.id);\n      this.dashboard.$delete(() => {\n        $rootScope.$broadcast('reloadDashboards');\n      });\n    };\n\n    const title = 'Archive Dashboard';\n    const message = `Are you sure you want to archive the \"${this.dashboard.name}\" dashboard?`;\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  this.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/dashboards/${this.dashboard.id}/acl` },\n      },\n    });\n  };\n\n  this.editDashboard = () => {\n    const previousFiltersState = this.dashboard.dashboard_filters_enabled;\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => this.dashboard,\n      },\n    }).result.then((dashboard) => {\n      const shouldRenderDashboard = !previousFiltersState && dashboard.dashboard_filters_enabled;\n      this.dashboard = dashboard;\n\n      if (shouldRenderDashboard) {\n        renderDashboard(this.dashboard);\n      }\n    });\n  };\n\n  this.addWidget = () => {\n    $uibModal.open({\n      component: 'addWidgetDialog',\n      resolve: {\n        dashboard: () => this.dashboard,\n      },\n    }).result.then(() => this.extractGlobalParameters());\n  };\n\n  this.toggleFullscreen = () => {\n    this.isFullscreen = !this.isFullscreen;\n    document.querySelector('body').classList.toggle('headless');\n\n    if (this.isFullscreen) {\n      $location.search('fullscreen', true);\n    } else {\n      $location.search('fullscreen', null);\n    }\n  };\n\n  this.togglePublished = () => {\n    Events.record('toggle_published', 'dashboard', this.dashboard.id);\n    this.dashboard.is_draft = !this.dashboard.is_draft;\n    this.saveInProgress = true;\n    Dashboard.save({\n      slug: this.dashboard.id,\n      name: this.dashboard.name,\n      layout: JSON.stringify(this.dashboard.layout),\n      is_draft: this.dashboard.is_draft,\n    }, (dashboard) => {\n      this.saveInProgress = false;\n      this.dashboard.version = dashboard.version;\n      $rootScope.$broadcast('reloadDashboards');\n    });\n  };\n\n  if (_.has($location.search(), 'fullscreen')) {\n    this.toggleFullscreen();\n  }\n\n  this.openShareForm = () => {\n    $uibModal.open({\n      component: 'shareDashboard',\n      resolve: {\n        dashboard: this.dashboard,\n      },\n    });\n  };\n}\n\nconst ShareDashboardComponent = {\n  template: shareDashboardTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($http) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n\n    this.toggleSharing = () => {\n      const url = `api/dashboards/${this.dashboard.id}/share`;\n\n      if (!this.dashboard.publicAccessEnabled) {\n        // disable\n        $http.delete(url).success(() => {\n          this.dashboard.publicAccessEnabled = false;\n          delete this.dashboard.public_url;\n        }).error(() => {\n          this.dashboard.publicAccessEnabled = true;\n          // TODO: show message\n        });\n      } else {\n        $http.post(url).success((data) => {\n          this.dashboard.publicAccessEnabled = true;\n          this.dashboard.public_url = data.public_url;\n        }).error(() => {\n          this.dashboard.publicAccessEnabled = false;\n          // TODO: show message\n        });\n      }\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('shareDashboard', ShareDashboardComponent);\n  ngModule.component('dashboardPage', {\n    template,\n    controller: DashboardCtrl,\n  });\n\n  return {\n    '/dashboard/:dashboardSlug': {\n      template: '<dashboard-page></dashboard-page>',\n      reloadOnSearch: false,\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/dashboard.js","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row bg-white p-t-10 p-b-10 m-b-10\\\">\\n    <div class=\\\"col-sm-9\\\">\\n      <h3>{{$ctrl.dashboard.name}}\\n        <span class=\\\"label label-default\\\" ng-if=\\\"$ctrl.dashboard.is_draft && !$ctrl.dashboard.is_archived\\\">Unpublished</span>\\n        <span class=\\\"label label-warning\\\" ng-if=\\\"$ctrl.dashboard.is_archived\\\" uib-popover=\\\"This dashboard is archived and and won't appear in the dashboards list or search results.\\\" popover-placement=\\\"right\\\" popover-trigger=\\\"'mouseenter'\\\">Archived</span>\\n      </h3>\\n    </div>\\n    <div class=\\\"col-sm-3 text-right\\\">\\n      <h3>\\n        <span ng-if=\\\"!$ctrl.dashboard.is_archived && !public\\\" class=\\\"hidden-print\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button id=\\\"split-button\\\" type=\\\"button\\\"\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\"\\n                      class=\\\"btn\\\" ng-click=\\\"$ctrl.loadDashboard(true)\\\">\\n                <i class=\\\"zmdi zmdi-refresh\\\"></i> {{$ctrl.refreshRate === null ? 'Refresh' : $ctrl.refreshRate.name}}\\n              </button>\\n              <button type=\\\"button\\\" class=\\\"btn\\\" uib-dropdown-toggle\\n                      ng-class=\\\"{'btn-default': $ctrl.refreshRate === null,'btn-primary':$ctrl.refreshRate !== null}\\\">\\n                <span class=\\\"caret\\\"></span>\\n                <span class=\\\"sr-only\\\">Split button!</span>\\n              </button>\\n              <ul class=\\\"dropdown-menu\\\" ng-model=\\\"$ctrl.refreshRate\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"split-button\\\">\\n                <li role=\\\"menuitem\\\" ng-repeat=\\\"refreshRate in $ctrl.refreshRates\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(refreshRate)\\\">{{refreshRate.name}}</a>\\n                </li>\\n                <li role=\\\"menuitem\\\" ng-if=\\\"$ctrl.refreshRate !== null\\\">\\n                  <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(null)\\\">Stop auto refresh</a>\\n                </li>\\n              </ul>\\n            </div>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.isFullscreen, 'btn-primary': $ctrl.isFullscreen}\\\" tooltip=\\\"Enable/Disable Fullscreen display\\\" ng-click=\\\"$ctrl.toggleFullscreen()\\\">\\n              <span class=\\\"zmdi zmdi-fullscreen\\\"></span>\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-sm\\\" ng-class=\\\"{'btn-default': !$ctrl.dashboard.publicAccessEnabled, 'btn-primary': $ctrl.dashboard.publicAccessEnabled}\\\" tooltip=\\\"Enable/Disable Share URL\\\" ng-click=\\\"$ctrl.openShareForm()\\\" ng-if=\\\"$ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled\\\">\\n              <span class=\\\"zmdi zmdi-share\\\"></span>\\n            </button>\\n        </span>\\n            <div class=\\\"btn-group hidden-print\\\" role=\\\"group\\\" ng-show=\\\"$ctrl.dashboard.canEdit()\\\" uib-dropdown ng-if=\\\"!$ctrl.dashboard.is_archived\\\">\\n              <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n                <span class=\\\"zmdi zmdi-more\\\"></span>\\n              </button>\\n              <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.editDashboard()\\\">Edit Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.addWidget()\\\">Add Widget</a></li>\\n                <li ng-if=\\\"$ctrl.showPermissionsControl\\\"><a ng-click=\\\"$ctrl.showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Unpublish Dashboard</a></li>\\n                <li ng-if=\\\"$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Publish Dashboard</a></li>\\n                <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.archiveDashboard()\\\">Archive Dashboard</a></li>\\n              </ul>\\n            </div>\\n      </h3>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <parameters parameters=\\\"$ctrl.globalParameters\\\" on-change=\\\"$ctrl.onGlobalParametersChange()\\\"></parameters>\\n  </div>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\" filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange(filter, $modal)\\\"></filters>\\n  </div>\\n\\n  <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n    <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" on-delete=\\\"$ctrl.extractGlobalParameters()\\\"></dashboard-widget>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/dashboard.html\n// module id = 684\n// module chunks = 1","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n  <h4 class=\\\"modal-title\\\"><i class=\\\"fa fa-share-alt\\\"></i> Share</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div class=\\\"checkbox\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.publicAccessEnabled\\\" ng-click=\\\"$ctrl.toggleSharing()\\\" ng-disabled=\\\"!$ctrl.dashboard.canEdit()\\\">\\n      Allow public access (using a secret URL).\\n    </label>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.dashboard.publicAccessEnabled\\\">\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" value=\\\"{{$ctrl.dashboard.public_url}}\\\">\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/share-dashboard.html\n// module id = 685\n// module chunks = 1","import logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './public-dashboard-page.html';\n\nconst PublicDashboardPage = {\n  template,\n  bindings: {\n    dashboard: '<',\n  },\n  controller($routeParams, Widget) {\n    'ngInject';\n\n    // embed in params == headless\n    this.logoUrl = logoUrl;\n    this.headless = $routeParams.embed;\n    if (this.headless) {\n      document.querySelector('body').classList.add('headless');\n    }\n    this.public = true;\n    this.dashboard.widgets = this.dashboard.widgets.map(row =>\n      row.map(widget => new Widget(widget)));\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('publicDashboardPage', PublicDashboardPage);\n\n  function loadPublicDashboard($http, $route) {\n    'ngInject';\n\n    const token = $route.current.params.token;\n    return $http.get(`api/dashboards/public/${token}`).then(response => response.data);\n  }\n\n  function session($http, $route, Auth) {\n    const token = $route.current.params.token;\n    Auth.setApiKey(token);\n    return Auth.loadConfig();\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/public/dashboards/:token', {\n      template: '<public-dashboard-page dashboard=\"$resolve.dashboard\"></public-dashboard-page>',\n      reloadOnSearch: false,\n      resolve: {\n        dashboard: loadPublicDashboard,\n        session,\n      },\n    });\n  });\n\n  return [];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/dashboards/public-dashboard-page.js","module.exports = \"<!-- simple nav bar -->\\n<nav class=\\\"navbar navbar-inverse navbar-fixed-top\\\" role=\\\"navigation\\\" ng-if=\\\"!$ctrl.headless\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <a class=\\\"navbar-brand\\\" href=\\\"/\\\" target=\\\"_self\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\"/></a>\\n    </div>\\n  </div>\\n</nav>\\n\\n<div class=\\\"container\\\">\\n  <page-header title=\\\"{{$ctrl.dashboard.name}}\\\">\\n  </page-header>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters ng-if=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\"></filters>\\n  </div>\\n\\n    <div ng-repeat=\\\"row in $ctrl.dashboard.widgets\\\" class=\\\"row\\\">\\n      <dashboard-widget ng-repeat=\\\"widget in row\\\" widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" public=\\\"true\\\"></dashboard-widget>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/dashboards/public-dashboard-page.html\n// module id = 687\n// module chunks = 1","import template from './list.html';\n\nfunction DataSourcesCtrl($scope, $location, currentUser, Events, DataSource) {\n  Events.record('view', 'page', 'admin/data_sources');\n\n  $scope.dataSources = DataSource.query();\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('DataSourcesCtrl', DataSourcesCtrl);\n\n  return {\n    '/data_sources': {\n      template,\n      controller: 'DataSourcesCtrl',\n      title: 'Data Sources',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/data-sources/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"data_sources/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Data Source</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"data_sources/{{dataSource.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dataSource in dataSources\\\"><i class=\\\"fa fa-database\\\"></i> {{dataSource.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/data-sources/list.html\n// module id = 689\n// module chunks = 1","import debug from 'debug';\nimport template from './show.html';\n\nconst logger = debug('redash:http');\n\nfunction DataSourceCtrl(\n  $scope, $routeParams, $http, $location, toastr,\n  currentUser, Events, DataSource,\n) {\n  Events.record('view', 'page', 'admin/data_source');\n\n  $scope.dataSourceId = $routeParams.dataSourceId;\n\n  if ($scope.dataSourceId === 'new') {\n    $scope.dataSource = new DataSource({ options: {} });\n  } else {\n    $scope.dataSource = DataSource.get({ id: $routeParams.dataSourceId });\n  }\n\n  $scope.$watch('dataSource.id', (id) => {\n    if (id !== $scope.dataSourceId && id !== undefined) {\n      $location.path(`/data_sources/${id}`).replace();\n    }\n  });\n\n  function deleteDataSource() {\n    Events.record('delete', 'datasource', $scope.dataSource.id);\n\n    $scope.dataSource.$delete(() => {\n      toastr.success('Data source deleted successfully.');\n      $location.path('/data_sources/');\n    }, (httpResponse) => {\n      logger('Failed to delete data source: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n      toastr.error('Failed to delete data source.');\n    });\n  }\n\n  function testConnection(callback) {\n    Events.record('test', 'datasource', $scope.dataSource.id);\n\n    DataSource.test({ id: $scope.dataSource.id }, (httpResponse) => {\n      if (httpResponse.ok) {\n        toastr.success('Success');\n      } else {\n        toastr.error(httpResponse.message, 'Connection Test Failed:', { timeOut: 10000 });\n      }\n      callback();\n    }, (httpResponse) => {\n      logger('Failed to test data source: ', httpResponse.status, httpResponse.statusText, httpResponse);\n      toastr.error('Unknown error occurred while performing connection test. Please try again later.', 'Connection Test Failed:', { timeOut: 10000 });\n      callback();\n    });\n  }\n\n  $scope.actions = [\n    { name: 'Delete', class: 'btn-danger', callback: deleteDataSource },\n    {\n      name: 'Test Connection', class: 'btn-default', callback: testConnection, disableWhenDirty: true,\n    },\n  ];\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('DataSourceCtrl', DataSourceCtrl);\n\n  return {\n    '/data_sources/:dataSourceId': {\n      template,\n      controller: 'DataSourceCtrl',\n      title: 'Datasources',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/data-sources/show.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-8\\\">\\n      <dynamic-form target=\\\"dataSource\\\" type=\\\"data_sources\\\" actions=\\\"actions\\\">\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/data-sources/show.html\n// module id = 691\n// module chunks = 1","import template from './list.html';\n\nfunction DestinationsCtrl($scope, $location, toastr, currentUser, Events, Destination) {\n  Events.record('view', 'page', 'admin/destinations');\n\n  $scope.destinations = Destination.query();\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('DestinationsCtrl', DestinationsCtrl);\n\n  return {\n    '/destinations': {\n      template,\n      controller: 'DestinationsCtrl',\n      title: 'Destinations',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/destinations/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <p>\\n        <a href=\\\"destinations/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Alert Destination</a>\\n      </p>\\n      <div class=\\\"list-group\\\">\\n        <a ng-href=\\\"destinations/{{destination.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"destination in destinations\\\"><i class=\\\"fa {{destination.icon}}\\\"></i> {{destination.name}}</a>\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/destinations/list.html\n// module id = 693\n// module chunks = 1","import debug from 'debug';\n\nimport template from './show.html';\n\nconst logger = debug('redash:http');\n\nfunction DestinationCtrl(\n  $scope, $routeParams, $http, $location, toastr,\n  currentUser, Events, Destination,\n) {\n  Events.record('view', 'page', 'admin/destination');\n\n  $scope.destinationId = $routeParams.destinationId;\n\n  if ($scope.destinationId === 'new') {\n    $scope.destination = new Destination({ options: {} });\n  } else {\n    $scope.destination = Destination.get({ id: $routeParams.destinationId });\n  }\n\n  $scope.$watch('destination.id', (id) => {\n    if (id !== $scope.destinationId && id !== undefined) {\n      $location.path(`/destinations/${id}`).replace();\n    }\n  });\n\n  $scope.delete = () => {\n    Events.record('delete', 'destination', $scope.destination.id);\n\n    $scope.destination.$delete(() => {\n      toastr.success('Destination deleted successfully.');\n      $location.path('/destinations/');\n    }, (httpResponse) => {\n      logger('Failed to delete destination: ', httpResponse.status, httpResponse.statusText, httpResponse.data);\n      toastr.error('Failed to delete destination.');\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('DestinationCtrl', DestinationCtrl);\n\n  return {\n    '/destinations/:destinationId': {\n      template,\n      controller: 'DestinationCtrl',\n      title: 'Destinations',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/destinations/show.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <dynamic-form target=\\\"destination\\\" type=\\\"destinations\\\">\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"destination.id\\\" ng-click=\\\"delete()\\\">Delete</button>\\n      </dynamic-form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/destinations/show.html\n// module id = 695\n// module chunks = 1","import { contains } from 'underscore';\nimport template from './data-sources.html';\n\nfunction GroupDataSourcesCtrl($scope, $routeParams, $http, Events, Group, DataSource) {\n  Events.record('view', 'group_data_sources', $scope.groupId);\n  $scope.group = Group.get({ id: $routeParams.groupId });\n  $scope.dataSources = Group.dataSources({ id: $routeParams.groupId });\n  $scope.newDataSource = {};\n\n  $scope.findDataSource = () => {\n    if ($scope.foundDataSources === undefined) {\n      DataSource.query((dataSources) => {\n        const existingIds = $scope.dataSources.map(m => m.id);\n        $scope.foundDataSources = dataSources.filter(ds => !contains(existingIds, ds.id));\n      });\n    }\n  };\n\n  $scope.addDataSource = (dataSource) => {\n    // Clear selection, to clear up the input control.\n    $scope.newDataSource.selected = undefined;\n\n    $http.post(`api/groups/${$routeParams.groupId}/data_sources`, { data_source_id: dataSource.id }).success(() => {\n      dataSource.view_only = false;\n      $scope.dataSources.unshift(dataSource);\n\n      if ($scope.foundDataSources) {\n        $scope.foundDataSources = $scope.foundDataSources.filter(ds => ds !== dataSource);\n      }\n    });\n  };\n\n  $scope.changePermission = (dataSource, viewOnly) => {\n    $http.post(`api/groups/${$routeParams.groupId}/data_sources/${dataSource.id}`, { view_only: viewOnly }).success(() => {\n      dataSource.view_only = viewOnly;\n    });\n  };\n\n  $scope.removeDataSource = (dataSource) => {\n    $http.delete(`api/groups/${$routeParams.groupId}/data_sources/${dataSource.id}`).success(() => {\n      $scope.dataSources = $scope.dataSources.filter(ds => dataSource !== ds);\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('GroupDataSourcesCtrl', GroupDataSourcesCtrl);\n\n  return {\n    '/groups/:groupId/data_sources': {\n      template,\n      controller: 'GroupDataSourcesCtrl',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/data-sources.js","module.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n    <div class=\\\"col-lg-8\\\">\\n      <ui-select ng-model=\\\"newDataSource.selected\\\" on-select=\\\"addDataSource($item)\\\">\\n        <ui-select-match placeholder=\\\"Add Data Source\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"dataSource in foundDataSources | filter:$select.search\\\"\\n                           refresh=\\\"findDataSource($select.search)\\\"\\n                           refresh-delay=\\\"0\\\">\\n          <div>\\n            {{dataSource.name}}\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n        </thead>\\n        <tbody>\\n        <tr ng-repeat=\\\"dataSource in dataSources\\\">\\n          <td> {{dataSource.name}}</td>\\n          <td width=\\\"280px\\\" class=\\\"text-right\\\">\\n            <div class=\\\"btn-group\\\" uib-dropdown>\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-default dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"dataSource.view_only\\\">\\n                View Only <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <button type=\\\"button\\\" class=\\\"btn btn-sm btn-success dropdown-toggle\\\" uib-dropdown-toggle ng-if=\\\"!dataSource.view_only\\\">\\n                Full Access <span class=\\\"caret\\\"></span>\\n              </button>\\n\\n              <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\" uib-dropdown-menu>\\n                <li><a ng-click=\\\"changePermission(dataSource, false)\\\"><small ng-if=\\\"!dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> Full Access<br/></a></li>\\n                <li><a ng-click=\\\"changePermission(dataSource, true)\\\"><small ng-if=\\\"dataSource.view_only\\\"><span class=\\\"fa fa-check\\\"/></small> View Only</a></li>\\n              </ul>\\n            </div>\\n\\n            <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeDataSource(dataSource)\\\">Remove</button>\\n          </td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/data-sources.html\n// module id = 697\n// module chunks = 1","import { Paginator } from '@/lib/pagination';\nimport template from './list.html';\n\nfunction GroupsCtrl($scope, $uibModal, currentUser, Events, Group) {\n  Events.record('view', 'page', 'groups');\n  $scope.currentUser = currentUser;\n  $scope.groups = new Paginator([], { itemsPerPage: 20 });\n  Group.query((groups) => {\n    $scope.groups.updateRows(groups);\n  });\n\n  $scope.newGroup = () => {\n    $uibModal.open({\n      component: 'editGroupDialog',\n      size: 'sm',\n      resolve: {\n        group() {\n          return new Group({});\n        },\n      },\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('GroupsCtrl', GroupsCtrl);\n\n  return {\n    '/groups': {\n      template,\n      controller: 'GroupsCtrl',\n      title: 'Groups',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"currentUser.hasPermission('admin')\\\">\\n        <a ng-click=\\\"newGroup()\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Group</a>\\n      </p>\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in groups.getPageRows()\\\">\\n            <td>\\n              <a href=\\\"groups/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"groups\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/list.html\n// module id = 699\n// module chunks = 1","import { contains } from 'underscore';\nimport template from './show.html';\n\nfunction GroupCtrl($scope, $routeParams, $http, currentUser, Events, Group, User) {\n  Events.record('view', 'group', $scope.groupId);\n\n  $scope.currentUser = currentUser;\n  $scope.group = Group.get({ id: $routeParams.groupId });\n  $scope.members = Group.members({ id: $routeParams.groupId });\n  $scope.newMember = {};\n\n  $scope.findUser = (search) => {\n    if (search === '') {\n      return;\n    }\n\n    if ($scope.foundUsers === undefined) {\n      User.query((users) => {\n        const existingIds = $scope.members.map(m => m.id);\n        users.forEach((user) => { user.alreadyMember = contains(existingIds, user.id); });\n        $scope.foundUsers = users;\n      });\n    }\n  };\n\n  $scope.addMember = (user) => {\n    // Clear selection, to clear up the input control.\n    $scope.newMember.selected = undefined;\n\n    $http.post(`api/groups/${$routeParams.groupId}/members`, { user_id: user.id }).success(() => {\n      $scope.members.unshift(user);\n      user.alreadyMember = true;\n    });\n  };\n\n  $scope.removeMember = (member) => {\n    $http.delete(`api/groups/${$routeParams.groupId}/members/${member.id}`).success(() => {\n      $scope.members = $scope.members.filter(m => m !== member);\n\n      if ($scope.foundUsers) {\n        $scope.foundUsers.forEach((user) => {\n          if (user.id === member.id) { user.alreadyMember = false; }\n        });\n      }\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('GroupCtrl', GroupCtrl);\n  return {\n    '/groups/:groupId': {\n      template,\n      controller: 'GroupCtrl',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/groups/show.js","module.exports = \"<settings-screen>\\n  <group-name group=\\\"group\\\"></group-name>\\n\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-lg-4\\\">\\n      <ul class=\\\"tab-nav\\\">\\n        <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"groups/{{group.id}}\\\">Members</a></li>\\n        <li role=\\\"presentation\\\" ng-if=\\\"currentUser.isAdmin\\\"><a href=\\\"groups/{{group.id}}/data_sources\\\">Data Sources</a></li>\\n      </ul>\\n    </div>\\n\\n    <div class=\\\"col-lg-8\\\" ng-if=\\\"currentUser.isAdmin\\\">\\n      <ui-select ng-model=\\\"newMember.selected\\\" on-select=\\\"addMember($item)\\\">\\n        <ui-select-match placeholder=\\\"Add New Member\\\"></ui-select-match>\\n        <ui-select-choices repeat=\\\"user in foundUsers | filter:$select.search\\\"\\n                           refresh=\\\"findUser($select.search)\\\"\\n                           refresh-delay=\\\"0\\\"\\n                           ui-disable-choice=\\\"user.alreadyMember\\\">\\n          <div>\\n            <img ng-src=\\\"{{user.gravatar_url}}\\\" height=\\\"24px\\\">&nbsp;{{user.name}}\\n            <small ng-if=\\\"user.alreadyMember\\\">(already member in this group)</small>\\n          </div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-lg-12\\\">\\n      <table class=\\\"table table-condensed table-hover\\\" ng-show=\\\"members\\\">\\n        <tbody>\\n        <tr ng-repeat=\\\"member in members\\\">\\n          <td width=\\\"50px\\\"><img ng-src=\\\"{{member.gravatar_url}}\\\" height=\\\"40px\\\"/></td>\\n          <td>{{member.name}} <button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"removeMember(member)\\\" ng-if=\\\"currentUser.isAdmin\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n\\n      <div ng-hide=\\\"members.length\\\">\\n        No members.\\n      </div>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/groups/show.html\n// module id = 701\n// module chunks = 1","import template from './home.html';\n\nfunction HomeCtrl($scope, $uibModal, currentUser, Events, Dashboard, Query) {\n  Events.record('view', 'page', 'personal_homepage');\n\n  // todo: maybe this should come from some serivce as we have this logic elsewhere.\n  this.canCreateQuery = currentUser.hasPermission('create_query');\n  this.canCreateDashboard = currentUser.hasPermission('create_dashboard');\n  this.canCreateAlert = currentUser.hasPermission('list_alerts');\n\n  this.recentQueries = Query.recent();\n  this.recentDashboards = Dashboard.recent();\n\n  this.newDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => ({ name: null, layout: null }),\n      },\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('homePage', {\n    template,\n    controller: HomeCtrl,\n  });\n\n  return {\n    '/': {\n      template: '<home-page></home-page>',\n      title: 'Redash',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/home/index.js","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"tile m-t-10 m-b-5\\\" ng-if=\\\"$ctrl.canCreateQuery || $ctrl.canCreateDashboard || $ctrl.canCreateAlert\\\">\\n    <div class=\\\"t-body p-5\\\">\\n      <a href=\\\"queries/new\\\" ng-show=\\\"$ctrl.canCreateQuery\\\" class=\\\"btn btn-default\\\">New Query</a>\\n      <button ng-show=\\\"$ctrl.canCreateDashboard\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.newDashboard()\\\">New Dashboard\\n      </button>\\n      <a href=\\\"alerts/new\\\" ng-show=\\\"$ctrl.canCreateAlert\\\" class=\\\"btn btn-default\\\">New Alert</a>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-body tb-padding\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-md-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Recent Dashboards</p>\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"dashboard/{{dashboard.slug}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dashboard in $ctrl.recentDashboards\\\">\\n                {{dashboard.name}} <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n              </a>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"col-md-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Recent Queries</p>\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"queries/{{query.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"query in $ctrl.recentQueries\\\">{{query.name}} <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></a>\\n          </div>\\n        </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/home/home.html\n// module id = 703\n// module chunks = 1","import moment from 'moment';\n\nimport { LivePaginator } from '@/lib/pagination';\nimport template from './queries-list.html';\n\nclass QueriesListCtrl {\n  constructor($location, Title, Query) {\n    const page = parseInt($location.search().page || 1, 10);\n\n    this.defaultOptions = {};\n\n    const self = this;\n\n    switch ($location.path()) {\n      case '/queries':\n        Title.set('Queries');\n        this.resource = Query.query;\n        break;\n      case '/queries/my':\n        Title.set('My Queries');\n        this.resource = Query.myQueries;\n        break;\n      default:\n        break;\n    }\n\n    function queriesFetcher(requestedPage, itemsPerPage, paginator) {\n      $location.search('page', requestedPage);\n\n      const request = Object.assign(\n        {}, self.defaultOptions,\n        { page: requestedPage, page_size: itemsPerPage },\n      );\n\n      return self.resource(request).$promise.then((data) => {\n        const rows = data.results.map((query) => {\n          query.created_at = moment(query.created_at);\n          query.retrieved_at = moment(query.retrieved_at);\n          return query;\n        });\n\n        paginator.updateRows(rows, data.count);\n      });\n    }\n\n    this.paginator = new LivePaginator(queriesFetcher, { page });\n\n    this.tabs = [\n      { name: 'My Queries', path: 'queries/my' },\n      { path: 'queries', name: 'All Queries', isActive: path => path === '/queries' },\n    ];\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageQueriesList', {\n    template,\n    controller: QueriesListCtrl,\n  });\n\n  const route = {\n    template: '<page-queries-list></page-queries-list>',\n    reloadOnSearch: false,\n  };\n\n  return {\n    '/queries': route,\n    '/queries/my': route,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries-list/index.js","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"Queries\\\"></page-header>\\n  <tab-nav tabs=\\\"$ctrl.tabs\\\"></tab-nav>\\n\\n  <div class=\\\"bg-white\\\">\\n    <table class=\\\"table table-condensed table-hover\\\">\\n      <thead>\\n      <tr>\\n        <th>Name</th>\\n        <th>Created By</th>\\n        <th>Created At</th>\\n        <th>Runtime</th>\\n        <th>Last Executed At</th>\\n        <th>Update Schedule</th>\\n      </tr>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n        <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n        <td>{{query.user.name}}</td>\\n        <td>{{query.created_at | dateTime}}</td>\\n        <td>{{query.runtime | durationHumanize}}</td>\\n        <td>{{query.retrieved_at | dateTime}}</td>\\n        <td>{{query.schedule | scheduleHumanize}}</td>\\n      </tr>\\n      </tbody>\\n    </table>\\n    <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries-list/queries-list.html\n// module id = 705\n// module chunks = 1","import moment from 'moment';\nimport { isString } from 'underscore';\n\nimport { Paginator } from '@/lib/pagination';\nimport template from './queries-search-results-page.html';\n\nfunction QuerySearchCtrl($location, $filter, currentUser, Events, Query) {\n  this.term = $location.search().q;\n  this.paginator = new Paginator([], { itemsPerPage: 20 });\n\n  Query.search({ q: this.term, include_drafts: true }, (results) => {\n    const queries = results.map((query) => {\n      query.created_at = moment(query.created_at);\n      return query;\n    });\n\n    this.paginator.updateRows(queries);\n  });\n\n  this.search = () => {\n    if (!isString(this.term) || this.term.trim() === '') {\n      this.paginator.updateRows([]);\n    } else {\n      $location.search({ q: this.term });\n    }\n  };\n\n  Events.record('search', 'query', '', { term: this.term });\n}\n\nexport default function init(ngModule) {\n  ngModule.component('queriesSearchResultsPage', {\n    template,\n    controller: QuerySearchCtrl,\n  });\n\n  return {\n    '/queries/search': {\n      template: '<queries-search-results-page></queries-search-results-page>',\n      reloadOnSearch: true,\n      title: 'Queries Search',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/queries-search-results-page.js","module.exports = \"<div class=\\\"container\\\">\\n    <div class=\\\"bg-white p-5 m-t-10 m-b-10\\\">\\n      <form class=\\\"form-inline\\\" role=\\\"form\\\" ng-submit=\\\"$ctrl.search()\\\">\\n        <div class=\\\"input-group\\\">\\n            <input class=\\\"form-control input-sm\\\" placeholder=\\\"Search...\\\" ng-model=\\\"$ctrl.term\\\" autofocus>\\n            <span class=\\\"input-group-btn\\\">\\n              <button class=\\\"btn btn-primary\\\" type=\\\"submit\\\">\\n                <span class=\\\"zmdi zmdi-search\\\"></span>\\n              </button>\\n            </span>\\n        </div>\\n      </form>\\n    </div>\\n    <div class=\\\"bg-white\\\">\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Created By</th>\\n            <th>Created At</th>\\n            <th>Update Schedule</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"query in $ctrl.paginator.getPageRows()\\\">\\n            <td><a href=\\\"queries/{{query.id}}\\\">{{query.name}}</a> <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span></td>\\n            <td>{{query.user.name}}</td>\\n            <td>{{query.created_at | dateTime}}</td>\\n            <td>{{query.schedule | scheduleHumanize}}</td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.paginator\\\"></paginator>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/queries/queries-search-results-page.html\n// module id = 707\n// module chunks = 1","import template from './query.html';\n\nfunction QuerySourceCtrl(\n  Events, toastr, $controller, $scope, $location, $http, $q,\n  AlertDialog, currentUser, Query, Visualization, KeyboardShortcuts,\n) {\n  // extends QueryViewCtrl\n  $controller('QueryViewCtrl', { $scope });\n  // TODO:\n  // This doesn't get inherited. Setting it on this didn't work either (which is weird).\n  // Obviously it shouldn't be repeated, but we got bigger fish to fry.\n  const DEFAULT_TAB = 'table';\n\n  Events.record('view_source', 'query', $scope.query.id);\n\n  const isNewQuery = !$scope.query.id;\n  let queryText = $scope.query.query;\n  const saveQuery = $scope.saveQuery;\n\n  $scope.sourceMode = true;\n  $scope.isDirty = false;\n  $scope.base_url = `${$location.protocol()}://${$location.host()}:${$location.port()}`;\n\n  $scope.newVisualization = undefined;\n\n  // @override\n  Object.defineProperty($scope, 'showDataset', {\n    get() {\n      return $scope.queryResult && $scope.queryResult.getStatus() === 'done';\n    },\n  });\n\n  const shortcuts = {\n    'mod+s': function save() {\n      if ($scope.canEdit) {\n        $scope.saveQuery();\n      }\n    },\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  $scope.canForkQuery = () => currentUser.hasPermission('edit_query') && !$scope.dataSource.view_only;\n\n  // @override\n  $scope.saveQuery = (options, data) => {\n    const savePromise = saveQuery(options, data);\n\n    savePromise.then((savedQuery) => {\n      queryText = savedQuery.query;\n      $scope.isDirty = $scope.query.query !== queryText;\n      // update to latest version number\n      $scope.query.version = savedQuery.version;\n\n      if (isNewQuery) {\n        // redirect to new created query (keep hash)\n        $location.path(savedQuery.getSourceLink());\n      }\n    });\n\n    return savePromise;\n  };\n\n  $scope.formatQuery = () => {\n    Query.format($scope.dataSource.syntax, $scope.query.query)\n      .then((query) => { $scope.query.query = query; })\n      .catch(error => toastr.error(error));\n  };\n\n  $scope.duplicateQuery = () => {\n    Events.record('fork', 'query', $scope.query.id);\n\n    Query.fork({ id: $scope.query.id }, (newQuery) => {\n      $location.url(newQuery.getSourceLink()).replace();\n    });\n  };\n\n  $scope.deleteVisualization = ($e, vis) => {\n    $e.preventDefault();\n\n    const title = undefined;\n    const message = `Are you sure you want to delete ${vis.name} ?`;\n    const confirm = { class: 'btn-danger', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(() => {\n      Events.record('delete', 'visualization', vis.id);\n\n      Visualization.delete({ id: vis.id }, () => {\n        if ($scope.selectedTab === String(vis.id)) {\n          $scope.selectedTab = DEFAULT_TAB;\n          $location.hash($scope.selectedTab);\n        }\n        $scope.query.visualizations = $scope.query.visualizations.filter(v => vis.id !== v.id);\n      }, () => {\n        toastr.error(\"Error deleting visualization. Maybe it's used in a dashboard?\");\n      });\n    });\n  };\n\n  $scope.$watch('query.query', (newQueryText) => {\n    $scope.isDirty = (newQueryText !== queryText);\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('QuerySourceCtrl', QuerySourceCtrl);\n\n  return {\n    '/queries/new': {\n      template,\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: function newQuery(Query) {\n          'ngInject';\n\n          return Query.newQuery();\n        },\n        dataSources(DataSource) {\n          'ngInject';\n\n          return DataSource.query().$promise;\n        },\n      },\n    },\n    '/queries/:queryId/source': {\n      template,\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/source-view.js","import { pick, any, some, find } from 'underscore';\nimport template from './query.html';\n\nfunction QueryViewCtrl(\n  $scope, Events, $route, $routeParams, $location, $window, $q,\n  KeyboardShortcuts, Title, AlertDialog, Notifications, clientConfig, toastr, $uibModal,\n  currentUser, Query, DataSource,\n) {\n  const DEFAULT_TAB = 'table';\n\n  function getQueryResult(maxAge) {\n    if (maxAge === undefined) {\n      maxAge = $location.search().maxAge;\n    }\n\n    if (maxAge === undefined) {\n      maxAge = -1;\n    }\n\n    $scope.showLog = false;\n    $scope.queryResult = $scope.query.getQueryResult(maxAge);\n  }\n\n  function getDataSourceId() {\n    // Try to get the query's data source id\n    let dataSourceId = $scope.query.data_source_id;\n\n    // If there is no source yet, then parse what we have in localStorage\n    //   e.g. `null` -> `NaN`, malformed data -> `NaN`, \"1\" -> 1\n    if (dataSourceId === undefined) {\n      dataSourceId = parseInt(localStorage.lastSelectedDataSourceId, 10);\n    }\n\n    // If we had an invalid value in localStorage (e.g. nothing, deleted source),\n    // then use the first data source\n    const isValidDataSourceId = !isNaN(dataSourceId) && some($scope.dataSources, ds =>\n      ds.id === dataSourceId);\n\n    if (!isValidDataSourceId) {\n      dataSourceId = $scope.dataSources[0].id;\n    }\n\n    // Return our data source id\n    return dataSourceId;\n  }\n\n  function toggleSchemaBrowser(hasSchema) {\n    $scope.hasSchema = hasSchema;\n    $scope.editorSize = hasSchema ? 'col-md-9' : 'col-md-12';\n  }\n\n  function getSchema(refresh = undefined) {\n    DataSource.getSchema({ id: $scope.query.data_source_id, refresh }, (data) => {\n      const hasPrevSchema = refresh ? ($scope.schema && ($scope.schema.length > 0)) : false;\n      const hasSchema = data && (data.length > 0);\n\n      if (hasSchema) {\n        $scope.schema = data;\n        data.forEach((table) => {\n          table.collapsed = true;\n        });\n      } else if (hasPrevSchema) {\n        toastr.error('Schema refresh failed. Please try again later.');\n      }\n\n      toggleSchemaBrowser(hasSchema || hasPrevSchema);\n    });\n  }\n\n  function updateSchema() {\n    toggleSchemaBrowser(false);\n    getSchema();\n  }\n\n  $scope.refreshSchema = () => getSchema(true);\n\n  function updateDataSources(dataSources) {\n    // Filter out data sources the user can't query (or used by current query):\n    $scope.dataSources = dataSources.filter(dataSource =>\n      !dataSource.view_only || dataSource.id === $scope.query.data_source_id);\n\n    if ($scope.dataSources.length === 0) {\n      $scope.noDataSources = true;\n      return;\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.query.data_source_id = getDataSourceId();\n    }\n\n    $scope.dataSource = find(dataSources, ds => ds.id === $scope.query.data_source_id);\n\n    $scope.canCreateQuery = any(dataSources, ds => !ds.view_only);\n\n    updateSchema();\n  }\n\n  $scope.executeQuery = () => {\n    if (!$scope.canExecuteQuery()) {\n      return;\n    }\n\n    if (!$scope.query.query) {\n      return;\n    }\n\n    getQueryResult(0);\n    $scope.lockButton(true);\n    $scope.cancelling = false;\n    Events.record('execute', 'query', $scope.query.id);\n\n    Notifications.getPermissions();\n  };\n\n\n  $scope.currentUser = currentUser;\n  $scope.dataSource = {};\n  $scope.query = $route.current.locals.query;\n  $scope.showPermissionsControl = clientConfig.showPermissionsControl;\n\n  const shortcuts = {\n    'mod+enter': $scope.executeQuery,\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  Events.record('view', 'query', $scope.query.id);\n  if ($scope.query.hasResult() || $scope.query.paramsRequired()) {\n    getQueryResult();\n  }\n  $scope.queryExecuting = false;\n\n  $scope.isQueryOwner = (currentUser.id === $scope.query.user.id) || currentUser.hasPermission('admin');\n  $scope.canEdit = currentUser.canEdit($scope.query) || $scope.query.can_edit;\n  $scope.canViewSource = currentUser.hasPermission('view_source');\n\n  $scope.canExecuteQuery = () => currentUser.hasPermission('execute_query') && !$scope.dataSource.view_only;\n\n  $scope.canScheduleQuery = currentUser.hasPermission('schedule_query');\n\n  if ($route.current.locals.dataSources) {\n    $scope.dataSources = $route.current.locals.dataSources;\n    updateDataSources($route.current.locals.dataSources);\n  } else {\n    $scope.dataSources = DataSource.query(updateDataSources);\n  }\n\n  // in view mode, latest dataset is always visible\n  // source mode changes this behavior\n  $scope.showDataset = true;\n  $scope.showLog = false;\n\n  $scope.lockButton = (lock) => {\n    $scope.queryExecuting = lock;\n  };\n\n  $scope.showApiKey = () => {\n    $uibModal.open({\n      component: 'apiKeyDialog',\n      resolve: {\n        query: $scope.query,\n      },\n    });\n  };\n\n  $scope.saveQuery = (customOptions, data) => {\n    let request = data;\n\n    if (request) {\n      // Don't save new query with partial data\n      if ($scope.query.isNew()) {\n        return $q.reject();\n      }\n      request.id = $scope.query.id;\n      request.version = $scope.query.version;\n    } else {\n      request = pick($scope.query, ['schedule', 'query', 'id', 'description', 'name', 'data_source_id', 'options', 'latest_query_data_id', 'version', 'is_draft']);\n    }\n\n    const options = Object.assign({}, {\n      successMessage: 'Query saved',\n      errorMessage: 'Query could not be saved',\n    }, customOptions);\n\n    return Query.save(request, (updatedQuery) => {\n      toastr.success(options.successMessage);\n      $scope.query.version = updatedQuery.version;\n    }, (error) => {\n      if (error.status === 409) {\n        toastr.error('It seems like the query has been modified by another user. ' +\n          'Please copy/backup your changes and reload this page.', { autoDismiss: false });\n      } else {\n        toastr.error(options.errorMessage);\n      }\n    }).$promise;\n  };\n\n  $scope.togglePublished = () => {\n    Events.record('toggle_published', 'query', $scope.query.id);\n    $scope.query.is_draft = !$scope.query.is_draft;\n    $scope.saveQuery(undefined, { is_draft: $scope.query.is_draft });\n  };\n\n  $scope.saveDescription = () => {\n    Events.record('edit_description', 'query', $scope.query.id);\n    $scope.saveQuery(undefined, { description: $scope.query.description });\n  };\n\n  $scope.saveName = () => {\n    Events.record('edit_name', 'query', $scope.query.id);\n\n    if ($scope.query.is_draft && clientConfig.autoPublishNamedQueries && $scope.query.name !== 'New Query') {\n      $scope.query.is_draft = false;\n    }\n\n    $scope.saveQuery(undefined, { name: $scope.query.name, is_draft: $scope.query.is_draft });\n  };\n\n  $scope.cancelExecution = () => {\n    $scope.cancelling = true;\n    $scope.queryResult.cancelExecution();\n    Events.record('cancel_execute', 'query', $scope.query.id);\n  };\n\n  $scope.archiveQuery = () => {\n    function archive() {\n      Query.delete({ id: $scope.query.id }, () => {\n        $scope.query.is_archived = true;\n        $scope.query.schedule = null;\n      }, () => {\n        toastr.error('Query could not be archived.');\n      });\n    }\n\n    const title = 'Archive Query';\n    const message = 'Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.';\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  $scope.updateDataSource = () => {\n    Events.record('update_data_source', 'query', $scope.query.id);\n    localStorage.lastSelectedDataSourceId = $scope.query.data_source_id;\n\n    $scope.query.latest_query_data = null;\n    $scope.query.latest_query_data_id = null;\n\n    if ($scope.query.id) {\n      Query.save({\n        id: $scope.query.id,\n        data_source_id: $scope.query.data_source_id,\n        latest_query_data_id: null,\n      });\n    }\n\n    updateSchema();\n    $scope.dataSource = find($scope.dataSources, ds => ds.id === $scope.query.data_source_id);\n    $scope.executeQuery();\n  };\n\n  $scope.setVisualizationTab = (visualization) => {\n    $scope.selectedTab = visualization.id;\n    $location.hash(visualization.id);\n  };\n\n  $scope.$watch('query.name', () => {\n    Title.set($scope.query.name);\n  });\n\n  $scope.$watch('queryResult && queryResult.getData()', (data) => {\n    if (!data) {\n      return;\n    }\n\n    $scope.filters = $scope.queryResult.getFilters();\n  });\n\n  $scope.$watch('queryResult && queryResult.getStatus()', (status) => {\n    if (!status) {\n      return;\n    }\n\n    if (status === 'done') {\n      $scope.query.latest_query_data_id = $scope.queryResult.getId();\n      $scope.query.queryResult = $scope.queryResult;\n\n      Notifications.showNotification('Redash', `${$scope.query.name} updated.`);\n    } else if (status === 'failed') {\n      Notifications.showNotification('Redash', `${$scope.query.name} failed to run: ${$scope.queryResult.getError()}`);\n    }\n\n    if (status === 'done' || status === 'failed') {\n      $scope.lockButton(false);\n    }\n\n    if ($scope.queryResult.getLog() != null) {\n      $scope.showLog = true;\n    }\n  });\n\n  $scope.openVisualizationEditor = (visualization) => {\n    function openModal() {\n      $uibModal.open({\n        windowClass: 'modal-xl',\n        component: 'editVisualizationDialog',\n        resolve: {\n          query: $scope.query,\n          visualization,\n          queryResult: $scope.queryResult,\n          onNewSuccess: () => $scope.setVisualizationTab,\n        },\n      });\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.saveQuery().then((query) => {\n        // Because we have a path change, we need to \"signal\" the next page to\n        // open the visualization editor.\n        $location.path(query.getSourceLink()).hash('add');\n      });\n    } else {\n      openModal();\n    }\n  };\n\n  if ($location.hash() === 'add') {\n    $location.hash(null);\n    $scope.openVisualizationEditor();\n  }\n\n  $scope.openScheduleForm = () => {\n    if (!$scope.canEdit || !$scope.canScheduleQuery) {\n      return;\n    }\n\n    $uibModal.open({\n      component: 'scheduleDialog',\n      size: 'sm',\n      resolve: {\n        query: $scope.query,\n        saveQuery: () => $scope.saveQuery,\n      },\n    });\n  };\n\n  $scope.showEmbedDialog = (query, visualization) => {\n    $uibModal.open({\n      component: 'embedCodeDialog',\n      resolve: {\n        query,\n        visualization,\n      },\n    });\n  };\n\n  $scope.$watch(\n    () => $location.hash(),\n    (hash) => { $scope.selectedTab = hash || DEFAULT_TAB; },\n  );\n\n  $scope.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/queries/${$routeParams.queryId}/acl` },\n      },\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('QueryViewCtrl', QueryViewCtrl);\n\n  return {\n    '/queries/:queryId': {\n      template,\n      controller: 'QueryViewCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/queries/view.js","import 'brace/mode/snippets';\nimport template from './edit.html';\n\nfunction SnippetCtrl($routeParams, $http, $location, toastr, currentUser, Events, QuerySnippet) {\n  this.snippetId = $routeParams.snippetId;\n  Events.record('view', 'query_snippet', this.snippetId);\n\n  this.editorOptions = {\n    mode: 'snippets',\n    advanced: {\n      behavioursEnabled: true,\n      enableSnippets: false,\n      autoScrollEditorIntoView: true,\n    },\n    onLoad(editor) {\n      editor.$blockScrolling = Infinity;\n      editor.getSession().setUseWrapMode(true);\n      editor.setShowPrintMargin(false);\n    },\n  };\n\n  this.saveChanges = () => {\n    this.snippet.$save((snippet) => {\n      toastr.success('Saved.');\n      if (this.snippetId === 'new') {\n        $location.path(`/query_snippets/${snippet.id}`).replace();\n      }\n    }, () => {\n      toastr.error('Failed saving snippet.');\n    });\n  };\n\n  this.delete = () => {\n    this.snippet.$delete(() => {\n      $location.path('/query_snippets');\n      toastr.sucess('Query snippet deleted.');\n    }, () => {\n      toastr.error('Failed deleting query snippet.');\n    });\n  };\n\n  if (this.snippetId === 'new') {\n    this.snippet = new QuerySnippet({ description: '' });\n    this.canEdit = true;\n  } else {\n    this.snippet = QuerySnippet.get({ id: this.snippetId }, (snippet) => {\n      this.canEdit = currentUser.canEdit(snippet);\n    });\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('snippetPage', {\n    template,\n    controller: SnippetCtrl,\n  });\n\n  return {\n    '/query_snippets/:snippetId': {\n      template: '<snippet-page></snippet-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/query-snippets/edit.js","module.exports = \"<settings-screen>\\n  <div class=\\\"\\\">\\n    <form name=\\\"snippetForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Trigger</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.trigger\\\" ng-disabled=\\\"!$ctrl.canEdit\\\" required autofocus>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Description</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.description\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Snippet</label>\\n        <pre ng-if=\\\"!$ctrl.canEdit\\\">{{$ctrl.snippet.snippet}}</pre>\\n        <div ui-ace=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.snippet.snippet\\\" style=\\\"height:300px\\\" ng-if=\\\"$ctrl.canEdit\\\"></div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n        <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!snippetForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.snippet.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n      </div>\\n      <small ng-if=\\\"$ctrl.snippet.user\\\">\\n        Created by: {{$ctrl.snippet.user.name}}\\n      </small>\\n    </form>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/query-snippets/edit.html\n// module id = 712\n// module chunks = 1","import { Paginator } from '@/lib/pagination';\nimport template from './list.html';\n\nfunction SnippetsCtrl($location, currentUser, Events, QuerySnippet) {\n  Events.record('view', 'page', 'query_snippets');\n\n  this.snippets = new Paginator([], { itemsPerPage: 20 });\n  QuerySnippet.query((snippets) => {\n    this.snippets.updateRows(snippets);\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.component('snippetsListPage', {\n    template,\n    controller: SnippetsCtrl,\n  });\n\n  return {\n    '/query_snippets': {\n      template: '<snippets-list-page></snippets-list-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/query-snippets/list.js","module.exports = \"<settings-screen>\\n    <div class=\\\"row voffset1\\\">\\n        <div class=\\\"col-md-12\\\">\\n          <p>\\n            <a href=\\\"query_snippets/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Snippet</a>\\n          </p>\\n\\n          <table class=\\\"table table-condensed table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th>Trigger</th>\\n                <th>Description</th>\\n                <th>Snippet</th>\\n                <th>Created By</th>\\n                <th>Updated At</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr ng-repeat=\\\"row in $ctrl.snippets.getPageRows()\\\">\\n                <td>\\n                  <a href=\\\"query_snippets/{{row.id}}\\\">{{row.trigger}}</a>\\n                </td>\\n                <td>\\n                  {{row.description}}\\n                </td>\\n                <td>\\n                  {{row.snippet}}\\n                </td>\\n                <td>\\n                  {{row.user.name}}\\n                </td>\\n                <td>\\n                  <span am-time-ago=\\\"row.created_at\\\"></span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n          <paginator paginator=\\\"$ctrl.snippets\\\"></paginator>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/query-snippets/list.html\n// module id = 714\n// module chunks = 1","import { Paginator } from '@/lib/pagination';\nimport template from './list.html';\n\nfunction UsersCtrl(currentUser, Events, User) {\n  Events.record('view', 'page', 'users');\n\n  this.currentUser = currentUser;\n  this.users = new Paginator([], { itemsPerPage: 20 });\n  User.query((users) => {\n    this.users.updateRows(users);\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.component('usersListPage', {\n    controller: UsersCtrl,\n    template,\n  });\n\n  return {\n    '/users': {\n      template: '<users-list-page></users-list-page>',\n      title: 'Users',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/list.js","module.exports = \"<settings-screen>\\n  <div class=\\\"row voffset1\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <p ng-if=\\\"$ctrl.currentUser.hasPermission('admin')\\\">\\n        <a href=\\\"users/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New User</a>\\n      </p>\\n\\n      <table class=\\\"table table-condensed table-hover\\\">\\n        <thead>\\n          <tr>\\n            <th>Name</th>\\n            <th>Joined</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr ng-repeat=\\\"row in $ctrl.users.getPageRows()\\\">\\n            <td>\\n              <img ng-src=\\\"{{row.gravatar_url}}\\\" height=\\\"40px\\\"/> <a href=\\\"users/{{row.id}}\\\">{{row.name}}</a>\\n            </td>\\n            <td>\\n              <span am-time-ago=\\\"row.created_at\\\"></span>\\n            </td>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <paginator paginator=\\\"$ctrl.users\\\"></paginator>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/users/list.html\n// module id = 716\n// module chunks = 1","import template from './new.html';\n\nfunction NewUserCtrl($scope, $location, toastr, currentUser, Events, User) {\n  Events.record('view', 'page', 'users/new');\n\n  $scope.user = new User({});\n  $scope.saveUser = () => {\n    if (!this.userForm.$valid) {\n      return;\n    }\n\n    $scope.user.$save((user) => {\n      $scope.user = user;\n      $scope.user.created = true;\n      toastr.success('Saved.');\n    }, (error) => {\n      const message = error.data.message || 'Failed saving.';\n      toastr.error(message);\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('NewUserCtrl', NewUserCtrl);\n\n  return {\n    '/users/new': {\n      template,\n      controller: 'NewUserCtrl',\n      controllerAs: '$ctrl',\n      bindToController: 'true',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/new.js","module.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n  <form class=\\\"form\\\" name=\\\"$ctrl.userForm\\\" ng-submit=\\\"saveUser()\\\" novalidate>\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  ($ctrl.userForm.email | showError:$ctrl.userForm )}\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input type=\\\"text\\\" name=\\\"name\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" ng-disabled=\\\"user.created\\\" required/ autofocus>\\n\\n      <error-messages input=\\\"$ctrl.userForm.name\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error': ($ctrl.userForm.email | showError:$ctrl.userForm ) }\\\">\\n      <label class=\\\"control-label\\\">Email</label>\\n      <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" ng-disabled=\\\"user.created\\\" required/>\\n\\n      <error-messages input=\\\"$ctrl.userForm.email\\\" form=\\\"$ctrl.userForm\\\"></error-messages>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"!user.created\\\">\\n      <button class=\\\"btn btn-primary\\\">Create</button>\\n    </div>\\n\\n\\n    <div ng-if=\\\"user.created\\\" class=\\\"alert alert-success\\\">\\n      <p>\\n        <strong>The user has been created and should receive an invite email soon.</strong>\\n      </p>\\n      <p>\\n        You can use the following link to invite them yourself:<br/>\\n        {{user.invite_link}}\\n      </p>\\n    </div>\\n  </form>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/users/new.html\n// module id = 718\n// module chunks = 1","import { each } from 'underscore';\nimport template from './show.html';\n\nfunction UserCtrl(\n  $scope, $routeParams, $http, $location, toastr,\n  clientConfig, currentUser, Events, User,\n) {\n  $scope.userId = $routeParams.userId;\n  $scope.currentUser = currentUser;\n  $scope.clientConfig = clientConfig;\n\n  if ($scope.userId === 'me') {\n    $scope.userId = currentUser.id;\n  }\n\n  Events.record('view', 'user', $scope.userId);\n  $scope.canEdit = currentUser.hasPermission('admin') || currentUser.id === parseInt($scope.userId, 10);\n  $scope.showSettings = false;\n  $scope.showPasswordSettings = false;\n\n  $scope.selectTab = (tab) => {\n    $scope.selectedTab = tab;\n    each($scope.tabs, (v, k) => {\n      $scope.tabs[k] = (k === tab);\n    });\n  };\n\n  $scope.setTab = (tab) => {\n    $scope.selectedTab = tab;\n    $location.hash(tab);\n  };\n\n  $scope.tabs = {\n    profile: false,\n    apiKey: false,\n    settings: false,\n    password: false,\n  };\n\n  $scope.selectTab($location.hash() || 'profile');\n\n  $scope.user = User.get({ id: $scope.userId }, (user) => {\n    if (user.auth_type === 'password') {\n      $scope.showSettings = $scope.canEdit;\n      $scope.showPasswordSettings = $scope.canEdit;\n    }\n  });\n\n  $scope.password = {\n    current: '',\n    new: '',\n    newRepeat: '',\n  };\n\n  $scope.savePassword = (form) => {\n    if (!form.$valid) {\n      return;\n    }\n\n    const data = {\n      id: $scope.user.id,\n      password: $scope.password.new,\n      old_password: $scope.password.current,\n    };\n\n    User.save(data, () => {\n      toastr.success('Password Saved.');\n      $scope.password = {\n        current: '',\n        new: '',\n        newRepeat: '',\n      };\n    }, (error) => {\n      const message = error.data.message || 'Failed saving password.';\n      toastr.error(message);\n    });\n  };\n\n  $scope.updateUser = (form) => {\n    if (!form.$valid) {\n      return;\n    }\n\n    const data = {\n      id: $scope.user.id,\n      name: $scope.user.name,\n      email: $scope.user.email,\n    };\n\n    User.save(data, (user) => {\n      toastr.success('Saved.');\n      $scope.user = user;\n    }, (error) => {\n      const message = error.data.message || 'Failed saving.';\n      toastr.error(message);\n    });\n  };\n\n  $scope.sendPasswordReset = () => {\n    $scope.disablePasswordResetButton = true;\n    $http.post(`api/users/${$scope.user.id}/reset_password`).success((data) => {\n      $scope.disablePasswordResetButton = false;\n      $scope.passwordResetLink = data.reset_link;\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('UserCtrl', UserCtrl);\n\n  return {\n    '/users/:userId': {\n      template,\n      reloadOnSearch: false,\n      controller: 'UserCtrl',\n      title: 'Users',\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/app/pages/users/show.js","module.exports = \"<settings-screen>\\n  <email-settings-warning function=\\\"'invite emails'\\\"></email-settings-warning>\\n\\n  <h3 class=\\\"p-l-5\\\">{{user.name}}</h3>\\n\\n  <ul class=\\\"tab-nav\\\">\\n    <rd-tab tab-id=\\\"profile\\\" name=\\\"Profile\\\" ng-click=\\\"selectTab('profile')\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"apiKey\\\" name=\\\"API Key\\\" ng-click=\\\"selectTab('apiKey')\\\" ng-if=\\\"user.api_key\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"settings\\\" name=\\\"Settings\\\" ng-click=\\\"selectTab('settings')\\\" ng-if=\\\"showSettings\\\"></rd-tab>\\n    <rd-tab tab-id=\\\"password\\\" name=\\\"Password\\\" ng-click=\\\"selectTab('password')\\\" ng-if=\\\"showPasswordSettings\\\"></rd-tab>\\n  </ul>\\n\\n  <div ng-show=\\\"selectedTab == 'profile'\\\" class=\\\"p-10\\\">\\n    <p>\\n      <img ng-src=\\\"{{user.gravatar_url}}\\\"/>\\n    </p>\\n\\n    <p>\\n      <strong>{{user.name}}</strong>\\n    </p>\\n\\n    <p>\\n      {{user.email}}\\n    </p>\\n    <div ng-if=\\\"currentUser.isAdmin\\\">\\n      <hr/>\\n      <div class=\\\"form-group\\\">\\n        <button class=\\\"btn btn-default\\\" ng-click=\\\"sendPasswordReset()\\\" ng-disabled=\\\"disablePasswordResetButton\\\">Send\\n          Password Reset Email\\n        </button>\\n      </div>\\n\\n      <div ng-if=\\\"passwordResetLink\\\" class=\\\"alert alert-success\\\">\\n        <p ng-if=\\\"!clientConfig.mailSettingMissing\\\">\\n          <strong>The user should receive a link to reset his password by email soon.</strong>\\n        </p>\\n        <p ng-if=\\\"clientConfig.mailSettingsMissing\\\">\\n          You don't have mail server configured, please send the following link\\n          to {{user.name}} to reset their password:<br/>\\n          <a ng-href=\\\"passwordResetLink\\\">{{passwordResetLink}}</a>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'apiKey'\\\" class=\\\"p-10\\\">\\n    API Key:\\n    <input type=\\\"text\\\" value=\\\"{{user.api_key}}\\\" size=\\\"44\\\" readonly/>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'settings'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userSettingsForm\\\" ng-submit=\\\"updateUser(userSettingsForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.name | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Name</label>\\n          <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"user.name\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.name\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userSettingsForm.email | showError:userSettingsForm )}\\\">\\n          <label class=\\\"control-label\\\">Email</label>\\n          <input name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" ng-model=\\\"user.email\\\" required/>\\n          <error-messages input=\\\"userSettingsForm.email\\\" form=\\\"userSettingsForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n  <div ng-show=\\\"selectedTab == 'password'\\\" class=\\\"p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <form class=\\\"form\\\" name=\\\"userPasswordForm\\\" ng-submit=\\\"savePassword(userPasswordForm)\\\" novalidate>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.currentPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Current Password</label>\\n          <input name=\\\"currentPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.current\\\" required/>\\n          <error-messages input=\\\"userPasswordForm.currentPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.newPassword | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">New Password</label>\\n          <input name=\\\"newPassword\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.new\\\" ng-minlength=\\\"6\\\"\\n                 required/>\\n          <error-messages input=\\\"userPasswordForm.newPassword\\\" form=\\\"userPasswordForm\\\"></error-messages>\\n        </div>\\n        <div class=\\\"form-group required\\\" ng-class=\\\"{ 'has-error':  (userPasswordForm.passwordRepeat | showError:userPasswordForm )}\\\">\\n          <label class=\\\"control-label\\\">Repeat New Password</label>\\n          <input name=\\\"passwordRepeat\\\" class=\\\"form-control\\\" type=\\\"password\\\" ng-model=\\\"password.newRepeat\\\"\\n                 compare-to=\\\"password.new\\\"/>\\n          <span class=\\\"help-block error\\\"\\n                ng-if=\\\"userPasswordForm.passwordRepeat.$error.compareTo\\\">Passwords don't match.</span>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <button class=\\\"btn btn-primary\\\">Save</button>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</settings-screen>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/app/pages/users/show.html\n// module id = 720\n// module chunks = 1"],"sourceRoot":""}